/*! For license information please see 2.745665e2.chunk.js.LICENSE.txt */
(this["webpackJsonpbrainjs-redux"]=this["webpackJsonpbrainjs-redux"]||[]).push([[2],[function(t,e,n){"use strict";t.exports=n(152)},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(274);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(9),i=n(275),a=n(276);t.exports=function(t){return function(){var e,n=r(t);if(i()){var o=r(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return a(this,e)}}},function(t,e,n){var r=n(109),i=r.GPU,a=r.input,o=null;function s(t){o=t}t.exports={setup:s,teardown:function(){o&&o.destroy(),o=null},makeKernel:function(t,e){return null===o&&s(new i({mode:"gpu"})),e.hasOwnProperty("map")?o.createKernelMap(e.map,t,e).setPipeline(!0):o.createKernel(t,e).setPipeline(!0)},makeDevKernel:function(t,e){if(e&&e.map)throw new Error("map kernels are not supported by dev kernels");return new i({mode:"dev"}).createKernel(t,e)},kernelInput:function(t,e){return a(t,e)},release:function(t){t&&t.delete&&t.delete()},clone:function(t){if(t.clone)return t.clone();if("number"===typeof t[0])return t.slice(0);if("number"===typeof t[0][0]){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n].slice(0);return e}if("number"===typeof t[0][0][0]){for(var r=new Array(t.length),i=0;i<t.length;i++)for(var a=t[i],o=new Array(a.length),s=0;s<a.length;s++)o[s]=a[s].slice(0);return r}throw new Error("unknown state!")},clear:function(t){if(t.clear)t.clear();else if(t instanceof Float32Array)t.fill(0);else if(t[0]instanceof Float32Array)for(var e=0;e<t.length;e++)t[e].fill(0);else if(t[0][0]instanceof Float32Array)for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)r[i].fill(0)}}},function(t,e,n){var r=n(3),i=n(4),a=n(1),o=n(24).Base,s=n(114).Activation,u=function(t){"use strict";r(n,t);var e=i(n);function n(){return a(this,n),e.apply(this,arguments)}return n}(o),l=function(t){"use strict";r(n,t);var e=i(n);function n(){return a(this,n),e.apply(this,arguments)}return n}(o),c=function(t){"use strict";r(n,t);var e=i(n);function n(){return a(this,n),e.apply(this,arguments)}return n}(o),h=function(t){"use strict";r(n,t);var e=i(n);function n(){return a(this,n),e.apply(this,arguments)}return n}(o),f=function(t){"use strict";r(n,t);var e=i(n);function n(){return a(this,n),e.apply(this,arguments)}return n}(o);t.exports={Activation:s,Internal:function t(){"use strict";a(this,t)},InternalModel:function t(){"use strict";a(this,t)},EntryPoint:u,Filter:l,Model:c,Modifier:h,Operator:f}},function(t,e,n){var r=n(12);t.exports=function(t,e){for(var n=new Array(e),i=0;i<e;i++)n[i]=r(t);return n}},function(t,e,n){"use strict";var r=n(96),i=Object.prototype.toString;function a(t){return"[object Array]"===i.call(t)}function o(t){return"undefined"===typeof t}function s(t){return null!==t&&"object"===typeof t}function u(t){return"[object Function]"===i.call(t)}function l(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),a(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!o(t)&&null!==t.constructor&&!o(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!==typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"===typeof t},isNumber:function(t){return"number"===typeof t},isObject:s,isUndefined:o,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:l,merge:function t(){var e={};function n(n,r){"object"===typeof e[r]&&"object"===typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return e},deepMerge:function t(){var e={};function n(n,r){"object"===typeof e[r]&&"object"===typeof n?e[r]=t(e[r],n):e[r]="object"===typeof n?t({},n):n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return e},extend:function(t,e,n){return l(e,(function(e,i){t[i]=n&&"function"===typeof e?r(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(84),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();t.exports=a},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){t.exports=function(t){return new Float32Array(t)}},function(t,e,n){var r=n(273);function i(e,n,a){return"undefined"!==typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}},i(e,n,a||e)}t.exports=i},function(t,e,n){var r=n(173),i=n(178);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(1),i=n(2),a=n(13),o=n(9),s=n(3),u=n(4),l=n(5),c=l.makeKernel,h=l.release,f=l.clone,p=l.clear,d=n(7),g=n(113).checkSameSize;function m(t,e){return t[this.thread.y][this.thread.x]+e[this.thread.y][this.thread.x]}var y=function(t){"use strict";s(n,t);var e=u(n);function n(t,i,a){var o;return r(this,n),(o=e.call(this)).inputLayer1=t,o.inputLayer2=i,o.width=o.inputLayer1.width,o.height=o.inputLayer1.height,o.validate(),o.weights=d(o.width,o.height),o.deltas=d(o.width,o.height),o.setupPraxis(a),o}return i(n,[{key:"validate",value:function(){a(o(n.prototype),"validate",this).call(this),g(this.inputLayer1,this.inputLayer2)}},{key:"setupKernels",value:function(){this.predictKernel=c(m,{output:[this.width,this.height],immutable:!0})}},{key:"predict",value:function(){h(this.weights),this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights),p(this.deltas)}},{key:"compare",value:function(){h(this.inputLayer1.deltas),h(this.inputLayer2.deltas),this.inputLayer1.deltas=f(this.deltas),this.inputLayer2.deltas=f(this.deltas)}},{key:"learn",value:function(){}}]),n}(n(6).Operator);t.exports={Add:y,add:function(t,e,n){return new y(t,e,n)},predict:m}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(6).Model,u=n(46),l=n(7),c=function(t){"use strict";a(n,t);var e=o(n);function n(t){var i;return r(this,n),(i=e.call(this,t)).validate(),i.weights||(i.weights=t.std?u(i.width,i.height,t.std):u(i.width,i.height)),i.deltas||(i.deltas=l(i.width,i.height)),i}return i(n,[{key:"predict",value:function(){}},{key:"compare",value:function(){}}],[{key:"defaults",get:function(){return{std:null}}}]),n}(s);t.exports={Random:c,random:function(t){return new c(t)}}},function(t,e,n){var r=n(1),i=n(2),a=n(13),o=n(9),s=n(3),u=n(4),l=n(5),c=l.makeKernel,h=l.release,f=l.clear,p=n(7);function d(t,e){for(var n=0,r=0;r<this.constants.size;r++)n+=t[this.thread.y][r]*e[r][this.thread.x];return n}function g(t,e,n){for(var r=e[this.thread.y][this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.y][i]*n[this.thread.x][i];return r}function m(t,e,n){for(var r=e[this.thread.y][this.thread.x],i=0;i<this.constants.size;i++)r+=t[i][this.thread.x]*n[i][this.thread.y];return r}var y=function(t){"use strict";s(n,t);var e=u(n);function n(t,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r(this,n),(a=e.call(this)).inputLayer1=t,a.inputLayer2=i,a.compareKernel1=null,a.compareKernel2=null,a.width=i.width,a.height=t.height,a.validate(),a.weights=p(a.width,a.height),a.deltas=p(a.width,a.height),o&&o.name&&(a.name=o.name),a.setupPraxis(o),a}return i(n,[{key:"validate",value:function(){if(a(o(n.prototype),"validate",this).call(this),this.inputLayer1.width!==this.inputLayer2.height)throw new Error("Layer width mismatch of ".concat(this.inputLayer1.width," and ").concat(this.inputLayer2.height))}},{key:"setupKernels",value:function(){this.predictKernel=c(d,{output:[this.width,this.height],constants:{size:this.inputLayer2.height},immutable:!0}),this.compareKernel1=c(g,{output:[this.inputLayer1.width,this.inputLayer1.height],constants:{size:this.inputLayer2.width},immutable:!0}),this.compareKernel2=c(m,{output:[this.inputLayer2.width,this.inputLayer2.height],constants:{size:this.inputLayer1.height},immutable:!0})}},{key:"reuseKernels",value:function(t){a(o(n.prototype),"reuseKernels",this).call(this,t),this.compareKernel1=t.compareKernel1,this.compareKernel2=t.compareKernel2}},{key:"predict",value:function(){h(this.weights),this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights),f(this.deltas)}},{key:"compare",value:function(){var t=this.inputLayer1.deltas,e=this.inputLayer2.deltas,n=this.compareKernel1(this.deltas,this.inputLayer1.deltas,this.inputLayer2.weights),r=this.compareKernel2(this.deltas,this.inputLayer2.deltas,this.inputLayer1.weights);this.inputLayer2.deltas=r,this.inputLayer1.deltas=n,h(t),h(e)}},{key:"learn",value:function(){}}]),n}(n(6).Operator);t.exports={Multiply:y,multiply:function(t,e,n){return new y(t,e,n)},predict:d,compareFromX:g,compareFromY:m}},function(t,e,n){var r=n(110);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},function(t,e,n){"use strict";var r=n(51),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var a=Object.create(n(35));a.inherits=n(26);var o=n(132),s=n(73);a.inherits(h,o);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);o.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){var r=n(1),i=n(2),a=n(12),o=function(){"use strict";function t(e,n){r(this,t),void 0!==e&&void 0!==n&&(this.rows=e,this.columns=n,this.weights=a(e*n),this.deltas=a(e*n))}return i(t,[{key:"getWeights",value:function(t,e){var n=this.columns*t+e;if(n<0&&n>=this.weights.length)throw new Error("get accessor is skewed");return this.weights[n]}},{key:"setWeight",value:function(t,e,n){var r=this.columns*t+e;if(r<0&&r>=this.weights.length)throw new Error("set accessor is skewed");this.weights[r]=n}},{key:"setDeltas",value:function(t,e,n){var r=this.columns*t+e;if(r<0&&r>=this.weights.length)throw new Error("set accessor is skewed");this.deltas[r]=n}},{key:"toJSON",value:function(){return{rows:this.rows,columns:this.columns,weights:this.weights.slice(0)}}},{key:"weightsToArray",value:function(){for(var t=[],e=0,n=0,r=0;r<this.weights.length;r++)0===n&&t.push([]),t[e].push(this.weights[r]),++n>=this.columns&&(n=0,e++);return t}},{key:"deltasToArray",value:function(){for(var t=[],e=0,n=0,r=0;r<this.deltas.length;r++)0===n&&t.push([]),t[e].push(this.deltas[r]),++n>=this.columns&&(n=0,e++);return t}}],[{key:"fromJSON",value:function(e){for(var n=new t(e.rows,e.columns),r=0,i=e.rows*e.columns;r<i;r++)n.weights[r]=e.weights[r];return n}},{key:"fromArray",value:function(e,n){var r=e.length,i=e[0].length,a=new t(r,i);n=n||e;for(var o=0;o<r;o++)for(var s=e[o],u=n[o],l=0;l<i;l++)a.setWeight(o,l,s[l]),a.setDeltas(o,l,u[l]);return a}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,"a",(function(){return a}))},function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=s(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){var r=n(1),i=n(2),a=n(5),o=a.release,s=a.clear,u=function(){"use strict";function t(e){r(this,t),this.width=null,this.height=null,this.depth=null,this.deltas=null,this.weights=null,this.praxis=null,this.praxisOpts=null,this.constructor!==t&&Object.assign(this,t.defaults,e),Object.assign(this,this.constructor.defaults,e),this.setupPraxis(e)}return i(t,[{key:"setupPraxis",value:function(t){t&&t.hasOwnProperty("praxis")&&("function"===typeof t.praxis?this.praxis=t.praxis(this,t.praxisOpts):this.praxis=t.praxis)}},{key:"validate",value:function(){if(Number.isNaN(this.height))throw new Error("".concat(this.constructor.name," layer height is not a number"));if(Number.isNaN(this.width))throw new Error("".concat(this.constructor.name," layer width is not a number"));if(this.height<1)throw new Error("".concat(this.constructor.name," layer height is less than 1"));if(this.width<1)throw new Error("".concat(this.constructor.name," layer width is less than 1"))}},{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(t){if(t.width!==this.width)throw new Error("".concat(this.constructor.name," kernel width mismatch ").concat(t.width," is not ").concat(this.width));if(t.height!==this.height)throw new Error("".concat(this.constructor.name," kernel width mismatch ").concat(t.height," is not ").concat(this.height));if(t.hasOwnProperty("predictKernel")){if(!t.predictKernel.immutable)throw new Error("".concat(t.constructor.name,".predictKernel is not reusable, set kernel.immutable = true"));this.predictKernel=t.predictKernel}if(t.hasOwnProperty("compareKernel")){if(!t.compareKernel.immutable)throw new Error("".concat(t.constructor.name,".compareKernel is not reusable, set kernel.immutable = true"));this.compareKernel=t.compareKernel}this.praxis=t.praxis}},{key:"predict",value:function(){}},{key:"compare",value:function(){}},{key:"learn",value:function(t,e,n){var r=this.weights;this.weights=this.praxis.run(this,t,e,n),o(r),s(this.deltas)}},{key:"toArray",value:function(){return this.weights.toArray()}},{key:"toJSON",value:function(){var e={},n=this.constructor,r=n.defaults,i=n.name;this.constructor!==t&&Object.assign(r,t.defaults,r);for(var a=Object.keys(r),o=0;o<a.length;o++){var s=a[o];"deltas"!==s&&("name"===s&&null===this[s]||(e[s]=this[s]))}return e.type=i,e}}],[{key:"defaults",get:function(){return{width:1,height:1,depth:null,weights:null,deltas:null,name:null,praxisOpts:null}}}]),t}();t.exports={Base:u}},function(t,e){function n(){if(n.returnV)return n.returnV=!1,n.vVal;var t=2*Math.random()-1,e=2*Math.random()-1,r=t*t+e*e;if(0===r||r>1)return n();var i=Math.sqrt(-2*Math.log(r)/r);return n.vVal=e*i,n.returnV=!0,t*i}n.returnV=!1,n.vVal=0,t.exports={randomFloat:function(t,e){return Math.random()*(e-t)+t},randomInteger:function(t,e){return Math.floor(Math.random()*(e-t)+t)},randomN:function(t,e){return t+n()*e}}},function(t,e){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Chart",{enumerable:!0,get:function(){return a.default}}),e.defaults=e.Scatter=e.Bubble=e.Polar=e.Radar=e.HorizontalBar=e.Bar=e.Line=e.Pie=e.Doughnut=e.default=void 0;var r=u(n(0)),i=u(n(80)),a=u(n(160)),o=u(n(161)),s=u(n(223));function u(t){return t&&t.__esModule?t:{default:t}}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function c(t){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}function y(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=k(t);if(e){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?w(t):e}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T="undefined"!==typeof t&&Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0})&&"production",S=function(t){y(n,t);var e=x(n);function n(){var t;return d(this,n),_(w(t=e.call(this)),"handleOnClick",(function(e){var n=t.chartInstance,r=t.props,i=r.getDatasetAtEvent,a=r.getElementAtEvent,o=r.getElementsAtEvent,s=r.onElementsClick;i&&i(n.getDatasetAtEvent(e),e),a&&a(n.getElementAtEvent(e),e),o&&o(n.getElementsAtEvent(e),e),s&&s(n.getElementsAtEvent(e),e)})),_(w(t),"ref",(function(e){t.element=e})),t.chartInstance=void 0,t}return m(n,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentDidUpdate",value:function(){if(this.props.redraw)return this.destroyChart(),void this.renderChart();this.updateChart()}},{key:"shouldComponentUpdate",value:function(t){var e=this.props,n=(e.redraw,e.type),r=e.options,i=e.plugins,a=e.legend,s=e.height,u=e.width;if(!0===t.redraw)return!0;if(s!==t.height||u!==t.width)return!0;if(n!==t.type)return!0;if(!(0,o.default)(a,t.legend))return!0;if(!(0,o.default)(r,t.options))return!0;var l=this.transformDataProp(t);return!(0,o.default)(this.shadowDataProp,l)||!(0,o.default)(i,t.plugins)}},{key:"componentWillUnmount",value:function(){this.destroyChart()}},{key:"transformDataProp",value:function(t){var e=t.data;return"function"==typeof e?e(this.element):e}},{key:"memoizeDataProps",value:function(){if(this.props.data){var t=this.transformDataProp(this.props);return this.shadowDataProp=p(p({},t),{},{datasets:t.datasets&&t.datasets.map((function(t){return p({},t)}))}),this.saveCurrentDatasets(),t}}},{key:"checkDatasets",value:function(t){var e="production"!==T&&"prod"!==T,r=this.props.datasetKeyProvider!==n.getLabelAsKey,i=t.length>1;if(e&&i&&!r){var a=!1;t.forEach((function(t){t.label||(a=!0)})),a&&console.error('[react-chartjs-2] Warning: Each dataset needs a unique key. By default, the "label" property on each dataset is used. Alternatively, you may provide a "datasetKeyProvider" as a prop that returns a unique key.')}}},{key:"getCurrentDatasets",value:function(){return this.chartInstance&&this.chartInstance.config.data&&this.chartInstance.config.data.datasets||[]}},{key:"saveCurrentDatasets",value:function(){var t=this;this.datasets=this.datasets||{},this.getCurrentDatasets().forEach((function(e){t.datasets[t.props.datasetKeyProvider(e)]=e}))}},{key:"updateChart",value:function(){var t=this,e=this.props.options,n=this.memoizeDataProps(this.props);if(this.chartInstance){e&&(this.chartInstance.options=a.default.helpers.configMerge(this.chartInstance.options,e));var r=this.getCurrentDatasets(),i=n.datasets||[];this.checkDatasets(r);var o=(0,s.default)(r,this.props.datasetKeyProvider);this.chartInstance.config.data.datasets=i.map((function(e){var n=o[t.props.datasetKeyProvider(e)];if(n&&n.type===e.type&&e.data){n.data.splice(e.data.length),e.data.forEach((function(t,r){n.data[r]=e.data[r]}));e.data;var r=h(e,["data"]);return p(p({},n),r)}return e}));n.datasets;var u=h(n,["datasets"]);this.chartInstance.config.data=p(p({},this.chartInstance.config.data),u),this.chartInstance.update()}}},{key:"renderChart",value:function(){var t=this.props,e=t.options,r=t.legend,i=t.type,s=t.plugins,u=this.element,l=this.memoizeDataProps();"undefined"===typeof r||(0,o.default)(n.defaultProps.legend,r)||(e.legend=r),this.chartInstance=new a.default(u,{type:i,data:l,options:e,plugins:s})}},{key:"destroyChart",value:function(){if(this.chartInstance){this.saveCurrentDatasets();var t=Object.values(this.datasets);this.chartInstance.config.data.datasets=t,this.chartInstance.destroy()}}},{key:"render",value:function(){var t=this.props,e=t.height,n=t.width,i=t.id;return r.default.createElement("canvas",{ref:this.ref,height:e,width:n,id:i,onClick:this.handleOnClick})}}]),n}(r.default.Component);_(S,"getLabelAsKey",(function(t){return t.label})),_(S,"propTypes",{data:i.default.oneOfType([i.default.object,i.default.func]).isRequired,getDatasetAtEvent:i.default.func,getElementAtEvent:i.default.func,getElementsAtEvent:i.default.func,height:i.default.number,legend:i.default.object,onElementsClick:i.default.func,options:i.default.object,plugins:i.default.arrayOf(i.default.object),redraw:i.default.bool,type:function(t,e,n){if(!a.default.controllers[t[e]])return new Error("Invalid chart type `"+t[e]+"` supplied to `"+n+"`.")},width:i.default.number,datasetKeyProvider:i.default.func}),_(S,"defaultProps",{legend:{display:!0,position:"bottom"},type:"doughnut",height:150,width:300,redraw:!1,options:{},datasetKeyProvider:S.getLabelAsKey});var E=S;e.default=E;var A=function(t){y(n,t);var e=x(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"render",value:function(){var t=this;return r.default.createElement(S,l({},this.props,{ref:function(e){return t.chartInstance=e&&e.chartInstance},type:"doughnut"}))}}]),n}(r.default.Component);e.Doughnut=A;var L=function(t){y(n,t);var e=x(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"render",value:function(){var t=this;return r.default.createElement(S,l({},this.props,{ref:function(e){return t.chartInstance=e&&e.chartInstance},type:"pie"}))}}]),n}(r.default.Component);e.Pie=L;var D=function(t){y(n,t);var e=x(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"render",value:function(){var t=this;return r.default.createElement(S,l({},this.props,{ref:function(e){return t.chartInstance=e&&e.chartInstance},type:"line"}))}}]),n}(r.default.Component);e.Line=D;var C=function(t){y(n,t);var e=x(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"render",value:function(){var t=this;return r.default.createElement(S,l({},this.props,{ref:function(e){return t.chartInstance=e&&e.chartInstance},type:"bar"}))}}]),n}(r.default.Component);e.Bar=C;var I=function(t){y(n,t);var e=x(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"render",value:function(){var t=this;return r.default.createElement(S,l({},this.props,{ref:function(e){return t.chartInstance=e&&e.chartInstance},type:"horizontalBar"}))}}]),n}(r.default.Component);e.HorizontalBar=I;var M=function(t){y(n,t);var e=x(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"render",value:function(){var t=this;return r.default.createElement(S,l({},this.props,{ref:function(e){return t.chartInstance=e&&e.chartInstance},type:"radar"}))}}]),n}(r.default.Component);e.Radar=M;var O=function(t){y(n,t);var e=x(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"render",value:function(){var t=this;return r.default.createElement(S,l({},this.props,{ref:function(e){return t.chartInstance=e&&e.chartInstance},type:"polarArea"}))}}]),n}(r.default.Component);e.Polar=O;var P=function(t){y(n,t);var e=x(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"render",value:function(){var t=this;return r.default.createElement(S,l({},this.props,{ref:function(e){return t.chartInstance=e&&e.chartInstance},type:"bubble"}))}}]),n}(r.default.Component);e.Bubble=P;var R=function(t){y(n,t);var e=x(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"render",value:function(){var t=this;return r.default.createElement(S,l({},this.props,{ref:function(e){return t.chartInstance=e&&e.chartInstance},type:"scatter"}))}}]),n}(r.default.Component);e.Scatter=R;var N=a.default.defaults;e.defaults=N}).call(this,n(23))},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}n.r(e),n.d(e,"__DO_NOT_USE__ActionTypes",(function(){return l})),n.d(e,"applyMiddleware",(function(){return m})),n.d(e,"bindActionCreators",(function(){return d})),n.d(e,"combineReducers",(function(){return f})),n.d(e,"compose",(function(){return g})),n.d(e,"createStore",(function(){return h}));var s="function"===typeof Symbol&&Symbol.observable||"@@observable",u=function(){return Math.random().toString(36).substring(7).split("").join(".")},l={INIT:"@@redux/INIT"+u(),REPLACE:"@@redux/REPLACE"+u(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+u()}};function c(t){if("object"!==typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function h(t,e,n){var r;if("function"===typeof e&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(o(0));if("function"===typeof e&&"undefined"===typeof n&&(n=e,e=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(o(1));return n(h)(t,e)}if("function"!==typeof t)throw new Error(o(2));var i=t,a=e,u=[],f=u,p=!1;function d(){f===u&&(f=u.slice())}function g(){if(p)throw new Error(o(3));return a}function m(t){if("function"!==typeof t)throw new Error(o(4));if(p)throw new Error(o(5));var e=!0;return d(),f.push(t),function(){if(e){if(p)throw new Error(o(6));e=!1,d();var n=f.indexOf(t);f.splice(n,1),u=null}}}function y(t){if(!c(t))throw new Error(o(7));if("undefined"===typeof t.type)throw new Error(o(8));if(p)throw new Error(o(9));try{p=!0,a=i(a,t)}finally{p=!1}for(var e=u=f,n=0;n<e.length;n++){(0,e[n])()}return t}function v(t){if("function"!==typeof t)throw new Error(o(10));i=t,y({type:l.REPLACE})}function x(){var t,e=m;return(t={subscribe:function(t){if("object"!==typeof t||null===t)throw new Error(o(11));function n(){t.next&&t.next(g())}return n(),{unsubscribe:e(n)}}})[s]=function(){return this},t}return y({type:l.INIT}),(r={dispatch:y,subscribe:m,getState:g,replaceReducer:v})[s]=x,r}function f(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];0,"function"===typeof t[i]&&(n[i]=t[i])}var a,s=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if("undefined"===typeof n(void 0,{type:l.INIT}))throw new Error(o(12));if("undefined"===typeof n(void 0,{type:l.PROBE_UNKNOWN_ACTION()}))throw new Error(o(13))}))}(n)}catch(u){a=u}return function(t,e){if(void 0===t&&(t={}),a)throw a;for(var r=!1,i={},u=0;u<s.length;u++){var l=s[u],c=n[l],h=t[l],f=c(h,e);if("undefined"===typeof f){e&&e.type;throw new Error(o(14))}i[l]=f,r=r||f!==h}return(r=r||s.length!==Object.keys(t).length)?i:t}}function p(t,e){return function(){return e(t.apply(this,arguments))}}function d(t,e){if("function"===typeof t)return p(t,e);if("object"!==typeof t||null===t)throw new Error(o(16));var n={};for(var r in t){var i=t[r];"function"===typeof i&&(n[r]=p(i,e))}return n}function g(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function m(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error(o(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=e.map((function(t){return t(i)}));return r=g.apply(void 0,s)(n.dispatch),a(a({},n),{},{dispatch:r})}}}},function(t,e,n){var r=n(41),i=n(174),a=n(175),o=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?i(t):a(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(7);t.exports=function(t,e,n){for(var i=new Array(n),a=0;a<n;a++)i[a]=r(t,e);return i}},function(t,e,n){var r=n(117),i=n(25).randomFloat;t.exports=function(t,e){var n=new Float32Array(t);if(e)for(var a=0;a<t;a++)n[a]=i(-e,e);else for(var o=0;o<t;o++)n[o]=r();return n}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(6).Activation,u=n(5),l=u.makeKernel,c=u.release,h=u.clear,f=n(106),p=f.activate,d=f.measure;function g(t){return 1/(1+Math.exp(-t[this.thread.y][this.thread.x]))}function m(t){return 1/(1+Math.exp(-t[this.thread.z][this.thread.y][this.thread.x]))}function y(t,e){var n=t[this.thread.y][this.thread.x];return n*(1-n)*e[this.thread.y][this.thread.x]}function v(t,e){var n=t[this.thread.z][this.thread.y][this.thread.x];return n*(1-n)*e[this.thread.z][this.thread.y][this.thread.x]}var x=function(t){"use strict";a(n,t);var e=o(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,[{key:"setupKernels",value:function(){this.depth>0?(this.predictKernel=l(m,{output:[this.width,this.height,this.depth],functions:[p],immutable:!0}),this.compareKernel=l(v,{output:[this.width,this.height,this.depth],functions:[d],immutable:!0})):(this.predictKernel=l(g,{output:[this.width,this.height],functions:[p],immutable:!0}),this.compareKernel=l(y,{output:[this.width,this.height],functions:[d],immutable:!0}))}},{key:"predict",value:function(){c(this.weights),this.weights=this.predictKernel(this.inputLayer.weights),h(this.deltas)}},{key:"compare",value:function(){c(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}}]),n}(s);t.exports={Sigmoid:x,sigmoid:function(t,e){return new x(t,e)},predict2D:g,predict3D:m,compare2D:y,compare3D:v}},function(t,e,n){var r=n(1),i=n(2),a=function(){"use strict";function t(){r(this,t)}return i(t,null,[{key:"toTable",value:function(e){var n=e.reduce((function(t,e){return Object.assign(t,e)}),{});return t.toHash(n)}},{key:"toTable2D",value:function(t){for(var e={},n=0,r=0;r<t.length;r++)for(var i=t[r],a=0;a<i.length;a++){var o=i[a];for(var s in o)o.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(e[s]=n++)}return e}},{key:"toInputTable",value:function(t){for(var e={},n=0,r=0;r<t.length;r++)for(var i in t[r].input)e.hasOwnProperty(i)||(e[i]=n++);return e}},{key:"toInputTable2D",value:function(t){for(var e={},n=0,r=0;r<t.length;r++)for(var i=t[r].input,a=0;a<i.length;a++){var o=i[a];for(var s in o)e.hasOwnProperty(s)||(e[s]=n++)}return e}},{key:"toOutputTable",value:function(t){for(var e={},n=0,r=0;r<t.length;r++)for(var i in t[r].output)e.hasOwnProperty(i)||(e[i]=n++);return e}},{key:"toOutputTable2D",value:function(t){for(var e={},n=0,r=0;r<t.length;r++)for(var i=t[r].output,a=0;a<i.length;a++){var o=i[a];for(var s in o)e.hasOwnProperty(s)||(e[s]=n++)}return e}},{key:"toHash",value:function(t){var e={},n=0;for(var r in t)e[r]=n++;return e}},{key:"toArray",value:function(t,e,n){var r=new Float32Array(n);for(var i in t)r[t[i]]=e.hasOwnProperty(i)?e[i]:0;return r}},{key:"toArrayShort",value:function(t,e){var n=[];for(var r in t){if(!e.hasOwnProperty(r))break;n[t[r]]=e[r]}return Float32Array.from(n)}},{key:"toArrays",value:function(t,e,n){for(var r=[],i=0;i<e.length;i++)r.push(this.toArray(t,e[i],n));return r}},{key:"toObject",value:function(t,e){var n={};for(var r in t)n[r]=e[t[r]];return n}},{key:"toObjectPartial",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i={},a=0;for(var o in t)n>0&&a++<n||r>0&&a++>=r||(i[o]=e[t[o]-n]);return i}},{key:"lookupFromArray",value:function(t){for(var e={},n=0,r=t.length;r-- >0;)e[t[r]]=n++;return e}},{key:"dataShape",value:function(t){var e,n=[];for(t.input?(n.push("datum"),t=t.input):Array.isArray(t)&&(t[0].input?(n.push("array","datum"),t=t[0].input):(n.push("array"),t=t[0]));t;){for(e in t)break;if(!t.hasOwnProperty(e))break;if(Array.isArray(t)||t.buffer instanceof ArrayBuffer)n.push("array"),t=t[e];else{if("object"!==typeof t)throw new Error("unhandled signature");n.push("object"),t=t[e]}}return n.push(typeof t),n}},{key:"addKeys",value:function(t,e){if(!Array.isArray(t)){e=e||{};var n=Object.keys(e).length;for(var r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)||(e[r]=n++));return e}}}]),t}();t.exports=a},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"===typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"===typeof t},e.isString=function(t){return"string"===typeof t},e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"===typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"===typeof t},e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=t.isBuffer}).call(this,n(72).Buffer)},function(t,e,n){var r=n(19),i=n(1),a=n(2),o=n(21),s=n(53),u=n(140),l=n(141),c=n(142),h=n(74),f=n(344),p=n(25).randomFloat,d=n(12),g=n(143),m=g.DataFormatter,y=g.defaultRNNFormatter,v=n(50),x=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=this.constructor.defaults;Object.assign(this,n,e),this.trainOpts={},this.updateTrainingOptions(r(r({},this.constructor.trainDefaults),e)),this.stepCache={},this.runs=0,this.ratioClipped=null,this.model=null,this.inputLookup=null,this.inputLookupLength=null,this.outputLookup=null,this.outputLookupLength=null,e.json&&this.fromJSON(e.json)}return a(t,[{key:"initialize",value:function(){this.model={input:null,hiddenLayers:[],output:null,equations:[],allMatrices:[],equationConnections:[],outputConnector:null},this.dataFormatter&&(this.inputSize=this.inputRange=this.outputSize=this.dataFormatter.characters.length),this.mapModel()}},{key:"createHiddenLayers",value:function(){this.model.hiddenLayers.push(this.constructor.getModel(this.hiddenLayers[0],this.inputSize));for(var t=this.hiddenLayers[0],e=1;e<this.hiddenLayers.length;e++){var n=this.hiddenLayers[e];this.model.hiddenLayers.push(this.constructor.getModel(n,t)),t=n}}},{key:"createInputMatrix",value:function(){this.model.input=new s(this.inputRange+1,this.inputSize,.08)}},{key:"createOutputMatrix",value:function(){var t=this.model,e=this.outputSize,n=this.hiddenLayers[this.hiddenLayers.length-1];t.outputConnector=new s(e+1,n,.08),t.output=new o(e+1,1)}},{key:"bindEquation",value:function(){var t=this.model,e=new u,n=[],r=t.equationConnections.length>0?t.equationConnections[t.equationConnections.length-1]:this.initialLayerInputs,i=this.constructor.getEquation(e,e.inputMatrixToRow(t.input),r[0],t.hiddenLayers[0]);n.push(i);for(var a=1,o=this.hiddenLayers.length;a<o;a++)i=this.constructor.getEquation(e,i,r[a],t.hiddenLayers[a]),n.push(i);t.equationConnections.push(n),e.add(e.multiply(t.outputConnector,i),t.output),t.equations.push(e)}},{key:"mapModel",value:function(){var t=this.model,e=t.hiddenLayers,n=t.allMatrices;if(this.initialLayerInputs=this.hiddenLayers.map((function(t){return new o(t,1)})),this.createInputMatrix(),!t.input)throw new Error("net.model.input not set");if(n.push(t.input),this.createHiddenLayers(),!t.hiddenLayers.length)throw new Error("net.hiddenLayers not set");for(var r=0,i=e.length;r<i;r++){var a=e[r];for(var s in a)a.hasOwnProperty(s)&&n.push(a[s])}if(this.createOutputMatrix(),!t.outputConnector)throw new Error("net.model.outputConnector not set");if(!t.output)throw new Error("net.model.output not set");n.push(t.outputConnector),n.push(t.output)}},{key:"trainPattern",value:function(t,e){var n=this.trainInput(t);if(this.backpropagate(t),this.adjustWeights(),e)return n}},{key:"trainInput",value:function(t){this.runs++;for(var e,n=this.model,r=t.length,i=0;n.equations.length<=t.length+1;)this.bindEquation();for(var a=-1,o=t.length;a<o;a++){var s=a+1;e=n.equations[s];var u=-1===a?0:t[a]+1,l=a===r-1?0:t[a+1]+1;i+=e.predictTargetIndex(u,l)}return Math.pow(2,i/(r-1))/100}},{key:"backpropagate",value:function(t){for(var e=t.length,n=this.model.equations;e>0;)n[e].backpropagateIndex(t[e-1]+1),e--;n[0].backpropagateIndex(0)}},{key:"adjustWeights",value:function(){for(var t=this.regc,e=this.clipval,n=this.model,r=this.decayRate,i=this.stepCache,a=this.smoothEps,o=this.trainOpts.learningRate,s=n.allMatrices,u=0,l=0,c=0;c<s.length;c++){var h=s[c],f=h.weights,p=h.deltas;c in i||(i[c]=d(h.rows*h.columns));for(var g=i[c],m=0;m<f.length;m++){var y=p[m],v=f[m];g[m]=g[m]*r+(1-r)*y*y,y>e&&(y=e,u++),y<-e&&(y=-e,u++),l++,f[m]=v+-o*y/Math.sqrt(g[m]+a)-t*v}}this.ratioClipped=u/l}},{key:"isRunnable",get:function(){return 0!==this.model.equations.length||(console.error("No equations bound, did you run train()?"),!1)}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.maxPredictionLength+t.length+(this.dataFormatter?this.dataFormatter.specialIndexes.length:0);if(!this.isRunnable)return null;for(var i=this.formatDataIn(t),a=this.model,s=[],u=0;;){for(var p=0===u?0:u<i.length?i[u-1]+1:s[u-1];a.equations.length<=u;)this.bindEquation();var d=a.equations[u],g=d.runIndex(p),m=new o(a.output.rows,a.output.columns);if(f(m,g),1!==n&&e)for(var y=0,v=m.weights.length;y<v;y++)m.weights[y]/=n;var x=h(m),b=e?l(x):c(x);if(u++,0===b)break;if(u>=r)break;s.push(b)}return this.formatDataOut(i,s.slice(i.length).map((function(t){return t-1})))}},{key:"verifyIsInitialized",value:function(){this.model||this.initialize()}},{key:"updateTrainingOptions",value:function(t){var e=this;Object.keys(this.constructor.trainDefaults).forEach((function(n){return e.trainOpts[n]=t.hasOwnProperty(n)?t[n]:e.trainOpts[n]})),this.validateTrainingOptions(this.trainOpts),this.setLogMethod(t.log||this.trainOpts.log),this.activation=t.activation||this.activation}},{key:"validateTrainingOptions",value:function(t){v.prototype.validateTrainingOptions.call(this,t)}},{key:"setLogMethod",value:function(t){this.trainOpts.log="function"===typeof t?t:!!t&&console.log}},{key:"prepTraining",value:function(t,e){this.updateTrainingOptions(e),t=this.formatData(t);var n=Date.now()+this.trainOpts.timeout;return this.verifyIsInitialized(t),{data:t,status:{error:1,iterations:0},endTime:n}}},{key:"train",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trainOpts=e=r(r({},this.constructor.trainDefaults),e);var n,i=e,a=i.iterations,o=e,s=o.errorThresh,u=!0===e.log?console.log:e.log,l=e,c=l.logPeriod,h=e,f=h.callback,p=e,d=p.callbackPeriod,g=1/0;for(this.hasOwnProperty("setupData")&&(t=this.setupData(t)),this.verifyIsInitialized(),n=0;n<a&&g>s;n++){for(var m=0,y=0;y<t.length;y++){var v=this.trainPattern(t[y],!0);m+=v}if(g=m/t.length,isNaN(g))throw new Error("Network error rate is unexpected NaN, check network configurations and try again. Most probably input format is not correct or training data is not enough. ");u&&n%c===0&&u("iterations: ".concat(n,", training error: ").concat(g)),f&&n%d===0&&f({error:g,iterations:n})}return{error:g,iterations:n}}},{key:"addFormat",value:function(){throw new Error("not yet implemented")}},{key:"toJSON",value:function(){var t=this.constructor.defaults;this.model||this.initialize();var e=this.model,n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=this[r]);return{type:this.constructor.name,options:n,input:e.input.toJSON(),hiddenLayers:e.hiddenLayers.map((function(t){var e={};for(var n in t)e[n]=t[n].toJSON();return e})),outputConnector:this.model.outputConnector.toJSON(),output:this.model.output.toJSON()}}},{key:"fromJSON",value:function(t){var e=this.constructor.defaults,n=t.options;this.model=null,this.hiddenLayers=null;var r=[],i=o.fromJSON(t.input);r.push(i);var a=[];(t.hiddenLayers||t.hiddenSizes).forEach((function(t){var e={};for(var n in t)e[n]=o.fromJSON(t[n]),r.push(e[n]);a.push(e)}));var s=o.fromJSON(t.outputConnector);r.push(s);var u=o.fromJSON(t.output);r.push(u),Object.assign(this,e,n),n.hiddenSizes&&(this.hiddenLayers=n.hiddenSizes),n.dataFormatter&&(this.dataFormatter=m.fromJSON(n.dataFormatter)),this.model={input:i,hiddenLayers:a,output:u,allMatrices:r,outputConnector:s,equations:[],equationConnections:[]},this.initialLayerInputs=this.hiddenLayers.map((function(t){return new o(t,1)})),this.bindEquation()}},{key:"toFunction",value:function(t){var e=this.model,n=this.model.equations,r=n[1].states,i=JSON.stringify(this.toJSON());function a(t){for(var r=e.equationConnections[0],i=n[0].states,a=0,o=i.length;a<o;a++)if(i[a].product===t)return a;return r.indexOf(t)}function o(t,n){if(!t||!t.rows||!t.columns)return"null";if(t===e.input)return"json.input";if(t===e.outputConnector)return"json.outputConnector";if(t===e.output)return"json.output";for(var i=0,o=e.hiddenLayers.length;i<o;i++){var s=e.hiddenLayers[i];for(var u in s)if(s.hasOwnProperty(u)&&s[u]===t)return"json.hiddenLayers[".concat(i,"].").concat(u)}return function(t,e){for(var n=0,i=r.length;n<i;n++){var o=r[n];if(n===e){var s=a(t);return s>-1&&(t===o.left||t===o.right)?"typeof prevStates[".concat(s,"] === 'object' ? prevStates[").concat(s,"].product : new Matrix(").concat(t.rows,", ").concat(t.columns,")"):"new Matrix(".concat(t.rows,", ").concat(t.columns,")")}if(t===o.product)return"states[".concat(n,"].product");if(t===o.right)return"states[".concat(n,"].right");if(t===o.left)return"states[".concat(n,"].left")}}(t,n)}function s(t){return(t=t.toString().split("{")).shift(),(t=(t=t.join("{")).split("}")).pop(),t.join("}").split("\n").join("\n        ").replace("product.deltas[i] = 0;","").replace("product.deltas[column] = 0;","").replace("left.deltas[leftIndex] = 0;","").replace("right.deltas[rightIndex] = 0;","").replace("product.deltas = left.deltas.slice(0);","")}function u(t){return"src/recurrent/matrix/".concat(t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())})),".js")}for(var f=[],g={},m=[],y=0,v=r.length;y<v;y++){var x=r[y];f.push("states[".concat(y,"] = {\n      name: '").concat(x.forwardFn.name,"',\n      left: ").concat(o(x.left,y),",\n      right: ").concat(o(x.right,y),",\n      product: ").concat(o(x.product,y),"\n    }"));var b=x.forwardFn.name;g[b]||(g[b]=!0,m.push("        case '".concat(b,"': //compiled from ").concat(u(b),"\n          ").concat(s(x.forwardFn.toString()),"\n          break;")))}var w="\n  if (typeof rawInput === 'undefined') rawInput = [];\n  if (typeof isSampleI === 'undefined') isSampleI = false;\n  if (typeof temperature === 'undefined') temperature = 1;\n  var json = ".concat(i,";\n  ").concat(this.dataFormatter?"".concat(this.dataFormatter.toFunctionString(),";\n  Object.assign(dataFormatter, json.options.dataFormatter);"):"","\n  ").concat(this.dataFormatter&&"function"===typeof this.formatDataIn?"const formatDataIn = function (input, output) { ".concat(s(this.formatDataIn.toString())," }.bind({ dataFormatter });"):"","\n  ").concat(null!==this.dataFormatter&&"function"===typeof this.formatDataOut?"const formatDataOut = function formatDataOut(input, output) { ".concat(s(this.formatDataOut.toString())," }.bind({ dataFormatter });"):"","\n  var input = ").concat(this.dataFormatter&&"function"===typeof this.formatDataIn?"formatDataIn(rawInput)":"rawInput",";\n  var maxPredictionLength = input.length + ").concat(this.maxPredictionLength,";\n  var _i = 0;\n  var output = [];\n  var states = [];\n  var prevStates;\n  while (true) {\n    var previousIndex = (_i === 0\n        ? 0\n        : _i < input.length\n          ? input[_i - 1] + 1\n          : output[_i - 1])\n          ;\n    var rowPluckIndex = previousIndex;\n    prevStates = states;\n    states = [];\n    ").concat(f.join(";\n    "),";\n    for (var stateIndex = 0, stateMax = ").concat(f.length,"; stateIndex < stateMax; stateIndex++) {\n      var state = states[stateIndex];\n      var product = state.product;\n      var left = state.left;\n      var right = state.right;\n      switch (state.name) {\n").concat(m.join("\n"),"\n      }\n    }\n\n    var logProbabilities = state.product;\n    if (temperature !== 1 && isSampleI) {\n      for (var q = 0, nq = logProbabilities.weights.length; q < nq; q++) {\n        logProbabilities.weights[q] /= temperature;\n      }\n    }\n\n    var probs = softmax(logProbabilities);\n    var nextIndex = isSampleI ? sampleI(probs) : maxI(probs);\n\n    _i++;\n    if (nextIndex === 0) {\n      break;\n    }\n    if (_i >= maxPredictionLength) {\n      break;\n    }\n\n    output.push(nextIndex);\n  }\n  ").concat(this.dataFormatter&&"function"===typeof this.formatDataOut?"return formatDataOut(input, output.slice(input.length).map(function(value) { return value - 1; }))":"return output.slice(input.length).map(function(value) { return value - 1; })",";\n  function Matrix(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.weights = zeros(rows * columns);\n  }\n  ").concat(d.toString(),"\n  ").concat(h.toString(),"\n  ").concat(p.toString(),"\n  ").concat(l.toString(),"\n  ").concat(c.toString());return new Function("rawInput","isSampleI","temperature",t?t(w):w)}}],[{key:"getModel",value:function(t,e){return{weight:new s(t,e,.08),transition:new s(t,t,.08),bias:new o(t,1)}}},{key:"getEquation",value:function(t,e,n,r){var i=t.relu.bind(t),a=t.add.bind(t),o=t.multiply.bind(t);return i(a(a(o(r.weight,e),o(r.transition,n)),r.bias))}}]),t}();x.defaults={inputSize:20,inputRange:20,hiddenLayers:[20,20],outputSize:20,decayRate:.999,smoothEps:1e-8,regc:1e-6,clipval:5,maxPredictionLength:100,setupData:y,formatDataIn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.dataFormatter?this.dataFormatter.indexTable.hasOwnProperty("stop-input")?this.dataFormatter.toIndexesInputOutput(t,e):this.dataFormatter.toIndexes(t):t},formatDataOut:function(t,e){return this.dataFormatter?this.dataFormatter.toCharacters(e).join(""):e},dataFormatter:null},x.trainDefaults={iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,learningRate:.01,callback:null,callbackPeriod:10},t.exports=x},function(t,e,n){"use strict";var r=n(0),i=n.n(r),a=(n(80),i.a.createContext(null));var o=function(t){t()},s={notify:function(){}};function u(){var t=o,e=null,n=null;return{clear:function(){e=null,n=null},notify:function(){t((function(){for(var t=e;t;)t.callback(),t=t.next}))},get:function(){for(var t=[],n=e;n;)t.push(n),n=n.next;return t},subscribe:function(t){var r=!0,i=n={callback:t,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var l=function(){function t(t,e){this.store=t,this.parentSub=e,this.unsubscribe=null,this.listeners=s,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var e=t.prototype;return e.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},e.notifyNestedSubs=function(){this.listeners.notify()},e.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},e.isSubscribed=function(){return Boolean(this.unsubscribe)},e.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=u())},e.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=s)},t}(),c="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;var h=function(t){var e=t.store,n=t.context,o=t.children,s=Object(r.useMemo)((function(){var t=new l(e);return t.onStateChange=t.notifyNestedSubs,{store:e,subscription:t}}),[e]),u=Object(r.useMemo)((function(){return e.getState()}),[e]);c((function(){var t=s.subscription;return t.trySubscribe(),u!==e.getState()&&t.notifyNestedSubs(),function(){t.tryUnsubscribe(),t.onStateChange=null}}),[s,u]);var h=n||a;return i.a.createElement(h.Provider,{value:s},o)};n(77),n(76);function f(){return Object(r.useContext)(a)}function p(t){void 0===t&&(t=a);var e=t===a?f:function(){return Object(r.useContext)(t)};return function(){return e().store}}var d=p();function g(t){void 0===t&&(t=a);var e=t===a?d:p(t);return function(){return e().dispatch}}var m=g(),y=function(t,e){return t===e};function v(t){void 0===t&&(t=a);var e=t===a?f:function(){return Object(r.useContext)(t)};return function(t,n){void 0===n&&(n=y);var i=e(),a=function(t,e,n,i){var a,o=Object(r.useReducer)((function(t){return t+1}),0)[1],s=Object(r.useMemo)((function(){return new l(n,i)}),[n,i]),u=Object(r.useRef)(),h=Object(r.useRef)(),f=Object(r.useRef)(),p=Object(r.useRef)(),d=n.getState();try{if(t!==h.current||d!==f.current||u.current){var g=t(d);a=void 0!==p.current&&e(g,p.current)?p.current:g}else a=p.current}catch(m){throw u.current&&(m.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),m}return c((function(){h.current=t,f.current=d,p.current=a,u.current=void 0})),c((function(){function t(){try{var t=n.getState(),r=h.current(t);if(e(r,p.current))return;p.current=r,f.current=t}catch(m){u.current=m}o()}return s.onStateChange=t,s.trySubscribe(),t(),function(){return s.tryUnsubscribe()}}),[n,s]),a}(t,n,i.store,i.subscription);return Object(r.useDebugValue)(a),a}}var x,b=v(),w=n(54);n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return b})),x=w.unstable_batchedUpdates,o=x},function(t,e,n){var r=n(271),i=n(272),a=n(108),o=n(6),s=n(299),u=n(34),l=n(125),c=n(67).FeedForward,h=n(50),f=n(309),p=n(310),d={activation:r,CrossValidate:i,likely:s,layer:a,layerTypes:o,lookup:u,praxis:l,FeedForward:c,NeuralNetwork:h,NeuralNetworkGPU:f,Recurrent:n(138).Recurrent,TrainStream:p,recurrent:{RNNTimeStep:n(52),LSTMTimeStep:n(346),GRUTimeStep:n(347),RNN:n(36),LSTM:n(144),GRU:n(145)},utilities:{max:n(127),mse:n(128),ones:n(122),random:n(25),randomWeight:n(117),randos:n(32),range:n(129),toArray:n(68),DataFormatter:n(143),zeros:n(12),toSVG:n(348)}};"undefined"!==typeof window&&(window.brain=d),t.exports=d},function(t,e,n){var r=n(163),i=n(164),a=n(165),o=n(166),s=n(167);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(82);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(10).Symbol;t.exports=r},function(t,e,n){var r=n(14)(Object,"create");t.exports=r},function(t,e,n){var r=n(187);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(63);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(32);t.exports=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new Array(e),a=0;a<e;a++)i[a]=r(t,n);return i}},function(t,e,n){var r=n(46);t.exports=function(t,e,n){for(var i=new Array(n),a=0;a<n;a++)i[a]=r(t,e);return i}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(7),u=function(t){"use strict";a(n,t);var e=o(n);function n(t){var i;return r(this,n),(i=e.call(this,t)).validate(),i.weights=s(i.width,i.height),i.deltas=s(i.width,i.height),i}return i(n,[{key:"predict",value:function(){}},{key:"compare",value:function(){}}]),n}(n(6).Model);t.exports={Zeros:u,zeros:function(t){return new u(t)}}},function(t,e,n){var r=n(302),i=n(303),a=n(111),o=n(304);t.exports=function(t){return r(t)||i(t)||a(t)||o()}},function(t,e,n){var r=n(19),i=n(1),a=n(2),o=n(308).Thaw,s=n(34),u=n(127),l=n(128),c=n(32),h=n(129),f=n(68),p=n(12),d=n(130),g=n(131).arrayToFloat32Array;function m(t,e){if(t.buffer instanceof ArrayBuffer)return null;if(Array.isArray(t))return g;var n=Object.keys(e).length;return function(t){var r=new Float32Array(n);for(var i in e)r[e[i]]=t[i]||0;return r}}var y=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),Object.assign(this,this.constructor.defaults,e),this.trainOpts={},this.updateTrainingOptions(r(r({},this.constructor.trainDefaults),e)),this.sizes=null,this.outputLayer=null,this.biases=null,this.weights=null,this.outputs=null,this.deltas=null,this.changes=null,this.errors=null,this.errorCheckInterval=1,this.constructor.prototype.hasOwnProperty("runInput")||(this.runInput=null),this.constructor.prototype.hasOwnProperty("calculateDeltas")||(this.calculateDeltas=null),this.inputLookup=null,this.inputLookupLength=null,this.outputLookup=null,this.outputLookupLength=null,e.inputSize&&e.hiddenLayers&&e.outputSize&&(this.sizes=[e.inputSize].concat(e.hiddenLayers).concat([e.outputSize]))}return a(t,[{key:"initialize",value:function(){if(!this.sizes)throw new Error("Sizes must be set before initializing");this.outputLayer=this.sizes.length-1,this.biases=[],this.weights=[],this.outputs=[],this.deltas=[],this.changes=[],this.errors=[];for(var t=0;t<=this.outputLayer;t++){var e=this.sizes[t];if(this.deltas[t]=p(e),this.errors[t]=p(e),this.outputs[t]=p(e),t>0){this.biases[t]=c(e),this.weights[t]=new Array(e),this.changes[t]=new Array(e);for(var n=0;n<e;n++){var r=this.sizes[t-1];this.weights[t][n]=c(r),this.changes[t][n]=p(r)}}}this.setActivation(),"adam"===this.trainOpts.praxis&&this._setupAdam()}},{key:"setActivation",value:function(t){switch(this.activation=t||this.activation,this.activation){case"sigmoid":this.runInput=this.runInput||this._runInputSigmoid,this.calculateDeltas=this.calculateDeltas||this._calculateDeltasSigmoid;break;case"relu":this.runInput=this.runInput||this._runInputRelu,this.calculateDeltas=this.calculateDeltas||this._calculateDeltasRelu;break;case"leaky-relu":this.runInput=this.runInput||this._runInputLeakyRelu,this.calculateDeltas=this.calculateDeltas||this._calculateDeltasLeakyRelu;break;case"tanh":this.runInput=this.runInput||this._runInputTanh,this.calculateDeltas=this.calculateDeltas||this._calculateDeltasTanh;break;default:throw new Error("Unknown activation ".concat(this.activation,". Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'"))}}},{key:"isRunnable",get:function(){var t=this;if(!this.runInput)return console.error("Activation function has not been initialized, did you run train()?"),!1;var e=["sizes","outputLayer","biases","weights","outputs","deltas","changes","errors"].filter((function(e){return null===t[e]}));return!(e.length>0)||(console.error("Some settings have not been initialized correctly, did you run train()? Found issues with: ".concat(e.join(", "))),!1)}},{key:"run",value:function(t){if(!this.isRunnable)return null;this.inputLookup&&(t=s.toArray(this.inputLookup,t,this.inputLookupLength));var e=this.runInput(t).slice(0);return this.outputLookup&&(e=s.toObject(this.outputLookup,e)),e}},{key:"_runInputSigmoid",value:function(t){this.outputs[0]=t;for(var e=null,n=1;n<=this.outputLayer;n++){for(var r=this.sizes[n],i=this.weights[n],a=this.biases[n],o=this.outputs[n],s=0;s<r;s++){for(var u=i[s],l=a[s],c=0;c<u.length;c++)l+=u[c]*t[c];o[s]=1/(1+Math.exp(-l))}e=t=this.outputs[n]}return e}},{key:"_runInputRelu",value:function(t){this.outputs[0]=t;for(var e=null,n=1;n<=this.outputLayer;n++){for(var r=this.sizes[n],i=this.weights[n],a=this.biases[n],o=this.outputs[n],s=0;s<r;s++){for(var u=i[s],l=a[s],c=0;c<u.length;c++)l+=u[c]*t[c];o[s]=l<0?0:l}e=t=o}return e}},{key:"_runInputLeakyRelu",value:function(t){this.outputs[0]=t;for(var e=this.leakyReluAlpha,n=null,r=1;r<=this.outputLayer;r++){for(var i=this.sizes[r],a=this.weights[r],o=this.biases[r],s=this.outputs[r],u=0;u<i;u++){for(var l=a[u],c=o[u],h=0;h<l.length;h++)c+=l[h]*t[h];s[u]=c<0?0:e*c}n=t=s}return n}},{key:"_runInputTanh",value:function(t){this.outputs[0]=t;for(var e=null,n=1;n<=this.outputLayer;n++){for(var r=this.sizes[n],i=this.weights[n],a=this.biases[n],o=this.outputs[n],s=0;s<r;s++){for(var u=i[s],l=a[s],c=0;c<u.length;c++)l+=u[c]*t[c];o[s]=Math.tanh(l)}e=t=o}return e}},{key:"verifyIsInitialized",value:function(t){var e=this;this.sizes||(this.sizes=[],this.sizes.push(t[0].input.length),this.hiddenLayers?this.hiddenLayers.forEach((function(t){e.sizes.push(t)})):this.sizes.push(Math.max(3,Math.floor(t[0].input.length/2))),this.sizes.push(t[0].output.length),this.initialize())}},{key:"updateTrainingOptions",value:function(t){var e=this.constructor.trainDefaults;for(var n in e)e.hasOwnProperty(n)&&(this.trainOpts[n]=t.hasOwnProperty(n)?t[n]:e[n]);this.validateTrainingOptions(this.trainOpts),this.setLogMethod(t.log||this.trainOpts.log),this.activation=t.activation||this.activation}},{key:"validateTrainingOptions",value:function(t){var e={iterations:function(t){return"number"===typeof t&&t>0},errorThresh:function(t){return"number"===typeof t&&t>0&&t<1},log:function(t){return"function"===typeof t||"boolean"===typeof t},logPeriod:function(t){return"number"===typeof t&&t>0},learningRate:function(t){return"number"===typeof t&&t>0&&t<1},momentum:function(t){return"number"===typeof t&&t>0&&t<1},callback:function(t){return"function"===typeof t||null===t},callbackPeriod:function(t){return"number"===typeof t&&t>0},timeout:function(t){return"number"===typeof t&&t>0}};for(var n in e)if(e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&!e[n](t[n]))throw new Error("[".concat(n,", ").concat(t[n],"] is out of normal training range, your network will probably not train."))}},{key:"getTrainOptsJSON",value:function(){var t=this;return Object.keys(this.constructor.trainDefaults).reduce((function(e,n){return"timeout"===n&&t.trainOpts[n]===1/0||"callback"===n||(t.trainOpts[n]&&(e[n]=t.trainOpts[n]),"log"===n&&(e.log="function"===typeof e.log)),e}),{})}},{key:"setLogMethod",value:function(t){this.trainOpts.log="function"===typeof t?t:!!t&&this.logTrainingStatus}},{key:"logTrainingStatus",value:function(t){console.log("iterations: ".concat(t.iterations,", training error: ").concat(t.error))}},{key:"calculateTrainingError",value:function(t){for(var e=0,n=0;n<t.length;++n)e+=this.trainPattern(t[n],!0);return e/t.length}},{key:"trainPatterns",value:function(t){for(var e=0;e<t.length;++e)this.trainPattern(t[e])}},{key:"trainingTick",value:function(t,e,n){var r=this.trainOpts,i=r.callback,a=r.callbackPeriod,o=r.errorThresh,s=r.iterations,u=r.log,l=r.logPeriod;return!(e.iterations>=s||e.error<=o||Date.now()>=n)&&(e.iterations++,u&&e.iterations%l===0?(e.error=this.calculateTrainingError(t),u(e)):e.iterations%this.errorCheckInterval===0?e.error=this.calculateTrainingError(t):this.trainPatterns(t),i&&e.iterations%a===0&&i({iterations:e.iterations,error:e.error}),!0)}},{key:"prepTraining",value:function(t,e){this.updateTrainingOptions(e),t=this.formatData(t);var n=Date.now()+this.trainOpts.timeout;return this.verifyIsInitialized(t),{data:t,status:{error:1,iterations:0},endTime:n}}},{key:"train",value:function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.prepTraining(t,r(r({},this.trainOpts),i));for(t=a.data,e=a.status,n=a.endTime;this.trainingTick(t,e,n););return e}},{key:"trainAsync",value:function(t){var e,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.prepTraining(t,i);return t=a.data,e=a.status,n=a.endTime,new Promise((function(i,a){try{var s=new o(new Array(r.trainOpts.iterations),{delay:!0,each:function(){return r.trainingTick(t,e,n)||s.stop()},done:function(){return i(e)}});s.tick()}catch(u){console.log(JSON.stringify(u)),a(new Error({trainError:u,status:e}))}}))}},{key:"trainPattern",value:function(t,e){return this.runInput(t.input),this.calculateDeltas(t.output),this.adjustWeights(),e?l(this.errors[this.outputLayer]):null}},{key:"_calculateDeltasSigmoid",value:function(t){for(var e=this.outputLayer;e>=0;e--)for(var n=this.sizes[e],r=this.outputs[e],i=this.errors[e],a=this.deltas[e],o=this.weights[e+1],s=0;s<n;s++){var u=r[s],l=0;if(e===this.outputLayer)l=t[s]-u;else for(var c=this.deltas[e+1],h=0;h<c.length;h++)l+=c[h]*o[h][s];i[s]=l,a[s]=l*u*(1-u)}}},{key:"_calculateDeltasRelu",value:function(t){for(var e=this.outputLayer;e>=0;e--)for(var n=this.sizes[e],r=this.outputs[e],i=this.weights[e+1],a=this.deltas[e+1],o=this.errors[e],s=this.deltas[e],u=0;u<n;u++){var l=r[u],c=0;if(e===this.outputLayer)c=t[u]-l;else for(var h=0;h<a.length;h++)c+=a[h]*i[h][u];o[u]=c,s[u]=l>0?c:0}}},{key:"_calculateDeltasLeakyRelu",value:function(t){for(var e=this.leakyReluAlpha,n=this.outputLayer;n>=0;n--)for(var r=this.sizes[n],i=this.outputs[n],a=this.deltas[n+1],o=this.weights[n+1],s=this.errors[n],u=this.deltas[n],l=0;l<r;l++){var c=i[l],h=0;if(n===this.outputLayer)h=t[l]-c;else for(var f=0;f<a.length;f++)h+=a[f]*o[f][l];s[l]=h,u[l]=c>0?h:e*h}}},{key:"_calculateDeltasTanh",value:function(t){for(var e=this.outputLayer;e>=0;e--)for(var n=this.sizes[e],r=this.outputs[e],i=this.deltas[e+1],a=this.weights[e+1],o=this.errors[e],s=this.deltas[e],u=0;u<n;u++){var l=r[u],c=0;if(e===this.outputLayer)c=t[u]-l;else for(var h=0;h<i.length;h++)c+=i[h]*a[h][u];o[u]=c,s[u]=(1-l*l)*c}}},{key:"adjustWeights",value:function(){for(var t=this.trainOpts,e=t.learningRate,n=t.momentum,r=1;r<=this.outputLayer;r++)for(var i=this.outputs[r-1],a=this.sizes[r],o=this.deltas[r],s=this.changes[r],u=this.weights[r],l=this.biases[r],c=0;c<a;c++){for(var h=o[c],f=0;f<i.length;f++){var p=s[c][f];p=e*h*i[f]+n*p,s[c][f]=p,u[c][f]+=p}l[c]+=e*h}}},{key:"_setupAdam",value:function(){this.biasChangesLow=[],this.biasChangesHigh=[],this.changesLow=[],this.changesHigh=[],this.iterations=0;for(var t=0;t<=this.outputLayer;t++){var e=this.sizes[t];if(t>0){this.biasChangesLow[t]=p(e),this.biasChangesHigh[t]=p(e),this.changesLow[t]=new Array(e),this.changesHigh[t]=new Array(e);for(var n=0;n<e;n++){var r=this.sizes[t-1];this.changesLow[t][n]=p(r),this.changesHigh[t][n]=p(r)}}}this.adjustWeights=this._adjustWeightsAdam}},{key:"_adjustWeightsAdam",value:function(){this.iterations++;for(var t=this.iterations,e=this.trainOpts,n=e.beta1,r=e.beta2,i=e.epsilon,a=e.learningRate,o=1;o<=this.outputLayer;o++)for(var s=this.outputs[o-1],u=this.sizes[o],l=this.deltas[o],c=this.changesLow[o],h=this.changesHigh[o],f=this.weights[o],p=this.biases[o],d=this.biasChangesLow[o],g=this.biasChangesHigh[o],m=0;m<u;m++){for(var y=l[m],v=0;v<s.length;v++){var x=y*s[v],b=c[m][v]*n+(1-n)*x,w=h[m][v]*r+(1-r)*x*x,k=b/(1-Math.pow(n,t)),_=w/(1-Math.pow(r,t));c[m][v]=b,h[m][v]=w,f[m][v]+=a*k/(Math.sqrt(_)+i)}var T=l[m],S=d[m]*n+(1-n)*T,E=g[m]*r+(1-r)*T*T,A=d[m]/(1-Math.pow(n,t)),L=g[m]/(1-Math.pow(r,t));d[m]=S,g[m]=E,p[m]+=a*A/(Math.sqrt(L)+i)}}},{key:"formatData",value:function(t){if(Array.isArray(t)||(t=[t]),!Array.isArray(t[0].input))if(this.inputLookup)this.inputLookupLength=Object.keys(this.inputLookup).length;else{var e=new d(t,"input");this.inputLookup=e.table,this.inputLookupLength=e.length}if(!Array.isArray(t[0].output))if(this.outputLookup)this.outputLookupLength=Object.keys(this.outputLookup).length;else{var n=new d(t,"output");this.outputLookup=n.table,this.outputLookupLength=n.length}if("undefined"===typeof this._formatInput&&(this._formatInput=m(t[0].input,this.inputLookup),this._formatOutput=m(t[0].output,this.outputLookup)),this._formatInput&&this._formatOutput){for(var r=[],i=0;i<t.length;i++)r.push({input:this._formatInput(t[i].input),output:this._formatOutput(t[i].output)});return r}if(this._formatInput){for(var a=[],o=0;o<t.length;o++)a.push({input:this._formatInput(t[o].input),output:t[o].output});return a}if(this._formatOutput){for(var s=[],u=0;u<t.length;u++)s.push({input:t[u].input,output:this._formatOutput(t[u].output)});return s}return t}},{key:"addFormat",value:function(t){this.inputLookup=s.addKeys(t.input,this.inputLookup),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length),this.outputLookup=s.addKeys(t.output,this.outputLookup),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length)}},{key:"test",value:function(t){var e=this,n=1===(t=this.formatData(t))[0].output.length,r=[],i=0;if(n){for(var a=0,o=0,s=0,c=0,h=function(n){var u=e.runInput(t[n].input),h=t[n].output,f=u[0]>e.binaryThresh?1:0,p=h[0];if(f!==p){var d=t[n];r.push({input:d.input,output:d.output,actual:f,expected:p})}0===f&&0===p?c++:1===f&&1===p?s++:0===f&&1===p?o++:1===f&&0===p&&a++,i+=l(u.map((function(t,e){return h[e]-t})))},f=0;f<t.length;f++)h(f);return{error:i/t.length,misclasses:r,total:t.length,trueNeg:c,truePos:s,falseNeg:o,falsePos:a,precision:s>0?s/(s+a):0,recall:s>0?s/(s+o):0,accuracy:(c+s)/t.length}}for(var p=function(n){var a=e.runInput(t[n].input),o=t[n].output,s=a.indexOf(u(a)),c=o.indexOf(u(o));if(s!==c){var h=t[n];r.push({input:h.input,output:h.output,actual:s,expected:c})}i+=l(a.map((function(t,e){return o[e]-t})))},d=0;d<t.length;d++)p(d);return{error:i/t.length,misclasses:r,total:t.length}}},{key:"toJSON",value:function(){null===this.sizes&&this.initialize();for(var t=[],e=0;e<=this.outputLayer;e++){t[e]={};var n=void 0;n=0===e&&this.inputLookup?Object.keys(this.inputLookup):this.outputLookup&&e===this.outputLayer?Object.keys(this.outputLookup):h(0,this.sizes[e]);for(var r=0;r<n.length;r++){var i=n[r];if(t[e][i]={},e>0)for(var a in t[e][i].bias=this.biases[e][r],t[e][i].weights={},t[e-1]){var o=a;1===e&&this.inputLookup&&(o=this.inputLookup[a]),t[e][i].weights[a]=this.weights[e][r][o]}}}return{sizes:this.sizes.slice(0),layers:t,outputLookup:null!==this.outputLookup,inputLookup:null!==this.inputLookup,activation:this.activation,trainOpts:this.getTrainOptsJSON()}}},{key:"fromJSON",value:function(t){Object.assign(this,this.constructor.defaults,t),this.sizes=t.sizes,this.initialize();for(var e=0;e<=this.outputLayer;e++){var n=t.layers[e];if(0!==e||n[0]&&!t.inputLookup?e!==this.outputLayer||n[0]&&!t.outputLookup||(this.outputLookup=s.toHash(n)):(this.inputLookup=s.toHash(n),this.inputLookupLength=Object.keys(this.inputLookup).length),e>0){var r=Object.keys(n);for(var i in this.sizes[e]=r.length,r)if(r.hasOwnProperty(i)){var a=r[i];this.biases[e][i]=n[a].bias,this.weights[e][i]=f(n[a].weights)}}}return t.hasOwnProperty("trainOpts")&&this.updateTrainingOptions(t.trainOpts),this}},{key:"toFunction",value:function(t){var e=this.activation,n=this.leakyReluAlpha,r=!1;function i(t,a,o){if(0===a)return"string"===typeof o?"(input['".concat(o,"']||0)"):"(input[".concat(o,"]||0)");var s=t[a][o],u=["(",s.bias];for(var l in s.weights)s.weights[l]<0?u.push("".concat(s.weights[l],"*").concat(i(t,a-1,l))):u.push("+".concat(s.weights[l],"*").concat(i(t,a-1,l)));switch(u.push(")"),e){case"sigmoid":return"1/(1+1/Math.exp(".concat(u.join(""),"))");case"relu":return r=!0,"((v=".concat(u.join(""),")<0?0:v)");case"leaky-relu":return r=!0,"((v=".concat(u.join(""),")<0?0:").concat(n,"*v)");case"tanh":return"Math.tanh(".concat(u.join(""),")");default:throw new Error("Unknown activation ".concat(this.activation,". Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'"))}}var a,o=this.toJSON().layers,s=[];for(var u in o[o.length-1])s.push(i(o,o.length-1,u));a=this.outputLookup?"{".concat(Object.keys(this.outputLookup).map((function(t,e){return"'".concat(t,"':").concat(s[e])})),"}"):"[".concat(s.join(","),"]");var l="".concat(r?"var v;":"","return ").concat(a,";");return new Function("input",t?t(l):l)}}],[{key:"trainDefaults",get:function(){return{iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,learningRate:.3,momentum:.1,callback:null,callbackPeriod:10,timeout:1/0,praxis:null,beta1:.9,beta2:.999,epsilon:1e-8}}},{key:"defaults",get:function(){return{leakyReluAlpha:.01,binaryThresh:.5,hiddenLayers:null,activation:"sigmoid"}}}]),t}();t.exports=y},function(t,e,n){"use strict";(function(e){"undefined"===typeof e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!==typeof t)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return e.nextTick((function(){t.apply(null,a)}))}}}:t.exports=e}).call(this,n(23))},function(t,e,n){var r=n(19),i=n(1),a=n(2),o=n(3),s=n(4),u=n(21),l=n(53),c=n(140),h=n(36),f=n(12),p=n(74),d=n(25).randomFloat,g=n(141),m=n(142),y=n(34),v=n(130),x=n(345),b=n(131),w=b.arraysToFloat32Arrays,k=b.arrayToFloat32Arrays,_=b.objectsToFloat32Arrays,T=b.objectToFloat32Arrays,S=b.objectToFloat32Array,E=function(t){"use strict";o(n,t);var e=s(n);function n(t){return i(this,n),e.call(this,t)}return a(n,[{key:"createInputMatrix",value:function(){}},{key:"createOutputMatrix",value:function(){var t=this.model,e=this.outputSize,n=this.hiddenLayers[this.hiddenLayers.length-1];t.outputConnector=new l(e,n,.08),t.output=new l(e,1,.08)}},{key:"bindEquation",value:function(){var t=this.model,e=this.hiddenLayers,n=t.hiddenLayers,r=new c,i=[],a=t.equationConnections.length>0?t.equationConnections[t.equationConnections.length-1]:this.initialLayerInputs,o=this.constructor.getEquation(r,r.input(new u(this.inputSize,1)),a[0],n[0]);i.push(o);for(var s=1,l=e.length;s<l;s++)o=this.constructor.getEquation(r,o,a[s],n[s]),i.push(o);t.equationConnections.push(i),r.add(r.multiply(t.outputConnector,o),t.output),t.equations.push(r)}},{key:"mapModel",value:function(){var t=this.model,e=t.hiddenLayers,n=t.allMatrices;if(this.initialLayerInputs=this.hiddenLayers.map((function(t){return new u(t,1)})),this.createHiddenLayers(),!t.hiddenLayers.length)throw new Error("net.hiddenLayers not set");for(var r=0,i=e.length;r<i;r++){var a=e[r];for(var o in a)a.hasOwnProperty(o)&&n.push(a[o])}if(this.createOutputMatrix(),!t.outputConnector)throw new Error("net.model.outputConnector not set");if(!t.output)throw new Error("net.model.output not set");n.push(t.outputConnector),n.push(t.output)}},{key:"backpropagate",value:function(){for(var t=this.model.equations.length-1;t>-1;t--)this.model.equations[t].backpropagate()}},{key:"run",value:function(t){return 1===this.inputSize?this.outputLookup?(this.run=this.runObject,this.runObject(t)):(this.run=this.runNumbers,this.runNumbers(t)):this.outputLookup?(this.run=this.runObjects,this.runObjects(t)):(this.run=this.runArrays,this.runArrays(t))}},{key:"forecast",value:function(t,e){return 1===this.inputSize?this.outputLookup?(this.forecast=this.runObject,this.runObject(t)):(this.forecast=this.forecastNumbers,this.forecastNumbers(t,e)):this.outputLookup?(this.forecast=this.forecastObjects,this.forecastObjects(t,e)):(this.forecast=this.forecastArrays,this.forecastArrays(t,e))}},{key:"train",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trainOpts=e=r(r({},this.constructor.trainDefaults),e);var n=e,i=n.iterations,a=e,o=a.errorThresh,s=!0===e.log?console.log:e.log,u=e,l=u.logPeriod,c=e,h=c.callback,f=e,p=f.callbackPeriod;1!==this.inputSize&&this.inputSize||this.setSize(t),t=this.formatData(t);var d,g=1/0;for(this.verifyIsInitialized(t),d=0;d<i&&g>o;d++){for(var m=0,y=0;y<t.length;y++){var v=this.trainPattern(t[y],!0);m+=v}if(g=m/t.length,isNaN(g))throw new Error("Network error rate is unexpected NaN, check network configurations and try again. Most probably input format is not correct or training data is not enough. ");s&&d%l===0&&s("iterations: ".concat(d,", training error: ").concat(g)),h&&d%p===0&&h({error:g,iterations:d})}return{error:g,iterations:d}}},{key:"verifyIsInitialized",value:function(t){t[0].input?this.trainInput=this.trainInputOutput:t[0].length>0&&(t[0][0].length>0||this.inputSize>1?this.trainInput=this.trainArrays:this.trainInput=this.trainNumbers),this.model||this.initialize()}},{key:"setSize",value:function(t){switch(y.dataShape(t).join(",")){case"array,array,number":case"array,object,number":case"array,datum,array,number":case"array,datum,object,number":break;case"array,array,array,number":this.inputSize=this.outputSize=t[0][0].length;break;case"array,array,object,number":this.inputSize=this.outputSize=Object.keys(y.toTable2D(t)).length;break;case"array,datum,array,array,number":this.inputSize=this.outputSize=t[0].input[0].length;break;case"array,datum,array,object,number":this.inputSize=Object.keys(y.toInputTable2D(t)).length,this.outputSize=Object.keys(y.toOutputTable2D(t)).length;break;default:throw new Error("unknown data shape or configuration")}}},{key:"trainNumbers",value:function(t){for(var e=this.model.equations;e.length<t.length;)this.bindEquation();for(var n=0,r=0,i=t.length-1;r<i;r++)n+=e[r].predictTarget([t[r]],[t[r+1]]);return this.end(),n/t.length}},{key:"runNumbers",value:function(t){if(!this.isRunnable)return null;var e,n=this.model.equations;for(this.inputLookup&&(t=y.toArray(this.inputLookup,t,this.inputLookupLength));n.length<=t.length;)this.bindEquation();for(var r=0;r<t.length;r++)e=n[r].runInput(new Float32Array([t[r]]));return this.end(),e.weights[0]}},{key:"forecastNumbers",value:function(t,e){if(!this.isRunnable)return null;for(var n,r=this.model.equations,i=t.length+e;r.length<=i;)this.bindEquation();for(var a=0,o=0;o<t.length;o++)n=r[a++].runInput([t[o]]);for(var s=[n.weights[0]],u=0,l=e-1;u<l;u++)n=r[a++].runInput(n.weights),s.push(n.weights[0]);return this.end(),s}},{key:"runObject",value:function(t){if(this.inputLookup===this.outputLookup){var e=y.toArrayShort(this.inputLookup,t);return y.toObjectPartial(this.outputLookup,this.forecastNumbers(e,this.outputLookupLength-e.length),e.length)}return y.toObject(this.outputLookup,this.forecastNumbers(y.toArray(this.inputLookup,t,this.inputLookupLength),this.outputLookupLength))}},{key:"runObjects",value:function(t){var e=this;return t=t.map((function(t){return y.toArray(e.inputLookup,t,e.inputLookupLength)})),this.forecastArrays(t,1).map((function(t){return y.toObject(e.outputLookup,t)}))[0]}},{key:"forecastObjects",value:function(t,e){var n=this;return t=t.map((function(t){return y.toArray(n.inputLookup,t,n.inputLookupLength)})),this.forecastArrays(t,e).map((function(t){return y.toObject(n.outputLookup,t)}))}},{key:"trainInputOutput",value:function(t){for(var e=this.model,n=t.input,r=t.output,i=n.length+r.length,a=e.equations;a.length<i;)this.bindEquation();for(var o=0,s=0,u=0,l=n.length-1;u<l;u++)o+=a[s++].predictTarget(n[u],n[u+1]);o+=a[s++].predictTarget(n[n.length-1],r[0]);for(var c=0,h=r.length-1;c<h;c++)o+=a[s++].predictTarget(r[c],r[c+1]);return this.end(),o/i}},{key:"trainArrays",value:function(t){for(var e=this.model.equations;e.length<t.length;)this.bindEquation();for(var n=0,r=0,i=t.length-1;r<i;r++)n+=e[r].predictTarget(t[r],t[r+1]);return this.end(),n/t.length}},{key:"runArrays",value:function(t){if(!this.isRunnable)return null;for(var e,n=this.model.equations;n.length<=t.length;)this.bindEquation();this.inputLookup&&(t=y.toArrays(this.inputLookup,t,this.inputLookupLength));for(var r=0;r<t.length;r++){e=n[r].runInput(t[r]).weights}return this.end(),this.outputLookup?y.toObject(this.outputLookup,e):e}},{key:"forecastArrays",value:function(t,e){if(!this.isRunnable)return null;for(var n,r=this.model.equations,i=t.length+e;r.length<=i;)this.bindEquation();for(var a=0,o=0;o<t.length;o++)n=r[a++].runInput(t[o]);for(var s=[n.weights],u=0,l=e-1;u<l;u++)n=r[a++].runInput(n.weights),s.push(n.weights.slice(0));return this.end(),s}},{key:"end",value:function(){this.model.equations[this.model.equations.length-1].runInput(new Float32Array(this.outputSize))}},{key:"formatData",value:function(t){var e=[];switch(y.dataShape(t).join(",")){case"array,number":if(1!==this.inputSize)throw new Error("inputSize must be 1 for this data size");if(1!==this.outputSize)throw new Error("outputSize must be 1 for this data size");for(var n=0;n<t.length;n++)e.push(Float32Array.from([t[n]]));return[e];case"array,array,number":if(1===this.inputSize&&1===this.outputSize){for(var r=0;r<t.length;r++)e.push(k(t[r]));return e}if(this.inputSize!==t[0].length)throw new Error("inputSize must match data input size");if(this.outputSize!==t[0].length)throw new Error("outputSize must match data input size");for(var i=0;i<t.length;i++)e.push(Float32Array.from(t[i]));return[e];case"array,object,number":if(1!==this.inputSize)throw new Error("inputSize must be 1 for this data size");if(1!==this.outputSize)throw new Error("outputSize must be 1 for this data size");if(!this.inputLookup){var a=new v(t);this.inputLookup=this.outputLookup=a.table,this.inputLookupLength=this.outputLookupLength=a.length}for(var o=0;o<t.length;o++)e.push(T(t[o]));return e;case"array,datum,array,number":if(1!==this.inputSize)throw new Error("inputSize must be 1 for this data size");if(1!==this.outputSize)throw new Error("outputSize must be 1 for this data size");for(var s=0;s<t.length;s++){var u=t[s];e.push({input:k(u.input),output:k(u.output)})}return e;case"array,datum,object,number":if(1!==this.inputSize)throw new Error("inputSize must be 1 for this data size");if(1!==this.outputSize)throw new Error("outputSize must be 1 for this data size");if(!this.inputLookup){var l=new v(t,"input");this.inputLookup=l.table,this.inputLookupLength=l.length}if(!this.outputLookup){var c=new v(t,"output");this.outputLookup=c.table,this.outputLookupLength=c.length}for(var h=0;h<t.length;h++){var f=t[h];e.push({input:T(f.input),output:T(f.output)})}return e;case"array,array,array,number":for(var p=0;p<t.length;p++)e.push(w(t[p]));return e;case"array,array,object,number":if(!this.inputLookup){var d=new v(t);this.inputLookup=this.outputLookup=d.table,this.inputLookupLength=this.outputLookupLength=d.length}for(var g=0;g<t.length;g++){for(var m=[],b=0;b<t[g].length;b++)m.push(S(t[g][b],this.inputLookup,this.inputLookupLength));e.push(m)}return e;case"array,datum,array,array,number":if(1===this.inputSize&&1===this.outputSize)for(var E=0;E<t.length;E++){var A=t[E];e.push({input:Float32Array.from(A.input),output:Float32Array.from(A.output)})}else{if(this.inputSize!==t[0].input[0].length)throw new Error("inputSize must match data input size");if(this.outputSize!==t[0].output[0].length)throw new Error("outputSize must match data output size");for(var L=0;L<t.length;L++){var D=t[L];e.push({input:w(D.input),output:w(D.output)})}}return e;case"array,datum,array,object,number":if(!this.inputLookup){var C=new x(t,"input");this.inputLookup=C.table,this.inputLookupLength=C.length}if(!this.outputLookup){var I=new x(t,"output");this.outputLookup=I.table,this.outputLookupLength=I.length}for(var M=0;M<t.length;M++){var O=t[M];e.push({input:_(O.input,this.inputLookup,this.inputLookupLength),output:_(O.output,this.outputLookup,this.outputLookupLength)})}return e;default:throw new Error("unknown data shape or configuration")}}},{key:"test",value:function(t){var e=this.formatData(t),n=[],r=0;switch(y.dataShape(t).join(",")){case"array,array,number":if(1===this.inputSize){for(var i=0;i<e.length;i++){var a=e[i],o=this.run(a.splice(0,a.length-1)),s=a[a.length-1][0]-o,u=s*s;if(r+=u,Math.abs(u)>this.trainOpts.errorThresh){var l=t[i];Object.assign(l,{value:a,actual:o}),n.push(l)}}break}throw new Error("unknown data shape or configuration");case"array,array,array,number":for(var c=0;c<e.length;c++){for(var h=e[c],f=this.run(h.splice(0,h.length-1)),p=h[h.length-1],d=0,g=0,m=0;m<f.length;m++){g++;var v=p[m]-f[m];d+=v*v}if(r+=d/g,Math.abs(d)>this.trainOpts.errorThresh){var x=t[c];n.push({value:x,actual:f})}}break;case"array,object,number":for(var b=0;b<e.length;b++){var w=e[b],k=this.run(y.toObjectPartial(this.outputLookup,w,0,w.length-1)),_=0,T=w[w.length-1][b]-k[void 0];if(r+=_+=T*T,Math.abs(_)>this.trainOpts.errorThresh){var S=t[b];n.push({value:S,actual:k})}}break;case"array,array,object,number":for(var E=0;E<e.length;E++){var A=e[E],L=this.run(A.slice(0,A.length-1)),D=t[E][A.length-1],C=0,I=0;for(var M in L){var O=D[M]-L[M];C+=O*O,I++}if(r+=C/I,Math.abs(C)>this.trainOpts.errorThresh){var P=t[E];n.push({value:P,actual:L})}}break;case"array,datum,array,number":case"array,datum,object,number":for(var R=0;R<e.length;R++){for(var N=e[R],F=this.forecast(N.input,N.output.length),z=0,V=0,j=0;j<F.length;j++){var U=N.output[j][0]-F[j];z+=U*U,V++}if(r+=z/V,Math.abs(z)>this.trainOpts.errorThresh){var K=t[R];Object.assign(K,{actual:this.outputLookup?y.toObject(this.outputLookup,F):F}),n.push(K)}}break;case"array,datum,array,array,number":for(var B=0;B<e.length;B++){for(var W=e[B],G=this.forecast(W.input,W.output.length),H=0,Y=0;Y<G.length;Y++)for(var q=0;q<G[Y].length;q++){var X=W.output[Y][q]-G[Y][q];H+=X*X}if(r+=H,Math.abs(H)>this.trainOpts.errorThresh){var $=t[B];n.push({input:$.input,output:$.output,actual:G})}}break;case"array,datum,array,object,number":for(var J=0;J<e.length;J++){for(var Z=e[J],Q=this.forecast(Z.input,Z.output.length),tt=0,et=0;et<Q.length;et++)for(var nt in Q[et]){var rt=t[J].output[et][nt]-Q[et][nt];tt+=rt*rt}if(r+=tt,Math.abs(tt)>this.trainOpts.errorThresh){var it=t[J];n.push({input:it.input,output:it.output,actual:Q})}}break;default:throw new Error("unknown data shape or configuration")}return{error:r/e.length,misclasses:n,total:e.length}}},{key:"addFormat",value:function(t){switch(y.dataShape(t).join(",")){case"array,array,number":case"datum,array,array,number":case"array,number":case"datum,array,number":return;case"datum,object,number":this.inputLookup=y.addKeys(t.input,this.inputLookup),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length),this.outputLookup=y.addKeys(t.output,this.outputLookup),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length);break;case"object,number":this.inputLookup=this.outputLookup=y.addKeys(t,this.inputLookup),this.inputLookup&&(this.inputLookupLength=this.outputLookupLength=Object.keys(this.inputLookup).length);break;case"array,object,number":for(var e=0;e<t.length;e++)this.inputLookup=this.outputLookup=y.addKeys(t[e],this.inputLookup),this.inputLookup&&(this.inputLookupLength=this.outputLookupLength=Object.keys(this.inputLookup).length);break;case"datum,array,object,number":for(var n=0;n<t.input.length;n++)this.inputLookup=y.addKeys(t.input[n],this.inputLookup),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length);for(var r=0;r<t.output.length;r++)this.outputLookup=y.addKeys(t.output[r],this.outputLookup),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length);break;default:throw new Error("unknown data shape or configuration")}}},{key:"toJSON",value:function(){var t=this.constructor.defaults;this.model||this.initialize();var e=this.model,n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=this[r]);return{type:this.constructor.name,options:n,hiddenLayers:e.hiddenLayers.map((function(t){var e={};for(var n in t)e[n]=t[n].toJSON();return e})),outputConnector:this.model.outputConnector.toJSON(),output:this.model.output.toJSON(),inputLookup:this.inputLookup,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup,outputLookupLength:this.outputLookupLength}}},{key:"fromJSON",value:function(t){var e=this.constructor.defaults,n=t.options;this.model=null,this.hiddenLayers=null;var r=[],i=[];(t.hiddenLayers||t.hiddenSizes).forEach((function(t){var e={};for(var n in t)e[n]=u.fromJSON(t[n]),r.push(e[n]);i.push(e)}));var a=u.fromJSON(t.outputConnector);r.push(a);var o=u.fromJSON(t.output);r.push(o),Object.assign(this,e,n),n.hiddenSizes&&(this.hiddenLayers=n.hiddenSizes),this.inputLookup=t.inputLookup,this.inputLookupLength=t.inputLookupLength,this.outputLookup=t.outputLookup,this.outputLookupLength=t.outputLookupLength,this.model={hiddenLayers:i,output:o,allMatrices:r,outputConnector:a,equations:[],equationConnections:[]},this.initialLayerInputs=this.hiddenLayers.map((function(t){return new u(t,1)})),this.bindEquation()}},{key:"toFunction",value:function(t){var e=this.model,n=this.model.equations,r=this.inputSize,i=this.inputLookup,a=this.inputLookupLength,o=this.outputLookup,s=this.outputLookupLength,u=n[1].states,l=JSON.stringify(this.toJSON());function c(t){for(var r=e.equationConnections[0],i=n[0].states,a=0,o=i.length;a<o;a++)if(i[a].product===t)return a;return r.indexOf(t)}function h(t,n){if(!t||!t.rows||!t.columns)return"null";if(t===e.outputConnector)return"json.outputConnector";if(t===e.output)return"json.output";for(var r=0,i=e.hiddenLayers.length;r<i;r++){var a=e.hiddenLayers[r];for(var o in a)if(a.hasOwnProperty(o)&&a[o]===t)return"json.hiddenLayers[".concat(r,"].").concat(o)}return function(t,e){for(var n=0,r=u.length;n<r;n++){var i=u[n];if(n===e){var a=c(t);switch(t){case i.left:if(a>-1)return"typeof prevStates[".concat(a,"] === 'object' ? prevStates[").concat(a,"].product : new Matrix(").concat(t.rows,", ").concat(t.columns,")");case i.right:if(a>-1)return"typeof prevStates[".concat(a,"] === 'object' ? prevStates[").concat(a,"].product : new Matrix(").concat(t.rows,", ").concat(t.columns,")");case i.product:return"new Matrix(".concat(t.rows,", ").concat(t.columns,")");default:throw Error("unknown state")}}if(t===i.product)return"states[".concat(n,"].product");if(t===i.right)return"states[".concat(n,"].right");if(t===i.left)return"states[".concat(n,"].left")}}(t,n)}function y(t){return"src/recurrent/matrix/".concat(t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())})),".js")}for(var v,x=[],b={},w=[],k=0,_=u.length;k<_;k++){var T=u[k];x.push("states[".concat(k,"] = {\n      name: '").concat(T.forwardFn.name,"',\n      left: ").concat(h(T.left,k),",\n      right: ").concat(h(T.right,k),",\n      product: ").concat(h(T.product,k),"\n    }"));var S=T.forwardFn.name;b[S]||(b[S]=!0,w.push("        case '".concat(S,"':").concat("forwardFn"!==S?" //compiled from ".concat(y(S)):"","\n          ").concat(((v=(v=T.forwardFn.toString()).toString().split("{")).shift(),(v=(v=v.join("{")).split("}")).pop(),v.join("}").split("\n").join("\n        ").replace("product.weights = input.weights = this.inputValue;",i&&1===r?"product.weights = _i < input.length ? input[_i]: prevStates[prevStates.length - 1].product.weights;":1===r?"product.weights = [input[_i]];":"product.weights = input[_i];").replace("product.deltas[i] = 0;","").replace("product.deltas[column] = 0;","").replace("left.deltas[leftIndex] = 0;","").replace("right.deltas[rightIndex] = 0;","").replace("product.deltas = left.deltas.slice(0);","")),"\n          break;")))}var E=1===this.inputSize&&this.outputLookup,A="\n  var input = ".concat(this.inputLookup?"lookupInput(rawInput)":"rawInput",";\n  var json = ").concat(l,";\n  var output = [];\n  var states = [];\n  var prevStates;\n  var state;\n  var max = ").concat(E?i===o?a:"input.length + ".concat(s-1):"input.length",";\n  for (var _i = 0; _i < max; _i++) {\n    prevStates = states;\n    states = [];\n    ").concat(x.join(";\n    "),";\n    for (var stateIndex = 0, stateMax = ").concat(x.length,"; stateIndex < stateMax; stateIndex++) {\n      state = states[stateIndex];\n      var product = state.product;\n      var left = state.left;\n      var right = state.right;\n\n      switch (state.name) {\n").concat(w.join("\n"),"\n      }\n    }\n    ").concat(1===r&&i?"if (_i >= input.length - 1) { output.push(state.product.weights); }":"output = state.product.weights;","\n  }\n  ").concat(o?o===i?"return lookupOutputPartial(output, input)":"return lookupOutput(output)":1===r?"return output[0]":"return output",";\n  ").concat(i?1===r?i===o?"function lookupInput(input) {\n            var table = ".concat(JSON.stringify(i),";\n            var result = [];\n            for (var p in table) {\n              if (!input.hasOwnProperty(p)) break;\n              result.push(Float32Array.from([input[p]]));\n            }\n            return result;\n          }"):"function lookupInput(input) {\n          var table = ".concat(JSON.stringify(i),";\n          var result = [];\n          for (var p in table) {\n            result.push(Float32Array.from([input[p]]));\n          }\n          return result;\n        }"):"function lookupInput(rawInputs) {\n        var table = ".concat(JSON.stringify(i),";\n        var result = [];\n        for (var i = 0; i < rawInputs.length; i++) {\n          var rawInput = rawInputs[i];\n          var input = new Float32Array(").concat(a,");\n          for (var p in table) {\n            input[table[p]] = rawInput.hasOwnProperty(p) ? rawInput[p] : 0;\n          }\n          result.push(input);\n        }\n        return result;\n      }"):"","\n  ").concat(o?1===r?i===o?"function lookupOutputPartial(output, input) {\n            var table = ".concat(JSON.stringify(o),";\n            var offset = input.length;\n            var result = {};\n            var i = 0;\n            for (var p in table) {\n              if (i++ < offset) continue;\n              result[p] = output[table[p] - offset][0];\n            }\n            return result;\n          }"):"function lookupOutput(output) {\n          var table = ".concat(JSON.stringify(o),";\n          var result = {};\n          for (var p in table) {\n            result[p] = output[table[p]][0];\n          }\n          return result;\n        }"):"function lookupOutput(output) {\n        var table = ".concat(JSON.stringify(o),";\n        var result = {};\n        for (var p in table) {\n          result[p] = output[table[p]];\n        }\n        return result;\n      }"):"","\n\n  function Matrix(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.weights = zeros(rows * columns);\n  }\n  ").concat(f.toString(),"\n  ").concat(p.toString().replace("_2.default","Matrix"),"\n  ").concat(d.toString(),"\n  ").concat(g.toString(),"\n  ").concat(m.toString());return new Function("rawInput",t?t(A):A)}}]),n}(h);E.defaults={inputSize:1,hiddenLayers:[20],outputSize:1,learningRate:h.defaults.learningRate,decayRate:h.defaults.decayRate,smoothEps:h.defaults.smoothEps,regc:h.defaults.regc,clipval:h.defaults.clipval},E.trainDefaults=h.trainDefaults,t.exports=E},function(t,e,n){var r=n(1),i=n(3),a=n(4),o=n(21),s=n(25).randomFloat,u=function(t){"use strict";i(n,t);var e=a(n);function n(t,i,a){var o;r(this,n),(o=e.call(this,t,i)).rows=t,o.columns=i,o.std=a;for(var u=0,l=o.weights.length;u<l;u++)o.weights[u]=s(-a,a);return o}return n}(o);t.exports=u},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}}(),t.exports=n(153)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(162),i=n(30);t.exports=function t(e,n,a,o,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!==e&&n!==n:r(e,n,a,o,t,s))}},function(t,e,n){var r=n(14)(n(10),"Map");t.exports=r},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(179),i=n(186),a=n(188),o=n(189),s=n(190);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(207),i=n(214),a=n(91);t.exports=function(t){return a(t)?r(t):i(t)}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){var r=n(11),i=n(63),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(o.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(29),i=n(30);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){var r=n(1),i=n(2),a=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.layerTemplate=e,this.width=e.width||null,this.height=e.height||null,this.depth=e.depth||null,Object.assign(this,this.constructor.defaults,n)}return i(t,[{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(t){if(t.width!==this.width)throw new Error("".concat(this.constructor.name," kernel width mismatch ").concat(t.width," is not ").concat(this.width));if(t.height!==this.height)throw new Error("".concat(this.constructor.name," kernel width mismatch ").concat(t.height," is not ").concat(this.height));t.hasOwnProperty("kernel")&&(this.kernel=t.kernel)}},{key:"run",value:function(){}}],[{key:"defaults",get:function(){return{}}}]),t}();t.exports={Base:a}},function(t,e,n){var r=n(1),i=n(2),a=n(13),o=n(9),s=n(3),u=n(4),l=n(5),c=l.makeKernel,h=l.release,f=l.clear,p=n(6).Operator,d=n(7),g=n(113).checkSameSize;function m(t,e){return t[this.thread.y][this.thread.x]*e[this.thread.y][this.thread.x]}function y(t,e){return t[this.thread.y][this.thread.x]*e[this.thread.y][this.thread.x]}var v=function(t){"use strict";s(n,t);var e=u(n);function n(t,i){var a;return r(this,n),(a=e.call(this)).inputLayer1=t,a.inputLayer2=i,a.width=t.width,a.height=t.height,a.validate(),a.weights=d(a.width,a.height),a.deltas=d(a.width,a.height),a}return i(n,[{key:"validate",value:function(){a(o(n.prototype),"validate",this).call(this),g(this.inputLayer1,this.inputLayer2)}},{key:"setupKernels",value:function(){this.predictKernel=c(m,{output:[this.width,this.height],immutable:!0}),this.compareKernel=c(y,{output:[this.width,this.height],immutable:!0})}},{key:"predict",value:function(){h(this.weights),this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights),f(this.deltas)}},{key:"compare",value:function(){h(this.inputLayer1.deltas),h(this.inputLayer2.deltas),this.inputLayer1.deltas=this.compareKernel(this.inputLayer2.weights,this.deltas),this.inputLayer2.deltas=this.compareKernel(this.inputLayer1.weights,this.deltas)}}]),n}(p);t.exports={MultiplyElement:v,multiplyElement:function(t,e){return new v(t,e)},predict:m,compare:y}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(114).Activation,u=n(5).makeKernel,l=n(107),c=l.activate,h=l.measure,f=n(5),p=f.release,d=f.clear;function g(t){return c(t[this.thread.y][this.thread.x])}function m(t){return c(t[this.thread.z][this.thread.y][this.thread.x])}function y(t,e){return h(t[this.thread.y][this.thread.x],e[this.thread.y][this.thread.x])}function v(t,e){return h(t[this.thread.z][this.thread.y][this.thread.x],e[this.thread.z][this.thread.y][this.thread.x])}var x=function(t){"use strict";a(n,t);var e=o(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,[{key:"setupKernels",value:function(){this.depth>0?(this.predictKernel=u(m,{output:[this.width,this.height,this.depth],functions:[c],immutable:!0}),this.compareKernel=u(v,{output:[this.width,this.height,this.depth],functions:[h],immutable:!0})):(this.predictKernel=u(g,{output:[this.width,this.height],functions:[c],immutable:!0}),this.compareKernel=u(y,{output:[this.width,this.height],functions:[h],immutable:!0}))}},{key:"predict",value:function(){p(this.weights),this.weights=this.predictKernel(this.inputLayer.weights),d(this.deltas)}},{key:"compare",value:function(){p(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}}]),n}(s);t.exports={Tanh:x,tanh:function(t,e){return new x(t,e)},predict2D:g,predict3D:m,compare2D:y,compare3D:v}},function(t,e,n){var r=n(49),i=n(19),a=n(1),o=n(2),s=n(34),u=n(305),l=n(125),c=n(126),h=n(5),f=h.makeKernel,p=h.release,d=n(307).MeanSquaredError,g=n(6).Model,m=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t),this.layers=null,this.inputLayer=null,this.hiddenLayers=null,this.outputLayer=null,this.praxisOpts=null,this.praxis=null,Object.assign(this,this.constructor.defaults,e),this.trainOpts={},this._updateTrainingOptions(i(i({},this.constructor.trainDefaults),e)),Object.assign(this,this.constructor.structure),this._inputLayer=null,this._hiddenLayers=null,this._outputLayer=null}return o(t,[{key:"_setLogMethod",value:function(t){this.trainOpts.log="function"===typeof t?t:!!t&&console.log}},{key:"_updateTrainingOptions",value:function(t){var e=this;Object.keys(this.constructor.trainDefaults).forEach((function(n){e.trainOpts[n]=t.hasOwnProperty(n)?t[n]:e.trainOpts[n]})),this.constructor._validateTrainingOptions(this.trainOpts),this._setLogMethod(t.log||this.trainOpts.log),this.trainOpts.callback&&this.trainOpts.callbackPeriod!==this.trainOpts.errorCheckInterval&&console.warn("options.callbackPeriod with value of ".concat(this.trainOpts.callbackPeriod," does not match options.errorCheckInterval with value of ").concat(this.trainOpts.errorCheckInterval,", if logging error, it will repeat.  These values may need to match"))}},{key:"_connectLayers",value:function(){var t=[];this._inputLayer=this.inputLayer();var e=this._connectHiddenLayers(this._inputLayer);this._outputLayer=this.outputLayer(e[e.length-1],e.length),t.push(this._inputLayer),t.push.apply(t,r(e)),t.push(this._outputLayer),this.layers=c(t)}},{key:"_connectHiddenLayers",value:function(t){this._hiddenLayers=[];for(var e=[],n=0;n<this.hiddenLayers.length;n++){var r=this.hiddenLayers[n](t,n);e.push(r),this._hiddenLayers.push(r),t=r}return e}},{key:"initialize",value:function(){this._connectLayers(),this.initializeLayers(this.layers),this._model=this.layers.filter((function(t){return t instanceof g}))}},{key:"initializeLayers",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];n.setupKernels(!0),n instanceof g&&n.hasOwnProperty("praxis")&&null===n.praxis&&(n.praxis=this.praxis(n,n.praxisOpts||this.praxisOpts),n.praxis.setupKernels())}var r=t[t.length-1];this.meanSquaredError=new d({width:r.width,height:r.height})}},{key:"run",value:function(t){this.inputLookup&&(t=s.toArray(this.inputLookup,t));var e=this.runInput(t);return e.toArray&&(e=e.toArray()),this.outputLookup&&(e=s.toHash(this.outputLookup,e)),e}},{key:"runInput",value:function(t){this.layers[0].predict(t);for(var e=1;e<this.layers.length;e++)this.layers[e].predict();return this.layers[this.layers.length-1].weights}},{key:"train",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._prepTraining(t,r);for(t=i.data,e=i.status,n=i.endTime;this._trainingTick(t,e,n););return e}},{key:"_trainingTick",value:function(t,e,n){return!(e.iterations>=this.trainOpts.iterations||e.error<=this.trainOpts.errorThresh||Date.now()>=n)&&(this.trainOpts.log&&e.iterations%this.trainOpts.logPeriod===0?(e.error=this._calculateTrainingError(t),this.trainOpts.log("iterations: ".concat(e.iterations,", training error: ").concat(e.error))):e.iterations%this.trainOpts.errorCheckInterval===0?e.error=this._calculateTrainingError(t):this._trainPatterns(t),this.trainOpts.callback&&e.iterations%this.trainOpts.callbackPeriod===0&&this.trainOpts.callback(Object.assign(e)),e.iterations++,!0)}},{key:"_prepTraining",value:function(t,e){this._updateTrainingOptions(e);var n=this.formatData(t),r=Date.now()+this.trainOpts.timeout;return this.verifyIsInitialized(),{data:this.transferData(n),status:{error:1,iterations:0},endTime:r}}},{key:"verifyIsInitialized",value:function(){this._model||this.initialize()}},{key:"_calculateTrainingError",value:function(t){for(var e=new Float32Array([0]),n=0;n<t.length;++n){var r=e,i=this._trainPattern(t[n].input,t[n].output,!0);e=this.meanSquaredError.add(e,i),p(i),p(r)}var a=this.meanSquaredError.divide(t.length,e);if(p(e),a.toArray){var o=a.toArray();return p(a),o[0]}return a[0]}},{key:"_trainPatterns",value:function(t){for(var e=0;e<t.length;++e)this._trainPattern(t[e].input,t[e].output,!1)}},{key:"_trainPattern",value:function(t,e,n){return this.runInput(t),this._calculateDeltas(e),this.adjustWeights(),n?this.meanSquaredError.calculate(this._outputLayer.errors):null}},{key:"_calculateDeltas",value:function(t){for(var e=this.layers.length-1;e>-1;e--)this.layers[e].compare(t)}},{key:"adjustWeights",value:function(){for(var t=this._model,e=0;e<t.length;e++)t[e].learn(null,null,this.trainOpts.learningRate)}},{key:"formatData",value:function(t){var e=this;if(!Array.isArray(t)){var n=[];n.push(t),t=n}var r=t[0].input;Array.isArray(r)||r instanceof Float32Array||(this.inputLookup||(this.inputLookup=s.buildLookup(t.map((function(t){return t.input})))),t=t.map((function(t){var n=s.toArray(e.inputLookup,t.input);return i(i({},t),{},{input:n})}),this));var a=t[0].output;return Array.isArray(a)||a instanceof Float32Array||(this.outputLookup||(this.outputLookup=s.buildLookup(t.map((function(t){return t.output})))),t=t.map((function(t){var n=s.toArray(e.outputLookup,t.output);return i(i({},t),{},{output:n})}),this)),t}},{key:"transferData",value:function(t){for(var e=new Array(t.length),n=f((function(t){return t[this.thread.x]}),{output:[t[0].input.length],immutable:!0}),r=f((function(t){return t[this.thread.x]}),{output:[t[0].output.length],immutable:!0}),i=0;i<t.length;i++){var a=t[i];e[i]={input:n(a.input),output:r(a.output)}}return e}},{key:"test",value:function(){throw new Error("".concat(this.constructor.name,"-test is not yet implemented"))}},{key:"toJSON",value:function(){this.layers||this.initialize();for(var t=[],e=0;e<this.layers.length;e++){var n=this.layers[e],r=n.toJSON();n.hasOwnProperty("inputLayer")?r.inputLayerIndex=this.layers.indexOf(n.inputLayer):n.hasOwnProperty("inputLayer1")&&n.hasOwnProperty("inputLayer2")&&(r.inputLayer1Index=this.layers.indexOf(n.inputLayer1),r.inputLayer2Index=this.layers.indexOf(n.inputLayer2)),t.push(r)}return{type:this.constructor.name,sizes:[this._inputLayer.height].concat(this._hiddenLayers.map((function(t){return t.height}))).concat([this._outputLayer.height]),layers:t}}},{key:"toFunction",value:function(){throw new Error("".concat(this.constructor.name,"-toFunction is not yet implemented"))}},{key:"createTrainStream",value:function(){throw new Error("".concat(this.constructor.name,"-createTrainStream is not yet implemented"))}}],[{key:"trainDefaults",get:function(){return{iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,learningRate:.3,callback:null,callbackPeriod:10,errorCheckInterval:100,reinforce:!1}}},{key:"defaults",get:function(){return{learningRate:.3,binaryThresh:.5,hiddenLayers:null,inputLayer:null,outputLayer:null,praxisOpts:null,praxis:function(t,e){return l.momentumRootMeanSquaredPropagation(i({},t),t.praxisOpts||e)}}}},{key:"_validateTrainingOptions",value:function(e){var n={iterations:function(t){return"number"===typeof t&&t>0},errorThresh:function(t){return"number"===typeof t&&t>0&&t<1},log:function(t){return"function"===typeof t||"boolean"===typeof t},logPeriod:function(t){return"number"===typeof t&&t>0},learningRate:function(t){return"number"===typeof t&&t>0&&t<1},callback:function(t){return"function"===typeof t||null===t},callbackPeriod:function(t){return"number"===typeof t&&t>0},timeout:function(t){return"number"===typeof t&&t>0}};Object.keys(t.trainDefaults).forEach((function(t){if(n.hasOwnProperty(t)&&!n[t](e[t]))throw new Error("[".concat(t,", ").concat(e[t],"] is out of normal training range, your network will probably not train."))}))}},{key:"structure",get:function(){return{layers:null,_inputLayer:null,_outputLayer:null,_model:null}}},{key:"fromJSON",value:function(e,n){var r=e.layers,i=[],a=u(r[0])||n(r[0]);i.push(a);for(var o=1;o<r.length;o++){var s=r[o];if(s.hasOwnProperty("inputLayerIndex")){var l=i[s.inputLayerIndex];i.push(u(s,l)||n(s,l))}else{if(!s.hasOwnProperty("inputLayer1Index"))throw new Error("Cannot create network from provided JOSN. inputLayer1Index not defined.");if(!s.hasOwnProperty("inputLayer2Index"))throw new Error("Cannot create network from provided JOSN. inputLayer2Index not defined.");var c=i[s.inputLayer1Index],h=i[s.inputLayer2Index];if(void 0===c)throw new Error("Cannot create network from provided JOSN. layer of index ".concat(s.inputLayer1Index," not found."));if(void 0===h)throw new Error("Cannot create network from provided JOSN. layer of index ".concat(s.inputLayer2Index," not found."));i.push(u(s,a)||n(s,c,h))}}var f=new t(e);return f.layers=i,f}}]),t}();t.exports={FeedForward:m}},function(t,e){t.exports=function(t){return Array.isArray(t)?t:new Float32Array(Object.values(t))}},function(t,e,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,a=i&&"function"===typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!==t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,a),r(n)}function a(){"function"===typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}y(t,e,a,{once:!0}),"error"!==e&&function(t,e,n){"function"===typeof t.on&&y(t,"error",e,n)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,a,o,s;if(l(n),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),o=a[e]),void 0===o)o=a[e]=n,++t._eventsCount;else if("function"===typeof o?o=a[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(t))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,s=u,console&&console.warn&&console.warn(s)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function y(t,e,n,r){if("function"===typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(a){r.once&&t.removeEventListener(e,i),n(a)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!==typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=i[t];if(void 0===u)return!1;if("function"===typeof u)a(u,this,e);else{var l=u.length,c=m(u,l);for(n=0;n<l;++n)a(c[n],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return l(e),this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,p(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,a,o;if(l(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){(e=t.exports=n(132)).Stream=e,e.Readable=e,e.Writable=n(73),e.Duplex=n(20),e.Transform=n(137),e.PassThrough=n(321)},function(t,e,n){var r=n(72),i=r.Buffer;function a(t,e){for(var n in t)e[n]=t[n]}function o(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=o),a(i,o),o.from=function(t,e,n){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},o.alloc=function(t,e,n){if("number"!==typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"===typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";(function(t){var r=n(312),i=n(313),a=n(133);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?s(t,0):f(t,e);if("Buffer"===e.type&&a(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return j(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return L(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(t,a)===l(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var h=!0,f=0;f<u;f++)if(l(t,a+f)!==l(e,f)){h=!1;break}if(h)return a}return-1}function x(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function b(t,e,n,r){return K(j(e,t.length-n),t,n,r)}function w(t,e,n,r){return K(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function k(t,e,n,r){return w(t,e,n,r)}function _(t,e,n,r){return K(U(e),t,n,r)}function T(t,e,n,r){return K(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,u,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128===(192&(a=t[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=t[i+1],o=t[i+2],128===(192&a)&&128===(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?s(t,e):void 0!==n?"string"===typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=t.slice(e,n),h=0;h<s;++h)if(l[h]!==c[h]){a=l[h],o=c[h];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return x(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return k(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function L(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function D(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=V(t[a]);return i}function C(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function I(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function O(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function P(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function R(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,a){return a||R(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,a){return a||R(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):O(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):O(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):O(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):O(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=u.isBuffer(t)?t:j(new u(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(z,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function K(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(15))},function(t,e,n){"use strict";(function(e,r,i){var a=n(51);function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:a.nextTick;v.WritableState=y;var l=Object.create(n(35));l.inherits=n(26);var c={deprecate:n(319)},h=n(134),f=n(71).Buffer,p=i.Uint8Array||function(){};var d,g=n(135);function m(){}function y(t,e){s=s||n(20),t=t||{};var r=e instanceof s;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(a.nextTick(i,r),a.nextTick(T,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),T(t,e))}(t,n,r,e,i);else{var o=k(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),r?u(b,t,n,o,i):b(t,n,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function v(t){if(s=s||n(20),!d.call(v,this)&&!(this instanceof s))return new v(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),h.call(this)}function x(t,e,n,r,i,a,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,a,e.onwrite),e.sync=!1}function b(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),T(t,e)}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),a=e.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,x(t,e,!0,e.length,i,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,h=n.callback;if(x(t,e,!1,e.objectMode?1:l.length,l,c,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function k(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function _(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),T(t,e)}))}function T(t,e){var n=k(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"===typeof t._final?(e.pendingcb++,e.finalCalled=!0,a.nextTick(_,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}l.inherits(v,h),y.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(y.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===v&&(t&&t._writableState instanceof y)}})):d=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(r=t,f.isBuffer(r)||r instanceof p);return s&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"===typeof e&&(n=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!==typeof n&&(n=m),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),a.nextTick(e,n)}(this,n):(s||function(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"===typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),a.nextTick(r,o),i=!1),i}(this,i,t,n))&&(i.pendingcb++,o=function(t,e,n,r,i,a){if(!n){var o=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=f.from(e,n));return e}(e,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else x(t,e,!1,s,r,i,a);return u}(this,i,s,t,e,n)),o},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,n){var r=this._writableState;"function"===typeof t?(n=t,t=null,e=null):"function"===typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,T(t,e),n&&(e.finished?a.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(23),n(317).setImmediate,n(15))},function(t,e,n){var r=n(21);t.exports=function(t){for(var e=new r(t.rows,t.columns),n=-999999,i=0;i<t.weights.length;i++)t.weights[i]>n&&(n=t.weights[i]);for(var a=0,o=0;o<t.weights.length;o++)e.weights[o]=Math.exp(t.weights[o]-n),a+=e.weights[o];for(var s=0;s<t.weights.length;s++)e.weights[s]/=a;return e}},function(t,e,n){(function(t){t.exports=function(){"use strict";var e,n;function r(){return e.apply(null,arguments)}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function a(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(o(t,e))return!1;return!0}function u(t){return void 0===t}function l(t){return"number"===typeof t||"[object Number]"===Object.prototype.toString.call(t)}function c(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function f(t,e){for(var n in e)o(e,n)&&(t[n]=e[n]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,n,r){return Te(t,e,n,r,!0).utc()}function d(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function g(t){if(null==t._isValid){var e=d(t),r=n.call(e.parsedDateParts,(function(t){return null!=t})),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function m(t){var e=p(NaN);return null!=t?f(d(e),t):d(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),r=n.length>>>0;for(e=0;e<r;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var y=r.momentProperties=[],v=!1;function x(t,e){var n,r,i;if(u(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),u(e._i)||(t._i=e._i),u(e._f)||(t._f=e._f),u(e._l)||(t._l=e._l),u(e._strict)||(t._strict=e._strict),u(e._tzm)||(t._tzm=e._tzm),u(e._isUTC)||(t._isUTC=e._isUTC),u(e._offset)||(t._offset=e._offset),u(e._pf)||(t._pf=d(e)),u(e._locale)||(t._locale=e._locale),y.length>0)for(n=0;n<y.length;n++)u(i=e[r=y[n]])||(t[r]=i);return t}function b(t){x(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,r.updateOffset(this),v=!1)}function w(t){return t instanceof b||null!=t&&null!=t._isAMomentObject}function k(t){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function _(t,e){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){var i,a,s,u=[];for(a=0;a<arguments.length;a++){if(i="","object"===typeof arguments[a]){for(s in i+="\n["+a+"] ",arguments[0])o(arguments[0],s)&&(i+=s+": "+arguments[0][s]+", ");i=i.slice(0,-2)}else i=arguments[a];u.push(i)}k(t+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var T,S={};function E(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),S[t]||(k(e),S[t]=!0)}function A(t){return"undefined"!==typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function L(t,e){var n,r=f({},t);for(n in e)o(e,n)&&(a(t[n])&&a(e[n])?(r[n]={},f(r[n],t[n]),f(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)o(t,n)&&!o(e,n)&&a(t[n])&&(r[n]=f({},r[n]));return r}function D(t){null!=t&&this.set(t)}function C(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,T=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)o(t,e)&&n.push(e);return n};var I=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,M=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,O={},P={};function R(t,e,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),t&&(P[t]=i),e&&(P[e[0]]=function(){return C(i.apply(this,arguments),e[1],e[2])}),n&&(P[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function N(t,e){return t.isValid()?(e=F(e,t.localeData()),O[e]=O[e]||function(t){var e,n,r,i=t.match(I);for(e=0,n=i.length;e<n;e++)P[i[e]]?i[e]=P[i[e]]:i[e]=(r=i[e]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(e){var r,a="";for(r=0;r<n;r++)a+=A(i[r])?i[r].call(e,t):i[r];return a}}(e),O[e](t)):t.localeData().invalidDate()}function F(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(M.lastIndex=0;n>=0&&M.test(t);)t=t.replace(M,r),M.lastIndex=0,n-=1;return t}var z={};function V(t,e){var n=t.toLowerCase();z[n]=z[n+"s"]=z[e]=t}function j(t){return"string"===typeof t?z[t]||z[t.toLowerCase()]:void 0}function U(t){var e,n,r={};for(n in t)o(t,n)&&(e=j(n))&&(r[e]=t[n]);return r}var K={};function B(t,e){K[t]=e}function W(t){return t%4===0&&t%100!==0||t%400===0}function G(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function H(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=G(e)),n}function Y(t,e){return function(n){return null!=n?(X(this,t,n),r.updateOffset(this,e),this):q(this,t)}}function q(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function X(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&W(t.year())&&1===t.month()&&29===t.date()?(n=H(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),wt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}var $,J=/\d/,Z=/\d\d/,Q=/\d{3}/,tt=/\d{4}/,et=/[+-]?\d{6}/,nt=/\d\d?/,rt=/\d\d\d\d?/,it=/\d\d\d\d\d\d?/,at=/\d{1,3}/,ot=/\d{1,4}/,st=/[+-]?\d{1,6}/,ut=/\d+/,lt=/[+-]?\d+/,ct=/Z|[+-]\d\d:?\d\d/gi,ht=/Z|[+-]\d\d(?::?\d\d)?/gi,ft=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function pt(t,e,n){$[t]=A(e)?e:function(t,r){return t&&n?n:e}}function dt(t,e){return o($,t)?$[t](e._strict,e._locale):new RegExp(gt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i}))))}function gt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}$={};var mt,yt={};function vt(t,e){var n,r=e;for("string"===typeof t&&(t=[t]),l(e)&&(r=function(t,n){n[e]=H(t)}),n=0;n<t.length;n++)yt[t[n]]=r}function xt(t,e){vt(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function bt(t,e,n){null!=e&&o(yt,t)&&yt[t](e,n._a,n,t)}function wt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n,r=(e%(n=12)+n)%n;return t+=(e-r)/12,1===r?W(t)?29:28:31-r%7%2}mt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},R("M",["MM",2],"Mo",(function(){return this.month()+1})),R("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),R("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),V("month","M"),B("month",8),pt("M",nt),pt("MM",nt,Z),pt("MMM",(function(t,e){return e.monthsShortRegex(t)})),pt("MMMM",(function(t,e){return e.monthsRegex(t)})),vt(["M","MM"],(function(t,e){e[1]=H(t)-1})),vt(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[1]=i:d(n).invalidMonth=t}));var kt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),_t="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Tt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,St=ft,Et=ft;function At(t,e,n){var r,i,a,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=mt.call(this._shortMonthsParse,o))?i:null:-1!==(i=mt.call(this._longMonthsParse,o))?i:null:"MMM"===e?-1!==(i=mt.call(this._shortMonthsParse,o))||-1!==(i=mt.call(this._longMonthsParse,o))?i:null:-1!==(i=mt.call(this._longMonthsParse,o))||-1!==(i=mt.call(this._shortMonthsParse,o))?i:null}function Lt(t,e){var n;if(!t.isValid())return t;if("string"===typeof e)if(/^\d+$/.test(e))e=H(e);else if(!l(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),wt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Dt(t){return null!=t?(Lt(this,t),r.updateOffset(this,!0),this):q(this,"Month")}function Ct(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],a=[];for(e=0;e<12;e++)n=p([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),a.sort(t),e=0;e<12;e++)r[e]=gt(r[e]),i[e]=gt(i[e]);for(e=0;e<24;e++)a[e]=gt(a[e]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function It(t){return W(t)?366:365}R("Y",0,0,(function(){var t=this.year();return t<=9999?C(t,4):"+"+t})),R(0,["YY",2],0,(function(){return this.year()%100})),R(0,["YYYY",4],0,"year"),R(0,["YYYYY",5],0,"year"),R(0,["YYYYYY",6,!0],0,"year"),V("year","y"),B("year",1),pt("Y",lt),pt("YY",nt,Z),pt("YYYY",ot,tt),pt("YYYYY",st,et),pt("YYYYYY",st,et),vt(["YYYYY","YYYYYY"],0),vt("YYYY",(function(t,e){e[0]=2===t.length?r.parseTwoDigitYear(t):H(t)})),vt("YY",(function(t,e){e[0]=r.parseTwoDigitYear(t)})),vt("Y",(function(t,e){e[0]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return H(t)+(H(t)>68?1900:2e3)};var Mt=Y("FullYear",!0);function Ot(t,e,n,r,i,a,o){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,r,i,a,o),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,r,i,a,o),s}function Pt(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Rt(t,e,n){var r=7+e-n;return-(7+Pt(t,0,r).getUTCDay()-e)%7+r-1}function Nt(t,e,n,r,i){var a,o,s=1+7*(e-1)+(7+n-r)%7+Rt(t,r,i);return s<=0?o=It(a=t-1)+s:s>It(t)?(a=t+1,o=s-It(t)):(a=t,o=s),{year:a,dayOfYear:o}}function Ft(t,e,n){var r,i,a=Rt(t.year(),e,n),o=Math.floor((t.dayOfYear()-a-1)/7)+1;return o<1?r=o+zt(i=t.year()-1,e,n):o>zt(t.year(),e,n)?(r=o-zt(t.year(),e,n),i=t.year()+1):(i=t.year(),r=o),{week:r,year:i}}function zt(t,e,n){var r=Rt(t,e,n),i=Rt(t+1,e,n);return(It(t)-r+i)/7}function Vt(t,e){return t.slice(e,7).concat(t.slice(0,e))}R("w",["ww",2],"wo","week"),R("W",["WW",2],"Wo","isoWeek"),V("week","w"),V("isoWeek","W"),B("week",5),B("isoWeek",5),pt("w",nt),pt("ww",nt,Z),pt("W",nt),pt("WW",nt,Z),xt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=H(t)})),R("d",0,"do","day"),R("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),R("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),R("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),R("e",0,0,"weekday"),R("E",0,0,"isoWeekday"),V("day","d"),V("weekday","e"),V("isoWeekday","E"),B("day",11),B("weekday",11),B("isoWeekday",11),pt("d",nt),pt("e",nt),pt("E",nt),pt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),pt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),pt("dddd",(function(t,e){return e.weekdaysRegex(t)})),xt(["dd","ddd","dddd"],(function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:d(n).invalidWeekday=t})),xt(["d","e","E"],(function(t,e,n,r){e[r]=H(t)}));var jt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ut="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Kt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Bt=ft,Wt=ft,Gt=ft;function Ht(t,e,n){var r,i,a,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=mt.call(this._weekdaysParse,o))?i:null:"ddd"===e?-1!==(i=mt.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=mt.call(this._minWeekdaysParse,o))?i:null:"dddd"===e?-1!==(i=mt.call(this._weekdaysParse,o))||-1!==(i=mt.call(this._shortWeekdaysParse,o))||-1!==(i=mt.call(this._minWeekdaysParse,o))?i:null:"ddd"===e?-1!==(i=mt.call(this._shortWeekdaysParse,o))||-1!==(i=mt.call(this._weekdaysParse,o))||-1!==(i=mt.call(this._minWeekdaysParse,o))?i:null:-1!==(i=mt.call(this._minWeekdaysParse,o))||-1!==(i=mt.call(this._weekdaysParse,o))||-1!==(i=mt.call(this._shortWeekdaysParse,o))?i:null}function Yt(){function t(t,e){return e.length-t.length}var e,n,r,i,a,o=[],s=[],u=[],l=[];for(e=0;e<7;e++)n=p([2e3,1]).day(e),r=gt(this.weekdaysMin(n,"")),i=gt(this.weekdaysShort(n,"")),a=gt(this.weekdays(n,"")),o.push(r),s.push(i),u.push(a),l.push(r),l.push(i),l.push(a);o.sort(t),s.sort(t),u.sort(t),l.sort(t),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function qt(){return this.hours()%12||12}function Xt(t,e){R(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function $t(t,e){return e._meridiemParse}R("H",["HH",2],0,"hour"),R("h",["hh",2],0,qt),R("k",["kk",2],0,(function(){return this.hours()||24})),R("hmm",0,0,(function(){return""+qt.apply(this)+C(this.minutes(),2)})),R("hmmss",0,0,(function(){return""+qt.apply(this)+C(this.minutes(),2)+C(this.seconds(),2)})),R("Hmm",0,0,(function(){return""+this.hours()+C(this.minutes(),2)})),R("Hmmss",0,0,(function(){return""+this.hours()+C(this.minutes(),2)+C(this.seconds(),2)})),Xt("a",!0),Xt("A",!1),V("hour","h"),B("hour",13),pt("a",$t),pt("A",$t),pt("H",nt),pt("h",nt),pt("k",nt),pt("HH",nt,Z),pt("hh",nt,Z),pt("kk",nt,Z),pt("hmm",rt),pt("hmmss",it),pt("Hmm",rt),pt("Hmmss",it),vt(["H","HH"],3),vt(["k","kk"],(function(t,e,n){var r=H(t);e[3]=24===r?0:r})),vt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),vt(["h","hh"],(function(t,e,n){e[3]=H(t),d(n).bigHour=!0})),vt("hmm",(function(t,e,n){var r=t.length-2;e[3]=H(t.substr(0,r)),e[4]=H(t.substr(r)),d(n).bigHour=!0})),vt("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=H(t.substr(0,r)),e[4]=H(t.substr(r,2)),e[5]=H(t.substr(i)),d(n).bigHour=!0})),vt("Hmm",(function(t,e,n){var r=t.length-2;e[3]=H(t.substr(0,r)),e[4]=H(t.substr(r))})),vt("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=H(t.substr(0,r)),e[4]=H(t.substr(r,2)),e[5]=H(t.substr(i))}));var Jt,Zt=Y("Hours",!0),Qt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:kt,monthsShort:_t,week:{dow:0,doy:6},weekdays:jt,weekdaysMin:Kt,weekdaysShort:Ut,meridiemParse:/[ap]\.?m?\.?/i},te={},ee={};function ne(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function re(t){return t?t.toLowerCase().replace("_","-"):t}function ie(e){var n=null;if(void 0===te[e]&&"undefined"!==typeof t&&t&&t.exports)try{n=Jt._abbr,function(){var t=new Error("Cannot find module 'undefined'");throw t.code="MODULE_NOT_FOUND",t}(),ae(n)}catch(r){te[e]=null}return te[e]}function ae(t,e){var n;return t&&((n=u(e)?se(t):oe(t,e))?Jt=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Jt._abbr}function oe(t,e){if(null!==e){var n,r=Qt;if(e.abbr=t,null!=te[t])E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=te[t]._config;else if(null!=e.parentLocale)if(null!=te[e.parentLocale])r=te[e.parentLocale]._config;else{if(null==(n=ie(e.parentLocale)))return ee[e.parentLocale]||(ee[e.parentLocale]=[]),ee[e.parentLocale].push({name:t,config:e}),null;r=n._config}return te[t]=new D(L(r,e)),ee[t]&&ee[t].forEach((function(t){oe(t.name,t.config)})),ae(t),te[t]}return delete te[t],null}function se(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Jt;if(!i(t)){if(e=ie(t))return e;t=[t]}return function(t){for(var e,n,r,i,a=0;a<t.length;){for(e=(i=re(t[a]).split("-")).length,n=(n=re(t[a+1]))?n.split("-"):null;e>0;){if(r=ie(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&ne(i,n)>=e-1)break;e--}a++}return Jt}(t)}function ue(t){var e,n=t._a;return n&&-2===d(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>wt(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,d(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),d(t)._overflowWeeks&&-1===e&&(e=7),d(t)._overflowWeekday&&-1===e&&(e=8),d(t).overflow=e),t}var le=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ce=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,he=/Z|[+-]\d\d(?::?\d\d)?/,fe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],pe=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],de=/^\/?Date\((-?\d+)/i,ge=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,me={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ye(t){var e,n,r,i,a,o,s=t._i,u=le.exec(s)||ce.exec(s);if(u){for(d(t).iso=!0,e=0,n=fe.length;e<n;e++)if(fe[e][1].exec(u[1])){i=fe[e][0],r=!1!==fe[e][2];break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,n=pe.length;e<n;e++)if(pe[e][1].exec(u[3])){a=(u[2]||" ")+pe[e][0];break}if(null==a)return void(t._isValid=!1)}if(!r&&null!=a)return void(t._isValid=!1);if(u[4]){if(!he.exec(u[4]))return void(t._isValid=!1);o="Z"}t._f=i+(a||"")+(o||""),ke(t)}else t._isValid=!1}function ve(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function xe(t){var e,n=ge.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(n){if(e=function(t,e,n,r,i,a){var o=[ve(t),_t.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return a&&o.push(parseInt(a,10)),o}(n[4],n[3],n[2],n[5],n[6],n[7]),!function(t,e,n){return!t||Ut.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(d(n).weekdayMismatch=!0,n._isValid=!1,!1)}(n[1],e,t))return;t._a=e,t._tzm=function(t,e,n){if(t)return me[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(n[8],n[9],n[10]),t._d=Pt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),d(t).rfc2822=!0}else t._isValid=!1}function be(t,e,n){return null!=t?t:null!=e?e:n}function we(t){var e,n,i,a,o,s=[];if(!t._d){for(i=function(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,r,i,a,o,s,u,l;null!=(e=t._w).GG||null!=e.W||null!=e.E?(a=1,o=4,n=be(e.GG,t._a[0],Ft(Se(),1,4).year),r=be(e.W,1),((i=be(e.E,1))<1||i>7)&&(u=!0)):(a=t._locale._week.dow,o=t._locale._week.doy,l=Ft(Se(),a,o),n=be(e.gg,t._a[0],l.year),r=be(e.w,l.week),null!=e.d?((i=e.d)<0||i>6)&&(u=!0):null!=e.e?(i=e.e+a,(e.e<0||e.e>6)&&(u=!0)):i=a),r<1||r>zt(n,a,o)?d(t)._overflowWeeks=!0:null!=u?d(t)._overflowWeekday=!0:(s=Nt(n,r,i,a,o),t._a[0]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(o=be(t._a[0],i[0]),(t._dayOfYear>It(o)||0===t._dayOfYear)&&(d(t)._overflowDayOfYear=!0),n=Pt(o,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?Pt:Ot).apply(null,s),a=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&"undefined"!==typeof t._w.d&&t._w.d!==a&&(d(t).weekdayMismatch=!0)}}function ke(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],d(t).empty=!0;var e,n,i,a,o,s,u=""+t._i,l=u.length,c=0;for(i=F(t._f,t._locale).match(I)||[],e=0;e<i.length;e++)a=i[e],(n=(u.match(dt(a,t))||[])[0])&&((o=u.substr(0,u.indexOf(n))).length>0&&d(t).unusedInput.push(o),u=u.slice(u.indexOf(n)+n.length),c+=n.length),P[a]?(n?d(t).empty=!1:d(t).unusedTokens.push(a),bt(a,n,t)):t._strict&&!n&&d(t).unusedTokens.push(a);d(t).charsLeftOver=l-c,u.length>0&&d(t).unusedInput.push(u),t._a[3]<=12&&!0===d(t).bigHour&&t._a[3]>0&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[3]=function(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),null!==(s=d(t).era)&&(t._a[0]=t._locale.erasConvertYear(s,t._a[0])),we(t),ue(t)}else xe(t);else ye(t)}function _e(t){var e=t._i,n=t._f;return t._locale=t._locale||se(t._l),null===e||void 0===n&&""===e?m({nullInput:!0}):("string"===typeof e&&(t._i=e=t._locale.preparse(e)),w(e)?new b(ue(e)):(c(e)?t._d=e:i(n)?function(t){var e,n,r,i,a,o,s=!1;if(0===t._f.length)return d(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)a=0,o=!1,e=x({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],ke(e),g(e)&&(o=!0),a+=d(e).charsLeftOver,a+=10*d(e).unusedTokens.length,d(e).score=a,s?a<r&&(r=a,n=e):(null==r||a<r||o)&&(r=a,n=e,o&&(s=!0));f(t,n||e)}(t):n?ke(t):function(t){var e=t._i;u(e)?t._d=new Date(r.now()):c(e)?t._d=new Date(e.valueOf()):"string"===typeof e?function(t){var e=de.exec(t._i);null===e?(ye(t),!1===t._isValid&&(delete t._isValid,xe(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:r.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):i(e)?(t._a=h(e.slice(0),(function(t){return parseInt(t,10)})),we(t)):a(e)?function(t){if(!t._d){var e=U(t._i),n=void 0===e.day?e.date:e.day;t._a=h([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),we(t)}}(t):l(e)?t._d=new Date(e):r.createFromInputFallback(t)}(t),g(t)||(t._d=null),t))}function Te(t,e,n,r,o){var u={};return!0!==e&&!1!==e||(r=e,e=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(a(t)&&s(t)||i(t)&&0===t.length)&&(t=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=o,u._l=n,u._i=t,u._f=e,u._strict=r,function(t){var e=new b(ue(_e(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}(u)}function Se(t,e,n,r){return Te(t,e,n,r,!1)}r.createFromInputFallback=_("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Ee=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()})),Ae=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:m()}));function Le(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Se();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}var De=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ce(t){var e=U(t),n=e.year||0,r=e.quarter||0,i=e.month||0,a=e.week||e.isoWeek||0,s=e.day||0,u=e.hour||0,l=e.minute||0,c=e.second||0,h=e.millisecond||0;this._isValid=function(t){var e,n,r=!1;for(e in t)if(o(t,e)&&(-1===mt.call(De,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<De.length;++n)if(t[De[n]]){if(r)return!1;parseFloat(t[De[n]])!==H(t[De[n]])&&(r=!0)}return!0}(e),this._milliseconds=+h+1e3*c+6e4*l+1e3*u*60*60,this._days=+s+7*a,this._months=+i+3*r+12*n,this._data={},this._locale=se(),this._bubble()}function Ie(t){return t instanceof Ce}function Me(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Oe(t,e){R(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+C(~~(t/60),2)+e+C(~~t%60,2)}))}Oe("Z",":"),Oe("ZZ",""),pt("Z",ht),pt("ZZ",ht),vt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=Re(ht,t)}));var Pe=/([\+\-]|\d\d)/gi;function Re(t,e){var n,r,i=(e||"").match(t);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(Pe)||["-",0,0])[1]+H(n[2]))?0:"+"===n[0]?r:-r}function Ne(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(w(t)||c(t)?t.valueOf():Se(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Se(t).local()}function Fe(t){return-Math.round(t._d.getTimezoneOffset())}function ze(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ve=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,je=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ue(t,e){var n,r,i,a=t,s=null;return Ie(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:l(t)||!isNaN(+t)?(a={},e?a[e]=+t:a.milliseconds=+t):(s=Ve.exec(t))?(n="-"===s[1]?-1:1,a={y:0,d:H(s[2])*n,h:H(s[3])*n,m:H(s[4])*n,s:H(s[5])*n,ms:H(Me(1e3*s[6]))*n}):(s=je.exec(t))?(n="-"===s[1]?-1:1,a={y:Ke(s[2],n),M:Ke(s[3],n),w:Ke(s[4],n),d:Ke(s[5],n),h:Ke(s[6],n),m:Ke(s[7],n),s:Ke(s[8],n)}):null==a?a={}:"object"===typeof a&&("from"in a||"to"in a)&&(i=function(t,e){var n;return t.isValid()&&e.isValid()?(e=Ne(e,t),t.isBefore(e)?n=Be(t,e):((n=Be(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(Se(a.from),Se(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),r=new Ce(a),Ie(t)&&o(t,"_locale")&&(r._locale=t._locale),Ie(t)&&o(t,"_isValid")&&(r._isValid=t._isValid),r}function Ke(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Be(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function We(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(E(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Ge(this,Ue(n,r),t),this}}function Ge(t,e,n,i){var a=e._milliseconds,o=Me(e._days),s=Me(e._months);t.isValid()&&(i=null==i||i,s&&Lt(t,q(t,"Month")+s*n),o&&X(t,"Date",q(t,"Date")+o*n),a&&t._d.setTime(t._d.valueOf()+a*n),i&&r.updateOffset(t,o||s))}Ue.fn=Ce.prototype,Ue.invalid=function(){return Ue(NaN)};var He=We(1,"add"),Ye=We(-1,"subtract");function qe(t){return"string"===typeof t||t instanceof String}function Xe(t){return w(t)||c(t)||qe(t)||l(t)||function(t){var e=i(t),n=!1;return e&&(n=0===t.filter((function(e){return!l(e)&&qe(t)})).length),e&&n}(t)||function(t){var e,n,r=a(t)&&!s(t),i=!1,u=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<u.length;e+=1)n=u[e],i=i||o(t,n);return r&&i}(t)||null===t||void 0===t}function $e(t){var e,n=a(t)&&!s(t),r=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<i.length;e+=1)r=r||o(t,i[e]);return n&&r}function Je(t,e){if(t.date()<e.date())return-Je(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function Ze(t){var e;return void 0===t?this._locale._abbr:(null!=(e=se(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Qe=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function tn(){return this._locale}function en(t,e){return(t%e+e)%e}function nn(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-126227808e5:new Date(t,e,n).valueOf()}function rn(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-126227808e5:Date.UTC(t,e,n)}function an(t,e){return e.erasAbbrRegex(t)}function on(){var t,e,n=[],r=[],i=[],a=[],o=this.eras();for(t=0,e=o.length;t<e;++t)r.push(gt(o[t].name)),n.push(gt(o[t].abbr)),i.push(gt(o[t].narrow)),a.push(gt(o[t].name)),a.push(gt(o[t].abbr)),a.push(gt(o[t].narrow));this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function sn(t,e){R(0,[t,t.length],0,e)}function un(t,e,n,r,i){var a;return null==t?Ft(this,r,i).year:(e>(a=zt(t,r,i))&&(e=a),ln.call(this,t,e,n,r,i))}function ln(t,e,n,r,i){var a=Nt(t,e,n,r,i),o=Pt(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}R("N",0,0,"eraAbbr"),R("NN",0,0,"eraAbbr"),R("NNN",0,0,"eraAbbr"),R("NNNN",0,0,"eraName"),R("NNNNN",0,0,"eraNarrow"),R("y",["y",1],"yo","eraYear"),R("y",["yy",2],0,"eraYear"),R("y",["yyy",3],0,"eraYear"),R("y",["yyyy",4],0,"eraYear"),pt("N",an),pt("NN",an),pt("NNN",an),pt("NNNN",(function(t,e){return e.erasNameRegex(t)})),pt("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),vt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?d(n).era=i:d(n).invalidEra=t})),pt("y",ut),pt("yy",ut),pt("yyy",ut),pt("yyyy",ut),pt("yo",(function(t,e){return e._eraYearOrdinalRegex||ut})),vt(["y","yy","yyy","yyyy"],0),vt(["yo"],(function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[0]=n._locale.eraYearOrdinalParse(t,i):e[0]=parseInt(t,10)})),R(0,["gg",2],0,(function(){return this.weekYear()%100})),R(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),sn("gggg","weekYear"),sn("ggggg","weekYear"),sn("GGGG","isoWeekYear"),sn("GGGGG","isoWeekYear"),V("weekYear","gg"),V("isoWeekYear","GG"),B("weekYear",1),B("isoWeekYear",1),pt("G",lt),pt("g",lt),pt("GG",nt,Z),pt("gg",nt,Z),pt("GGGG",ot,tt),pt("gggg",ot,tt),pt("GGGGG",st,et),pt("ggggg",st,et),xt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=H(t)})),xt(["gg","GG"],(function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)})),R("Q",0,"Qo","quarter"),V("quarter","Q"),B("quarter",7),pt("Q",J),vt("Q",(function(t,e){e[1]=3*(H(t)-1)})),R("D",["DD",2],"Do","date"),V("date","D"),B("date",9),pt("D",nt),pt("DD",nt,Z),pt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),vt(["D","DD"],2),vt("Do",(function(t,e){e[2]=H(t.match(nt)[0])}));var cn=Y("Date",!0);R("DDD",["DDDD",3],"DDDo","dayOfYear"),V("dayOfYear","DDD"),B("dayOfYear",4),pt("DDD",at),pt("DDDD",Q),vt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=H(t)})),R("m",["mm",2],0,"minute"),V("minute","m"),B("minute",14),pt("m",nt),pt("mm",nt,Z),vt(["m","mm"],4);var hn=Y("Minutes",!1);R("s",["ss",2],0,"second"),V("second","s"),B("second",15),pt("s",nt),pt("ss",nt,Z),vt(["s","ss"],5);var fn,pn,dn=Y("Seconds",!1);for(R("S",0,0,(function(){return~~(this.millisecond()/100)})),R(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),R(0,["SSS",3],0,"millisecond"),R(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),R(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),R(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),R(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),R(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),R(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),V("millisecond","ms"),B("millisecond",16),pt("S",at,J),pt("SS",at,Z),pt("SSS",at,Q),fn="SSSS";fn.length<=9;fn+="S")pt(fn,ut);function gn(t,e){e[6]=H(1e3*("0."+t))}for(fn="S";fn.length<=9;fn+="S")vt(fn,gn);pn=Y("Milliseconds",!1),R("z",0,0,"zoneAbbr"),R("zz",0,0,"zoneName");var mn=b.prototype;function yn(t){return t}mn.add=He,mn.calendar=function(t,e){1===arguments.length&&(arguments[0]?Xe(arguments[0])?(t=arguments[0],e=void 0):$e(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Se(),i=Ne(n,this).startOf("day"),a=r.calendarFormat(this,i)||"sameElse",o=e&&(A(e[a])?e[a].call(this,n):e[a]);return this.format(o||this.localeData().calendar(a,this,Se(n)))},mn.clone=function(){return new b(this)},mn.diff=function(t,e,n){var r,i,a;if(!this.isValid())return NaN;if(!(r=Ne(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=j(e)){case"year":a=Je(this,r)/12;break;case"month":a=Je(this,r);break;case"quarter":a=Je(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-i)/864e5;break;case"week":a=(this-r-i)/6048e5;break;default:a=this-r}return n?a:G(a)},mn.endOf=function(t){var e,n;if(void 0===(t=j(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?rn:nn,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-en(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-en(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-en(e,1e3)-1}return this._d.setTime(e),r.updateOffset(this,!0),this},mn.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=N(this,t);return this.localeData().postformat(e)},mn.from=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Se(t).isValid())?Ue({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},mn.fromNow=function(t){return this.from(Se(),t)},mn.to=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Se(t).isValid())?Ue({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},mn.toNow=function(t){return this.to(Se(),t)},mn.get=function(t){return A(this[t=j(t)])?this[t]():this},mn.invalidAt=function(){return d(this).overflow},mn.isAfter=function(t,e){var n=w(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=j(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},mn.isBefore=function(t,e){var n=w(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=j(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},mn.isBetween=function(t,e,n,r){var i=w(t)?t:Se(t),a=w(e)?e:Se(e);return!!(this.isValid()&&i.isValid()&&a.isValid())&&(("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(a,n):!this.isAfter(a,n)))},mn.isSame=function(t,e){var n,r=w(t)?t:Se(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=j(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},mn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},mn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},mn.isValid=function(){return g(this)},mn.lang=Qe,mn.locale=Ze,mn.localeData=tn,mn.max=Ae,mn.min=Ee,mn.parsingFlags=function(){return f({},d(this))},mn.set=function(t,e){if("object"===typeof t){var n,r=function(t){var e,n=[];for(e in t)o(t,e)&&n.push({unit:e,priority:K[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}(t=U(t));for(n=0;n<r.length;n++)this[r[n].unit](t[r[n].unit])}else if(A(this[t=j(t)]))return this[t](e);return this},mn.startOf=function(t){var e,n;if(void 0===(t=j(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?rn:nn,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=en(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=en(e,6e4);break;case"second":e=this._d.valueOf(),e-=en(e,1e3)}return this._d.setTime(e),r.updateOffset(this,!0),this},mn.subtract=Ye,mn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},mn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},mn.toDate=function(){return new Date(this.valueOf())},mn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?N(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):A(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",N(n,"Z")):N(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},mn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,r="moment",i="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),t="["+r+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=i+'[")]',this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!==typeof Symbol&&null!=Symbol.for&&(mn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),mn.toJSON=function(){return this.isValid()?this.toISOString():null},mn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},mn.unix=function(){return Math.floor(this.valueOf()/1e3)},mn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},mn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},mn.eraName=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].name;if(r[t].until<=n&&n<=r[t].since)return r[t].name}return""},mn.eraNarrow=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].narrow;if(r[t].until<=n&&n<=r[t].since)return r[t].narrow}return""},mn.eraAbbr=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].abbr;if(r[t].until<=n&&n<=r[t].since)return r[t].abbr}return""},mn.eraYear=function(){var t,e,n,i,a=this.localeData().eras();for(t=0,e=a.length;t<e;++t)if(n=a[t].since<=a[t].until?1:-1,i=this.clone().startOf("day").valueOf(),a[t].since<=i&&i<=a[t].until||a[t].until<=i&&i<=a[t].since)return(this.year()-r(a[t].since).year())*n+a[t].offset;return this.year()},mn.year=Mt,mn.isLeapYear=function(){return W(this.year())},mn.weekYear=function(t){return un.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},mn.isoWeekYear=function(t){return un.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},mn.quarter=mn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},mn.month=Dt,mn.daysInMonth=function(){return wt(this.year(),this.month())},mn.week=mn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},mn.isoWeek=mn.isoWeeks=function(t){var e=Ft(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},mn.weeksInYear=function(){var t=this.localeData()._week;return zt(this.year(),t.dow,t.doy)},mn.weeksInWeekYear=function(){var t=this.localeData()._week;return zt(this.weekYear(),t.dow,t.doy)},mn.isoWeeksInYear=function(){return zt(this.year(),1,4)},mn.isoWeeksInISOWeekYear=function(){return zt(this.isoWeekYear(),1,4)},mn.date=cn,mn.day=mn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!==typeof t?t:isNaN(t)?"number"===typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},mn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},mn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"===typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},mn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},mn.hour=mn.hours=Zt,mn.minute=mn.minutes=hn,mn.second=mn.seconds=dn,mn.millisecond=mn.milliseconds=pn,mn.utcOffset=function(t,e,n){var i,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"===typeof t){if(null===(t=Re(ht,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=Fe(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==t&&(!e||this._changeInProgress?Ge(this,Ue(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:Fe(this)},mn.utc=function(t){return this.utcOffset(0,t)},mn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Fe(this),"m")),this},mn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var t=Re(ct,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},mn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Se(t).utcOffset():0,(this.utcOffset()-t)%60===0)},mn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},mn.isLocal=function(){return!!this.isValid()&&!this._isUTC},mn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},mn.isUtc=ze,mn.isUTC=ze,mn.zoneAbbr=function(){return this._isUTC?"UTC":""},mn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},mn.dates=_("dates accessor is deprecated. Use date instead.",cn),mn.months=_("months accessor is deprecated. Use month instead",Dt),mn.years=_("years accessor is deprecated. Use year instead",Mt),mn.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!==typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),mn.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var t,e={};return x(e,this),(e=_e(e))._a?(t=e._isUTC?p(e._a):Se(e._a),this._isDSTShifted=this.isValid()&&function(t,e,n){var r,i=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),o=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&H(t[r])!==H(e[r]))&&o++;return o+a}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var vn=D.prototype;function xn(t,e,n,r){var i=se(),a=p().set(r,e);return i[n](a,t)}function bn(t,e,n){if(l(t)&&(e=t,t=void 0),t=t||"",null!=e)return xn(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=xn(t,r,n,"month");return i}function wn(t,e,n,r){"boolean"===typeof t?(l(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,l(e)&&(n=e,e=void 0),e=e||"");var i,a=se(),o=t?a._week.dow:0,s=[];if(null!=n)return xn(e,(n+o)%7,r,"day");for(i=0;i<7;i++)s[i]=xn(e,(i+o)%7,r,"day");return s}vn.calendar=function(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return A(r)?r.call(e,n):r},vn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(I).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},vn.invalidDate=function(){return this._invalidDate},vn.ordinal=function(t){return this._ordinal.replace("%d",t)},vn.preparse=yn,vn.postformat=yn,vn.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return A(i)?i(t,e,n,r):i.replace(/%d/i,t)},vn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return A(n)?n(e):n.replace(/%s/i,e)},vn.set=function(t){var e,n;for(n in t)o(t,n)&&(A(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},vn.eras=function(t,e){var n,i,a,o=this._eras||se("en")._eras;for(n=0,i=o.length;n<i;++n){switch(typeof o[n].since){case"string":a=r(o[n].since).startOf("day"),o[n].since=a.valueOf()}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":a=r(o[n].until).startOf("day").valueOf(),o[n].until=a.valueOf()}}return o},vn.erasParse=function(t,e,n){var r,i,a,o,s,u=this.eras();for(t=t.toUpperCase(),r=0,i=u.length;r<i;++r)if(a=u[r].name.toUpperCase(),o=u[r].abbr.toUpperCase(),s=u[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(o===t)return u[r];break;case"NNNN":if(a===t)return u[r];break;case"NNNNN":if(s===t)return u[r]}else if([a,o,s].indexOf(t)>=0)return u[r]},vn.erasConvertYear=function(t,e){var n=t.since<=t.until?1:-1;return void 0===e?r(t.since).year():r(t.since).year()+(e-t.offset)*n},vn.erasAbbrRegex=function(t){return o(this,"_erasAbbrRegex")||on.call(this),t?this._erasAbbrRegex:this._erasRegex},vn.erasNameRegex=function(t){return o(this,"_erasNameRegex")||on.call(this),t?this._erasNameRegex:this._erasRegex},vn.erasNarrowRegex=function(t){return o(this,"_erasNarrowRegex")||on.call(this),t?this._erasNarrowRegex:this._erasRegex},vn.months=function(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Tt).test(e)?"format":"standalone"][t.month()]:i(this._months)?this._months:this._months.standalone},vn.monthsShort=function(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Tt.test(e)?"format":"standalone"][t.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},vn.monthsParse=function(t,e,n){var r,i,a;if(this._monthsParseExact)return At.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},vn.monthsRegex=function(t){return this._monthsParseExact?(o(this,"_monthsRegex")||Ct.call(this),t?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=Et),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},vn.monthsShortRegex=function(t){return this._monthsParseExact?(o(this,"_monthsRegex")||Ct.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=St),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},vn.week=function(t){return Ft(t,this._week.dow,this._week.doy).week},vn.firstDayOfYear=function(){return this._week.doy},vn.firstDayOfWeek=function(){return this._week.dow},vn.weekdays=function(t,e){var n=i(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Vt(n,this._week.dow):t?n[t.day()]:n},vn.weekdaysMin=function(t){return!0===t?Vt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},vn.weekdaysShort=function(t){return!0===t?Vt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},vn.weekdaysParse=function(t,e,n){var r,i,a;if(this._weekdaysParseExact)return Ht.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},vn.weekdaysRegex=function(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Bt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},vn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Wt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},vn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Gt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},vn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},vn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},ae("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===H(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=_("moment.lang is deprecated. Use moment.locale instead.",ae),r.langData=_("moment.langData is deprecated. Use moment.localeData instead.",se);var kn=Math.abs;function _n(t,e,n,r){var i=Ue(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function Tn(t){return t<0?Math.floor(t):Math.ceil(t)}function Sn(t){return 4800*t/146097}function En(t){return 146097*t/4800}function An(t){return function(){return this.as(t)}}var Ln=An("ms"),Dn=An("s"),Cn=An("m"),In=An("h"),Mn=An("d"),On=An("w"),Pn=An("M"),Rn=An("Q"),Nn=An("y");function Fn(t){return function(){return this.isValid()?this._data[t]:NaN}}var zn=Fn("milliseconds"),Vn=Fn("seconds"),jn=Fn("minutes"),Un=Fn("hours"),Kn=Fn("days"),Bn=Fn("months"),Wn=Fn("years"),Gn=Math.round,Hn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Yn(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}var qn=Math.abs;function Xn(t){return(t>0)-(t<0)||+t}function $n(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,r,i,a,o,s,u=qn(this._milliseconds)/1e3,l=qn(this._days),c=qn(this._months),h=this.asSeconds();return h?(t=G(u/60),e=G(t/60),u%=60,t%=60,n=G(c/12),c%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=h<0?"-":"",a=Xn(this._months)!==Xn(h)?"-":"",o=Xn(this._days)!==Xn(h)?"-":"",s=Xn(this._milliseconds)!==Xn(h)?"-":"",i+"P"+(n?a+n+"Y":"")+(c?a+c+"M":"")+(l?o+l+"D":"")+(e||t||u?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(u?s+r+"S":"")):"P0D"}var Jn=Ce.prototype;return Jn.isValid=function(){return this._isValid},Jn.abs=function(){var t=this._data;return this._milliseconds=kn(this._milliseconds),this._days=kn(this._days),this._months=kn(this._months),t.milliseconds=kn(t.milliseconds),t.seconds=kn(t.seconds),t.minutes=kn(t.minutes),t.hours=kn(t.hours),t.months=kn(t.months),t.years=kn(t.years),this},Jn.add=function(t,e){return _n(this,t,e,1)},Jn.subtract=function(t,e){return _n(this,t,e,-1)},Jn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=j(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+Sn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(En(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},Jn.asMilliseconds=Ln,Jn.asSeconds=Dn,Jn.asMinutes=Cn,Jn.asHours=In,Jn.asDays=Mn,Jn.asWeeks=On,Jn.asMonths=Pn,Jn.asQuarters=Rn,Jn.asYears=Nn,Jn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*H(this._months/12):NaN},Jn._bubble=function(){var t,e,n,r,i,a=this._milliseconds,o=this._days,s=this._months,u=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*Tn(En(s)+o),o=0,s=0),u.milliseconds=a%1e3,t=G(a/1e3),u.seconds=t%60,e=G(t/60),u.minutes=e%60,n=G(e/60),u.hours=n%24,o+=G(n/24),i=G(Sn(o)),s+=i,o-=Tn(En(i)),r=G(s/12),s%=12,u.days=o,u.months=s,u.years=r,this},Jn.clone=function(){return Ue(this)},Jn.get=function(t){return t=j(t),this.isValid()?this[t+"s"]():NaN},Jn.milliseconds=zn,Jn.seconds=Vn,Jn.minutes=jn,Jn.hours=Un,Jn.days=Kn,Jn.weeks=function(){return G(this.days()/7)},Jn.months=Bn,Jn.years=Wn,Jn.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,a=Hn;return"object"===typeof t&&(e=t,t=!1),"boolean"===typeof t&&(i=t),"object"===typeof e&&(a=Object.assign({},Hn,e),null!=e.s&&null==e.ss&&(a.ss=e.s-1)),n=this.localeData(),r=function(t,e,n,r){var i=Ue(t).abs(),a=Gn(i.as("s")),o=Gn(i.as("m")),s=Gn(i.as("h")),u=Gn(i.as("d")),l=Gn(i.as("M")),c=Gn(i.as("w")),h=Gn(i.as("y")),f=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(f=f||c<=1&&["w"]||c<n.w&&["ww",c]),(f=f||l<=1&&["M"]||l<n.M&&["MM",l]||h<=1&&["y"]||["yy",h])[2]=e,f[3]=+t>0,f[4]=r,Yn.apply(null,f)}(this,!i,a,n),i&&(r=n.pastFuture(+this,r)),n.postformat(r)},Jn.toISOString=$n,Jn.toString=$n,Jn.toJSON=$n,Jn.locale=Ze,Jn.localeData=tn,Jn.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$n),Jn.lang=Qe,R("X",0,0,"unix"),R("x",0,0,"valueOf"),pt("x",lt),pt("X",/[+-]?\d+(\.\d{1,3})?/),vt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),vt("x",(function(t,e,n){n._d=new Date(H(t))})),r.version="2.29.1",e=Se,r.fn=mn,r.min=function(){var t=[].slice.call(arguments,0);return Le("isBefore",t)},r.max=function(){var t=[].slice.call(arguments,0);return Le("isAfter",t)},r.now=function(){return Date.now?Date.now():+new Date},r.utc=p,r.unix=function(t){return Se(1e3*t)},r.months=function(t,e){return bn(t,e,"months")},r.isDate=c,r.locale=ae,r.invalid=m,r.duration=Ue,r.isMoment=w,r.weekdays=function(t,e,n){return wn(t,e,n,"weekdays")},r.parseZone=function(){return Se.apply(null,arguments).parseZone()},r.localeData=se,r.isDuration=Ie,r.monthsShort=function(t,e){return bn(t,e,"monthsShort")},r.weekdaysMin=function(t,e,n){return wn(t,e,n,"weekdaysMin")},r.defineLocale=oe,r.updateLocale=function(t,e){if(null!=e){var n,r,i=Qt;null!=te[t]&&null!=te[t].parentLocale?te[t].set(L(te[t]._config,e)):(null!=(r=ie(t))&&(i=r._config),e=L(i,e),null==r&&(e.abbr=t),(n=new D(e)).parentLocale=te[t],te[t]=n),ae(t)}else null!=te[t]&&(null!=te[t].parentLocale?(te[t]=te[t].parentLocale,t===ae()&&ae(t)):null!=te[t]&&delete te[t]);return te[t]},r.locales=function(){return T(te)},r.weekdaysShort=function(t,e,n){return wn(t,e,n,"weekdaysShort")},r.normalizeUnits=j,r.relativeTimeRounding=function(t){return void 0===t?Gn:"function"===typeof t&&(Gn=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==Hn[t]&&(void 0===e?Hn[t]:(Hn[t]=e,"s"===t&&(Hn.ss=e-1),!0))},r.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=mn,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}).call(this,n(55)(t))},function(t,e,n){"use strict";t.exports=n(253)},function(t,e,n){"use strict";var r=n(76),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(t){return r.isMemo(t)?o:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(d){var i=p(n);i&&i!==d&&t(e,i,r)}var o=c(n);h&&(o=o.concat(h(n)));for(var s=u(e),g=u(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!g||!g[y])&&(!s||!s[y])){var v=f(n,y);try{l(e,y,v)}catch(x){}}}}return e}},function(t,e,n){t.exports=n(254)},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,s,u=o(t),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e,n){t.exports=n(158)()},function(t,e,n){var r=n(39),i=n(168),a=n(169),o=n(170),s=n(171),u=n(172);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=s,l.prototype.set=u,t.exports=l},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,n){var r=n(29),i=n(58);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(15))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e,n){var r=n(191),i=n(194),a=n(195);t.exports=function(t,e,n,o,s,u){var l=1&n,c=t.length,h=e.length;if(c!=h&&!(l&&h>c))return!1;var f=u.get(t),p=u.get(e);if(f&&p)return f==e&&p==t;var d=-1,g=!0,m=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++d<c;){var y=t[d],v=e[d];if(o)var x=l?o(v,y,d,e,t,u):o(y,v,d,t,e,u);if(void 0!==x){if(x)continue;g=!1;break}if(m){if(!i(e,(function(t,e){if(!a(m,e)&&(y===t||s(y,t,n,o,u)))return m.push(e)}))){g=!1;break}}else if(y!==v&&!s(y,v,n,o,u)){g=!1;break}}return u.delete(t),u.delete(e),g}},function(t,e,n){var r=n(209),i=n(30),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){(function(t){var r=n(10),i=n(210),a=e&&!e.nodeType&&e,o=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===a?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n(55)(t))},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(211),i=n(212),a=n(213),o=a&&a.isTypedArray,s=o?i(o):r;t.exports=s},function(t,e,n){var r=n(83),i=n(61);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(58);t.exports=function(t){return t===t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(95),i=n(44);t.exports=function(t,e){for(var n=0,a=(e=r(e,t)).length;null!=t&&n<a;)t=t[i(e[n++])];return n&&n==a?t:void 0}},function(t,e,n){var r=n(11),i=n(62),a=n(240),o=n(243);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:a(o(t))}},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(8);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var a;if(n)a=n(e);else if(r.isURLSearchParams(e))a=e.toString();else{var o=[];r.forEach(e,(function(t,e){null!==t&&"undefined"!==typeof t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),o.push(i(e)+"="+i(t))})))})),a=o.join("&")}if(a){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+a}return t}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";(function(e){var r=n(8),i=n(260),a={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s={adapter:function(){var t;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e))&&(t=n(100)),t}(),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){s.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){s.headers[t]=r.merge(a)})),t.exports=s}).call(this,n(23))},function(t,e,n){"use strict";var r=n(8),i=n(261),a=n(97),o=n(263),s=n(266),u=n(267),l=n(101);t.exports=function(t){return new Promise((function(e,c){var h=t.data,f=t.headers;r.isFormData(h)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",g=t.auth.password||"";f.Authorization="Basic "+btoa(d+":"+g)}var m=o(t.baseURL,t.url);if(p.open(t.method.toUpperCase(),a(m,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:t,request:p};i(e,c,r),p=null}},p.onabort=function(){p&&(c(l("Request aborted",t,"ECONNABORTED",p)),p=null)},p.onerror=function(){c(l("Network Error",t,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),c(l(e,t,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var y=n(268),v=(t.withCredentials||u(m))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;v&&(f[t.xsrfHeaderName]=v)}if("setRequestHeader"in p&&r.forEach(f,(function(t,e){"undefined"===typeof h&&"content-type"===e.toLowerCase()?delete f[e]:p.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),t.responseType)try{p.responseType=t.responseType}catch(x){if("json"!==t.responseType)throw x}"function"===typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){p&&(p.abort(),c(t),p=null)})),void 0===h&&(h=null),p.send(h)}))}},function(t,e,n){"use strict";var r=n(262);t.exports=function(t,e,n,i,a){var o=new Error(t);return r(o,e,n,i,a)}},function(t,e,n){"use strict";var r=n(8);t.exports=function(t,e){e=e||{};var n={},i=["url","method","params","data"],a=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(t){"undefined"!==typeof e[t]&&(n[t]=e[t])})),r.forEach(a,(function(i){r.isObject(e[i])?n[i]=r.deepMerge(t[i],e[i]):"undefined"!==typeof e[i]?n[i]=e[i]:r.isObject(t[i])?n[i]=r.deepMerge(t[i]):"undefined"!==typeof t[i]&&(n[i]=t[i])})),r.forEach(o,(function(r){"undefined"!==typeof e[r]?n[r]=e[r]:"undefined"!==typeof t[r]&&(n[r]=t[r])}));var s=i.concat(a).concat(o),u=Object.keys(e).filter((function(t){return-1===s.indexOf(t)}));return r.forEach(u,(function(r){"undefined"!==typeof e[r]?n[r]=e[r]:"undefined"!==typeof t[r]&&(n[r]=t[r])})),n}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e){t.exports={activate:function(t){return t>0?t:.01*t},measure:function(t,e){return t>0?e:.01*e}}},function(t,e){t.exports={activate:function(t){return Math.max(0,t)},measure:function(t,e){return t<=0?0:e}}},function(t,e){t.exports={activate:function(t){return 1/(1+Math.exp(-t))},measure:function(t,e){return t*(1-t)*e}}},function(t,e){t.exports={activate:function(t){return Math.tanh(t)},measure:function(t,e){return(1-t*t)*e}}},function(t,e,n){var r=n(16),i=r.Add,a=r.add,o=n(282).arthurFeedForward,s=n(24).Base,u=n(283),l=u.Convolution,c=u.convolution,h=n(284),f=h.Dropout,p=h.dropout,d=n(285).feedForward,g=n(286),m=g.FullyConnected,y=g.fullyConnected,v=n(287).gru,x=n(289),b=x.Input,w=x.input,k=n(290),_=k.LeakyRelu,T=k.leakyRelu,S=n(291).lstmCell,E=n(18),A=E.Multiply,L=E.multiply,D=n(65),C=D.MultiplyElement,I=D.multiplyElement,M=n(120),O=M.Negative,P=M.negative,R=n(121),N=R.Ones,F=R.ones,z=n(292).output,V=n(293),j=V.Pool,U=V.pool,K=n(17),B=K.Random,W=K.random,G=n(294).rnnCell,H=n(295),Y=H.Regression,q=H.regression,X=n(124),$=X.Relu,J=X.relu,Z=n(33),Q=Z.Sigmoid,tt=Z.sigmoid,et=n(296),nt=et.SoftMax,rt=et.softMax,it=n(297),at=it.SVM,ot=it.svm,st=n(66),ut=st.Tanh,lt=st.tanh,ct=n(123),ht=ct.Target,ft=ct.target,pt=n(298),dt=pt.Transpose,gt=pt.transpose,mt=n(48),yt=mt.Zeros,vt=mt.zeros,xt=n(6);t.exports={Add:i,add:a,arthurFeedForward:o,Base:s,Convolution:l,convolution:c,Dropout:f,dropout:p,feedForward:d,FullyConnected:m,fullyConnected:y,gru:v,Input:b,input:w,LeakyRelu:_,leakyRelu:T,lstmCell:S,Multiply:A,multiply:L,MultiplyElement:C,multiplyElement:I,Negative:O,negative:P,Ones:N,ones:F,output:z,Pool:j,pool:U,Random:B,random:W,Regression:Y,regression:q,Relu:$,relu:J,rnnCell:G,Sigmoid:Q,sigmoid:tt,SoftMax:nt,softMax:rt,SVM:at,svm:ot,Tanh:ut,tanh:lt,Target:ht,target:ft,Transpose:dt,transpose:gt,Zeros:yt,zeros:vt,types:xt}},function(t,e,n){var r=n(110),i=n(13),a=n(9),o=n(1),s=n(2),u=n(3),l=n(4),c=n(278);t.exports=function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};e[o][0].call(l.exports,(function(t){return i(e[o][1][t]||t)}),l,l.exports,t,e,n,r)}return n[o].exports}for(var a=!1,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){var r;r=this,function(t){"use strict";var e={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},n="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",r={5:n,"5module":n+" export import",6:n+" const class extends export import super"},i=/^in(stanceof)?$/,a="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",o="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",s=new RegExp("["+a+"]"),u=new RegExp("["+a+o+"]");a=o=null;var l=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],c=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function h(t,e){for(var n=65536,r=0;r<e.length;r+=2){if((n+=e[r])>t)return!1;if((n+=e[r+1])>=t)return!0}}function f(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&s.test(String.fromCharCode(t)):!1!==e&&h(t,l)))}function p(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&u.test(String.fromCharCode(t)):!1!==e&&(h(t,l)||h(t,c)))))}var d=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function g(t,e){return new d(t,{beforeExpr:!0,binop:e})}var m={beforeExpr:!0},y={startsExpr:!0},v={};function x(t,e){return void 0===e&&(e={}),e.keyword=t,v[t]=new d(t,e)}var b={num:new d("num",y),regexp:new d("regexp",y),string:new d("string",y),name:new d("name",y),eof:new d("eof"),bracketL:new d("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new d("]"),braceL:new d("{",{beforeExpr:!0,startsExpr:!0}),braceR:new d("}"),parenL:new d("(",{beforeExpr:!0,startsExpr:!0}),parenR:new d(")"),comma:new d(",",m),semi:new d(";",m),colon:new d(":",m),dot:new d("."),question:new d("?",m),arrow:new d("=>",m),template:new d("template"),invalidTemplate:new d("invalidTemplate"),ellipsis:new d("...",m),backQuote:new d("`",y),dollarBraceL:new d("${",{beforeExpr:!0,startsExpr:!0}),eq:new d("=",{beforeExpr:!0,isAssign:!0}),assign:new d("_=",{beforeExpr:!0,isAssign:!0}),incDec:new d("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new d("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:g("||",1),logicalAND:g("&&",2),bitwiseOR:g("|",3),bitwiseXOR:g("^",4),bitwiseAND:g("&",5),equality:g("==/!=/===/!==",6),relational:g("</>/<=/>=",7),bitShift:g("<</>>/>>>",8),plusMin:new d("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:g("%",10),star:g("*",10),slash:g("/",10),starstar:new d("**",{beforeExpr:!0}),_break:x("break"),_case:x("case",m),_catch:x("catch"),_continue:x("continue"),_debugger:x("debugger"),_default:x("default",m),_do:x("do",{isLoop:!0,beforeExpr:!0}),_else:x("else",m),_finally:x("finally"),_for:x("for",{isLoop:!0}),_function:x("function",y),_if:x("if"),_return:x("return",m),_switch:x("switch"),_throw:x("throw",m),_try:x("try"),_var:x("var"),_const:x("const"),_while:x("while",{isLoop:!0}),_with:x("with"),_new:x("new",{beforeExpr:!0,startsExpr:!0}),_this:x("this",y),_super:x("super",y),_class:x("class",y),_extends:x("extends",m),_export:x("export"),_import:x("import",y),_null:x("null",y),_true:x("true",y),_false:x("false",y),_in:x("in",{beforeExpr:!0,binop:7}),_instanceof:x("instanceof",{beforeExpr:!0,binop:7}),_typeof:x("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:x("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:x("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},w=/\r\n?|\n|\u2028|\u2029/,k=new RegExp(w.source,"g");function _(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var T=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,S=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,E=Object.prototype,A=E.hasOwnProperty,L=E.toString;function D(t,e){return A.call(t,e)}var C=Array.isArray||function(t){return"[object Array]"===L.call(t)};function I(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var M=function(t,e){this.line=t,this.column=e};M.prototype.offset=function(t){return new M(this.line,this.column+t)};var O=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function P(t,e){for(var n=1,r=0;;){k.lastIndex=r;var i=k.exec(t);if(!(i&&i.index<e))return new M(n,e-r);++n,r=i.index+i[0].length}}var R={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function N(t){var e={};for(var n in R)e[n]=t&&D(t,n)?t[n]:R[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),C(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return C(e.onComment)&&(e.onComment=function(t,e){return function(n,r,i,a,o,s){var u={type:n?"Block":"Line",value:r,start:i,end:a};t.locations&&(u.loc=new O(this,o,s)),t.ranges&&(u.range=[i,a]),e.push(u)}}(e,e.onComment)),e}function F(t,e){return 2|(t?4:0)|(e?8:0)}var z=function(t,n,i){this.options=t=N(t),this.sourceFile=t.sourceFile,this.keywords=I(r[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var a="";if(!0!==t.allowReserved){for(var o=t.ecmaVersion;!(a=e[o]);o--);"module"===t.sourceType&&(a+=" await")}this.reservedWords=I(a);var s=(a?a+" ":"")+e.strict;this.reservedWordsStrict=I(s),this.reservedWordsStrictBind=I(s+" "+e.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(w).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=b.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},V={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};z.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},V.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},V.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},V.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},V.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},V.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},V.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},z.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},z.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,r=0;r<t.length;r++)n=t[r](n);return n},z.parse=function(t,e){return new this(e,t).parse()},z.parseExpressionAt=function(t,e,n){var r=new this(n,t,e);return r.nextToken(),r.parseExpression()},z.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(z.prototype,V);var j=z.prototype,U=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function K(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}j.strictDirective=function(t){for(;;){S.lastIndex=t,t+=S.exec(this.input)[0].length;var e=U.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;t+=e[0].length,S.lastIndex=t,t+=S.exec(this.input)[0].length,";"===this.input[t]&&t++}},j.eat=function(t){return this.type===t&&(this.next(),!0)},j.isContextual=function(t){return this.type===b.name&&this.value===t&&!this.containsEsc},j.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},j.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},j.canInsertSemicolon=function(){return this.type===b.eof||this.type===b.braceR||w.test(this.input.slice(this.lastTokEnd,this.start))},j.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},j.semicolon=function(){this.eat(b.semi)||this.insertSemicolon()||this.unexpected()},j.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},j.expect=function(t){this.eat(t)||this.unexpected()},j.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},j.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},j.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,r=t.doubleProto;if(!e)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},j.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},j.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var B=z.prototype;B.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==b.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var W={kind:"loop"},G={kind:"switch"};B.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;S.lastIndex=this.pos;var e=S.exec(this.input),n=this.pos+e[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(t)return!1;if(123===r)return!0;if(f(r,!0)){for(var a=n+1;p(this.input.charCodeAt(a),!0);)++a;var o=this.input.slice(n,a);if(!i.test(o))return!0}return!1},B.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;S.lastIndex=this.pos;var t=S.exec(this.input),e=this.pos+t[0].length;return!w.test(this.input.slice(this.pos,e))&&"function"===this.input.slice(e,e+8)&&(e+8===this.input.length||!p(this.input.charAt(e+8)))},B.parseStatement=function(t,e,n){var r,i=this.type,a=this.startNode();switch(this.isLet(t)&&(i=b._var,r="let"),i){case b._break:case b._continue:return this.parseBreakContinueStatement(a,i.keyword);case b._debugger:return this.parseDebuggerStatement(a);case b._do:return this.parseDoStatement(a);case b._for:return this.parseForStatement(a);case b._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!t);case b._class:return t&&this.unexpected(),this.parseClass(a,!0);case b._if:return this.parseIfStatement(a);case b._return:return this.parseReturnStatement(a);case b._switch:return this.parseSwitchStatement(a);case b._throw:return this.parseThrowStatement(a);case b._try:return this.parseTryStatement(a);case b._const:case b._var:return r=r||this.value,t&&"var"!==r&&this.unexpected(),this.parseVarStatement(a,r);case b._while:return this.parseWhileStatement(a);case b._with:return this.parseWithStatement(a);case b.braceL:return this.parseBlock(!0,a);case b.semi:return this.parseEmptyStatement(a);case b._export:case b._import:if(this.options.ecmaVersion>10&&i===b._import){S.lastIndex=this.pos;var o=S.exec(this.input),s=this.pos+o[0].length;if(40===this.input.charCodeAt(s))return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===b._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!t);var u=this.value,l=this.parseExpression();return i===b.name&&"Identifier"===l.type&&this.eat(b.colon)?this.parseLabeledStatement(a,u,l,t):this.parseExpressionStatement(a,l)}},B.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(b.semi)||this.insertSemicolon()?t.label=null:this.type!==b.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(t.label&&n)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},B.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},B.parseDoStatement=function(t){return this.next(),this.labels.push(W),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(b._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(b.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},B.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(W),this.enterScope(0),this.expect(b.parenL),this.type===b.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===b._var||this.type===b._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===b._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r)):(e>-1&&this.unexpected(e),this.parseFor(t,r))}var a=new K,o=this.parseExpression(!0,a);return this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===b._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(o,!1,a),this.checkLVal(o),this.parseForIn(t,o)):(this.checkExpressionErrors(a,!0),e>-1&&this.unexpected(e),this.parseFor(t,o))},B.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,Y|(n?0:q),!1,e)},B.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(b._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},B.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(b.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},B.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(b.braceL),this.labels.push(G),this.enterScope(0);for(var n=!1;this.type!==b.braceR;)if(this.type===b._case||this.type===b._default){var r=this.type===b._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(b.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},B.parseThrowStatement=function(t){return this.next(),w.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var H=[];B.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===b._catch){var e=this.startNode();if(this.next(),this.eat(b.parenL)){e.param=this.parseBindingAtom();var n="Identifier"===e.param.type;this.enterScope(n?32:0),this.checkLVal(e.param,n?4:2),this.expect(b.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(b._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},B.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},B.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(W),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},B.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},B.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},B.parseLabeledStatement=function(t,e,n,r){for(var i=0,a=this.labels;i<a.length;i+=1)a[i].name===e&&this.raise(n.start,"Label '"+e+"' is already declared");for(var o=this.type.isLoop?"loop":this.type===b._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var u=this.labels[s];if(u.statementStart!==t.start)break;u.statementStart=this.start,u.kind=o}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},B.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},B.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(b.braceL),t&&this.enterScope(0);!this.eat(b.braceR);){var n=this.parseStatement(null);e.body.push(n)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},B.parseFor=function(t,e){return t.init=e,this.expect(b.semi),t.test=this.type===b.semi?null:this.parseExpression(),this.expect(b.semi),t.update=this.type===b.parenR?null:this.parseExpression(),this.expect(b.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},B.parseForIn=function(t,e){var n=this.type===b._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)?this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(b.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},B.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(b.eq)?r.init=this.parseMaybeAssign(e):"const"!==n||this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||e&&(this.type===b._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(b.comma))break}return t},B.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?1:2,!1)};var Y=1,q=2;B.parseFunction=function(t,e,n,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===b.star&&e&q&&this.unexpected(),t.generator=this.eat(b.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&Y&&(t.id=4&e&&this.type!==b.name?null:this.parseIdent(),!t.id||e&q||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(F(t.async,t.generator)),e&Y||(t.id=this.type===b.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&Y?"FunctionDeclaration":"FunctionExpression")},B.parseFunctionParams=function(t){this.expect(b.parenL),t.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},B.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var r=this.startNode(),i=!1;for(r.body=[],this.expect(b.braceL);!this.eat(b.braceR);){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(i&&this.raise(a.start,"Duplicate constructor in the same class"),i=!0))}return t.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},B.parseClassElement=function(t){var e=this;if(this.eat(b.semi))return null;var n=this.startNode(),r=function(t,r){void 0===r&&(r=!1);var i=e.start,a=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===b.parenL||r&&e.canInsertSemicolon())||(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(i,a),n.key.name=t,e.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(b.star),a=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(a=!0,i=this.options.ecmaVersion>=9&&this.eat(b.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var o=n.key,s=!1;return n.computed||n.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?n.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),i&&this.raise(o.start,"Constructor can't be a generator"),a&&this.raise(o.start,"Constructor can't be an async method"),n.kind="constructor",s=t),this.parseClassMethod(n,i,a,s),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},B.parseClassMethod=function(t,e,n,r){return t.value=this.parseMethod(e,n,r),this.finishNode(t,"MethodDefinition")},B.parseClassId=function(t,e){this.type===b.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},B.parseClassSuper=function(t){t.superClass=this.eat(b._extends)?this.parseExprSubscripts():null},B.parseExport=function(t,e){if(this.next(),this.eat(b.star))return this.expectContextual("from"),this.type!==b.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(b._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===b._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(r,4|Y,!1,n)}else if(this.type===b._class){var i=this.startNode();t.declaration=this.parseClass(i,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==b.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,o=t.specifiers;a<o.length;a+=1){var s=o[a];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},B.checkExport=function(t,e,n){t&&(D(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},B.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===n)for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(t,a)}else if("ArrayPattern"===n)for(var o=0,s=e.elements;o<s.length;o+=1){var u=s[o];u&&this.checkPatternExport(t,u)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},B.checkVariableExport=function(t,e){if(t)for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.checkPatternExport(t,i.id)}},B.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},B.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(b.braceL);!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,"ExportSpecifier"))}return e},B.parseImport=function(t){return this.next(),this.type===b.string?(t.specifiers=H,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===b.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},B.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===b.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(b.comma))return t}if(this.type===b.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}for(this.expect(b.braceL);!this.eat(b.braceR);){if(e)e=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),t.push(this.finishNode(i,"ImportSpecifier"))}return t},B.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},B.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"===typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var X=z.prototype;X.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,e),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},X.toAssignableList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];i&&this.toAssignable(i,e)}if(n){var a=t[n-1];6===this.options.ecmaVersion&&e&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return t},X.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},X.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==b.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},X.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case b.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(b.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case b.braceL:return this.parseObj(!0)}return this.parseIdent()},X.parseBindingList=function(t,e,n){for(var r=[],i=!0;!this.eat(t);)if(i?i=!1:this.expect(b.comma),e&&this.type===b.comma)r.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===b.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),r.push(o)}return r},X.parseBindingListItem=function(t){return t},X.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(b.eq))return n;var r=this.startNodeAt(t,e);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},X.checkLVal=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"Identifier":2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(D(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),0!==e&&5!==e&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkLVal(a,e,n)}break;case"Property":this.checkLVal(t.value,e,n);break;case"ArrayPattern":for(var o=0,s=t.elements;o<s.length;o+=1){var u=s[o];u&&this.checkLVal(u,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var $=z.prototype;$.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type)&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,i=t.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var a=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===a&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),e.proto=!0);else{var o=e[r="$"+r];o?("init"===a?this.strict&&o.init||o.get||o.set:o.init||o[a])&&this.raiseRecoverable(i.start,"Redefinition of property"):o=e[r]={init:!1,get:!1,set:!1},o[a]=!0}}},$.parseExpression=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type===b.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(b.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,"SequenceExpression")}return i},$.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,i=-1,a=-1;e?(i=e.parenthesizedAssign,a=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new K,r=!0);var o=this.start,s=this.startLoc;this.type!==b.parenL&&this.type!==b.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(t,e);if(n&&(u=n.call(this,u,o,s)),this.type.isAssign){var l=this.startNodeAt(o,s);return l.operator=this.value,l.left=this.type===b.eq?this.toAssignable(u,!1,e):u,r||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=l.left.start&&(e.shorthandAssign=-1),this.checkLVal(u),this.next(),l.right=this.parseMaybeAssign(t),this.finishNode(l,"AssignmentExpression")}return r&&this.checkExpressionErrors(e,!0),i>-1&&(e.parenthesizedAssign=i),a>-1&&(e.trailingComma=a),u},$.parseMaybeConditional=function(t,e){var n=this.start,r=this.startLoc,i=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return i;if(this.eat(b.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(b.colon),a.alternate=this.parseMaybeAssign(t),this.finishNode(a,"ConditionalExpression")}return i},$.parseExprOps=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,t)},$.parseExprOp=function(t,e,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==b._in)&&a>r){var o=this.type===b.logicalOR||this.type===b.logicalAND,s=this.value;this.next();var u=this.start,l=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),u,l,a,i),h=this.buildBinary(e,n,t,c,s,o);return this.parseExprOp(h,e,n,r,i)}return t},$.buildBinary=function(t,e,n,r,i,a){var o=this.startNodeAt(t,e);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,a?"LogicalExpression":"BinaryExpression")},$.parseMaybeUnary=function(t,e){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var a=this.startNode(),o=this.type===b.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),o?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(a,o?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(r,i);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!e&&this.eat(b.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},$.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,r=this.parseExprAtom(t);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var i=this.parseSubscripts(r,e,n);return t&&"MemberExpression"===i.type&&(t.parenthesizedAssign>=i.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=i.start&&(t.parenthesizedBind=-1)),i},$.parseSubscripts=function(t,e,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var a=this.parseSubscript(t,e,n,r,i);if(a===t||"ArrowFunctionExpression"===a.type)return a;t=a}},$.parseSubscript=function(t,e,n,r,i){var a=this.eat(b.bracketL);if(a||this.eat(b.dot)){var o=this.startNodeAt(e,n);o.object=t,o.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),o.computed=!!a,a&&this.expect(b.bracketR),t=this.finishNode(o,"MemberExpression")}else if(!r&&this.eat(b.parenL)){var s=new K,u=this.yieldPos,l=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1,s);if(i&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(s,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=u,this.awaitPos=l,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(e,n),h,!0);this.checkExpressionErrors(s,!0),this.yieldPos=u||this.yieldPos,this.awaitPos=l||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var f=this.startNodeAt(e,n);f.callee=t,f.arguments=h,t=this.finishNode(f,"CallExpression")}else if(this.type===b.backQuote){var p=this.startNodeAt(e,n);p.tag=t,p.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(p,"TaggedTemplateExpression")}return t},$.parseExprAtom=function(t){this.type===b.slash&&this.readRegexp();var e,n=this.potentialArrowAt===this.start;switch(this.type){case b._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==b.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==b.dot&&this.type!==b.bracketL&&this.type!==b.parenL&&this.unexpected(),this.finishNode(e,"Super");case b._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case b.name:var r=this.start,i=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(b._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(b.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===b.name&&!a)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(b.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[o],!0)}return o;case b.regexp:var s=this.value;return(e=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},e;case b.num:case b.string:return this.parseLiteral(this.value);case b._null:case b._true:case b._false:return(e=this.startNode()).value=this.type===b._null?null:this.type===b._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case b.parenL:var u=this.start,l=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(t.parenthesizedAssign=u),t.parenthesizedBind<0&&(t.parenthesizedBind=u)),l;case b.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(b.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case b.braceL:return this.parseObj(!1,t);case b._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case b._class:return this.parseClass(this.startNode(),!1);case b._new:return this.parseNew();case b.backQuote:return this.parseTemplate();case b._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},$.parseExprImport=function(){var t=this.startNode();switch(this.next(),this.type){case b.parenL:return this.parseDynamicImport(t);default:this.unexpected()}},$.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(b.parenR)){var e=this.start;this.eat(b.comma)&&this.eat(b.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},$.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1)),this.next(),this.finishNode(e,"Literal")},$.parseParenExpression=function(){this.expect(b.parenL);var t=this.parseExpression();return this.expect(b.parenR),t},$.parseParenAndDistinguishExpression=function(t){var e,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,s=this.startLoc,u=[],l=!0,c=!1,h=new K,f=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==b.parenR;){if(l?l=!1:this.expect(b.comma),i&&this.afterTrailingComma(b.parenR,!0)){c=!0;break}if(this.type===b.ellipsis){a=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var d=this.start,g=this.startLoc;if(this.expect(b.parenR),t&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=p,this.parseParenArrowList(n,r,u);u.length&&!c||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(h,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=p||this.awaitPos,u.length>1?((e=this.startNodeAt(o,s)).expressions=u,this.finishNodeAt(e,"SequenceExpression",d,g)):e=u[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(n,r);return m.expression=e,this.finishNode(m,"ParenthesizedExpression")}return e},$.parseParenItem=function(t){return t},$.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var J=[];$.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(b.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||n)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var r=this.start,i=this.startLoc,a=this.type===b._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),a&&"ImportExpression"===t.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(b.parenL)?t.arguments=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1):t.arguments=J,this.finishNode(t,"NewExpression")},$.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===b.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===b.backQuote,this.finishNode(n,"TemplateElement")},$.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(n.quasis=[r];!r.tail;)this.type===b.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(b.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(b.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},$.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===b.name||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===b.star)&&!w.test(this.input.slice(this.lastTokEnd,this.start))},$.parseObj=function(t,e){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(b.braceR);){if(r)r=!1;else if(this.expect(b.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(b.braceR))break;var a=this.parseProperty(t,e);t||this.checkPropClash(a,i,e),n.properties.push(a)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},$.parseProperty=function(t,e){var n,r,i,a,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(b.ellipsis))return t?(o.argument=this.parseIdent(!1),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===b.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,e),this.type===b.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(i=this.start,a=this.startLoc),t||(n=this.eat(b.star)));var s=this.containsEsc;return this.parsePropertyName(o),!t&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(b.star),this.parsePropertyName(o,e)):r=!1,this.parsePropertyValue(o,t,n,r,i,a,e,s),this.finishNode(o,"Property")},$.parsePropertyValue=function(t,e,n,r,i,a,o,s){if((n||r)&&this.type===b.colon&&this.unexpected(),this.eat(b.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===b.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,r);else if(e||s||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===b.comma||this.type===b.braceR)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),t.kind="init",e?t.value=this.parseMaybeDefault(i,a,t.key):this.type===b.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,a,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var u="get"===t.kind?0:1;if(t.value.params.length!==u){var l=t.value.start;"get"===t.kind?this.raiseRecoverable(l,"getter should have no params"):this.raiseRecoverable(l,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},$.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(b.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(b.bracketR),t.key;t.computed=!1}return t.key=this.type===b.num||this.type===b.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},$.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},$.parseMethod=function(t,e,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|F(e,r.generator)|(n?128:0)),this.expect(b.parenL),r.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")},$.parseArrowExpression=function(t,e,n){var r=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|F(n,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},$.parseFunctionBody=function(t,e,n){var r=e&&this.type!==b.braceL,i=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);i&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var s=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!i&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=s}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,5),this.strict=i},$.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1)if("Identifier"!==n[e].type)return!1;return!0},$.checkParams=function(t,e){for(var n={},r=0,i=t.params;r<i.length;r+=1){var a=i[r];this.checkLVal(a,1,e?null:n)}},$.parseExprList=function(t,e,n,r){for(var i=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(b.comma),e&&this.afterTrailingComma(t))break;var o=void 0;n&&this.type===b.comma?o=null:this.type===b.ellipsis?(o=this.parseSpread(r),r&&this.type===b.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i},$.checkUnreserved=function(t){var e=t.start,n=t.end,r=t.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))},$.parseIdent=function(t,e){var n=this.startNode();return this.type===b.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(n,"Identifier"),t||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},$.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===b.semi||this.canInsertSemicolon()||this.type!==b.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(b.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},$.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!1),this.finishNode(t,"AwaitExpression")};var Z=z.prototype;Z.raise=function(t,e){var n=P(this.input,t);e+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r},Z.raiseRecoverable=Z.raise,Z.curPosition=function(){if(this.options.locations)return new M(this.curLine,this.pos-this.lineStart)};var Q=z.prototype,tt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};Q.enterScope=function(t){this.scopeStack.push(new tt(t))},Q.exitScope=function(){this.scopeStack.pop()},Q.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},Q.declareName=function(t,e,n){var r=!1;if(2===e){var i=this.currentScope();r=i.lexical.indexOf(t)>-1||i.functions.indexOf(t)>-1||i.var.indexOf(t)>-1,i.lexical.push(t),this.inModule&&1&i.flags&&delete this.undefinedExports[t]}else if(4===e)this.currentScope().lexical.push(t);else if(3===e){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var s=this.scopeStack[o];if(s.lexical.indexOf(t)>-1&&!(32&s.flags&&s.lexical[0]===t)||!this.treatFunctionsAsVarInScope(s)&&s.functions.indexOf(t)>-1){r=!0;break}if(s.var.push(t),this.inModule&&1&s.flags&&delete this.undefinedExports[t],3&s.flags)break}r&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},Q.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},Q.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Q.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags)return e}},Q.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags&&!(16&e.flags))return e}};var et=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new O(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},nt=z.prototype;function rt(t,e,n,r){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}nt.startNode=function(){return new et(this,this.start,this.startLoc)},nt.startNodeAt=function(t,e){return new et(this,t,e)},nt.finishNode=function(t,e){return rt.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},nt.finishNodeAt=function(t,e,n,r){return rt.call(this,t,e,n,r)};var it=function(t,e,n,r,i){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=r,this.generator=!!i},at={b_stat:new it("{",!1),b_expr:new it("{",!0),b_tmpl:new it("${",!1),p_stat:new it("(",!1),p_expr:new it("(",!0),q_tmpl:new it("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new it("function",!1),f_expr:new it("function",!0),f_expr_gen:new it("function",!0,!1,null,!0),f_gen:new it("function",!1,!1,null,!0)},ot=z.prototype;ot.initialContext=function(){return[at.b_stat]},ot.braceIsBlock=function(t){var e=this.curContext();return e===at.f_expr||e===at.f_stat||(t!==b.colon||e!==at.b_stat&&e!==at.b_expr?t===b._return||t===b.name&&this.exprAllowed?w.test(this.input.slice(this.lastTokEnd,this.start)):t===b._else||t===b.semi||t===b.eof||t===b.parenR||t===b.arrow||(t===b.braceL?e===at.b_stat:t!==b._var&&t!==b._const&&t!==b.name&&!this.exprAllowed):!e.isExpr)},ot.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},ot.updateContext=function(t){var e,n=this.type;n.keyword&&t===b.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},b.parenR.updateContext=b.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===at.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},b.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?at.b_stat:at.b_expr),this.exprAllowed=!0},b.dollarBraceL.updateContext=function(){this.context.push(at.b_tmpl),this.exprAllowed=!0},b.parenL.updateContext=function(t){var e=t===b._if||t===b._for||t===b._with||t===b._while;this.context.push(e?at.p_stat:at.p_expr),this.exprAllowed=!0},b.incDec.updateContext=function(){},b._function.updateContext=b._class.updateContext=function(t){!t.beforeExpr||t===b.semi||t===b._else||t===b._return&&w.test(this.input.slice(this.lastTokEnd,this.start))||(t===b.colon||t===b.braceL)&&this.curContext()===at.b_stat?this.context.push(at.f_stat):this.context.push(at.f_expr),this.exprAllowed=!1},b.backQuote.updateContext=function(){this.curContext()===at.q_tmpl?this.context.pop():this.context.push(at.q_tmpl),this.exprAllowed=!1},b.star.updateContext=function(t){if(t===b._function){var e=this.context.length-1;this.context[e]===at.f_expr?this.context[e]=at.f_expr_gen:this.context[e]=at.f_gen}this.exprAllowed=!0},b.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==b.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var st="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ut=st+" Extended_Pictographic",lt={9:st,10:ut,11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic"},ct="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ht="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ft=ht+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",pt={9:ht,10:ft,11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},dt={};function gt(t){var e=dt[t]={binary:I(lt[t]+" "+ct),nonBinary:{General_Category:I(ct),Script:I(pt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}gt(9),gt(10),gt(11);var mt=z.prototype,yt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=dt[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function vt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function xt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function bt(t){return t>=65&&t<=90||t>=97&&t<=122}function wt(t){return bt(t)||95===t}function kt(t){return wt(t)||_t(t)}function _t(t){return t>=48&&t<=57}function Tt(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function St(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Et(t){return t>=48&&t<=55}yt.prototype.reset=function(t,e,n){var r=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},yt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},yt.prototype.at=function(t){var e=this.source,n=e.length;if(t>=n)return-1;var r=e.charCodeAt(t);if(!this.switchU||r<=55295||r>=57344||t+1>=n)return r;var i=e.charCodeAt(t+1);return i>=56320&&i<=57343?(r<<10)+i-56613888:r},yt.prototype.nextIndex=function(t){var e=this.source,n=e.length;if(t>=n)return n;var r,i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=n||(r=e.charCodeAt(t+1))<56320||r>57343?t+1:t+2},yt.prototype.current=function(){return this.at(this.pos)},yt.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},yt.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},yt.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},mt.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===e.indexOf(i)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},mt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},mt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var r=n[e];-1===t.groupNames.indexOf(r)&&t.raise("Invalid named capture referenced")}},mt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},mt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},mt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},mt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},mt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},mt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},mt.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue),t.eat(125)))return-1!==i&&i<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},mt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},mt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},mt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},mt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},mt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},mt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},mt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!xt(e)&&(t.lastIntValue=e,t.advance(),!0)},mt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!xt(n);)t.advance();return t.pos!==e},mt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},mt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},mt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},mt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=vt(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=vt(t.lastIntValue);return!0}return!1},mt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return f(t,!0)||36===t||95===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},mt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return p(t,!0)||36===t||95===t||8204===t||8205===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},mt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},mt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},mt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},mt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},mt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},mt.regexp_eatZero=function(t){return 48===t.current()&&!_t(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},mt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},mt.regexp_eatControlLetter=function(t){var e=t.current();return!!bt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},mt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e,n=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(t.switchU&&r>=55296&&r<=56319){var i=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=1024*(r-55296)+(a-56320)+65536,!0}t.pos=i,t.lastIntValue=r}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&(e=t.lastIntValue)>=0&&e<=1114111)return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=n}return!1},mt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},mt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},mt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},mt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,r),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,i),!0}return!1},mt.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){D(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},mt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},mt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";wt(e=t.current());)t.lastStringValue+=vt(e),t.advance();return""!==t.lastStringValue},mt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";kt(e=t.current());)t.lastStringValue+=vt(e),t.advance();return""!==t.lastStringValue},mt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},mt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},mt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},mt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||Et(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},mt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},mt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!_t(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},mt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},mt.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;_t(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},mt.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Tt(n=t.current());)t.lastIntValue=16*t.lastIntValue+St(n),t.advance();return t.pos!==e},mt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},mt.regexp_eatOctalDigit=function(t){var e=t.current();return Et(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},mt.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var i=t.current();if(!Tt(i))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+St(i),t.advance()}return!0};var At=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new O(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Lt=z.prototype;function Dt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}Lt.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new At(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Lt.getToken=function(){return this.next(),new At(this)},"undefined"!==typeof Symbol&&(Lt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===b.eof,value:e}}}}),Lt.curContext=function(){return this.context[this.context.length-1]},Lt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(b.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Lt.readToken=function(t){return f(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Lt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},Lt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(k.lastIndex=n;(t=k.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,e,this.curPosition())},Lt.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!_(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},Lt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&T.test(String.fromCharCode(t))))break t;++this.pos}}},Lt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},Lt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(b.ellipsis)):(++this.pos,this.finishToken(b.dot))},Lt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(b.assign,2):this.finishOp(b.slash,1)},Lt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,r=42===t?b.star:b.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,r=b.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(b.assign,n+1):this.finishOp(r,n)},Lt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?b.logicalOR:b.logicalAND,2):61===e?this.finishOp(b.assign,2):this.finishOp(124===t?b.bitwiseOR:b.bitwiseAND,1)},Lt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(b.assign,2):this.finishOp(b.bitwiseXOR,1)},Lt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!w.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(b.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(b.assign,2):this.finishOp(b.plusMin,1)},Lt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(b.assign,n+1):this.finishOp(b.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(b.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Lt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(b.arrow)):this.finishOp(61===t?b.eq:b.prefix,1)},Lt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(b.parenL);case 41:return++this.pos,this.finishToken(b.parenR);case 59:return++this.pos,this.finishToken(b.semi);case 44:return++this.pos,this.finishToken(b.comma);case 91:return++this.pos,this.finishToken(b.bracketL);case 93:return++this.pos,this.finishToken(b.bracketR);case 123:return++this.pos,this.finishToken(b.braceL);case 125:return++this.pos,this.finishToken(b.braceR);case 58:return++this.pos,this.finishToken(b.colon);case 63:return++this.pos,this.finishToken(b.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(b.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(b.prefix,1)}this.raise(this.pos,"Unexpected character '"+Dt(t)+"'")},Lt.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},Lt.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(w.test(r)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(a);var s=this.regexpState||(this.regexpState=new yt(this));s.reset(n,i,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var u=null;try{u=new RegExp(i,o)}catch(l){}return this.finishToken(b.regexp,{pattern:i,flags:o,value:u})},Lt.readInt=function(t,e){for(var n=this.pos,r=0,i=0,a=null==e?1/0:e;i<a;++i){var o=this.input.charCodeAt(this.pos),s=void 0;if((s=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++this.pos,r=r*t+s}return this.pos===n||null!=e&&this.pos-n!==e?null:r},Lt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!==typeof BigInt?BigInt(this.input.slice(e,this.pos)):null,++this.pos):f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,n)},Lt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===r){var i=this.input.slice(e,this.pos),a="undefined"!==typeof BigInt?BigInt(i):null;return++this.pos,f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,a)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=this.input.slice(e,this.pos),s=n?parseInt(o,8):parseFloat(o);return this.finishToken(b.num,s)},Lt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Lt.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(_(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(b.string,e)};var Ct={};Lt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Ct)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Lt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ct;this.raise(t,e)},Lt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==b.template&&this.type!==b.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(b.template,t)):36===n?(this.pos+=2,this.finishToken(b.dollarBraceL)):(++this.pos,this.finishToken(b.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(_(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Lt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(b.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Lt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Dt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(t){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,e=this.input.charCodeAt(this.pos),"0"===r&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-r.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return _(e)?"":String.fromCharCode(e)}},Lt.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},Lt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(p(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(e?f:p)(o,r)||this.invalidStringToken(a,"Invalid Unicode escape"),t+=Dt(o),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},Lt.readWord=function(){var t=this.readWord1(),e=b.name;return this.keywords.test(t)&&(e=v[t]),this.finishToken(e,t)},z.acorn={Parser:z,version:"7.1.0",defaultOptions:R,Position:M,SourceLocation:O,getLineInfo:P,Node:et,TokenType:d,tokTypes:b,keywordTypes:v,TokContext:it,tokContexts:at,isIdentifierChar:p,isIdentifierStart:f,Token:At,isNewLine:_,lineBreak:w,lineBreakG:k,nonASCIIwhitespace:T},t.Node=et,t.Parser=z,t.Position=M,t.SourceLocation=O,t.TokContext=it,t.Token=At,t.TokenType=d,t.defaultOptions=R,t.getLineInfo=P,t.isIdentifierChar=p,t.isIdentifierStart=f,t.isNewLine=_,t.keywordTypes=v,t.lineBreak=w,t.lineBreakG=k,t.nonASCIIwhitespace=T,t.parse=function(t,e){return z.parse(t,e)},t.parseExpressionAt=function(t,e,n){return z.parseExpressionAt(t,e,n)},t.tokContexts=at,t.tokTypes=b,t.tokenizer=function(t,e){return z.tokenizer(t,e)},t.version="7.1.0",Object.defineProperty(t,"__esModule",{value:!0})}("object"===typeof n&&"undefined"!==typeof e?n:(r=r||self).acorn={})},{}],2:[function(t,e,n){},{}],3:[function(t,e,n){function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.contextName,s=void 0===r?"gl":r,u=n.throwGetError,l=n.useTrackablePrimitives,c=n.readPixelsFile,h=n.recording,f=void 0===h?[]:h,p=n.variables,d=void 0===p?{}:p,g=n.onReadPixels,m=n.onUnrecognizedArgumentLookup,y=new Proxy(t,{get:k}),v=[],x={},b=0,w="";return y;function k(n,r){switch(r){case"addComment":return C;case"checkThrowError":return I;case"getReadPixelsVariableName":return e;case"insertVariable":return S;case"reset":return T;case"setIndent":return A;case"toString":return _;case"getContextVariableName":return P}return"function"===typeof t[r]?function(){switch(r){case"getError":return u?f.push("".concat(w,"if (").concat(s,".getError() !== ").concat(s,".NONE) throw new Error('error');")):f.push("".concat(w).concat(s,".getError();")),t.getError();case"getExtension":var n="".concat(s,"Variables").concat(v.length);f.push("".concat(w,"const ").concat(n," = ").concat(s,".getExtension('").concat(arguments[0],"');"));var h=t.getExtension(arguments[0]);if(h&&"object"===typeof h){var p=i(h,{getEntity:E,useTrackablePrimitives:l,recording:f,contextName:n,contextVariables:v,variables:d,indent:w,onUnrecognizedArgumentLookup:m});return v.push(p),p}return v.push(null),h;case"readPixels":var y,x=v.indexOf(arguments[6]);if(-1===x){var b=O(arguments[6]);b?(y=b,f.push("".concat(w).concat(b))):(y="".concat(s,"Variable").concat(v.length),v.push(arguments[6]),f.push("".concat(w,"const ").concat(y," = new ").concat(arguments[6].constructor.name,"(").concat(arguments[6].length,");")))}else y="".concat(s,"Variable").concat(x);e=y;var k=[arguments[0],arguments[1],arguments[2],arguments[3],E(arguments[4]),E(arguments[5]),y];return f.push("".concat(w).concat(s,".readPixels(").concat(k.join(", "),");")),c&&D(arguments[2],arguments[3]),g&&g(y,k),t.readPixels.apply(t,arguments);case"drawBuffers":return f.push("".concat(w).concat(s,".drawBuffers([").concat(a(arguments[0],{contextName:s,contextVariables:v,getEntity:E,addVariable:L,variables:d,onUnrecognizedArgumentLookup:m}),"]);")),t.drawBuffers(arguments[0])}var _=t[r].apply(t,arguments);switch(typeof _){case"undefined":return void f.push("".concat(w).concat(M(r,arguments),";"));case"number":case"boolean":if(l&&-1===v.indexOf(o(_))){f.push("".concat(w,"const ").concat(s,"Variable").concat(v.length," = ").concat(M(r,arguments),";")),v.push(_=o(_));break}default:null===_?f.push("".concat(M(r,arguments),";")):f.push("".concat(w,"const ").concat(s,"Variable").concat(v.length," = ").concat(M(r,arguments),";")),v.push(_)}return _}:(x[t[r]]=r,t[r])}function _(){return f.join("\n")}function T(){for(;f.length>0;)f.pop()}function S(t,e){d[t]=e}function E(t){var e=x[t];return e?s+"."+e:t}function A(t){w=" ".repeat(t)}function L(t,e){var n="".concat(s,"Variable").concat(v.length);return f.push("".concat(w,"const ").concat(n," = ").concat(e,";")),v.push(t),n}function D(t,e){var n="".concat(s,"Variable").concat(v.length),r="imageDatum".concat(b);f.push("".concat(w,"let ").concat(r,' = ["P3\\n# ').concat(c,'.ppm\\n", ').concat(t,", ' ', ").concat(e,', "\\n255\\n"].join("");')),f.push("".concat(w,"for (let i = 0; i < ").concat(r,".length; i += 4) {")),f.push("".concat(w,"  ").concat(r," += ").concat(n,"[i] + ' ' + ").concat(n,"[i + 1] + ' ' + ").concat(n,"[i + 2] + ' ';")),f.push("".concat(w,"}")),f.push("".concat(w,'if (typeof require !== "undefined") {')),f.push("".concat(w,"  require('fs').writeFileSync('./").concat(c,".ppm', ").concat(r,");")),f.push("".concat(w,"}")),b++}function C(t){f.push("".concat(w,"// ").concat(t))}function I(){f.push("".concat(w,"(() => {\n").concat(w,"const error = ").concat(s,".getError();\n").concat(w,"if (error !== ").concat(s,".NONE) {\n").concat(w,"  const names = Object.getOwnPropertyNames(gl);\n").concat(w,"  for (let i = 0; i < names.length; i++) {\n").concat(w,"    const name = names[i];\n").concat(w,"    if (").concat(s,"[name] === error) {\n").concat(w,"      throw new Error('").concat(s," threw ' + name);\n").concat(w,"    }\n").concat(w,"  }\n").concat(w,"}\n").concat(w,"})();"))}function M(t,e){return"".concat(s,".").concat(t,"(").concat(a(e,{contextName:s,contextVariables:v,getEntity:E,addVariable:L,variables:d,onUnrecognizedArgumentLookup:m}),")")}function O(t){if(d)for(var e in d)if(d[e]===t)return e;return null}function P(t){var e=v.indexOf(t);return-1!==e?"".concat(s,"Variable").concat(e):null}}function i(t,e){var n=new Proxy(t,{get:function(e,n){return"function"===typeof e[n]?function(){switch(n){case"drawBuffersWEBGL":return c.push("".concat(f).concat(i,".drawBuffersWEBGL([").concat(a(arguments[0],{contextName:i,contextVariables:s,getEntity:d,addVariable:m,variables:h,onUnrecognizedArgumentLookup:p}),"]);")),t.drawBuffersWEBGL(arguments[0])}var e=t[n].apply(t,arguments);switch(typeof e){case"undefined":return void c.push("".concat(f).concat(g(n,arguments),";"));case"number":case"boolean":l&&-1===s.indexOf(o(e))?(c.push("".concat(f,"const ").concat(i,"Variable").concat(s.length," = ").concat(g(n,arguments),";")),s.push(e=o(e))):(c.push("".concat(f,"const ").concat(i,"Variable").concat(s.length," = ").concat(g(n,arguments),";")),s.push(e));break;default:null===e?c.push("".concat(g(n,arguments),";")):c.push("".concat(f,"const ").concat(i,"Variable").concat(s.length," = ").concat(g(n,arguments),";")),s.push(e)}return e}:(r[t[n]]=n,t[n])}}),r={},i=e.contextName,s=e.contextVariables,u=e.getEntity,l=e.useTrackablePrimitives,c=e.recording,h=e.variables,f=e.indent,p=e.onUnrecognizedArgumentLookup;return n;function d(t){return r.hasOwnProperty(t)?"".concat(i,".").concat(r[t]):u(t)}function g(t,e){return"".concat(i,".").concat(t,"(").concat(a(e,{contextName:i,contextVariables:s,getEntity:d,addVariable:m,variables:h,onUnrecognizedArgumentLookup:p}),")")}function m(t,e){var n="".concat(i,"Variable").concat(s.length);return s.push(t),c.push("".concat(f,"const ").concat(n," = ").concat(e,";")),n}}function a(t,e){var n=e.variables,r=e.onUnrecognizedArgumentLookup;return Array.from(t).map((function(t){var i=function(t){if(n)for(var e in n)if(n.hasOwnProperty(e)&&n[e]===t)return e;return r?r(t):null}(t);return i||function(t,e){var n=e.contextName,r=e.contextVariables,i=e.getEntity,a=e.addVariable,o=e.onUnrecognizedArgumentLookup;if("undefined"===typeof t)return"undefined";if(null===t)return"null";var s=r.indexOf(t);if(s>-1)return"".concat(n,"Variable").concat(s);switch(t.constructor.name){case"String":var u=/\n/.test(t),l=/'/.test(t),c=/"/.test(t);return u?"`"+t+"`":l&&!c?'"'+t+'"':"'"+t+"'";case"Number":case"Boolean":return i(t);case"Array":return a(t,"new ".concat(t.constructor.name,"([").concat(Array.from(t).join(","),"])"));case"Float32Array":case"Uint8Array":case"Uint16Array":case"Int32Array":return a(t,"new ".concat(t.constructor.name,"(").concat(JSON.stringify(Array.from(t)),")"));default:if(o){var h=o(t);if(h)return h}throw new Error("unrecognized argument type ".concat(t.constructor.name))}}(t,e)})).join(", ")}function o(t){return new t.constructor(t)}"undefined"!==typeof e&&(e.exports={glWiretap:r,glExtensionWiretap:i}),"undefined"!==typeof window&&(r.glExtensionWiretap=i,window.glWiretap=r)},{}],4:[function(t,e,n){function r(t){for(var e=new Array(t.length),n=0;n<t.length;n++){var r=t[n];r.toArray?e[n]=r.toArray():e[n]=r}return e}function i(){for(var t=r(arguments),e=new Float32Array(this.output.x),n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=0,this.thread.z=0,e[n]=this._fn.apply(this,t);return e}function a(){for(var t=r(arguments),e=new Array(this.output.y),n=0;n<this.output.y;n++){for(var i=new Float32Array(this.output.x),a=0;a<this.output.x;a++)this.thread.x=a,this.thread.y=n,this.thread.z=0,i[a]=this._fn.apply(this,t);e[n]=i}return e}function o(){for(var t=r(arguments),e=0;e<this.output.y;e++)for(var n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=e,this.thread.z=0,this._fn.apply(this,t)}function s(){for(var t=r(arguments),e=new Array(this.output.z),n=0;n<this.output.z;n++){for(var i=new Array(this.output.y),a=0;a<this.output.y;a++){for(var o=new Float32Array(this.output.x),s=0;s<this.output.x;s++)this.thread.x=s,this.thread.y=a,this.thread.z=n,o[s]=this._fn.apply(this,t);i[a]=o}e[n]=i}return e}function u(t){t.setOutput=function(e){t.output=h(e),t.graphical&&l(t)},t.toJSON=function(){throw new Error("Not usable with gpuMock")},t.setConstants=function(e){return t.constants=e,t},t.setGraphical=function(e){return t.graphical=e,t},t.setCanvas=function(e){return t.canvas=e,t},t.setContext=function(e){return t.context=e,t},t.destroy=function(){},t.validateSettings=function(){},t.graphical&&t.output&&l(t),t.exec=function(){var e=arguments;return new Promise((function(n,r){try{n(t.apply(t,e))}catch(i){r(i)}}))},t.getPixels=function(e){var n=t.output,r=n.x,i=n.y;return e?function(t,e,n){for(var r=n/2|0,i=4*e,a=new Uint8ClampedArray(4*e),o=t.slice(0),s=0;s<r;++s){var u=s*i,l=(n-s-1)*i;a.set(o.subarray(u,u+i)),o.copyWithin(u,l,l+i),o.set(a,l)}return o}(t._imageData.data,r,i):t._imageData.data.slice(0)},t.color=function(e,n,r,i){"undefined"===typeof i&&(i=1),e=Math.floor(255*e),n=Math.floor(255*n),r=Math.floor(255*r),i=Math.floor(255*i);var a=t.output.x,o=t.output.y,s=t.thread.x+(o-t.thread.y-1)*a;t._colorData[4*s+0]=e,t._colorData[4*s+1]=n,t._colorData[4*s+2]=r,t._colorData[4*s+3]=i};for(var e=function(){return t},n=["setWarnVarUsage","setArgumentTypes","setTactic","setOptimizeFloatMemory","setDebug","setLoopMaxIterations","setConstantTypes","setFunctions","setNativeFunctions","setInjectedNative","setPipeline","setPrecision","setOutputToTexture","setImmutable","setStrictIntegers","setDynamicOutput","setHardcodeConstants","setDynamicArguments","setUseLegacyEncoder","setWarnVarUsage","addSubKernel"],r=0;r<n.length;r++)t[n[r]]=e;return t}function l(t){var e=t.output,n=e.x,r=e.y;if(t.context&&t.context.createImageData){var i=new Uint8ClampedArray(n*r*4);t._imageData=t.context.createImageData(n,r),t._colorData=i}else{var a=new Uint8ClampedArray(n*r*4);t._imageData={data:a},t._colorData=a}}function h(t){var e=null;if(t.length)if(3===t.length){var n=c(t,3);e={x:n[0],y:n[1],z:n[2]}}else if(2===t.length){var r=c(t,2);e={x:r[0],y:r[1]}}else e={x:c(t,1)[0]};else e=t;return e}e.exports={gpuMock:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.output?h(e.output):null;function r(){return r.output.z?s.apply(r,arguments):r.output.y?r.graphical?o.apply(r,arguments):a.apply(r,arguments):i.apply(r,arguments)}return r._fn=t,r.constants=e.constants||null,r.context=e.context||null,r.canvas=e.canvas||null,r.graphical=e.graphical||!1,r._imageData=null,r._colorData=null,r.output=n,r.thread={x:0,y:0,z:0},u(r)}}},{}],5:[function(t,e,n){var r=t("./utils").utils;e.exports={alias:function(t,e){var n=e.toString();return new Function("return function ".concat(t," (").concat(r.getArgumentNamesFromString(n).join(", "),") {\n  ").concat(r.getFunctionBodyFromString(n),"\n}"))()}}},{"./utils":114}],6:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"astFunction",value:function(t,e){if(!this.isRootKernel){e.push("function"),e.push(" "),e.push(this.name),e.push("(");for(var n=0;n<this.argumentNames.length;++n){var r=this.argumentNames[n];n>0&&e.push(", "),e.push("user_"),e.push(r)}e.push(") {\n")}for(var i=0;i<t.body.body.length;++i)this.astGeneric(t.body.body[i],e),e.push("\n");return this.isRootKernel||e.push("}\n"),e}},{key:"astReturnStatement",value:function(t,e){var n=this.returnType||this.getType(t.argument);return this.returnType||(this.returnType=n),this.isRootKernel?(e.push(this.leadingReturnStatement),this.astGeneric(t.argument,e),e.push(";\n"),e.push(this.followingReturnStatement),e.push("continue;\n")):this.isSubKernel?(e.push("subKernelResult_".concat(this.name," = ")),this.astGeneric(t.argument,e),e.push(";"),e.push("return subKernelResult_".concat(this.name,";"))):(e.push("return "),this.astGeneric(t.argument,e),e.push(";")),e}},{key:"astLiteral",value:function(t,e){if(isNaN(t.value))throw this.astErrorOutput("Non-numeric literal not supported : "+t.value,t);return e.push(t.value),e}},{key:"astBinaryExpression",value:function(t,e){return e.push("("),this.astGeneric(t.left,e),e.push(t.operator),this.astGeneric(t.right,e),e.push(")"),e}},{key:"astIdentifierExpression",value:function(t,e){if("Identifier"!==t.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",t);switch(t.name){case"Infinity":e.push("Infinity");break;default:this.constants&&this.constants.hasOwnProperty(t.name)?e.push("constants_"+t.name):e.push("user_"+t.name)}return e}},{key:"astForStatement",value:function(t,e){if("ForStatement"!==t.type)throw this.astErrorOutput("Invalid for statement",t);var n=[],r=[],i=[],a=[],o=null;if(t.init){this.pushState("in-for-loop-init"),this.astGeneric(t.init,n);for(var s=0;s<n.length;s++)n[s].includes&&n[s].includes(",")&&(o=!1);this.popState("in-for-loop-init")}else o=!1;if(t.test?this.astGeneric(t.test,r):o=!1,t.update?this.astGeneric(t.update,i):o=!1,t.body&&(this.pushState("loop-body"),this.astGeneric(t.body,a),this.popState("loop-body")),null===o&&(o=this.isSafe(t.init)&&this.isSafe(t.test)),o)e.push("for (".concat(n.join(""),";").concat(r.join(""),";").concat(i.join(""),"){\n")),e.push(a.join("")),e.push("}\n");else{var u=this.getInternalVariableName("safeI");n.length>0&&e.push(n.join(""),";\n"),e.push("for (let ".concat(u,"=0;").concat(u,"<LOOP_MAX;").concat(u,"++){\n")),r.length>0&&e.push("if (!".concat(r.join(""),") break;\n")),e.push(a.join("")),e.push("\n".concat(i.join(""),";")),e.push("}\n")}return e}},{key:"astWhileStatement",value:function(t,e){if("WhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);return e.push("for (let i = 0; i < LOOP_MAX; i++) {"),e.push("if ("),this.astGeneric(t.test,e),e.push(") {\n"),this.astGeneric(t.body,e),e.push("} else {\n"),e.push("break;\n"),e.push("}\n"),e.push("}\n"),e}},{key:"astDoWhileStatement",value:function(t,e){if("DoWhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);return e.push("for (let i = 0; i < LOOP_MAX; i++) {"),this.astGeneric(t.body,e),e.push("if (!"),this.astGeneric(t.test,e),e.push(") {\n"),e.push("break;\n"),e.push("}\n"),e.push("}\n"),e}},{key:"astAssignmentExpression",value:function(t,e){var n=this.getDeclaration(t.left);if(n&&!n.assignable)throw this.astErrorOutput("Variable ".concat(t.left.name," is not assignable here"),t);return this.astGeneric(t.left,e),e.push(t.operator),this.astGeneric(t.right,e),e}},{key:"astBlockStatement",value:function(t,e){if(this.isState("loop-body")){this.pushState("block-body");for(var n=0;n<t.body.length;n++)this.astGeneric(t.body[n],e);this.popState("block-body")}else{e.push("{\n");for(var r=0;r<t.body.length;r++)this.astGeneric(t.body[r],e);e.push("}\n")}return e}},{key:"astVariableDeclaration",value:function(t,e){e.push("".concat(t.kind," "));for(var n=t.declarations,r=0;r<n.length;r++){r>0&&e.push(",");var i=n[r],a=this.getDeclaration(i.id);a.valueType||(a.valueType=this.getType(i.init)),this.astGeneric(i,e)}return this.isState("in-for-loop-init")||e.push(";"),e}},{key:"astIfStatement",value:function(t,e){return e.push("if ("),this.astGeneric(t.test,e),e.push(")"),"BlockStatement"===t.consequent.type?this.astGeneric(t.consequent,e):(e.push(" {\n"),this.astGeneric(t.consequent,e),e.push("\n}\n")),t.alternate&&(e.push("else "),"BlockStatement"===t.alternate.type||"IfStatement"===t.alternate.type?this.astGeneric(t.alternate,e):(e.push(" {\n"),this.astGeneric(t.alternate,e),e.push("\n}\n"))),e}},{key:"astSwitchStatement",value:function(t,e){var n=t.discriminant,r=t.cases;e.push("switch ("),this.astGeneric(n,e),e.push(") {\n");for(var i=0;i<r.length;i++)null!==r[i].test?(e.push("case "),this.astGeneric(r[i].test,e),e.push(":\n"),r[i].consequent&&r[i].consequent.length>0&&(this.astGeneric(r[i].consequent,e),e.push("break;\n"))):(e.push("default:\n"),this.astGeneric(r[i].consequent,e),r[i].consequent&&r[i].consequent.length>0&&e.push("break;\n"));e.push("\n}")}},{key:"astThisExpression",value:function(t,e){return e.push("_this"),e}},{key:"astMemberExpression",value:function(t,e){var n=this.getMemberExpressionDetails(t),r=n.signature,i=n.type,a=n.property,o=n.xProperty,s=n.yProperty,u=n.zProperty,l=n.name,c=n.origin;switch(r){case"this.thread.value":return e.push("_this.thread.".concat(l)),e;case"this.output.value":switch(l){case"x":e.push("outputX");break;case"y":e.push("outputY");break;case"z":e.push("outputZ");break;default:throw this.astErrorOutput("Unexpected expression",t)}return e;case"value":throw this.astErrorOutput("Unexpected expression",t);case"value[]":case"value[][]":case"value[][][]":case"value.value":if("Math"===c)return e.push(Math[l]),e;switch(a){case"r":return e.push("user_".concat(l,"[0]")),e;case"g":return e.push("user_".concat(l,"[1]")),e;case"b":return e.push("user_".concat(l,"[2]")),e;case"a":return e.push("user_".concat(l,"[3]")),e}break;case"this.constants.value":case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":break;case"fn()[]":return this.astGeneric(t.object,e),e.push("["),this.astGeneric(t.property,e),e.push("]"),e;case"fn()[][]":return this.astGeneric(t.object.object,e),e.push("["),this.astGeneric(t.object.property,e),e.push("]"),e.push("["),this.astGeneric(t.property,e),e.push("]"),e;default:throw this.astErrorOutput("Unexpected expression",t)}if(!t.computed)switch(i){case"Number":case"Integer":case"Float":case"Boolean":return e.push("".concat(c,"_").concat(l)),e}var h="".concat(c,"_").concat(l);switch(i){case"Array(2)":case"Array(3)":case"Array(4)":case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":case"HTMLImageArray":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"HTMLImage":default:var f,p;if("constants"===c){var d=this.constants[l];f=(p="Input"===this.constantTypes[l])?d.size:null}else f=(p=this.isInput(l))?this.argumentSizes[this.argumentNames.indexOf(l)]:null;e.push("".concat(h)),u&&s?p?(e.push("[("),this.astGeneric(u,e),e.push("*".concat(this.dynamicArguments?"(outputY * outputX)":f[1]*f[0],")+(")),this.astGeneric(s,e),e.push("*".concat(this.dynamicArguments?"outputX":f[0],")+")),this.astGeneric(o,e),e.push("]")):(e.push("["),this.astGeneric(u,e),e.push("]"),e.push("["),this.astGeneric(s,e),e.push("]"),e.push("["),this.astGeneric(o,e),e.push("]")):s?p?(e.push("[("),this.astGeneric(s,e),e.push("*".concat(this.dynamicArguments?"outputX":f[0],")+")),this.astGeneric(o,e),e.push("]")):(e.push("["),this.astGeneric(s,e),e.push("]"),e.push("["),this.astGeneric(o,e),e.push("]")):"undefined"!==typeof o&&(e.push("["),this.astGeneric(o,e),e.push("]"))}return e}},{key:"astCallExpression",value:function(t,e){if("CallExpression"!==t.type)throw this.astErrorOutput("Unknown CallExpression",t);var n=this.astMemberExpressionUnroll(t.callee);this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),this.isAstMathFunction(t),this.onFunctionCall&&this.onFunctionCall(this.name,n,t.arguments),e.push(n),e.push("(");for(var r=this.lookupFunctionArgumentTypes(n)||[],i=0;i<t.arguments.length;++i){var a=t.arguments[i],o=this.getType(a);r[i]||this.triggerImplyArgumentType(n,i,o,this),i>0&&e.push(", "),this.astGeneric(a,e)}return e.push(")"),e}},{key:"astArrayExpression",value:function(t,e){for(var n=this.getType(t),r=t.elements.length,i=[],a=0;a<r;++a){var o=[];this.astGeneric(t.elements[a],o),i.push(o.join(""))}switch(n){case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":e.push("[".concat(i.join(", "),"]"));break;default:e.push("new Float32Array([".concat(i.join(", "),"])"))}return e}},{key:"astDebuggerStatement",value:function(t,e){return e.push("debugger;"),e}}]),n}(t("../function-node").FunctionNode);e.exports={CPUFunctionNode:r}},{"../function-node":10}],7:[function(t,e,n){var r=t("../../utils").utils;e.exports={cpuKernelString:function(t,e){var n=[],i=[],a=[],o=!/^function/.test(t.color.toString());if(n.push("  const { context, canvas, constants: incomingConstants } = settings;","  const output = new Int32Array(".concat(JSON.stringify(Array.from(t.output)),");"),"  const _constantTypes = ".concat(JSON.stringify(t.constantTypes),";"),"  const _constants = ".concat(function(t,e){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=t[r];switch(i){case"Number":case"Integer":case"Float":case"Boolean":n.push("".concat(r,":").concat(a));break;case"Array(2)":case"Array(3)":case"Array(4)":case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":n.push("".concat(r,":new ").concat(a.constructor.name,"(").concat(JSON.stringify(Array.from(a)),")"))}}return"{ ".concat(n.join()," }")}(t.constants,t.constantTypes),";")),i.push("    constants: _constants,","    context,","    output,","    thread: {x: 0, y: 0, z: 0},"),t.graphical){n.push("  const _imageData = context.createImageData(".concat(t.output[0],", ").concat(t.output[1],");")),n.push("  const _colorData = new Uint8ClampedArray(".concat(t.output[0]," * ").concat(t.output[1]," * 4);"));var s=r.flattenFunctionToString((o?"function ":"")+t.color.toString(),{thisLookup:function(e){switch(e){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(t[e])},findDependency:function(t,e){return null}}),u=r.flattenFunctionToString((o?"function ":"")+t.getPixels.toString(),{thisLookup:function(e){switch(e){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(t[e])},findDependency:function(){return null}});i.push("    _imageData,","    _colorData,","    color: ".concat(s,",")),a.push("  kernel.getPixels = ".concat(u,";"))}for(var l=[],c=Object.keys(t.constantTypes),h=0;h<c.length;h++)l.push(t.constantTypes[c]);if(-1!==t.argumentTypes.indexOf("HTMLImageArray")||-1!==l.indexOf("HTMLImageArray")){var f=r.flattenFunctionToString((o?"function ":"")+t._imageTo3DArray.toString(),{doNotDefine:["canvas"],findDependency:function(e,n){return"this"===e?(o?"function ":"")+t[n].toString():null},thisLookup:function(t){switch(t){case"canvas":return;case"context":return"context"}}});a.push(f),i.push("    _mediaTo2DArray,"),i.push("    _imageTo3DArray,")}else if(-1!==t.argumentTypes.indexOf("HTMLImage")||-1!==l.indexOf("HTMLImage")){var p=r.flattenFunctionToString((o?"function ":"")+t._mediaTo2DArray.toString(),{findDependency:function(t,e){return null},thisLookup:function(t){switch(t){case"canvas":return"settings.canvas";case"context":return"settings.context"}throw new Error("unhandled thisLookup")}});a.push(p),i.push("    _mediaTo2DArray,")}return"function(settings) {\n".concat(n.join("\n"),"\n  for (const p in _constantTypes) {\n    if (!_constantTypes.hasOwnProperty(p)) continue;\n    const type = _constantTypes[p];\n    switch (type) {\n      case 'Number':\n      case 'Integer':\n      case 'Float':\n      case 'Boolean':\n      case 'Array(2)':\n      case 'Array(3)':\n      case 'Array(4)':\n      case 'Matrix(2)':\n      case 'Matrix(3)':\n      case 'Matrix(4)':\n        if (incomingConstants.hasOwnProperty(p)) {\n          console.warn('constant ' + p + ' of type ' + type + ' cannot be resigned');\n        }\n        continue;\n    }\n    if (!incomingConstants.hasOwnProperty(p)) {\n      throw new Error('constant ' + p + ' not found');\n    }\n    _constants[p] = incomingConstants[p];\n  }\n  const kernel = (function() {\n").concat(t._kernelString,"\n  })\n    .apply({ ").concat(i.join("\n")," });\n  ").concat(a.join("\n"),"\n  return kernel;\n}")}}},{"../../utils":114}],8:[function(t,e,n){var r=t("../kernel").Kernel,h=t("../function-builder").FunctionBuilder,f=t("./function-node").CPUFunctionNode,p=t("../../utils").utils,d=t("./kernel-string").cpuKernelString,g=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).mergeSettings(t.settings||r),i._imageData=null,i._colorData=null,i._kernelString=null,i._prependedString=[],i.thread={x:0,y:0,z:0},i.translatedSources=null,i}return s(n,[{key:"initCanvas",value:function(){return"undefined"!==typeof document?document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas?new OffscreenCanvas(0,0):void 0}},{key:"initContext",value:function(){return this.canvas?this.canvas.getContext("2d"):null}},{key:"initPlugins",value:function(t){return[]}},{key:"validateSettings",value:function(t){if(!this.output||0===this.output.length){if(1!==t.length)throw new Error("Auto output only supported for kernels with only one input");var e=p.getVariableType(t[0],this.strictIntegers);if("Array"===e)this.output=p.getDimensions(e);else{if("NumberTexture"!==e&&"ArrayTexture(4)"!==e)throw new Error("Auto output not supported for input type: "+e);this.output=t[0].output}}if(this.graphical&&2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");this.checkOutput()}},{key:"translateSource",value:function(){if(this.leadingReturnStatement=this.output.length>1?"resultX[x] = ":"result[x] = ",this.subKernels){for(var t=[],e=0;e<this.subKernels.length;e++){var n=this.subKernels[e].name;t.push(this.output.length>1?"resultX_".concat(n,"[x] = subKernelResult_").concat(n,";\n"):"result_".concat(n,"[x] = subKernelResult_").concat(n,";\n"))}this.followingReturnStatement=t.join("")}var r=h.fromKernel(this,f);this.translatedSources=r.getPrototypes("kernel"),this.graphical||this.returnType||(this.returnType=r.getKernelResultType())}},{key:"build",value:function(){if(!this.built){if(this.setupConstants(),this.setupArguments(arguments),this.validateSettings(arguments),this.translateSource(),this.graphical){var t=this.canvas,e=this.output;if(!t)throw new Error("no canvas available for using graphical output");var n=e[0],r=e[1]||1;t.width=n,t.height=r,this._imageData=this.context.createImageData(n,r),this._colorData=new Uint8ClampedArray(n*r*4)}var i=this.getKernelString();this.kernelString=i,this.debug&&(console.log("Function output:"),console.log(i));try{this.run=new Function([],i).bind(this)()}catch(a){console.error("An error occurred compiling the javascript: ",a)}this.buildSignature(arguments),this.built=!0}}},{key:"color",value:function(t,e,n,r){"undefined"===typeof r&&(r=1),t=Math.floor(255*t),e=Math.floor(255*e),n=Math.floor(255*n),r=Math.floor(255*r);var i=this.output[0],a=this.output[1],o=this.thread.x+(a-this.thread.y-1)*i;this._colorData[4*o+0]=t,this._colorData[4*o+1]=e,this._colorData[4*o+2]=n,this._colorData[4*o+3]=r}},{key:"getKernelString",value:function(){if(null!==this._kernelString)return this._kernelString;var t=null,e=this.translatedSources;return e.length>1?e=e.filter((function(e){return/^function/.test(e)?e:(t=e,!1)})):t=e.shift(),this._kernelString="  const LOOP_MAX = ".concat(this._getLoopMaxString(),";\n  ").concat(this.injectedNative||"","\n  const _this = this;\n  ").concat(this._resultKernelHeader(),"\n  ").concat(this._processConstants(),"\n  return (").concat(this.argumentNames.map((function(t){return"user_"+t})).join(", "),") => {\n    ").concat(this._prependedString.join(""),"\n    ").concat(this._earlyThrows(),"\n    ").concat(this._processArguments(),"\n    ").concat(this.graphical?this._graphicalKernelBody(t):this._resultKernelBody(t),"\n    ").concat(e.length>0?e.join("\n"):"","\n  };")}},{key:"toString",value:function(){return d(this)}},{key:"_getLoopMaxString",value:function(){return this.loopMaxIterations?" ".concat(parseInt(this.loopMaxIterations),";"):" 1000;"}},{key:"_processConstants",value:function(){if(!this.constants)return"";var t=[];for(var e in this.constants)switch(this.constantTypes[e]){case"HTMLCanvas":case"HTMLImage":case"HTMLVideo":t.push("    const constants_".concat(e," = this._mediaTo2DArray(this.constants.").concat(e,");\n"));break;case"HTMLImageArray":t.push("    const constants_".concat(e," = this._imageTo3DArray(this.constants.").concat(e,");\n"));break;case"Input":t.push("    const constants_".concat(e," = this.constants.").concat(e,".value;\n"));break;default:t.push("    const constants_".concat(e," = this.constants.").concat(e,";\n"))}return t.join("")}},{key:"_earlyThrows",value:function(){var t=this;if(this.graphical)return"";if(this.immutable)return"";if(!this.pipeline)return"";for(var e=[],n=0;n<this.argumentTypes.length;n++)"Array"===this.argumentTypes[n]&&e.push(this.argumentNames[n]);if(0===e.length)return"";for(var r=[],i=function(n){var i=e[n],a=t._mapSubKernels((function(t){return"user_".concat(i," === result_").concat(t.name)})).join(" || ");r.push("user_".concat(i," === result").concat(a?" || ".concat(a):""))},a=0;a<e.length;a++)i(a);return"if (".concat(r.join(" || "),") throw new Error('Source and destination arrays are the same.  Use immutable = true');")}},{key:"_processArguments",value:function(){for(var t=[],e=0;e<this.argumentTypes.length;e++){var n="user_".concat(this.argumentNames[e]);switch(this.argumentTypes[e]){case"HTMLCanvas":case"HTMLImage":case"HTMLVideo":t.push("    ".concat(n," = this._mediaTo2DArray(").concat(n,");\n"));break;case"HTMLImageArray":t.push("    ".concat(n," = this._imageTo3DArray(").concat(n,");\n"));break;case"Input":t.push("    ".concat(n," = ").concat(n,".value;\n"));break;case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"NumberTexture":case"MemoryOptimizedNumberTexture":t.push("\n    if (".concat(n,".toArray) {\n      if (!_this.textureCache) {\n        _this.textureCache = [];\n        _this.arrayCache = [];\n      }\n      const textureIndex = _this.textureCache.indexOf(").concat(n,");\n      if (textureIndex !== -1) {\n        ").concat(n," = _this.arrayCache[textureIndex];\n      } else {\n        _this.textureCache.push(").concat(n,");\n        ").concat(n," = ").concat(n,".toArray();\n        _this.arrayCache.push(").concat(n,");\n      }\n    }"))}}return t.join("")}},{key:"_mediaTo2DArray",value:function(t){var e=this.canvas,n=t.width>0?t.width:t.videoWidth,r=t.height>0?t.height:t.videoHeight;e.width<n&&(e.width=n),e.height<r&&(e.height=r);var i=this.context;i.drawImage(t,0,0,n,r);for(var a=i.getImageData(0,0,n,r).data,o=new Array(r),s=0,u=r-1;u>=0;u--)for(var l=o[u]=new Array(n),c=0;c<n;c++){var h=new Float32Array(4);h[0]=a[s++]/255,h[1]=a[s++]/255,h[2]=a[s++]/255,h[3]=a[s++]/255,l[c]=h}return o}},{key:"getPixels",value:function(t){var e=c(this.output,2),n=e[0],r=e[1];return t?p.flipPixels(this._imageData.data,n,r):this._imageData.data.slice(0)}},{key:"_imageTo3DArray",value:function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=this._mediaTo2DArray(t[n]);return e}},{key:"_resultKernelHeader",value:function(){if(this.graphical)return"";if(this.immutable)return"";if(!this.pipeline)return"";switch(this.output.length){case 1:return this._mutableKernel1DResults();case 2:return this._mutableKernel2DResults();case 3:return this._mutableKernel3DResults()}}},{key:"_resultKernelBody",value:function(t){switch(this.output.length){case 1:return(!this.immutable&&this.pipeline?this._resultMutableKernel1DLoop(t):this._resultImmutableKernel1DLoop(t))+this._kernelOutput();case 2:return(!this.immutable&&this.pipeline?this._resultMutableKernel2DLoop(t):this._resultImmutableKernel2DLoop(t))+this._kernelOutput();case 3:return(!this.immutable&&this.pipeline?this._resultMutableKernel3DLoop(t):this._resultImmutableKernel3DLoop(t))+this._kernelOutput();default:throw new Error("unsupported size kernel")}}},{key:"_graphicalKernelBody",value:function(t){switch(this.output.length){case 2:return this._graphicalKernel2DLoop(t)+this._graphicalOutput();default:throw new Error("unsupported size kernel")}}},{key:"_graphicalOutput",value:function(){return"\n    this._imageData.data.set(this._colorData);\n    this.context.putImageData(this._imageData, 0, 0);\n    return;"}},{key:"_getKernelResultTypeConstructorString",value:function(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return"Float32Array";case"Array(2)":case"Array(3)":case"Array(4)":return"Array";default:if(this.graphical)return"Float32Array";throw new Error("unhandled returnType ".concat(this.returnType))}}},{key:"_resultImmutableKernel1DLoop",value:function(t){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const result = new ".concat(e,"(outputX);\n    ").concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new ").concat(e,"(outputX);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ").concat(t,"\n    }")}},{key:"_mutableKernel1DResults",value:function(){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const result = new ".concat(t,"(outputX);\n    ").concat(this._mapSubKernels((function(e){return"const result_".concat(e.name," = new ").concat(t,"(outputX);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "))}},{key:"_resultMutableKernel1DLoop",value:function(t){return"  const outputX = _this.output[0];\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ".concat(t,"\n    }")}},{key:"_resultImmutableKernel2DLoop",value:function(t){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ".concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new Array(outputY);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y] = new ").concat(e,"(outputX);\n      ").concat(this._mapSubKernels((function(t){return"const resultX_".concat(t.name," = result_").concat(t.name,"[y] = new ").concat(e,"(outputX);\n")})).join(""),"\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ").concat(t,"\n      }\n    }")}},{key:"_mutableKernel2DResults",value:function(){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ".concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new Array(outputY);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let y = 0; y < outputY; y++) {\n      const resultX = result[y] = new ").concat(t,"(outputX);\n      ").concat(this._mapSubKernels((function(e){return"const resultX_".concat(e.name," = result_").concat(e.name,"[y] = new ").concat(t,"(outputX);\n")})).join(""),"\n    }")}},{key:"_resultMutableKernel2DLoop",value:function(t){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y];\n      ".concat(this._mapSubKernels((function(t){return"const resultX_".concat(t.name," = result_").concat(t.name,"[y] = new ").concat(e,"(outputX);\n")})).join(""),"\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ").concat(t,"\n      }\n    }")}},{key:"_graphicalKernel2DLoop",value:function(t){return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ".concat(t,"\n      }\n    }")}},{key:"_resultImmutableKernel3DLoop",value:function(t){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ".concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new Array(outputZ);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z] = new Array(outputY);\n      ").concat(this._mapSubKernels((function(t){return"const resultY_".concat(t.name," = result_").concat(t.name,"[z] = new Array(outputY);\n")})).join("      "),"\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y] = new ").concat(e,"(outputX);\n        ").concat(this._mapSubKernels((function(t){return"const resultX_".concat(t.name," = resultY_").concat(t.name,"[y] = new ").concat(e,"(outputX);\n")})).join("        "),"\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ").concat(t,"\n        }\n      }\n    }")}},{key:"_mutableKernel3DResults",value:function(){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ".concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new Array(outputZ);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let z = 0; z < outputZ; z++) {\n      const resultY = result[z] = new Array(outputY);\n      ").concat(this._mapSubKernels((function(t){return"const resultY_".concat(t.name," = result_").concat(t.name,"[z] = new Array(outputY);\n")})).join("      "),"\n      for (let y = 0; y < outputY; y++) {\n        const resultX = resultY[y] = new ").concat(t,"(outputX);\n        ").concat(this._mapSubKernels((function(e){return"const resultX_".concat(e.name," = resultY_").concat(e.name,"[y] = new ").concat(t,"(outputX);\n")})).join("        "),"\n      }\n    }")}},{key:"_resultMutableKernel3DLoop",value:function(t){return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z];\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y];\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ".concat(t,"\n        }\n      }\n    }")}},{key:"_kernelOutput",value:function(){return this.subKernels?"\n    return {\n      result: result,\n      ".concat(this.subKernels.map((function(t){return"".concat(t.property,": result_").concat(t.name)})).join(",\n      "),"\n    };"):"\n    return result;"}},{key:"_mapSubKernels",value:function(t){return null===this.subKernels?[""]:this.subKernels.map(t)}},{key:"destroy",value:function(t){t&&delete this.canvas}},{key:"toJSON",value:function(){var t=i(a(n.prototype),"toJSON",this).call(this);return t.functionNodes=h.fromKernel(this,f).toJSON(),t}},{key:"setOutput",value:function(t){i(a(n.prototype),"setOutput",this).call(this,t);var e=c(this.output,2),r=e[0],o=e[1];this.graphical&&(this._imageData=this.context.createImageData(r,o),this._colorData=new Uint8ClampedArray(r*o*4))}},{key:"prependString",value:function(t){if(this._kernelString)throw new Error("Kernel already built");this._prependedString.push(t)}},{key:"hasPrependString",value:function(t){return this._prependedString.indexOf(t)>-1}}],[{key:"getFeatures",value:function(){return this.features}},{key:"features",get:function(){return Object.freeze({kernelMap:!0,isIntegerDivisionAccurate:!0})}},{key:"isSupported",get:function(){return!0}},{key:"isContextMatch",value:function(t){return!1}},{key:"mode",get:function(){return"cpu"}},{key:"nativeFunctionArguments",value:function(){return null}},{key:"nativeFunctionReturnType",value:function(){throw new Error("Looking up native function return type not supported on ".concat(this.name))}},{key:"combineKernels",value:function(t){return t}},{key:"getSignature",value:function(t,e){return"cpu"+(e.length>0?":"+e.join(","):"")}},{key:"destroyContext",value:function(t){}}]),n}(r);e.exports={CPUKernel:g}},{"../../utils":114,"../function-builder":9,"../kernel":36,"./function-node":6,"./kernel-string":7}],9:[function(t,e,n){var i=function(){"use strict";function t(e){if(o(this,t),e=e||{},this.kernel=e.kernel,this.rootNode=e.rootNode,this.functionNodes=e.functionNodes||[],this.subKernelNodes=e.subKernelNodes||[],this.nativeFunctions=e.nativeFunctions||[],this.functionMap={},this.nativeFunctionNames=[],this.lookupChain=[],this.functionNodeDependencies={},this.functionCalls={},this.rootNode&&(this.functionMap.kernel=this.rootNode),this.functionNodes)for(var n=0;n<this.functionNodes.length;n++)this.functionMap[this.functionNodes[n].name]=this.functionNodes[n];if(this.subKernelNodes)for(var r=0;r<this.subKernelNodes.length;r++)this.functionMap[this.subKernelNodes[r].name]=this.subKernelNodes[r];if(this.nativeFunctions)for(var i=0;i<this.nativeFunctions.length;i++){var a=this.nativeFunctions[i];this.nativeFunctionNames.push(a.name)}}return s(t,[{key:"addFunctionNode",value:function(t){if(!t.name)throw new Error("functionNode.name needs set");this.functionMap[t.name]=t,t.isRootKernel&&(this.rootNode=t)}},{key:"traceFunctionCalls",value:function(t,e){if(t=t||"kernel",e=e||[],this.nativeFunctionNames.indexOf(t)>-1){var n=e.indexOf(t);if(-1===n)e.push(t);else{var r=e.splice(n,1)[0];e.push(r)}return e}var i=this.functionMap[t];if(i){var a=e.indexOf(t);if(-1===a){e.push(t),i.toString();for(var o=0;o<i.calledFunctions.length;++o)this.traceFunctionCalls(i.calledFunctions[o],e)}else{var s=e.splice(a,1)[0];e.push(s)}}return e}},{key:"getPrototypeString",value:function(t){return this.getPrototypes(t).join("\n")}},{key:"getPrototypes",value:function(t){return this.rootNode&&this.rootNode.toString(),t?this.getPrototypesFromFunctionNames(this.traceFunctionCalls(t,[]).reverse()):this.getPrototypesFromFunctionNames(Object.keys(this.functionMap))}},{key:"getStringFromFunctionNames",value:function(t){for(var e=[],n=0;n<t.length;++n)this.functionMap[t[n]]&&e.push(this.functionMap[t[n]].toString());return e.join("\n")}},{key:"getPrototypesFromFunctionNames",value:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i=this.nativeFunctionNames.indexOf(r);if(i>-1)e.push(this.nativeFunctions[i].source);else{var a=this.functionMap[r];a&&e.push(a.toString())}}return e}},{key:"toJSON",value:function(){var t=this;return this.traceFunctionCalls(this.rootNode.name).reverse().map((function(e){var n=t.nativeFunctions.indexOf(e);if(n>-1)return{name:e,source:t.nativeFunctions[n].source};if(t.functionMap[e])return t.functionMap[e].toJSON();throw new Error("function ".concat(e," not found"))}))}},{key:"fromJSON",value:function(t,e){this.functionMap={};for(var n=0;n<t.length;n++){var r=t[n];this.functionMap[r.settings.name]=new e(r.ast,r.settings)}return this}},{key:"getString",value:function(t){return t?this.getStringFromFunctionNames(this.traceFunctionCalls(t).reverse()):this.getStringFromFunctionNames(Object.keys(this.functionMap))}},{key:"lookupReturnType",value:function(t,e,n){if("CallExpression"!==e.type)throw new Error('expected ast type of "CallExpression", but is '.concat(e.type));if(this._isNativeFunction(t))return this._lookupNativeFunctionReturnType(t);if(this._isFunction(t)){var r=this._getFunction(t);if(r.returnType)return r.returnType;for(var i=0;i<this.lookupChain.length;i++)if(this.lookupChain[i].ast===e){if(0===r.argumentTypes.length&&e.arguments.length>0){for(var a=e.arguments,o=0;o<a.length;o++)this.lookupChain.push({name:n.name,ast:a[i],requestingNode:n}),r.argumentTypes[o]=n.getType(a[o]),this.lookupChain.pop();return r.returnType=r.getType(r.getJsAST())}throw new Error("circlical logic detected!")}this.lookupChain.push({name:n.name,ast:e,requestingNode:n});var s=r.getType(r.getJsAST());return this.lookupChain.pop(),r.returnType=s}return null}},{key:"_getFunction",value:function(t){return this._isFunction(t)||new Error("Function ".concat(t," not found")),this.functionMap[t]}},{key:"_isFunction",value:function(t){return Boolean(this.functionMap[t])}},{key:"_getNativeFunction",value:function(t){for(var e=0;e<this.nativeFunctions.length;e++)if(this.nativeFunctions[e].name===t)return this.nativeFunctions[e];return null}},{key:"_isNativeFunction",value:function(t){return Boolean(this._getNativeFunction(t))}},{key:"_lookupNativeFunctionReturnType",value:function(t){var e=this._getNativeFunction(t);if(e)return e.returnType;throw new Error("Native function ".concat(t," not found"))}},{key:"lookupFunctionArgumentTypes",value:function(t){return this._isNativeFunction(t)?this._getNativeFunction(t).argumentTypes:this._isFunction(t)?this._getFunction(t).argumentTypes:null}},{key:"lookupFunctionArgumentName",value:function(t,e){return this._getFunction(t).argumentNames[e]}},{key:"lookupFunctionArgumentBitRatio",value:function(t,e){if(!this._isFunction(t))throw new Error("function not found");if(this.rootNode.name===t){var n=this.rootNode.argumentNames.indexOf(e);if(-1!==n)return this.rootNode.argumentBitRatios[n]}var r=this._getFunction(t),i=r.argumentNames.indexOf(e);if(-1===i)throw new Error("argument not found");var a=r.argumentBitRatios[i];if("number"!==typeof a)throw new Error("argument bit ratio not found");return a}},{key:"needsArgumentType",value:function(t,e){return!!this._isFunction(t)&&!this._getFunction(t).argumentTypes[e]}},{key:"assignArgumentType",value:function(t,e,n,r){if(this._isFunction(t)){var i=this._getFunction(t);i.argumentTypes[e]||(i.argumentTypes[e]=n)}}},{key:"assignArgumentBitRatio",value:function(t,e,n,r){var i=this._getFunction(t);if(this._isNativeFunction(n))return null;var a=this._getFunction(n),o=i.argumentNames.indexOf(e);if(-1===o)throw new Error("Argument ".concat(e," not found in arguments from function ").concat(t));var s=i.argumentBitRatios[o];if("number"!==typeof s)throw new Error("Bit ratio for argument ".concat(e," not found in function ").concat(t));a.argumentBitRatios||(a.argumentBitRatios=new Array(a.argumentNames.length));var u=a.argumentBitRatios[o];if("number"===typeof u){if(u!==s)throw new Error("Incompatible bit ratio found at function ".concat(t," at argument ").concat(e));return u}return a.argumentBitRatios[o]=s,s}},{key:"trackFunctionCall",value:function(t,e,n){this.functionNodeDependencies[t]||(this.functionNodeDependencies[t]=new Set,this.functionCalls[t]=[]),this.functionNodeDependencies[t].add(e),this.functionCalls[t].push(n)}},{key:"getKernelResultType",value:function(){return this.rootNode.returnType||this.rootNode.getType(this.rootNode.ast)}},{key:"getSubKernelResultType",value:function(t){for(var e=this.subKernelNodes[t],n=!1,r=0;r<this.rootNode.functionCalls.length;r++)this.rootNode.functionCalls[r].ast.callee.name===e.name&&(n=!0);if(!n)throw new Error("SubKernel ".concat(e.name," never called by kernel"));return e.returnType||e.getType(e.getJsAST())}},{key:"getReturnTypes",value:function(){for(var t=r({},this.rootNode.name,this.rootNode.getType(this.rootNode.ast)),e=this.traceFunctionCalls(this.rootNode.name),n=0;n<e.length;n++){var i=e[n],a=this.functionMap[i];t[i]=a.getType(a.ast)}return t}}],[{key:"fromKernel",value:function(e,n,r){for(var i=e.kernelArguments,a=e.kernelConstants,o=e.argumentNames,s=e.argumentSizes,u=e.argumentBitRatios,l=e.constants,c=e.constantBitRatios,h=e.debug,f=e.loopMaxIterations,p=e.nativeFunctions,d=e.output,g=e.optimizeFloatMemory,m=e.precision,y=e.plugins,v=e.source,x=e.subKernels,b=e.functions,w=e.leadingReturnStatement,k=e.followingReturnStatement,_=e.dynamicArguments,T=e.dynamicOutput,S=new Array(i.length),E={},A=0;A<i.length;A++)S[A]=i[A].type;for(var L=0;L<a.length;L++){var D=a[L];E[D.name]=D.type}var C=function(t,e){return G.needsArgumentType(t,e)},I=function(t,e,n){G.assignArgumentType(t,e,n)},M=function(t,e,n){return G.lookupReturnType(t,e,n)},O=function(t){return G.lookupFunctionArgumentTypes(t)},P=function(t,e){return G.lookupFunctionArgumentName(t,e)},R=function(t,e){return G.lookupFunctionArgumentBitRatio(t,e)},N=function(t,e,n,r){G.assignArgumentType(t,e,n,r)},F=function(t,e,n,r){G.assignArgumentBitRatio(t,e,n,r)},z=function(t,e,n){G.trackFunctionCall(t,e,n)},V=function(t,e){for(var r=[],i=0;i<t.params.length;i++)r.push(t.params[i].name);var a=new n(e,Object.assign({},j,{returnType:null,ast:t,name:t.id.name,argumentNames:r,lookupReturnType:M,lookupFunctionArgumentTypes:O,lookupFunctionArgumentName:P,lookupFunctionArgumentBitRatio:R,needsArgumentType:C,assignArgumentType:I,triggerImplyArgumentType:N,triggerImplyArgumentBitRatio:F,onFunctionCall:z}));a.traceFunctionAST(t),G.addFunctionNode(a)},j=Object.assign({isRootKernel:!1,onNestedFunction:V,lookupReturnType:M,lookupFunctionArgumentTypes:O,lookupFunctionArgumentName:P,lookupFunctionArgumentBitRatio:R,needsArgumentType:C,assignArgumentType:I,triggerImplyArgumentType:N,triggerImplyArgumentBitRatio:F,onFunctionCall:z,optimizeFloatMemory:g,precision:m,constants:l,constantTypes:E,constantBitRatios:c,debug:h,loopMaxIterations:f,output:d,plugins:y,dynamicArguments:_,dynamicOutput:T},r||{}),U=Object.assign({},j,{isRootKernel:!0,name:"kernel",argumentNames:o,argumentTypes:S,argumentSizes:s,argumentBitRatios:u,leadingReturnStatement:w,followingReturnStatement:k});if("object"===typeof v&&v.functionNodes)return(new t).fromJSON(v.functionNodes,n);var K=new n(v,U),B=null;b&&(B=b.map((function(t){return new n(t.source,{returnType:t.returnType,argumentTypes:t.argumentTypes,output:d,plugins:y,constants:l,constantTypes:E,constantBitRatios:c,optimizeFloatMemory:g,precision:m,lookupReturnType:M,lookupFunctionArgumentTypes:O,lookupFunctionArgumentName:P,lookupFunctionArgumentBitRatio:R,needsArgumentType:C,assignArgumentType:I,triggerImplyArgumentType:N,triggerImplyArgumentBitRatio:F,onFunctionCall:z,onNestedFunction:V})})));var W=null;x&&(W=x.map((function(t){var e=t.name,r=t.source;return new n(r,Object.assign({},j,{name:e,isSubKernel:!0,isRootKernel:!1}))})));var G=new t({kernel:e,rootNode:K,functionNodes:B,nativeFunctions:p,subKernelNodes:W});return G}}]),t}();e.exports={FunctionBuilder:i}},{}],10:[function(t,e,n){var r=t("acorn"),i=t("../utils").utils,a=t("./function-tracer").FunctionTracer,u=function(){"use strict";function t(e,n){if(o(this,t),!e&&!n.ast)throw new Error("source parameter is missing");if(n=n||{},this.source=e,this.ast=null,this.name="string"===typeof e?n.isRootKernel?"kernel":n.name||i.getFunctionNameFromString(e):null,this.calledFunctions=[],this.constants={},this.constantTypes={},this.constantBitRatios={},this.isRootKernel=!1,this.isSubKernel=!1,this.debug=null,this.functions=null,this.identifiers=null,this.contexts=null,this.functionCalls=null,this.states=[],this.needsArgumentType=null,this.assignArgumentType=null,this.lookupReturnType=null,this.lookupFunctionArgumentTypes=null,this.lookupFunctionArgumentBitRatio=null,this.triggerImplyArgumentType=null,this.triggerImplyArgumentBitRatio=null,this.onNestedFunction=null,this.onFunctionCall=null,this.optimizeFloatMemory=null,this.precision=null,this.loopMaxIterations=null,this.argumentNames="string"===typeof this.source?i.getArgumentNamesFromString(this.source):null,this.argumentTypes=[],this.argumentSizes=[],this.argumentBitRatios=null,this.returnType=null,this.output=[],this.plugins=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.dynamicOutput=null,this.dynamicArguments=null,this.strictTypingChecking=!1,this.fixIntegerDivisionAccuracy=null,n)for(var r in n)n.hasOwnProperty(r)&&this.hasOwnProperty(r)&&(this[r]=n[r]);this.literalTypes={},this.validate(),this._string=null,this._internalVariableNames={}}return s(t,[{key:"validate",value:function(){if("string"!==typeof this.source&&!this.ast)throw new Error("this.source not a string");if(!this.ast&&!i.isFunctionString(this.source))throw new Error("this.source not a function string");if(!this.name)throw new Error("this.name could not be set");if(this.argumentTypes.length>0&&this.argumentTypes.length!==this.argumentNames.length)throw new Error("argumentTypes count of ".concat(this.argumentTypes.length," exceeds ").concat(this.argumentNames.length));if(this.output.length<1)throw new Error("this.output is not big enough")}},{key:"isIdentifierConstant",value:function(t){return!!this.constants&&this.constants.hasOwnProperty(t)}},{key:"isInput",value:function(t){return"Input"===this.argumentTypes[this.argumentNames.indexOf(t)]}},{key:"pushState",value:function(t){this.states.push(t)}},{key:"popState",value:function(t){if(this.state!==t)throw new Error("Cannot popState ".concat(t," when in ").concat(this.state));this.states.pop()}},{key:"isState",value:function(t){return this.state===t}},{key:"state",get:function(){return this.states[this.states.length-1]}},{key:"astMemberExpressionUnroll",value:function(t){if("Identifier"===t.type)return t.name;if("ThisExpression"===t.type)return"this";if("MemberExpression"===t.type&&t.object&&t.property)return t.object.hasOwnProperty("name")&&"Math"!==t.object.name?this.astMemberExpressionUnroll(t.property):this.astMemberExpressionUnroll(t.object)+"."+this.astMemberExpressionUnroll(t.property);if(t.hasOwnProperty("expressions")){var e=t.expressions[0];if("Literal"===e.type&&0===e.value&&2===t.expressions.length)return this.astMemberExpressionUnroll(t.expressions[1])}throw this.astErrorOutput("Unknown astMemberExpressionUnroll",t)}},{key:"getJsAST",value:function(t){if(this.ast)return this.ast;if("object"===typeof this.source)return this.traceFunctionAST(this.source),this.ast=this.source;if(null===(t=t||r))throw new Error("Missing JS to AST parser");var e=Object.freeze(t.parse("const parser_".concat(this.name," = ").concat(this.source,";"),{locations:!0})),n=e.body[0].declarations[0].init;if(this.traceFunctionAST(n),!e)throw new Error("Failed to parse JS code");return this.ast=n}},{key:"traceFunctionAST",value:function(t){var e=new a(t),n=e.contexts,r=e.declarations,i=e.functions,o=e.identifiers,s=e.functionCalls;this.contexts=n,this.identifiers=o,this.functionCalls=s,this.functions=i;for(var u=0;u<r.length;u++){var l=r[u],c=l.ast,h=l.inForLoopInit,f=l.inForLoopTest,p=c.init,d=this.getDependencies(p),g=null;if(h&&f)g="Integer";else if(p){var m=this.getType(p);switch(m){case"Integer":case"Float":case"Number":g="MemberExpression"===p.type?m:"Number";break;case"LiteralInteger":g="Number";break;default:g=m}}l.valueType=g,l.dependencies=d,l.isSafe=this.isSafeDependencies(d)}for(var y=0;y<i.length;y++)this.onNestedFunction(i[y],this.source)}},{key:"getDeclaration",value:function(t){for(var e=0;e<this.identifiers.length;e++){var n=this.identifiers[e];if(t===n.ast)return n.declaration}return null}},{key:"getVariableType",value:function(t){if("Identifier"!==t.type)throw new Error("ast of ".concat(t.type,' not "Identifier"'));var e=null,n=this.argumentNames.indexOf(t.name);if(-1===n){var r=this.getDeclaration(t);if(r)return r.valueType}else{var i=this.argumentTypes[n];i&&(e=i)}if(!e&&this.strictTypingChecking)throw new Error("Declaration of ".concat(name," not found"));return e}},{key:"getLookupType",value:function(t){if(!l.hasOwnProperty(t))throw new Error("unknown typeLookupMap ".concat(t));return l[t]}},{key:"getConstantType",value:function(t){if(this.constantTypes[t]){var e=this.constantTypes[t];return"Float"===e?"Number":e}throw new Error('Type for constant "'.concat(t,'" not declared'))}},{key:"toString",value:function(){return this._string?this._string:this._string=this.astGeneric(this.getJsAST(),[]).join("").trim()}},{key:"toJSON",value:function(){var t={source:this.source,name:this.name,constants:this.constants,constantTypes:this.constantTypes,isRootKernel:this.isRootKernel,isSubKernel:this.isSubKernel,debug:this.debug,output:this.output,loopMaxIterations:this.loopMaxIterations,argumentNames:this.argumentNames,argumentTypes:this.argumentTypes,argumentSizes:this.argumentSizes,returnType:this.returnType,leadingReturnStatement:this.leadingReturnStatement,followingReturnStatement:this.followingReturnStatement};return{ast:this.ast,settings:t}}},{key:"getType",value:function(t){if(Array.isArray(t))return this.getType(t[t.length-1]);switch(t.type){case"BlockStatement":return this.getType(t.body);case"ArrayExpression":switch(this.getType(t.elements[0])){case"Array(2)":case"Array(3)":case"Array(4)":return"Matrix(".concat(t.elements.length,")")}return"Array(".concat(t.elements.length,")");case"Literal":var e=this.astKey(t);return this.literalTypes[e]?this.literalTypes[e]:Number.isInteger(t.value)?"LiteralInteger":!0===t.value||!1===t.value?"Boolean":"Number";case"AssignmentExpression":return this.getType(t.left);case"CallExpression":if(this.isAstMathFunction(t))return"Number";if(!t.callee||!t.callee.name){if("SequenceExpression"===t.callee.type&&t.callee.expressions[t.callee.expressions.length-1].property.name){var n=t.callee.expressions[t.callee.expressions.length-1].property.name;return this.inferArgumentTypesIfNeeded(n,t.arguments),this.lookupReturnType(n,t,this)}if("this.color"===this.getVariableSignature(t.callee,!0))return null;if("MemberExpression"===t.callee.type&&t.callee.object&&t.callee.property&&t.callee.property.name&&t.arguments){var r=t.callee.property.name;return this.inferArgumentTypesIfNeeded(r,t.arguments),this.lookupReturnType(r,t,this)}throw this.astErrorOutput("Unknown call expression",t)}if(t.callee&&t.callee.name){var i=t.callee.name;return this.inferArgumentTypesIfNeeded(i,t.arguments),this.lookupReturnType(i,t,this)}throw this.astErrorOutput('Unhandled getType Type "'.concat(t.type,'"'),t);case"LogicalExpression":return"Boolean";case"BinaryExpression":switch(t.operator){case"%":case"/":if(this.fixIntegerDivisionAccuracy)return"Number";break;case">":case"<":return"Boolean";case"&":case"|":case"^":case"<<":case">>":case">>>":return"Integer"}var a=this.getType(t.left);if(this.isState("skip-literal-correction"))return a;if("LiteralInteger"===a){var o=this.getType(t.right);return"LiteralInteger"===o?t.left.value%1===0?"Integer":"Float":o}return l[a]||a;case"UpdateExpression":return this.getType(t.argument);case"UnaryExpression":return"~"===t.operator?"Integer":this.getType(t.argument);case"VariableDeclaration":for(var s,u=t.declarations,c=0;c<u.length;c++){var h=u[c];s=this.getType(h)}if(!s)throw this.astErrorOutput("Unable to find type for declaration",t);return s;case"VariableDeclarator":var f=this.getDeclaration(t.id);if(!f)throw this.astErrorOutput("Unable to find declarator",t);if(!f.valueType)throw this.astErrorOutput("Unable to find declarator valueType",t);return f.valueType;case"Identifier":if("Infinity"===t.name)return"Number";if(this.isAstVariable(t)&&"value"===this.getVariableSignature(t))return this.getCheckVariableType(t);var p=this.findIdentifierOrigin(t);return p&&p.init?this.getType(p.init):null;case"ReturnStatement":return this.getType(t.argument);case"MemberExpression":if(this.isAstMathFunction(t)){switch(t.property.name){case"ceil":case"floor":case"round":return"Integer"}return"Number"}if(this.isAstVariable(t)){switch(this.getVariableSignature(t)){case"value[]":return this.getLookupType(this.getCheckVariableType(t.object));case"value[][]":return this.getLookupType(this.getCheckVariableType(t.object.object));case"value[][][]":return this.getLookupType(this.getCheckVariableType(t.object.object.object));case"value[][][][]":return this.getLookupType(this.getCheckVariableType(t.object.object.object.object));case"value.thread.value":case"this.thread.value":return"Integer";case"this.output.value":return this.dynamicOutput?"Integer":"LiteralInteger";case"this.constants.value":return this.getConstantType(t.property.name);case"this.constants.value[]":return this.getLookupType(this.getConstantType(t.object.property.name));case"this.constants.value[][]":return this.getLookupType(this.getConstantType(t.object.object.property.name));case"this.constants.value[][][]":return this.getLookupType(this.getConstantType(t.object.object.object.property.name));case"this.constants.value[][][][]":return this.getLookupType(this.getConstantType(t.object.object.object.object.property.name));case"fn()[]":case"fn()[][]":case"fn()[][][]":return this.getLookupType(this.getType(t.object));case"value.value":if(this.isAstMathVariable(t))return"Number";switch(t.property.name){case"r":case"g":case"b":case"a":return this.getLookupType(this.getCheckVariableType(t.object))}case"[][]":return"Number"}throw this.astErrorOutput("Unhandled getType MemberExpression",t)}throw this.astErrorOutput("Unhandled getType MemberExpression",t);case"ConditionalExpression":return this.getType(t.consequent);case"FunctionDeclaration":case"FunctionExpression":var d=this.findLastReturn(t.body);return d?this.getType(d):null;case"IfStatement":return this.getType(t.consequent);case"SequenceExpression":return this.getType(t.expressions[t.expressions.length-1]);default:throw this.astErrorOutput('Unhandled getType Type "'.concat(t.type,'"'),t)}}},{key:"getCheckVariableType",value:function(t){var e=this.getVariableType(t);if(!e)throw this.astErrorOutput("".concat(t.type," is not defined"),t);return e}},{key:"inferArgumentTypesIfNeeded",value:function(t,e){for(var n=0;n<e.length;n++)if(this.needsArgumentType(t,n)){var r=this.getType(e[n]);if(!r)throw this.astErrorOutput("Unable to infer argument ".concat(n),e[n]);this.assignArgumentType(t,n,r)}}},{key:"isAstMathVariable",value:function(t){return"MemberExpression"===t.type&&t.object&&"Identifier"===t.object.type&&"Math"===t.object.name&&t.property&&"Identifier"===t.property.type&&["E","PI","SQRT2","SQRT1_2","LN2","LN10","LOG2E","LOG10E"].indexOf(t.property.name)>-1}},{key:"isAstMathFunction",value:function(t){return"CallExpression"===t.type&&t.callee&&"MemberExpression"===t.callee.type&&t.callee.object&&"Identifier"===t.callee.object.type&&"Math"===t.callee.object.name&&t.callee.property&&"Identifier"===t.callee.property.type&&["abs","acos","acosh","asin","asinh","atan","atan2","atanh","cbrt","ceil","clz32","cos","cosh","expm1","exp","floor","fround","imul","log","log2","log10","log1p","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].indexOf(t.callee.property.name)>-1}},{key:"isAstVariable",value:function(t){return"Identifier"===t.type||"MemberExpression"===t.type}},{key:"isSafe",value:function(t){return this.isSafeDependencies(this.getDependencies(t))}},{key:"isSafeDependencies",value:function(t){return!t||!t.every||t.every((function(t){return t.isSafe}))}},{key:"getDependencies",value:function(t,e,n){if(e||(e=[]),!t)return null;if(Array.isArray(t)){for(var r=0;r<t.length;r++)this.getDependencies(t[r],e,n);return e}switch(t.type){case"AssignmentExpression":return this.getDependencies(t.left,e,n),this.getDependencies(t.right,e,n),e;case"ConditionalExpression":return this.getDependencies(t.test,e,n),this.getDependencies(t.alternate,e,n),this.getDependencies(t.consequent,e,n),e;case"Literal":e.push({origin:"literal",value:t.value,isSafe:!0!==n&&t.value>-1/0&&t.value<1/0&&!isNaN(t.value)});break;case"VariableDeclarator":return this.getDependencies(t.init,e,n);case"Identifier":var i=this.getDeclaration(t);if(i)e.push({name:t.name,origin:"declaration",isSafe:!n&&this.isSafeDependencies(i.dependencies)});else if(this.argumentNames.indexOf(t.name)>-1)e.push({name:t.name,origin:"argument",isSafe:!1});else if(this.strictTypingChecking)throw new Error('Cannot find identifier origin "'.concat(t.name,'"'));break;case"FunctionDeclaration":return this.getDependencies(t.body.body[t.body.body.length-1],e,n);case"ReturnStatement":return this.getDependencies(t.argument,e);case"BinaryExpression":case"LogicalExpression":return n="/"===t.operator||"*"===t.operator,this.getDependencies(t.left,e,n),this.getDependencies(t.right,e,n),e;case"UnaryExpression":case"UpdateExpression":return this.getDependencies(t.argument,e,n);case"VariableDeclaration":return this.getDependencies(t.declarations,e,n);case"ArrayExpression":return e.push({origin:"declaration",isSafe:!0}),e;case"CallExpression":return e.push({origin:"function",isSafe:!0}),e;case"MemberExpression":var a=this.getMemberExpressionDetails(t);switch(a.signature){case"value[]":this.getDependencies(t.object,e,n);break;case"value[][]":this.getDependencies(t.object.object,e,n);break;case"value[][][]":this.getDependencies(t.object.object.object,e,n);break;case"this.output.value":this.dynamicOutput&&e.push({name:a.name,origin:"output",isSafe:!1})}if(a)return a.property&&this.getDependencies(a.property,e,n),a.xProperty&&this.getDependencies(a.xProperty,e,n),a.yProperty&&this.getDependencies(a.yProperty,e,n),a.zProperty&&this.getDependencies(a.zProperty,e,n),e;case"SequenceExpression":return this.getDependencies(t.expressions,e,n);default:throw this.astErrorOutput("Unhandled type ".concat(t.type," in getDependencies"),t)}return e}},{key:"getVariableSignature",value:function(t,e){if(!this.isAstVariable(t))throw new Error('ast of type "'.concat(t.type,'" is not a variable signature'));if("Identifier"===t.type)return"value";for(var n=[];t;)t.computed?n.push("[]"):"ThisExpression"===t.type?n.unshift("this"):t.property&&t.property.name?"x"===t.property.name||"y"===t.property.name||"z"===t.property.name?n.unshift(e?"."+t.property.name:".value"):"constants"===t.property.name||"thread"===t.property.name||"output"===t.property.name?n.unshift("."+t.property.name):n.unshift(e?"."+t.property.name:".value"):t.name?n.unshift(e?t.name:"value"):t.callee&&t.callee.name?n.unshift(e?t.callee.name+"()":"fn()"):t.elements?n.unshift("[]"):n.unshift("unknown"),t=t.object;var r=n.join("");return e||["value","value[]","value[][]","value[][][]","value[][][][]","value.value","value.thread.value","this.thread.value","this.output.value","this.constants.value","this.constants.value[]","this.constants.value[][]","this.constants.value[][][]","this.constants.value[][][][]","fn()[]","fn()[][]","fn()[][][]","[][]"].indexOf(r)>-1?r:null}},{key:"build",value:function(){return this.toString().length>0}},{key:"astGeneric",value:function(t,e){if(null===t)throw this.astErrorOutput("NULL ast",t);if(Array.isArray(t)){for(var n=0;n<t.length;n++)this.astGeneric(t[n],e);return e}switch(t.type){case"FunctionDeclaration":return this.astFunctionDeclaration(t,e);case"FunctionExpression":return this.astFunctionExpression(t,e);case"ReturnStatement":return this.astReturnStatement(t,e);case"Literal":return this.astLiteral(t,e);case"BinaryExpression":return this.astBinaryExpression(t,e);case"Identifier":return this.astIdentifierExpression(t,e);case"AssignmentExpression":return this.astAssignmentExpression(t,e);case"ExpressionStatement":return this.astExpressionStatement(t,e);case"EmptyStatement":return this.astEmptyStatement(t,e);case"BlockStatement":return this.astBlockStatement(t,e);case"IfStatement":return this.astIfStatement(t,e);case"SwitchStatement":return this.astSwitchStatement(t,e);case"BreakStatement":return this.astBreakStatement(t,e);case"ContinueStatement":return this.astContinueStatement(t,e);case"ForStatement":return this.astForStatement(t,e);case"WhileStatement":return this.astWhileStatement(t,e);case"DoWhileStatement":return this.astDoWhileStatement(t,e);case"VariableDeclaration":return this.astVariableDeclaration(t,e);case"VariableDeclarator":return this.astVariableDeclarator(t,e);case"ThisExpression":return this.astThisExpression(t,e);case"SequenceExpression":return this.astSequenceExpression(t,e);case"UnaryExpression":return this.astUnaryExpression(t,e);case"UpdateExpression":return this.astUpdateExpression(t,e);case"LogicalExpression":return this.astLogicalExpression(t,e);case"MemberExpression":return this.astMemberExpression(t,e);case"CallExpression":return this.astCallExpression(t,e);case"ArrayExpression":return this.astArrayExpression(t,e);case"DebuggerStatement":return this.astDebuggerStatement(t,e);case"ConditionalExpression":return this.astConditionalExpression(t,e)}throw this.astErrorOutput("Unknown ast type : "+t.type,t)}},{key:"astErrorOutput",value:function(t,e){if("string"!==typeof this.source)return new Error(t);var n=i.getAstString(this.source,e),r=this.source.substr(e.start).split(/\n/),a=r.length>0?r[r.length-1]:0;return new Error("".concat(t," on line ").concat(r.length,", position ").concat(a.length,":\n ").concat(n))}},{key:"astDebuggerStatement",value:function(t,e){return e}},{key:"astConditionalExpression",value:function(t,e){if("ConditionalExpression"!==t.type)throw this.astErrorOutput("Not a conditional expression",t);return e.push("("),this.astGeneric(t.test,e),e.push("?"),this.astGeneric(t.consequent,e),e.push(":"),this.astGeneric(t.alternate,e),e.push(")"),e}},{key:"astFunction",value:function(t,e){throw new Error('"astFunction" not defined on '.concat(this.constructor.name))}},{key:"astFunctionDeclaration",value:function(t,e){return this.isChildFunction(t)?e:this.astFunction(t,e)}},{key:"astFunctionExpression",value:function(t,e){return this.isChildFunction(t)?e:this.astFunction(t,e)}},{key:"isChildFunction",value:function(t){for(var e=0;e<this.functions.length;e++)if(this.functions[e]===t)return!0;return!1}},{key:"astReturnStatement",value:function(t,e){return e}},{key:"astLiteral",value:function(t,e){return this.literalTypes[this.astKey(t)]="Number",e}},{key:"astBinaryExpression",value:function(t,e){return e}},{key:"astIdentifierExpression",value:function(t,e){return e}},{key:"astAssignmentExpression",value:function(t,e){return e}},{key:"astExpressionStatement",value:function(t,e){return this.astGeneric(t.expression,e),e.push(";"),e}},{key:"astEmptyStatement",value:function(t,e){return e}},{key:"astBlockStatement",value:function(t,e){return e}},{key:"astIfStatement",value:function(t,e){return e}},{key:"astSwitchStatement",value:function(t,e){return e}},{key:"astBreakStatement",value:function(t,e){return e.push("break;"),e}},{key:"astContinueStatement",value:function(t,e){return e.push("continue;\n"),e}},{key:"astForStatement",value:function(t,e){return e}},{key:"astWhileStatement",value:function(t,e){return e}},{key:"astDoWhileStatement",value:function(t,e){return e}},{key:"astVariableDeclarator",value:function(t,e){return this.astGeneric(t.id,e),null!==t.init&&(e.push("="),this.astGeneric(t.init,e)),e}},{key:"astThisExpression",value:function(t,e){return e}},{key:"astSequenceExpression",value:function(t,e){for(var n=t.expressions,r=[],i=0;i<n.length;i++){var a=n[i],o=[];this.astGeneric(a,o),r.push(o.join(""))}return r.length>1?e.push("(",r.join(","),")"):e.push(r[0]),e}},{key:"astUnaryExpression",value:function(t,e){return this.checkAndUpconvertBitwiseUnary(t,e)||(t.prefix?(e.push(t.operator),this.astGeneric(t.argument,e)):(this.astGeneric(t.argument,e),e.push(t.operator))),e}},{key:"checkAndUpconvertBitwiseUnary",value:function(t,e){}},{key:"astUpdateExpression",value:function(t,e){return t.prefix?(e.push(t.operator),this.astGeneric(t.argument,e)):(this.astGeneric(t.argument,e),e.push(t.operator)),e}},{key:"astLogicalExpression",value:function(t,e){return e.push("("),this.astGeneric(t.left,e),e.push(t.operator),this.astGeneric(t.right,e),e.push(")"),e}},{key:"astMemberExpression",value:function(t,e){return e}},{key:"astCallExpression",value:function(t,e){return e}},{key:"astArrayExpression",value:function(t,e){return e}},{key:"getMemberExpressionDetails",value:function(t){if("MemberExpression"!==t.type)throw this.astErrorOutput("Expression ".concat(t.type," not a MemberExpression"),t);var e=null,n=null,r=this.getVariableSignature(t);switch(r){case"value":return null;case"value.thread.value":case"this.thread.value":case"this.output.value":return{signature:r,type:"Integer",name:t.property.name};case"value[]":if("string"!==typeof t.object.name)throw this.astErrorOutput("Unexpected expression",t);return{name:e=t.object.name,origin:"user",signature:r,type:this.getVariableType(t.object),xProperty:t.property};case"value[][]":if("string"!==typeof t.object.object.name)throw this.astErrorOutput("Unexpected expression",t);return{name:e=t.object.object.name,origin:"user",signature:r,type:this.getVariableType(t.object.object),yProperty:t.object.property,xProperty:t.property};case"value[][][]":if("string"!==typeof t.object.object.object.name)throw this.astErrorOutput("Unexpected expression",t);return{name:e=t.object.object.object.name,origin:"user",signature:r,type:this.getVariableType(t.object.object.object),zProperty:t.object.object.property,yProperty:t.object.property,xProperty:t.property};case"value[][][][]":if("string"!==typeof t.object.object.object.object.name)throw this.astErrorOutput("Unexpected expression",t);return{name:e=t.object.object.object.object.name,origin:"user",signature:r,type:this.getVariableType(t.object.object.object.object),zProperty:t.object.object.property,yProperty:t.object.property,xProperty:t.property};case"value.value":if("string"!==typeof t.property.name)throw this.astErrorOutput("Unexpected expression",t);if(this.isAstMathVariable(t))return{name:e=t.property.name,origin:"Math",type:"Number",signature:r};switch(t.property.name){case"r":case"g":case"b":case"a":return{name:e=t.object.name,property:t.property.name,origin:"user",signature:r,type:"Number"};default:throw this.astErrorOutput("Unexpected expression",t)}case"this.constants.value":if("string"!==typeof t.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.property.name,!(n=this.getConstantType(e)))throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r};case"this.constants.value[]":if("string"!==typeof t.object.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.object.property.name,!(n=this.getConstantType(e)))throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r,xProperty:t.property};case"this.constants.value[][]":if("string"!==typeof t.object.object.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.object.object.property.name,!(n=this.getConstantType(e)))throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r,yProperty:t.object.property,xProperty:t.property};case"this.constants.value[][][]":if("string"!==typeof t.object.object.object.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.object.object.object.property.name,!(n=this.getConstantType(e)))throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r,zProperty:t.object.object.property,yProperty:t.object.property,xProperty:t.property};case"fn()[]":case"fn()[][]":case"[][]":return{signature:r,property:t.property};default:throw this.astErrorOutput("Unexpected expression",t)}}},{key:"findIdentifierOrigin",value:function(t){for(var e=[this.ast];e.length>0;){var n=e[0];if("VariableDeclarator"===n.type&&n.id&&n.id.name&&n.id.name===t.name)return n;if(e.shift(),n.argument)e.push(n.argument);else if(n.body)e.push(n.body);else if(n.declarations)e.push(n.declarations);else if(Array.isArray(n))for(var r=0;r<n.length;r++)e.push(n[r])}return null}},{key:"findLastReturn",value:function(t){for(var e=[t||this.ast];e.length>0;){var n=e.pop();if("ReturnStatement"===n.type)return n;if("FunctionDeclaration"!==n.type)if(n.argument)e.push(n.argument);else if(n.body)e.push(n.body);else if(n.declarations)e.push(n.declarations);else if(Array.isArray(n))for(var r=0;r<n.length;r++)e.push(n[r]);else n.consequent?e.push(n.consequent):n.cases&&e.push(n.cases)}return null}},{key:"getInternalVariableName",value:function(t){return this._internalVariableNames.hasOwnProperty(t)||(this._internalVariableNames[t]=0),this._internalVariableNames[t]++,1===this._internalVariableNames[t]?t:t+this._internalVariableNames[t]}},{key:"astKey",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(!t.start||!t.end)throw new Error("AST start and end needed");return"".concat(t.start).concat(e).concat(t.end)}}]),t}(),l={Number:"Number",Float:"Float",Integer:"Integer",Array:"Number","Array(2)":"Number","Array(3)":"Number","Array(4)":"Number","Matrix(2)":"Number","Matrix(3)":"Number","Matrix(4)":"Number",Array2D:"Number",Array3D:"Number",Input:"Number",HTMLCanvas:"Array(4)",HTMLImage:"Array(4)",HTMLVideo:"Array(4)",HTMLImageArray:"Array(4)",NumberTexture:"Number",MemoryOptimizedNumberTexture:"Number","Array1D(2)":"Array(2)","Array1D(3)":"Array(3)","Array1D(4)":"Array(4)","Array2D(2)":"Array(2)","Array2D(3)":"Array(3)","Array2D(4)":"Array(4)","Array3D(2)":"Array(2)","Array3D(3)":"Array(3)","Array3D(4)":"Array(4)","ArrayTexture(1)":"Number","ArrayTexture(2)":"Array(2)","ArrayTexture(3)":"Array(3)","ArrayTexture(4)":"Array(4)"};e.exports={FunctionNode:u}},{"../utils":114,"./function-tracer":11,acorn:1}],11:[function(t,e,n){var r=t("../utils").utils;function i(t){return t.length>0?t[t.length-1]:null}var a="trackIdentifiers",u="memberExpression",l="inForLoopInit",c=function(){"use strict";function t(e){o(this,t),this.runningContexts=[],this.functionContexts=[],this.contexts=[],this.functionCalls=[],this.declarations=[],this.identifiers=[],this.functions=[],this.returnStatements=[],this.trackedIdentifiers=null,this.states=[],this.newFunctionContext(),this.scan(e)}return s(t,[{key:"isState",value:function(t){return this.states[this.states.length-1]===t}},{key:"hasState",value:function(t){return this.states.indexOf(t)>-1}},{key:"pushState",value:function(t){this.states.push(t)}},{key:"popState",value:function(t){if(!this.isState(t))throw new Error('Cannot pop the non-active state "'.concat(t,'"'));this.states.pop()}},{key:"currentFunctionContext",get:function(){return i(this.functionContexts)}},{key:"currentContext",get:function(){return i(this.runningContexts)}},{key:"newFunctionContext",value:function(){var t={"@contextType":"function"};this.contexts.push(t),this.functionContexts.push(t)}},{key:"newContext",value:function(t){var e=Object.assign({"@contextType":"const/let"},this.currentContext);this.contexts.push(e),this.runningContexts.push(e),t();var n=this.currentFunctionContext;for(var r in n)n.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=n[r]);return this.runningContexts.pop(),e}},{key:"useFunctionContext",value:function(t){var e=i(this.functionContexts);this.runningContexts.push(e),t(),this.runningContexts.pop()}},{key:"getIdentifiers",value:function(t){var e=this.trackedIdentifiers=[];return this.pushState(a),t(),this.trackedIdentifiers=null,this.popState(a),e}},{key:"getDeclaration",value:function(t){var e=this.currentContext,n=this.currentFunctionContext,r=this.runningContexts,i=e[t]||n[t]||null;if(!i&&e===n&&r.length>0){var a=r[r.length-2];if(a[t])return a[t]}return i}},{key:"scan",value:function(t){var e=this;if(t)if(Array.isArray(t))for(var n=0;n<t.length;n++)this.scan(t[n]);else switch(t.type){case"Program":this.useFunctionContext((function(){e.scan(t.body)}));break;case"BlockStatement":this.newContext((function(){e.scan(t.body)}));break;case"AssignmentExpression":case"LogicalExpression":case"BinaryExpression":this.scan(t.left),this.scan(t.right);break;case"UpdateExpression":if("++"===t.operator){var i=this.getDeclaration(t.argument.name);i&&(i.suggestedType="Integer")}this.scan(t.argument);break;case"UnaryExpression":this.scan(t.argument);break;case"VariableDeclaration":"var"===t.kind?this.useFunctionContext((function(){t.declarations=r.normalizeDeclarations(t),e.scan(t.declarations)})):(t.declarations=r.normalizeDeclarations(t),this.scan(t.declarations));break;case"VariableDeclarator":var o=this.currentContext,s=this.hasState(l),c={ast:t,context:o,name:t.id.name,origin:"declaration",inForLoopInit:s,inForLoopTest:null,assignable:o===this.currentFunctionContext||!s&&!o.hasOwnProperty(t.id.name),suggestedType:null,valueType:null,dependencies:null,isSafe:null};o[t.id.name]||(o[t.id.name]=c),this.declarations.push(c),this.scan(t.id),this.scan(t.init);break;case"FunctionExpression":case"FunctionDeclaration":0===this.runningContexts.length?this.scan(t.body):this.functions.push(t);break;case"IfStatement":this.scan(t.test),this.scan(t.consequent),t.alternate&&this.scan(t.alternate);break;case"ForStatement":var h,f=this.newContext((function(){e.pushState(l),e.scan(t.init),e.popState(l),h=e.getIdentifiers((function(){e.scan(t.test)})),e.scan(t.update),e.newContext((function(){e.scan(t.body)}))}));if(h)for(var p in f)"@contextType"!==p&&h.indexOf(p)>-1&&(f[p].inForLoopTest=!0);break;case"DoWhileStatement":case"WhileStatement":this.newContext((function(){e.scan(t.body),e.scan(t.test)}));break;case"Identifier":this.isState(a)&&this.trackedIdentifiers.push(t.name),this.identifiers.push({context:this.currentContext,declaration:this.getDeclaration(t.name),ast:t});break;case"ReturnStatement":this.returnStatements.push(t),this.scan(t.argument);break;case"MemberExpression":this.pushState(u),this.scan(t.object),this.scan(t.property),this.popState(u);break;case"ExpressionStatement":this.scan(t.expression);break;case"SequenceExpression":this.scan(t.expressions);break;case"CallExpression":this.functionCalls.push({context:this.currentContext,ast:t}),this.scan(t.arguments);break;case"ArrayExpression":this.scan(t.elements);break;case"ConditionalExpression":this.scan(t.test),this.scan(t.alternate),this.scan(t.consequent);break;case"SwitchStatement":this.scan(t.discriminant),this.scan(t.cases);break;case"SwitchCase":this.scan(t.test),this.scan(t.consequent);break;case"ThisExpression":case"Literal":case"DebuggerStatement":case"EmptyStatement":case"BreakStatement":case"ContinueStatement":break;default:throw new Error('unhandled type "'.concat(t.type,'"'))}}}]),t}();e.exports={FunctionTracer:c}},{"../utils":114}],12:[function(t,e,n){var r=t("gl-wiretap").glWiretap,i=t("../../utils").utils;function a(t){return t.toString().replace("=>","").replace(/^function /,"").replace(/utils[.]/g,"/*utils.*/")}function o(t,e){var n="single"===e.precision?t:"new Float32Array(".concat(t,".buffer)");return e.output[2]?"renderOutput(".concat(n,", ").concat(e.output[0],", ").concat(e.output[1],", ").concat(e.output[2],")"):e.output[1]?"renderOutput(".concat(n,", ").concat(e.output[0],", ").concat(e.output[1],")"):"renderOutput(".concat(n,", ").concat(e.output[0],")")}function s(t,e,n){var r=t.toArray.toString(),a=!/^function/.test(r),o=i.flattenFunctionToString("".concat(a?"function ":"").concat(r),{findDependency:function(e,n){if("utils"===e)return"const ".concat(n," = ").concat(i[n].toString(),";");if("this"===e)return"framebuffer"===n?"":"".concat(a?"function ":"").concat(t[n].toString());throw new Error("unhandled fromObject")},thisLookup:function(n,r){if("texture"===n)return e;if("context"===n)return r?null:"gl";if(t.hasOwnProperty(n))return JSON.stringify(t[n]);throw new Error("unhandled thisLookup ".concat(n))}});return"() => {\n  function framebuffer() { return ".concat(n,"; };\n  ").concat(o,"\n  return toArray();\n  }")}function u(t,e,n,r,i){if(null===t)return null;if(null===e)return null;switch(typeof t){case"boolean":case"number":return null}if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement)for(var a=0;a<e.length;a++){var o=e[a];if(("HTMLImageArray"===o.type||!o)&&o.uploadValue===t){var s=n[a].indexOf(t);if(-1!==s){var u="uploadValue_".concat(o.name,"[").concat(s,"]");return r.insertVariable(u,t),u}}}for(var l=0;l<e.length;l++){var c=e[l];if(t===c.uploadValue){var h="uploadValue_".concat(c.name);return r.insertVariable(h,c),h}}return null}e.exports={glKernelString:function(t,e,n,l,c){n.built||n.build.apply(n,e),e=e?Array.from(e).map((function(t){switch(typeof t){case"boolean":return new Boolean(t);case"number":return new Number(t);default:return t}})):null;var h=[],f=r(n.context,{useTrackablePrimitives:!0,onReadPixels:function(t){if(O.subKernels){if(p){var e=O.subKernels[d++].property;h.push("    result".concat(isNaN(e)?"."+e:"[".concat(e,"]")," = ").concat(o(t,O),";"))}else h.push("    const result = { result: ".concat(o(t,O)," };")),p=!0;d===O.subKernels.length&&h.push("    return result;")}else t?h.push("    return ".concat(o(t,O),";")):h.push("    return null;")},onUnrecognizedArgumentLookup:function(t){var e=u(t,O.kernelArguments,[],f);if(e)return e;var n=u(t,O.kernelConstants,w?Object.keys(w).map((function(t){return w[t]})):[],f);return n||null}}),p=!1,d=0,g=n.source,m=n.canvas,y=n.output,v=n.pipeline,x=n.graphical,b=n.loopMaxIterations,w=n.constants,k=n.optimizeFloatMemory,_=n.precision,T=n.fixIntegerDivisionAccuracy,S=n.functions,E=n.nativeFunctions,A=n.subKernels,L=n.immutable,D=n.argumentTypes,C=n.constantTypes,I=(n.kernelArguments,n.kernelConstants),M=n.tactic,O=new t(g,{canvas:m,context:f,checkContext:!1,output:y,pipeline:v,graphical:x,loopMaxIterations:b,constants:w,optimizeFloatMemory:k,precision:_,fixIntegerDivisionAccuracy:T,functions:S,nativeFunctions:E,subKernels:A,immutable:L,argumentTypes:D,constantTypes:C,tactic:M}),P=[];if(f.setIndent(2),O.build.apply(O,e),P.push(f.toString()),f.reset(),O.kernelArguments.forEach((function(t,n){switch(t.type){case"Integer":case"Boolean":case"Number":case"Float":case"Array":case"Array(2)":case"Array(3)":case"Array(4)":case"HTMLCanvas":case"HTMLImage":case"HTMLVideo":f.insertVariable("uploadValue_".concat(t.name),t.uploadValue);break;case"HTMLImageArray":for(var r=0;r<e[n].length;r++){var i=e[n];f.insertVariable("uploadValue_".concat(t.name,"[").concat(r,"]"),i[r])}break;case"Input":f.insertVariable("uploadValue_".concat(t.name),t.uploadValue);break;case"MemoryOptimizedNumberTexture":case"NumberTexture":case"Array1D(2)":case"Array1D(3)":case"Array1D(4)":case"Array2D(2)":case"Array2D(3)":case"Array2D(4)":case"Array3D(2)":case"Array3D(3)":case"Array3D(4)":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":f.insertVariable("uploadValue_".concat(t.name),e[n].texture);break;default:throw new Error("unhandled kernelArgumentType insertion for glWiretap of type ".concat(t.type))}})),P.push("/** start of injected functions **/"),P.push("function ".concat(a(i.flattenTo))),P.push("function ".concat(a(i.flatten2dArrayTo))),P.push("function ".concat(a(i.flatten3dArrayTo))),P.push("function ".concat(a(i.flatten4dArrayTo))),P.push("function ".concat(a(i.isArray))),O.renderOutput!==O.renderTexture&&O.formatValues&&P.push("  const renderOutput = function ".concat(a(O.formatValues),";")),P.push("/** end of injected functions **/"),P.push("  const innerKernel = function (".concat(O.kernelArguments.map((function(t){return t.varName})).join(", "),") {")),f.setIndent(4),O.run.apply(O,e),O.renderKernels?O.renderKernels():O.renderOutput&&O.renderOutput(),P.push("    /** start setup uploads for kernel values **/"),O.kernelArguments.forEach((function(t){P.push("    "+t.getStringValueHandler().split("\n").join("\n    "))})),P.push("    /** end setup uploads for kernel values **/"),P.push(f.toString()),O.renderOutput===O.renderTexture){f.reset();var R=f.getContextVariableName(O.framebuffer);if(O.renderKernels){var N=O.renderKernels(),F=f.getContextVariableName(O.texture.texture);P.push("    return {\n      result: {\n        texture: ".concat(F,",\n        type: '").concat(N.result.type,"',\n        toArray: ").concat(s(N.result,F,R),"\n      },"));for(var z=O.subKernels,V=O.mappedTextures,j=0;j<z.length;j++){var U=V[j],K=z[j],B=N[K.property],W=f.getContextVariableName(U.texture);P.push("\n      ".concat(K.property,": {\n        texture: ").concat(W,",\n        type: '").concat(B.type,"',\n        toArray: ").concat(s(B,W,R),"\n      },"))}P.push("    };")}else{var G=O.renderOutput(),H=f.getContextVariableName(O.texture.texture);P.push("    return {\n        texture: ".concat(H,",\n        type: '").concat(G.type,"',\n        toArray: ").concat(s(G,H,R),"\n      };"))}}P.push("    ".concat(c?"\n"+c+"    ":"")),P.push(h.join("\n")),P.push("  };"),O.graphical&&(P.push(function(t){var e=t.getPixels.toString(),n=!/^function/.test(e);return i.flattenFunctionToString("".concat(n?"function ":"").concat(e),{findDependency:function(t,e){return"utils"===t?"const ".concat(e," = ").concat(i[e].toString(),";"):null},thisLookup:function(e){if("context"===e)return null;if(t.hasOwnProperty(e))return JSON.stringify(t[e]);throw new Error("unhandled thisLookup ".concat(e))}})}(O)),P.push("  innerKernel.getPixels = getPixels;")),P.push("  return innerKernel;");var Y=[];return I.forEach((function(t){Y.push("".concat(t.getStringValueHandler()))})),"function kernel(settings) {\n  const { context, constants } = settings;\n  ".concat(Y.join(""),"\n  ").concat(l||"","\n").concat(P.join("\n"),"\n}")}}},{"../../utils":114,"gl-wiretap":3}],13:[function(t,e,n){var r=t("../kernel").Kernel,i=t("../../utils").utils,a=t("./texture/array-2-float").GLTextureArray2Float,h=t("./texture/array-2-float-2d").GLTextureArray2Float2D,f=t("./texture/array-2-float-3d").GLTextureArray2Float3D,p=t("./texture/array-3-float").GLTextureArray3Float,d=t("./texture/array-3-float-2d").GLTextureArray3Float2D,g=t("./texture/array-3-float-3d").GLTextureArray3Float3D,m=t("./texture/array-4-float").GLTextureArray4Float,y=t("./texture/array-4-float-2d").GLTextureArray4Float2D,v=t("./texture/array-4-float-3d").GLTextureArray4Float3D,x=t("./texture/float").GLTextureFloat,b=t("./texture/float-2d").GLTextureFloat2D,w=t("./texture/float-3d").GLTextureFloat3D,k=t("./texture/memory-optimized").GLTextureMemoryOptimized,_=t("./texture/memory-optimized-2d").GLTextureMemoryOptimized2D,T=t("./texture/memory-optimized-3d").GLTextureMemoryOptimized3D,S=t("./texture/unsigned").GLTextureUnsigned,E=t("./texture/unsigned-2d").GLTextureUnsigned2D,A=t("./texture/unsigned-3d").GLTextureUnsigned3D,L=t("./texture/graphical").GLTextureGraphical,D=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).transferValues=null,i.formatValues=null,i.TextureConstructor=null,i.renderOutput=null,i.renderRawOutput=null,i.texSize=null,i.translatedSource=null,i.compiledFragmentShader=null,i.compiledVertexShader=null,i.switchingKernels=null,i._textureSwitched=null,i._mappedTextureSwitched=null,i}return s(n,[{key:"setFixIntegerDivisionAccuracy",value:function(t){return this.fixIntegerDivisionAccuracy=t,this}},{key:"setPrecision",value:function(t){return this.precision=t,this}},{key:"setFloatTextures",value:function(t){return i.warnDeprecated("method","setFloatTextures","setOptimizeFloatMemory"),this.floatTextures=t,this}},{key:"checkTextureSize",value:function(){var t=this.constructor.features;if(this.texSize[0]>t.maxTextureSize||this.texSize[1]>t.maxTextureSize)throw new Error("Texture size [".concat(this.texSize[0],",").concat(this.texSize[1],"] generated by kernel is larger than supported size [").concat(t.maxTextureSize,",").concat(t.maxTextureSize,"]"))}},{key:"translateSource",value:function(){throw new Error('"translateSource" not defined on '.concat(this.constructor.name))}},{key:"pickRenderStrategy",value:function(t){if(this.graphical)return this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=function(t){return t},this.TextureConstructor=L,null;if("unsigned"===this.precision)if(this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=this.readPackedPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=A,null):this.output[1]>0?(this.TextureConstructor=E,null):(this.TextureConstructor=S,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(t)}else switch(null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.renderOutput=this.renderValues,this.output[2]>0?(this.TextureConstructor=A,this.formatValues=i.erect3DPackedFloat,null):this.output[1]>0?(this.TextureConstructor=E,this.formatValues=i.erect2DPackedFloat,null):(this.TextureConstructor=S,this.formatValues=i.erectPackedFloat,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(t)}else{if("single"!==this.precision)throw new Error('unhandled precision of "'.concat(this.precision,'"'));if(this.renderRawOutput=this.readFloatPixelsToFloat32Array,this.transferValues=this.readFloatPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.optimizeFloatMemory?this.output[2]>0?(this.TextureConstructor=T,null):this.output[1]>0?(this.TextureConstructor=_,null):(this.TextureConstructor=k,null):this.output[2]>0?(this.TextureConstructor=w,null):this.output[1]>0?(this.TextureConstructor=b,null):(this.TextureConstructor=x,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=f,null):this.output[1]>0?(this.TextureConstructor=h,null):(this.TextureConstructor=a,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=g,null):this.output[1]>0?(this.TextureConstructor=d,null):(this.TextureConstructor=p,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=v,null):this.output[1]>0?(this.TextureConstructor=y,null):(this.TextureConstructor=m,null)}if(this.renderOutput=this.renderValues,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.optimizeFloatMemory)switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=T,this.formatValues=i.erectMemoryOptimized3DFloat,null):this.output[1]>0?(this.TextureConstructor=_,this.formatValues=i.erectMemoryOptimized2DFloat,null):(this.TextureConstructor=k,this.formatValues=i.erectMemoryOptimizedFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=f,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=h,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=a,this.formatValues=i.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=g,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=d,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=p,this.formatValues=i.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=v,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=y,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=m,this.formatValues=i.erectArray4,null)}else switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=w,this.formatValues=i.erect3DFloat,null):this.output[1]>0?(this.TextureConstructor=b,this.formatValues=i.erect2DFloat,null):(this.TextureConstructor=x,this.formatValues=i.erectFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=f,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=h,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=a,this.formatValues=i.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=g,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=d,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=p,this.formatValues=i.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=v,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=y,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=m,this.formatValues=i.erectArray4,null)}}throw new Error('unhandled return type "'.concat(this.returnType,'"'))}},{key:"getKernelString",value:function(){throw new Error("abstract method call")}},{key:"getMainResultTexture",value:function(){switch(this.returnType){case"LiteralInteger":case"Float":case"Integer":case"Number":return this.getMainResultNumberTexture();case"Array(2)":return this.getMainResultArray2Texture();case"Array(3)":return this.getMainResultArray3Texture();case"Array(4)":return this.getMainResultArray4Texture();default:throw new Error("unhandled returnType type ".concat(this.returnType))}}},{key:"getMainResultKernelNumberTexture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelNumberTexture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultKernelArray2Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelArray2Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultKernelArray3Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelArray3Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultKernelArray4Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelArray4Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultGraphical",value:function(){throw new Error("abstract method call")}},{key:"getMainResultMemoryOptimizedFloats",value:function(){throw new Error("abstract method call")}},{key:"getMainResultPackedPixels",value:function(){throw new Error("abstract method call")}},{key:"getMainResultString",value:function(){return this.graphical?this.getMainResultGraphical():"single"===this.precision?this.optimizeFloatMemory?this.getMainResultMemoryOptimizedFloats():this.getMainResultTexture():this.getMainResultPackedPixels()}},{key:"getMainResultNumberTexture",value:function(){return i.linesToString(this.getMainResultKernelNumberTexture())+i.linesToString(this.getMainResultSubKernelNumberTexture())}},{key:"getMainResultArray2Texture",value:function(){return i.linesToString(this.getMainResultKernelArray2Texture())+i.linesToString(this.getMainResultSubKernelArray2Texture())}},{key:"getMainResultArray3Texture",value:function(){return i.linesToString(this.getMainResultKernelArray3Texture())+i.linesToString(this.getMainResultSubKernelArray3Texture())}},{key:"getMainResultArray4Texture",value:function(){return i.linesToString(this.getMainResultKernelArray4Texture())+i.linesToString(this.getMainResultSubKernelArray4Texture())}},{key:"getFloatTacticDeclaration",value:function(){var t=this.getVariablePrecisionString(this.texSize,this.tactic);return"precision ".concat(t," float;\n")}},{key:"getIntTacticDeclaration",value:function(){return"precision ".concat(this.getVariablePrecisionString(this.texSize,this.tactic,!0)," int;\n")}},{key:"getSampler2DTacticDeclaration",value:function(){return"precision ".concat(this.getVariablePrecisionString(this.texSize,this.tactic)," sampler2D;\n")}},{key:"getSampler2DArrayTacticDeclaration",value:function(){return"precision ".concat(this.getVariablePrecisionString(this.texSize,this.tactic)," sampler2DArray;\n")}},{key:"renderTexture",value:function(){return this.immutable?this.texture.clone():this.texture}},{key:"readPackedPixelsToUint8Array",value:function(){if("unsigned"!==this.precision)throw new Error('Requires this.precision to be "unsigned"');var t=this.texSize,e=this.context,n=new Uint8Array(t[0]*t[1]*4);return e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,n),n}},{key:"readPackedPixelsToFloat32Array",value:function(){return new Float32Array(this.readPackedPixelsToUint8Array().buffer)}},{key:"readFloatPixelsToFloat32Array",value:function(){if("single"!==this.precision)throw new Error('Requires this.precision to be "single"');var t=this.texSize,e=this.context,n=t[0],r=t[1],i=new Float32Array(n*r*4);return e.readPixels(0,0,n,r,e.RGBA,e.FLOAT,i),i}},{key:"getPixels",value:function(t){var e=this.context,n=this.output,r=c(n,2),a=r[0],o=r[1],s=new Uint8Array(a*o*4);return e.readPixels(0,0,a,o,e.RGBA,e.UNSIGNED_BYTE,s),new Uint8ClampedArray((t?s:i.flipPixels(s,a,o)).buffer)}},{key:"renderKernelsToArrays",value:function(){for(var t={result:this.renderOutput()},e=0;e<this.subKernels.length;e++)t[this.subKernels[e].property]=this.mappedTextures[e].toArray();return t}},{key:"renderKernelsToTextures",value:function(){var t={result:this.renderOutput()};if(this.immutable)for(var e=0;e<this.subKernels.length;e++)t[this.subKernels[e].property]=this.mappedTextures[e].clone();else for(var n=0;n<this.subKernels.length;n++)t[this.subKernels[n].property]=this.mappedTextures[n];return t}},{key:"resetSwitchingKernels",value:function(){var t=this.switchingKernels;return this.switchingKernels=null,t}},{key:"setOutput",value:function(t){var e=this.toKernelOutput(t);if(this.program){if(!this.dynamicOutput)throw new Error("Resizing a kernel with dynamicOutput: false is not possible");var n=[e[0],e[1]||1,e[2]||1],r=i.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},n),a=this.texSize;if(a){var o=this.getVariablePrecisionString(a,this.tactic),s=this.getVariablePrecisionString(r,this.tactic);if(o!==s)return this.debug&&console.warn("Precision requirement changed, asking GPU instance to recompile"),void this.switchKernels({type:"outputPrecisionMismatch",precision:s,needed:t})}this.output=e,this.threadDim=n,this.texSize=r;var u=this.context;if(u.bindFramebuffer(u.FRAMEBUFFER,this.framebuffer),this.updateMaxTexSize(),this.framebuffer.width=this.texSize[0],this.framebuffer.height=this.texSize[1],u.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),this.canvas.width=this.maxTexSize[0],this.canvas.height=this.maxTexSize[1],this.texture&&this.texture.delete(),this.texture=null,this._setupOutputTexture(),this.mappedTextures&&this.mappedTextures.length>0){for(var l=0;l<this.mappedTextures.length;l++)this.mappedTextures[l].delete();this.mappedTextures=null,this._setupSubOutputTextures()}}else this.output=e;return this}},{key:"renderValues",value:function(){return this.formatValues(this.transferValues(),this.output[0],this.output[1],this.output[2])}},{key:"switchKernels",value:function(t){this.switchingKernels?this.switchingKernels.push(t):this.switchingKernels=[t]}},{key:"getVariablePrecisionString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.texSize,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tactic,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e){if(!this.constructor.features.isSpeedTacticSupported)return"highp";var r=this.constructor.features[n?"lowIntPrecision":"lowFloatPrecision"],i=this.constructor.features[n?"mediumIntPrecision":"mediumFloatPrecision"],a=this.constructor.features[n?"highIntPrecision":"highFloatPrecision"],o=Math.log2(t[0]*t[1]);if(o<=r.rangeMax)return"lowp";if(o<=i.rangeMax)return"mediump";if(o<=a.rangeMax)return"highp";throw new Error("The required size exceeds that of the ability of your system")}switch(e){case"speed":return"lowp";case"balanced":return"mediump";case"precision":return"highp";default:throw new Error('Unknown tactic "'.concat(e,'" use "speed", "balanced", "precision", or empty for auto'))}}},{key:"updateTextureArgumentRefs",value:function(t,e){if(this.immutable)if(this.texture.texture===e.texture){var n=t.prevArg;n&&(1===n.texture._refs&&(this.texture.delete(),this.texture=n.clone(),this._textureSwitched=!0),n.delete()),t.prevArg=e.clone()}else if(this.mappedTextures&&this.mappedTextures.length>0)for(var r=this.mappedTextures,i=0;i<r.length;i++){var a=r[i];if(a.texture===e.texture){var o=t.prevArg;return o&&(1===o.texture._refs&&(a.delete(),r[i]=o.clone(),this._mappedTextureSwitched[i]=!0),o.delete()),void(t.prevArg=e.clone())}}}},{key:"onActivate",value:function(t){if(this._textureSwitched=!0,this.texture=t.texture,this.mappedTextures){for(var e=0;e<this.mappedTextures.length;e++)this._mappedTextureSwitched[e]=!0;this.mappedTextures=t.mappedTextures}}},{key:"initCanvas",value:function(){}}],[{key:"mode",get:function(){return"gpu"}},{key:"getIsFloatRead",value:function(){var t=new this("function kernelFunction() {\n      return 1;\n    }",{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[1],precision:"single",returnType:"Number",tactic:"speed"});t.build(),t.run();var e=t.renderOutput();return t.destroy(!0),1===e[0]}},{key:"getIsIntegerDivisionAccurate",value:function(){var t=new this(function(t,e){return t[this.thread.x]/e[this.thread.x]}.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[2],returnType:"Number",precision:"unsigned",tactic:"speed"}),e=[[6,6030401],[3,3991]];t.build.apply(t,e),t.run.apply(t,e);var n=t.renderOutput();return t.destroy(!0),2===n[0]&&1511===n[1]}},{key:"getIsSpeedTacticSupported",value:function(){var t=new this(function(t){return t[this.thread.x]}.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[4],returnType:"Number",precision:"unsigned",tactic:"speed"}),e=[[0,1,2,3]];t.build.apply(t,e),t.run.apply(t,e);var n=t.renderOutput();return t.destroy(!0),0===Math.round(n[0])&&1===Math.round(n[1])&&2===Math.round(n[2])&&3===Math.round(n[3])}},{key:"testCanvas",get:function(){throw new Error('"testCanvas" not defined on '.concat(this.name))}},{key:"testContext",get:function(){throw new Error('"testContext" not defined on '.concat(this.name))}},{key:"getFeatures",value:function(){var t=this.testContext,e=this.getIsDrawBuffers();return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),isTextureFloat:this.getIsTextureFloat(),isDrawBuffers:e,kernelMap:e,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_INT),lowFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_FLOAT),mediumIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_INT),mediumFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT),highIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT),highFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT)})}},{key:"setupFeatureChecks",value:function(){throw new Error('"setupFeatureChecks" not defined on '.concat(this.name))}},{key:"getSignature",value:function(t,e){return t.getVariablePrecisionString()+(e.length>0?":"+e.join(","):"")}},{key:"nativeFunctionArguments",value:function(t){for(var e=[],n=[],r=[],i=/^[a-zA-Z_]/,a=/[a-zA-Z_0-9]/,o=0,s=null,u=null;o<t.length;){var l=t[o],c=t[o+1],h=r.length>0?r[r.length-1]:null;if("FUNCTION_ARGUMENTS"!==h||"/"!==l||"*"!==c)if("MULTI_LINE_COMMENT"!==h||"*"!==l||"/"!==c)if("FUNCTION_ARGUMENTS"!==h||"/"!==l||"/"!==c)if("COMMENT"!==h||"\n"!==l)if(null!==h||"("!==l){if("FUNCTION_ARGUMENTS"===h){if(")"===l){r.pop();break}if("f"===l&&"l"===c&&"o"===t[o+2]&&"a"===t[o+3]&&"t"===t[o+4]&&" "===t[o+5]){r.push("DECLARE_VARIABLE"),u="float",s="",o+=6;continue}if("i"===l&&"n"===c&&"t"===t[o+2]&&" "===t[o+3]){r.push("DECLARE_VARIABLE"),u="int",s="",o+=4;continue}if("v"===l&&"e"===c&&"c"===t[o+2]&&"2"===t[o+3]&&" "===t[o+4]){r.push("DECLARE_VARIABLE"),u="vec2",s="",o+=5;continue}if("v"===l&&"e"===c&&"c"===t[o+2]&&"3"===t[o+3]&&" "===t[o+4]){r.push("DECLARE_VARIABLE"),u="vec3",s="",o+=5;continue}if("v"===l&&"e"===c&&"c"===t[o+2]&&"4"===t[o+3]&&" "===t[o+4]){r.push("DECLARE_VARIABLE"),u="vec4",s="",o+=5;continue}}else if("DECLARE_VARIABLE"===h){if(""===s){if(" "===l){o++;continue}if(!i.test(l))throw new Error("variable name is not expected string")}s+=l,a.test(c)||(r.pop(),n.push(s),e.push(C[u]))}o++}else r.push("FUNCTION_ARGUMENTS"),o++;else r.pop(),o++;else r.push("COMMENT"),o+=2;else r.pop(),o+=2;else r.push("MULTI_LINE_COMMENT"),o+=2}if(r.length>0)throw new Error("GLSL function was not parsable");return{argumentNames:n,argumentTypes:e}}},{key:"nativeFunctionReturnType",value:function(t){return C[t.match(/int|float|vec[2-4]/)[0]]}},{key:"combineKernels",value:function(t,e){t.apply(null,arguments);var n,r=e.texSize,a=r.texSize,o=r.context,s=r.threadDim;if("single"===e.precision){var u=a[0],l=Math.ceil(a[1]/4);n=new Float32Array(u*l*4*4),o.readPixels(0,0,u,4*l,o.RGBA,o.FLOAT,n)}else{var c=new Uint8Array(a[0]*a[1]*4);o.readPixels(0,0,a[0],a[1],o.RGBA,o.UNSIGNED_BYTE,c),n=new Float32Array(c.buffer)}if(n=n.subarray(0,s[0]*s[1]*s[2]),1===e.output.length)return n;if(2===e.output.length)return i.splitArray(n,e.output[0]);if(3===e.output.length){var h=i.splitArray(n,e.output[0]*e.output[1]);return h.map((function(t){return i.splitArray(t,e.output[0])}))}}}]),n}(r),C={int:"Integer",float:"Number",vec2:"Array(2)",vec3:"Array(3)",vec4:"Array(4)"};e.exports={GLKernel:D}},{"../../utils":114,"../kernel":36,"./texture/array-2-float":16,"./texture/array-2-float-2d":14,"./texture/array-2-float-3d":15,"./texture/array-3-float":19,"./texture/array-3-float-2d":17,"./texture/array-3-float-3d":18,"./texture/array-4-float":22,"./texture/array-4-float-2d":20,"./texture/array-4-float-3d":21,"./texture/float":25,"./texture/float-2d":23,"./texture/float-3d":24,"./texture/graphical":26,"./texture/memory-optimized":30,"./texture/memory-optimized-2d":28,"./texture/memory-optimized-3d":29,"./texture/unsigned":33,"./texture/unsigned-2d":31,"./texture/unsigned-3d":32}],14:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(2)",r}return s(n,[{key:"toArray",value:function(){return r.erect2DArray2(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray2Float2D:i}},{"../../../utils":114,"./float":25}],15:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(2)",r}return s(n,[{key:"toArray",value:function(){return r.erect3DArray2(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray2Float3D:i}},{"../../../utils":114,"./float":25}],16:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(2)",r}return s(n,[{key:"toArray",value:function(){return r.erectArray2(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray2Float:i}},{"../../../utils":114,"./float":25}],17:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(3)",r}return s(n,[{key:"toArray",value:function(){return r.erect2DArray3(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray3Float2D:i}},{"../../../utils":114,"./float":25}],18:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(3)",r}return s(n,[{key:"toArray",value:function(){return r.erect3DArray3(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray3Float3D:i}},{"../../../utils":114,"./float":25}],19:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(3)",r}return s(n,[{key:"toArray",value:function(){return r.erectArray3(this.renderValues(),this.output[0])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray3Float:i}},{"../../../utils":114,"./float":25}],20:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(4)",r}return s(n,[{key:"toArray",value:function(){return r.erect2DArray4(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray4Float2D:i}},{"../../../utils":114,"./float":25}],21:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(4)",r}return s(n,[{key:"toArray",value:function(){return r.erect3DArray4(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray4Float3D:i}},{"../../../utils":114,"./float":25}],22:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(4)",r}return s(n,[{key:"toArray",value:function(){return r.erectArray4(this.renderValues(),this.output[0])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray4Float:i}},{"../../../utils":114,"./float":25}],23:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(1)",r}return s(n,[{key:"toArray",value:function(){return r.erect2DFloat(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureFloat2D:i}},{"../../../utils":114,"./float":25}],24:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(1)",r}return s(n,[{key:"toArray",value:function(){return r.erect3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureFloat3D:i}},{"../../../utils":114,"./float":25}],25:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(1)",r}return s(n,[{key:"textureType",get:function(){return this.context.FLOAT}},{key:"renderRawOutput",value:function(){var t=this.context,e=this.size;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0);var n=new Float32Array(e[0]*e[1]*4);return t.readPixels(0,0,e[0],e[1],t.RGBA,t.FLOAT,n),n}},{key:"renderValues",value:function(){return this._deleted?null:this.renderRawOutput()}},{key:"toArray",value:function(){return r.erectFloat(this.renderValues(),this.output[0])}}]),n}(t("./index").GLTexture);e.exports={GLTextureFloat:i}},{"../../../utils":114,"./index":27}],26:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="ArrayTexture(4)",r}return s(n,[{key:"toArray",value:function(){return this.renderValues()}}]),n}(t("./unsigned").GLTextureUnsigned);e.exports={GLTextureGraphical:r}},{"./unsigned":33}],27:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"textureType",get:function(){throw new Error('"textureType" not implemented on '.concat(this.name))}},{key:"clone",value:function(){return new this.constructor(this)}},{key:"beforeMutate",value:function(){return this.texture._refs>1&&(this.newTexture(),!0)}},{key:"cloneTexture",value:function(){this.texture._refs--;var t=this.context,e=this.size,n=this.texture;this.kernel.debug&&console.warn("cloning internal texture"),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),i(t,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var r=t.createTexture();i(t,r),t.texImage2D(t.TEXTURE_2D,0,this.internalFormat,e[0],e[1],0,this.textureFormat,this.textureType,null),t.copyTexSubImage2D(t.TEXTURE_2D,0,0,0,0,0,e[0],e[1]),r._refs=1,this.texture=r}},{key:"newTexture",value:function(){this.texture._refs--;var t=this.context,e=this.size;this.kernel.debug&&console.warn("new internal texture");var n=t.createTexture();i(t,n),t.texImage2D(t.TEXTURE_2D,0,this.internalFormat,e[0],e[1],0,this.textureFormat,this.textureType,null),n._refs=1,this.texture=n}},{key:"clear",value:function(){if(this.texture._refs){this.texture._refs--;var t=this.context,e=this.texture=t.createTexture();i(t,e);var n=this.size;e._refs=1,t.texImage2D(t.TEXTURE_2D,0,this.internalFormat,n[0],n[1],0,this.textureFormat,this.textureType,null)}var r=this.context,a=this.texture;r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer()),r.bindTexture(r.TEXTURE_2D,a),i(r,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)}},{key:"delete",value:function(){this._deleted||(this._deleted=!0,this.texture._refs&&(this.texture._refs--,this.texture._refs)||this.context.deleteTexture(this.texture))}},{key:"framebuffer",value:function(){return this._framebuffer||(this._framebuffer=this.kernel.getRawValueFramebuffer(this.size[0],this.size[1])),this._framebuffer}}]),n}(t("../../../texture").Texture);function i(t,e){t.activeTexture(t.TEXTURE15),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)}e.exports={GLTexture:r}},{"../../../texture":113}],28:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="MemoryOptimizedNumberTexture",r}return s(n,[{key:"toArray",value:function(){return r.erectMemoryOptimized2DFloat(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureMemoryOptimized2D:i}},{"../../../utils":114,"./float":25}],29:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="MemoryOptimizedNumberTexture",r}return s(n,[{key:"toArray",value:function(){return r.erectMemoryOptimized3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureMemoryOptimized3D:i}},{"../../../utils":114,"./float":25}],30:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="MemoryOptimizedNumberTexture",r}return s(n,[{key:"toArray",value:function(){return r.erectMemoryOptimizedFloat(this.renderValues(),this.output[0])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureMemoryOptimized:i}},{"../../../utils":114,"./float":25}],31:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="NumberTexture",r}return s(n,[{key:"toArray",value:function(){return r.erect2DPackedFloat(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./unsigned").GLTextureUnsigned);e.exports={GLTextureUnsigned2D:i}},{"../../../utils":114,"./unsigned":33}],32:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="NumberTexture",r}return s(n,[{key:"toArray",value:function(){return r.erect3DPackedFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./unsigned").GLTextureUnsigned);e.exports={GLTextureUnsigned3D:i}},{"../../../utils":114,"./unsigned":33}],33:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t){var r;return o(this,n),(r=e.call(this,t)).type="NumberTexture",r}return s(n,[{key:"textureType",get:function(){return this.context.UNSIGNED_BYTE}},{key:"renderRawOutput",value:function(){var t=this.context;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0);var e=new Uint8Array(this.size[0]*this.size[1]*4);return t.readPixels(0,0,this.size[0],this.size[1],t.RGBA,t.UNSIGNED_BYTE,e),e}},{key:"renderValues",value:function(){return this._deleted?null:new Float32Array(this.renderRawOutput().buffer)}},{key:"toArray",value:function(){return r.erectPackedFloat(this.renderValues(),this.output[0])}}]),n}(t("./index").GLTexture);e.exports={GLTextureUnsigned:i}},{"../../../utils":114,"./index":27}],34:[function(t,e,n){var r=t("gl"),c=t("../web-gl/kernel").WebGLKernel,h=t("../gl/kernel-string").glKernelString,f=null,p=null,d=null,g=null,m=null,y=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"initCanvas",value:function(){return{}}},{key:"initContext",value:function(){return r(2,2,{preserveDrawingBuffer:!0})}},{key:"initExtensions",value:function(){this.extensions={STACKGL_resize_drawingbuffer:this.context.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:this.context.getExtension("STACKGL_destroy_context"),OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers")}}},{key:"build",value:function(){i(a(n.prototype),"build",this).apply(this,arguments),this.fallbackRequested||this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1])}},{key:"destroyExtensions",value:function(){this.extensions.STACKGL_resize_drawingbuffer=null,this.extensions.STACKGL_destroy_context=null,this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}},{key:"toString",value:function(){var t="const gl = context || require('gl')(1, 1);\n",e="    if (!context) { gl.getExtension('STACKGL_destroy_context').destroy(); }\n";return h(this.constructor,arguments,this,t,e)}},{key:"setOutput",value:function(t){return i(a(n.prototype),"setOutput",this).call(this,t),this.graphical&&this.extensions.STACKGL_resize_drawingbuffer&&this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1]),this}}],[{key:"isSupported",get:function(){return null!==f?f:(this.setupFeatureChecks(),f=null!==d)}},{key:"setupFeatureChecks",value:function(){if(p=null,g=null,"function"===typeof r)try{if(!(d=r(2,2,{preserveDrawingBuffer:!0}))||!d.getExtension)return;g={STACKGL_resize_drawingbuffer:d.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:d.getExtension("STACKGL_destroy_context"),OES_texture_float:d.getExtension("OES_texture_float"),OES_texture_float_linear:d.getExtension("OES_texture_float_linear"),OES_element_index_uint:d.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:d.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:d.getExtension("WEBGL_color_buffer_float")},m=this.getFeatures()}catch(t){console.warn(t)}}},{key:"isContextMatch",value:function(t){try{return"ANGLE"===t.getParameter(t.RENDERER)}catch(e){return!1}}},{key:"getIsTextureFloat",value:function(){return Boolean(g.OES_texture_float)}},{key:"getIsDrawBuffers",value:function(){return Boolean(g.WEBGL_draw_buffers)}},{key:"getChannelCount",value:function(){return g.WEBGL_draw_buffers?d.getParameter(g.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}},{key:"getMaxTextureSize",value:function(){return d.getParameter(d.MAX_TEXTURE_SIZE)}},{key:"testCanvas",get:function(){return p}},{key:"testContext",get:function(){return d}},{key:"features",get:function(){return m}},{key:"destroyContext",value:function(t){var e=t.getExtension("STACKGL_destroy_context");e&&e.destroy&&e.destroy()}}]),n}(c);e.exports={HeadlessGLKernel:y}},{"../gl/kernel-string":12,"../web-gl/kernel":70,gl:2}],35:[function(t,e,n){var r=function(){"use strict";function t(e,n){o(this,t);var r=n.name,i=n.kernel,a=n.context,s=n.checkContext,u=n.onRequestContextHandle,l=n.onUpdateValueMismatch,c=n.origin,h=n.strictIntegers,f=n.type,p=n.tactic;if(!r)throw new Error("name not set");if(!f)throw new Error("type not set");if(!c)throw new Error("origin not set");if("user"!==c&&"constants"!==c)throw new Error('origin must be "user" or "constants" value is "'.concat(c,'"'));if(!u)throw new Error("onRequestContextHandle is not set");this.name=r,this.origin=c,this.tactic=p,this.varName="constants"===c?"constants.".concat(r):r,this.kernel=i,this.strictIntegers=h,this.type=e.type||f,this.size=e.size||null,this.index=null,this.context=a,this.checkContext=null===s||void 0===s||s,this.contextHandle=null,this.onRequestContextHandle=u,this.onUpdateValueMismatch=l,this.forceUploadEachRun=null}return s(t,[{key:"id",get:function(){return"".concat(this.origin,"_").concat(name)}},{key:"getSource",value:function(){throw new Error('"getSource" not defined on '.concat(this.constructor.name))}},{key:"updateValue",value:function(t){throw new Error('"updateValue" not defined on '.concat(this.constructor.name))}}]),t}();e.exports={KernelValue:r}},{}],36:[function(t,e,n){var r=t("../utils").utils,i=t("../input").Input,a=function(){"use strict";function t(e,n){if(o(this,t),"object"!==typeof e){if("string"!==typeof e)throw new Error("source not a string");if(!r.isFunctionString(e))throw new Error("source not a function string")}this.useLegacyEncoder=!1,this.fallbackRequested=!1,this.onRequestFallback=null,this.argumentNames="string"===typeof e?r.getArgumentNamesFromString(e):null,this.argumentTypes=null,this.argumentSizes=null,this.argumentBitRatios=null,this.kernelArguments=null,this.kernelConstants=null,this.forceUploadKernelConstants=null,this.source=e,this.output=null,this.debug=!1,this.graphical=!1,this.loopMaxIterations=0,this.constants=null,this.constantTypes=null,this.constantBitRatios=null,this.dynamicArguments=!1,this.dynamicOutput=!1,this.canvas=null,this.context=null,this.checkContext=null,this.gpu=null,this.functions=null,this.nativeFunctions=null,this.injectedNative=null,this.subKernels=null,this.validate=!0,this.immutable=!1,this.pipeline=!1,this.precision=null,this.tactic=null,this.plugins=null,this.returnType=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.optimizeFloatMemory=null,this.strictIntegers=!1,this.fixIntegerDivisionAccuracy=null,this.built=!1,this.signature=null}return s(t,[{key:"mergeSettings",value:function(t){for(var e in t)if(t.hasOwnProperty(e)&&this.hasOwnProperty(e)){switch(e){case"output":if(!Array.isArray(t.output)){this.setOutput(t.output);continue}break;case"functions":this.functions=[];for(var n=0;n<t.functions.length;n++)this.addFunction(t.functions[n]);continue;case"graphical":t[e]&&!t.hasOwnProperty("precision")&&(this.precision="unsigned"),this[e]=t[e];continue;case"nativeFunctions":if(!t.nativeFunctions)continue;this.nativeFunctions=[];for(var r=0;r<t.nativeFunctions.length;r++){var i=t.nativeFunctions[r],a=i.name,o=i.source;this.addNativeFunction(a,o,i)}continue}this[e]=t[e]}this.canvas||(this.canvas=this.initCanvas()),this.context||(this.context=this.initContext()),this.plugins||(this.plugins=this.initPlugins(t))}},{key:"build",value:function(){throw new Error('"build" not defined on '.concat(this.constructor.name))}},{key:"run",value:function(){throw new Error('"run" not defined on '.concat(this.constructor.name))}},{key:"initCanvas",value:function(){throw new Error('"initCanvas" not defined on '.concat(this.constructor.name))}},{key:"initContext",value:function(){throw new Error('"initContext" not defined on '.concat(this.constructor.name))}},{key:"initPlugins",value:function(t){throw new Error('"initPlugins" not defined on '.concat(this.constructor.name))}},{key:"addFunction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.name&&t.source&&t.argumentTypes&&"returnType"in t)this.functions.push(t);else if("settings"in t&&"source"in t)this.functions.push(this.functionToIGPUFunction(t.source,t.settings));else{if("string"!==typeof t&&"function"!==typeof t)throw new Error("function not properly defined");this.functions.push(this.functionToIGPUFunction(t,e))}return this}},{key:"addNativeFunction",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.argumentTypes?u(n.argumentTypes):this.constructor.nativeFunctionArguments(e)||{},i=r.argumentTypes,a=r.argumentNames;return this.nativeFunctions.push({name:t,source:e,settings:n,argumentTypes:i,argumentNames:a,returnType:n.returnType||this.constructor.nativeFunctionReturnType(e)}),this}},{key:"setupArguments",value:function(t){if(this.kernelArguments=[],this.argumentTypes)for(var e=0;e<this.argumentTypes.length;e++)this.kernelArguments.push({type:this.argumentTypes[e]});else if(!this.argumentTypes){this.argumentTypes=[];for(var n=0;n<t.length;n++){var a=r.getVariableType(t[n],this.strictIntegers),o="Integer"===a?"Number":a;this.argumentTypes.push(o),this.kernelArguments.push({type:o})}}this.argumentSizes=new Array(t.length),this.argumentBitRatios=new Int32Array(t.length);for(var s=0;s<t.length;s++){var u=t[s];this.argumentSizes[s]=u.constructor===i?u.size:null,this.argumentBitRatios[s]=this.getBitRatio(u)}if(this.argumentNames.length!==t.length)throw new Error("arguments are miss-aligned")}},{key:"setupConstants",value:function(){this.kernelConstants=[];var t=null===this.constantTypes;if(t&&(this.constantTypes={}),this.constantBitRatios={},this.constants)for(var e in this.constants){if(t){var n=r.getVariableType(this.constants[e],this.strictIntegers);this.constantTypes[e]=n,this.kernelConstants.push({name:e,type:n})}else this.kernelConstants.push({name:e,type:this.constantTypes[e]});this.constantBitRatios[e]=this.getBitRatio(this.constants[e])}}},{key:"setOptimizeFloatMemory",value:function(t){return this.optimizeFloatMemory=t,this}},{key:"toKernelOutput",value:function(t){return t.hasOwnProperty("x")?t.hasOwnProperty("y")?t.hasOwnProperty("z")?[t.x,t.y,t.z]:[t.x,t.y]:[t.x]:t}},{key:"setOutput",value:function(t){return this.output=this.toKernelOutput(t),this}},{key:"setDebug",value:function(t){return this.debug=t,this}},{key:"setGraphical",value:function(t){return this.graphical=t,this.precision="unsigned",this}},{key:"setLoopMaxIterations",value:function(t){return this.loopMaxIterations=t,this}},{key:"setConstants",value:function(t){return this.constants=t,this}},{key:"setConstantTypes",value:function(t){return this.constantTypes=t,this}},{key:"setFunctions",value:function(t){for(var e=0;e<t.length;e++)this.addFunction(t[e]);return this}},{key:"setNativeFunctions",value:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.name,i=n.source;this.addNativeFunction(r,i,n)}return this}},{key:"setInjectedNative",value:function(t){return this.injectedNative=t,this}},{key:"setPipeline",value:function(t){return this.pipeline=t,this}},{key:"setPrecision",value:function(t){return this.precision=t,this}},{key:"setDimensions",value:function(t){return r.warnDeprecated("method","setDimensions","setOutput"),this.output=t,this}},{key:"setOutputToTexture",value:function(t){return r.warnDeprecated("method","setOutputToTexture","setPipeline"),this.pipeline=t,this}},{key:"setImmutable",value:function(t){return this.immutable=t,this}},{key:"setCanvas",value:function(t){return this.canvas=t,this}},{key:"setStrictIntegers",value:function(t){return this.strictIntegers=t,this}},{key:"setDynamicOutput",value:function(t){return this.dynamicOutput=t,this}},{key:"setHardcodeConstants",value:function(t){return r.warnDeprecated("method","setHardcodeConstants"),this.setDynamicOutput(t),this.setDynamicArguments(t),this}},{key:"setDynamicArguments",value:function(t){return this.dynamicArguments=t,this}},{key:"setUseLegacyEncoder",value:function(t){return this.useLegacyEncoder=t,this}},{key:"setWarnVarUsage",value:function(t){return r.warnDeprecated("method","setWarnVarUsage"),this}},{key:"getCanvas",value:function(){return r.warnDeprecated("method","getCanvas"),this.canvas}},{key:"getWebGl",value:function(){return r.warnDeprecated("method","getWebGl"),this.context}},{key:"setContext",value:function(t){return this.context=t,this}},{key:"setArgumentTypes",value:function(t){if(Array.isArray(t))this.argumentTypes=t;else for(var e in this.argumentTypes=[],t)if(t.hasOwnProperty(e)){var n=this.argumentNames.indexOf(e);if(-1===n)throw new Error("unable to find argument ".concat(e));this.argumentTypes[n]=t[e]}return this}},{key:"setTactic",value:function(t){return this.tactic=t,this}},{key:"requestFallback",value:function(t){if(!this.onRequestFallback)throw new Error('"onRequestFallback" not defined on '.concat(this.constructor.name));return this.fallbackRequested=!0,this.onRequestFallback(t)}},{key:"validateSettings",value:function(){throw new Error('"validateSettings" not defined on '.concat(this.constructor.name))}},{key:"addSubKernel",value:function(t){if(null===this.subKernels&&(this.subKernels=[]),!t.source)throw new Error('subKernel missing "source" property');if(!t.property&&isNaN(t.property))throw new Error('subKernel missing "property" property');if(!t.name)throw new Error('subKernel missing "name" property');return this.subKernels.push(t),this}},{key:"destroy",value:function(t){throw new Error('"destroy" called on '.concat(this.constructor.name))}},{key:"getBitRatio",value:function(t){if("single"===this.precision)return 4;if(Array.isArray(t[0]))return this.getBitRatio(t[0]);if(t.constructor===i)return this.getBitRatio(t.value);switch(t.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}},{key:"getPixels",value:function(t){throw new Error('"getPixels" called on '.concat(this.constructor.name))}},{key:"checkOutput",value:function(){if(!this.output||!r.isArray(this.output))throw new Error("kernel.output not an array");if(this.output.length<1)throw new Error("kernel.output is empty, needs at least 1 value");for(var t=0;t<this.output.length;t++)if(isNaN(this.output[t])||this.output[t]<1)throw new Error("".concat(this.constructor.name,".output[").concat(t,"] incorrectly defined as `").concat(this.output[t],"`, needs to be numeric, and greater than 0"))}},{key:"prependString",value:function(t){throw new Error('"prependString" called on '.concat(this.constructor.name))}},{key:"hasPrependString",value:function(t){throw new Error('"hasPrependString" called on '.concat(this.constructor.name))}},{key:"toJSON",value:function(){return{settings:{output:this.output,pipeline:this.pipeline,argumentNames:this.argumentNames,argumentsTypes:this.argumentTypes,constants:this.constants,pluginNames:this.plugins?this.plugins.map((function(t){return t.name})):null,returnType:this.returnType}}}},{key:"buildSignature",value:function(t){var e=this.constructor;this.signature=e.getSignature(this,e.getArgumentTypes(this,t))}},{key:"functionToIGPUFunction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof t&&"function"!==typeof t)throw new Error("source not a string or function");var n="string"===typeof t?t:t.toString(),i=[];return i=Array.isArray(e.argumentTypes)?e.argumentTypes:"object"===typeof e.argumentTypes?r.getArgumentNamesFromString(n).map((function(t){return e.argumentTypes[t]}))||[]:e.argumentTypes||[],{name:r.getFunctionNameFromString(n)||null,source:n,argumentTypes:i,returnType:e.returnType||null}}},{key:"onActivate",value:function(t){}}],[{key:"isSupported",get:function(){throw new Error('"isSupported" not implemented on '.concat(this.name))}},{key:"isContextMatch",value:function(t){throw new Error('"isContextMatch" not implemented on '.concat(this.name))}},{key:"getFeatures",value:function(){throw new Error('"getFeatures" not implemented on '.concat(this.name))}},{key:"destroyContext",value:function(t){throw new Error('"destroyContext" called on '.concat(this.name))}},{key:"nativeFunctionArguments",value:function(){throw new Error('"nativeFunctionArguments" called on '.concat(this.name))}},{key:"nativeFunctionReturnType",value:function(){throw new Error('"nativeFunctionReturnType" called on '.concat(this.name))}},{key:"combineKernels",value:function(){throw new Error('"combineKernels" called on '.concat(this.name))}},{key:"getArgumentTypes",value:function(t,e){for(var n=new Array(e.length),i=0;i<e.length;i++){var a=e[i],o=t.argumentTypes[i];if(a.type)n[i]=a.type;else switch(o){case"Number":case"Integer":case"Float":case"ArrayTexture(1)":n[i]=r.getVariableType(a);break;default:n[i]=o}}return n}},{key:"getSignature",value:function(t,e){throw new Error('"getSignature" not implemented on '.concat(this.name))}}]),t}();function u(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;r++){var i=e[r];n.push(t[i])}return{argumentTypes:n,argumentNames:e}}e.exports={Kernel:a}},{"../input":110,"../utils":114}],37:[function(t,e,n){var r="__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nvarying vec2 vTexCoord;\n\nfloat acosh(float x) {\n  return log(x + sqrt(x * x - 1.0));\n}\n\nfloat sinh(float x) {\n  return (pow(".concat(Math.E,", x) - pow(").concat(Math.E,", -x)) / 2.0;\n}\n\nfloat asinh(float x) {\n  return log(x + sqrt(x * x + 1.0));\n}\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat atanh(float x) {\n  x = (x + 1.0) / (x - 1.0);\n  if (x < 0.0) {\n    return 0.5 * log(-x);\n  }\n  return 0.5 * log(x);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat cosh(float x) {\n  return (pow(").concat(Math.E,", x) + pow(").concat(Math.E,", -x)) / 2.0; \n}\n\nfloat expm1(float x) {\n  return pow(").concat(Math.E,", x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat tanh(float x) {\n  float e = exp(2.0 * x);\n  return (e - 1.0) / (e + 1.0);\n}\n\nfloat trunc(float x) {\n  if (x >= 0.0) {\n    return floor(x); \n  } else {\n    return ceil(x);\n  }\n}\n\nvec4 _round(vec4 x) {\n  return floor(x + 0.5);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x / y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(_round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(_round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  if (channel == 0) return texel.r * 255.0 + texel.g * 65280.0;\n  if (channel == 1) return texel.b * 255.0 + texel.a * 65280.0;\n  return 0.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  if (channel == 0) return texel.r * 255.0;\n  if (channel == 1) return texel.g * 255.0;\n  if (channel == 2) return texel.b * 255.0;\n  if (channel == 3) return texel.a * 255.0;\n  return 0.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return texel.r;\n  if (channel == 1) return texel.g;\n  if (channel == 2) return texel.b;\n  if (channel == 3) return texel.a;\n  return 0.0;\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture2D(tex, st / vec2(texSize));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture2D(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n  \n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture2D(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nvoid color(sampler2D image) {\n  actualColor = texture2D(image, vTexCoord);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}");e.exports={fragmentShader:r}},{}],38:[function(t,e,n){var r=t("../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),i=e.call(this,t,r),r&&r.hasOwnProperty("fixIntegerDivisionAccuracy")&&(i.fixIntegerDivisionAccuracy=r.fixIntegerDivisionAccuracy),i}return s(n,[{key:"astConditionalExpression",value:function(t,e){if("ConditionalExpression"!==t.type)throw this.astErrorOutput("Not a conditional expression",t);var n=this.getType(t.consequent),r=this.getType(t.alternate);return null===n&&null===r?(e.push("if ("),this.astGeneric(t.test,e),e.push(") {"),this.astGeneric(t.consequent,e),e.push(";"),e.push("} else {"),this.astGeneric(t.alternate,e),e.push(";"),e.push("}"),e):(e.push("("),this.astGeneric(t.test,e),e.push("?"),this.astGeneric(t.consequent,e),e.push(":"),this.astGeneric(t.alternate,e),e.push(")"),e)}},{key:"astFunction",value:function(t,e){if(this.isRootKernel)e.push("void");else{this.returnType||this.findLastReturn()&&(this.returnType=this.getType(t.body),"LiteralInteger"===this.returnType&&(this.returnType="Number"));var n=this.returnType;if(n){var i=a[n];if(!i)throw new Error("unknown type ".concat(n));e.push(i)}else e.push("void")}if(e.push(" "),e.push(this.name),e.push("("),!this.isRootKernel)for(var o=0;o<this.argumentNames.length;++o){var s=this.argumentNames[o];o>0&&e.push(", ");var u=this.argumentTypes[this.argumentNames.indexOf(s)];if(!u)throw this.astErrorOutput("Unknown argument ".concat(s," type"),t);"LiteralInteger"===u&&(this.argumentTypes[o]=u="Number");var l=a[u];if(!l)throw this.astErrorOutput("Unexpected expression",t);var c=r.sanitizeName(s);"sampler2D"===l||"sampler2DArray"===l?e.push("".concat(l," user_").concat(c,",ivec2 user_").concat(c,"Size,ivec3 user_").concat(c,"Dim")):e.push("".concat(l," user_").concat(c))}e.push(") {\n");for(var h=0;h<t.body.body.length;++h)this.astGeneric(t.body.body[h],e),e.push("\n");return e.push("}\n"),e}},{key:"astReturnStatement",value:function(t,e){if(!t.argument)throw this.astErrorOutput("Unexpected return statement",t);this.pushState("skip-literal-correction");var n=this.getType(t.argument);this.popState("skip-literal-correction");var r=[];switch(this.returnType||(this.returnType="LiteralInteger"===n||"Integer"===n?"Number":n),this.returnType){case"LiteralInteger":case"Number":case"Float":switch(n){case"Integer":r.push("float("),this.astGeneric(t.argument,r),r.push(")");break;case"LiteralInteger":this.castLiteralToFloat(t.argument,r),"Integer"===this.getType(t)&&(r.unshift("float("),r.push(")"));break;default:this.astGeneric(t.argument,r)}break;case"Integer":switch(n){case"Float":case"Number":this.castValueToInteger(t.argument,r);break;case"LiteralInteger":this.castLiteralToInteger(t.argument,r);break;default:this.astGeneric(t.argument,r)}break;case"Array(4)":case"Array(3)":case"Array(2)":case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":case"Input":this.astGeneric(t.argument,r);break;default:throw this.astErrorOutput("unhandled return type ".concat(this.returnType),t)}return this.isRootKernel?(e.push("kernelResult = ".concat(r.join(""),";")),e.push("return;")):this.isSubKernel?(e.push("subKernelResult_".concat(this.name," = ").concat(r.join(""),";")),e.push("return subKernelResult_".concat(this.name,";"))):e.push("return ".concat(r.join(""),";")),e}},{key:"astLiteral",value:function(t,e){if(isNaN(t.value))throw this.astErrorOutput("Non-numeric literal not supported : "+t.value,t);var n=this.astKey(t);return Number.isInteger(t.value)?this.isState("casting-to-integer")||this.isState("building-integer")?(this.literalTypes[n]="Integer",e.push("".concat(t.value))):(this.isState("casting-to-float")||this.isState("building-float"),this.literalTypes[n]="Number",e.push("".concat(t.value,".0"))):this.isState("casting-to-integer")||this.isState("building-integer")?(this.literalTypes[n]="Integer",e.push(Math.round(t.value))):(this.literalTypes[n]="Number",e.push("".concat(t.value))),e}},{key:"astBinaryExpression",value:function(t,e){if(this.checkAndUpconvertOperator(t,e))return e;if(this.fixIntegerDivisionAccuracy&&"/"===t.operator){switch(e.push("divWithIntCheck("),this.pushState("building-float"),this.getType(t.left)){case"Integer":this.castValueToFloat(t.left,e);break;case"LiteralInteger":this.castLiteralToFloat(t.left,e);break;default:this.astGeneric(t.left,e)}switch(e.push(", "),this.getType(t.right)){case"Integer":this.castValueToFloat(t.right,e);break;case"LiteralInteger":this.castLiteralToFloat(t.right,e);break;default:this.astGeneric(t.right,e)}return this.popState("building-float"),e.push(")"),e}e.push("(");var n=this.getType(t.left)||"Number",r=this.getType(t.right)||"Number";if(!n||!r)throw this.astErrorOutput("Unhandled binary expression",t);var i=n+" & "+r;switch(i){case"Integer & Integer":this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(c[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-integer");break;case"Number & Float":case"Float & Number":case"Float & Float":case"Number & Number":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(c[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-float");break;case"LiteralInteger & LiteralInteger":this.isState("casting-to-integer")||this.isState("building-integer")?(this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(c[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-integer")):(this.pushState("building-float"),this.castLiteralToFloat(t.left,e),e.push(c[t.operator]||t.operator),this.castLiteralToFloat(t.right,e),this.popState("building-float"));break;case"Integer & Float":case"Integer & Number":if((">"===t.operator||"<"===t.operator&&"Literal"===t.right.type)&&!Number.isInteger(t.right.value)){this.pushState("building-float"),this.castValueToFloat(t.left,e),e.push(c[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-float");break}if(this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(c[t.operator]||t.operator),this.pushState("casting-to-integer"),"Literal"===t.right.type){var a=[];if(this.astGeneric(t.right,a),"Integer"!==this.getType(t.right))throw this.astErrorOutput("Unhandled binary expression with literal",t);e.push(a.join(""))}else e.push("int("),this.astGeneric(t.right,e),e.push(")");this.popState("casting-to-integer"),this.popState("building-integer");break;case"Integer & LiteralInteger":this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(c[t.operator]||t.operator),this.castLiteralToInteger(t.right,e),this.popState("building-integer");break;case"Number & Integer":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(c[t.operator]||t.operator),this.castValueToFloat(t.right,e),this.popState("building-float");break;case"Float & LiteralInteger":case"Number & LiteralInteger":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(c[t.operator]||t.operator),this.castLiteralToFloat(t.right,e),this.popState("building-float");break;case"LiteralInteger & Float":case"LiteralInteger & Number":this.isState("casting-to-integer")?(this.pushState("building-integer"),this.castLiteralToInteger(t.left,e),e.push(c[t.operator]||t.operator),this.castValueToInteger(t.right,e),this.popState("building-integer")):(this.pushState("building-float"),this.astGeneric(t.left,e),e.push(c[t.operator]||t.operator),this.pushState("casting-to-float"),this.astGeneric(t.right,e),this.popState("casting-to-float"),this.popState("building-float"));break;case"LiteralInteger & Integer":this.pushState("building-integer"),this.castLiteralToInteger(t.left,e),e.push(c[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-integer");break;case"Boolean & Boolean":this.pushState("building-boolean"),this.astGeneric(t.left,e),e.push(c[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-boolean");break;case"Float & Integer":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(c[t.operator]||t.operator),this.castValueToFloat(t.right,e),this.popState("building-float");break;default:throw this.astErrorOutput("Unhandled binary expression between ".concat(i),t)}return e.push(")"),e}},{key:"checkAndUpconvertOperator",value:function(t,e){var n=this.checkAndUpconvertBitwiseOperators(t,e);if(n)return n;var r={"%":this.fixIntegerDivisionAccuracy?"integerCorrectionModulo":"modulo","**":"pow"}[t.operator];if(!r)return null;switch(e.push(r),e.push("("),this.getType(t.left)){case"Integer":this.castValueToFloat(t.left,e);break;case"LiteralInteger":this.castLiteralToFloat(t.left,e);break;default:this.astGeneric(t.left,e)}switch(e.push(","),this.getType(t.right)){case"Integer":this.castValueToFloat(t.right,e);break;case"LiteralInteger":this.castLiteralToFloat(t.right,e);break;default:this.astGeneric(t.right,e)}return e.push(")"),e}},{key:"checkAndUpconvertBitwiseOperators",value:function(t,e){var n={"&":"bitwiseAnd","|":"bitwiseOr","^":"bitwiseXOR","<<":"bitwiseZeroFillLeftShift",">>":"bitwiseSignedRightShift",">>>":"bitwiseZeroFillRightShift"}[t.operator];if(!n)return null;switch(e.push(n),e.push("("),this.getType(t.left)){case"Number":case"Float":this.castValueToInteger(t.left,e);break;case"LiteralInteger":this.castLiteralToInteger(t.left,e);break;default:this.astGeneric(t.left,e)}switch(e.push(","),this.getType(t.right)){case"Number":case"Float":this.castValueToInteger(t.right,e);break;case"LiteralInteger":this.castLiteralToInteger(t.right,e);break;default:this.astGeneric(t.right,e)}return e.push(")"),e}},{key:"checkAndUpconvertBitwiseUnary",value:function(t,e){var n={"~":"bitwiseNot"}[t.operator];if(!n)return null;switch(e.push(n),e.push("("),this.getType(t.argument)){case"Number":case"Float":this.castValueToInteger(t.argument,e);break;case"LiteralInteger":this.castLiteralToInteger(t.argument,e);break;default:this.astGeneric(t.argument,e)}return e.push(")"),e}},{key:"castLiteralToInteger",value:function(t,e){return this.pushState("casting-to-integer"),this.astGeneric(t,e),this.popState("casting-to-integer"),e}},{key:"castLiteralToFloat",value:function(t,e){return this.pushState("casting-to-float"),this.astGeneric(t,e),this.popState("casting-to-float"),e}},{key:"castValueToInteger",value:function(t,e){return this.pushState("casting-to-integer"),e.push("int("),this.astGeneric(t,e),e.push(")"),this.popState("casting-to-integer"),e}},{key:"castValueToFloat",value:function(t,e){return this.pushState("casting-to-float"),e.push("float("),this.astGeneric(t,e),e.push(")"),this.popState("casting-to-float"),e}},{key:"astIdentifierExpression",value:function(t,e){if("Identifier"!==t.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",t);var n=this.getType(t),i=r.sanitizeName(t.name);return"Infinity"===t.name?e.push("3.402823466e+38"):"Boolean"===n&&this.argumentNames.indexOf(i)>-1?e.push("bool(user_".concat(i,")")):e.push("user_".concat(i)),e}},{key:"astForStatement",value:function(t,e){if("ForStatement"!==t.type)throw this.astErrorOutput("Invalid for statement",t);var n=[],r=[],i=[],a=[],o=null;if(t.init){var s=t.init.declarations;s.length>1&&(o=!1),this.astGeneric(t.init,n);for(var u=0;u<s.length;u++)s[u].init&&"Literal"!==s[u].init.type&&(o=!1)}else o=!1;if(t.test?this.astGeneric(t.test,r):o=!1,t.update?this.astGeneric(t.update,i):o=!1,t.body&&(this.pushState("loop-body"),this.astGeneric(t.body,a),this.popState("loop-body")),null===o&&(o=this.isSafe(t.init)&&this.isSafe(t.test)),o){var l=n.join(""),c=";"!==l[l.length-1];e.push("for (".concat(l).concat(c?";":"").concat(r.join(""),";").concat(i.join(""),"){\n")),e.push(a.join("")),e.push("}\n")}else{var h=this.getInternalVariableName("safeI");n.length>0&&e.push(n.join(""),"\n"),e.push("for (int ".concat(h,"=0;").concat(h,"<LOOP_MAX;").concat(h,"++){\n")),r.length>0&&e.push("if (!".concat(r.join(""),") break;\n")),e.push(a.join("")),e.push("\n".concat(i.join(""),";")),e.push("}\n")}return e}},{key:"astWhileStatement",value:function(t,e){if("WhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);var n=this.getInternalVariableName("safeI");return e.push("for (int ".concat(n,"=0;").concat(n,"<LOOP_MAX;").concat(n,"++){\n")),e.push("if (!"),this.astGeneric(t.test,e),e.push(") break;\n"),this.astGeneric(t.body,e),e.push("}\n"),e}},{key:"astDoWhileStatement",value:function(t,e){if("DoWhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);var n=this.getInternalVariableName("safeI");return e.push("for (int ".concat(n,"=0;").concat(n,"<LOOP_MAX;").concat(n,"++){\n")),this.astGeneric(t.body,e),e.push("if (!"),this.astGeneric(t.test,e),e.push(") break;\n"),e.push("}\n"),e}},{key:"astAssignmentExpression",value:function(t,e){if("%="===t.operator)this.astGeneric(t.left,e),e.push("="),e.push("mod("),this.astGeneric(t.left,e),e.push(","),this.astGeneric(t.right,e),e.push(")");else{if("**="!==t.operator){var n=this.getType(t.left),r=this.getType(t.right);return this.astGeneric(t.left,e),e.push(t.operator),"Integer"!==n&&"Integer"===r?(e.push("float("),this.astGeneric(t.right,e),e.push(")")):this.astGeneric(t.right,e),e}this.astGeneric(t.left,e),e.push("="),e.push("pow("),this.astGeneric(t.left,e),e.push(","),this.astGeneric(t.right,e),e.push(")")}}},{key:"astBlockStatement",value:function(t,e){if(this.isState("loop-body")){this.pushState("block-body");for(var n=0;n<t.body.length;n++)this.astGeneric(t.body[n],e);this.popState("block-body")}else{e.push("{\n");for(var r=0;r<t.body.length;r++)this.astGeneric(t.body[r],e);e.push("}\n")}return e}},{key:"astVariableDeclaration",value:function(t,e){var n=t.declarations;if(!n||!n[0]||!n[0].init)throw this.astErrorOutput("Unexpected expression",t);for(var i=[],o=null,s=[],u=[],l=0;l<n.length;l++){var c=n[l],h=c.init,f=this.getDeclaration(c.id),p=this.getType(c.init),d=p;"LiteralInteger"===d&&(d="Integer"===f.suggestedType?"Integer":"Number");var g=a[d];if(!g)throw this.astErrorOutput("Markup type ".concat(d," not handled"),t);var m=[];if("Integer"===p&&"Integer"===d){if(f.valueType="Number",0===l||null===o)m.push("float ");else if(d!==o)throw new Error("Unhandled declaration");o=d,m.push("user_".concat(r.sanitizeName(c.id.name),"=")),m.push("float("),this.astGeneric(h,m),m.push(")")}else f.valueType=d,0===l||null===o?m.push("".concat(g," ")):d!==o&&(s.push(u.join(",")),u=[],m.push("".concat(g," "))),o=d,m.push("user_".concat(r.sanitizeName(c.id.name),"=")),"Number"===p&&"Integer"===d?h.left&&"Literal"===h.left.type?this.astGeneric(h,m):(m.push("int("),this.astGeneric(h,m),m.push(")")):"LiteralInteger"===p&&"Integer"===d?this.castLiteralToInteger(h,m):this.astGeneric(h,m);u.push(m.join(""))}return u.length>0&&s.push(u.join(",")),i.push(s.join(";")),e.push(i.join("")),e.push(";"),e}},{key:"astIfStatement",value:function(t,e){return e.push("if ("),this.astGeneric(t.test,e),e.push(")"),"BlockStatement"===t.consequent.type?this.astGeneric(t.consequent,e):(e.push(" {\n"),this.astGeneric(t.consequent,e),e.push("\n}\n")),t.alternate&&(e.push("else "),"BlockStatement"===t.alternate.type||"IfStatement"===t.alternate.type?this.astGeneric(t.alternate,e):(e.push(" {\n"),this.astGeneric(t.alternate,e),e.push("\n}\n"))),e}},{key:"astSwitchStatement",value:function(t,e){if("SwitchStatement"!==t.type)throw this.astErrorOutput("Invalid switch statement",t);var n=t.discriminant,r=t.cases,i=this.getType(n),a="switchDiscriminant".concat(this.astKey(t,"_"));switch(i){case"Float":case"Number":e.push("float ".concat(a," = ")),this.astGeneric(n,e),e.push(";\n");break;case"Integer":e.push("int ".concat(a," = ")),this.astGeneric(n,e),e.push(";\n")}if(1===r.length&&!r[0].test)return this.astGeneric(r[0].consequent,e),e;for(var o=!1,s=[],u=!1,l=!1,c=0;c<r.length;c++){if(r[c].test){if(0!==c&&l?o?(e.push("".concat(a," == ")),o=!1):e.push(" else if (".concat(a," == ")):(l=!0,e.push("if (".concat(a," == "))),"Integer"===i)switch(this.getType(r[c].test)){case"Number":case"Float":this.castValueToInteger(r[c].test,e);break;case"LiteralInteger":this.castLiteralToInteger(r[c].test,e)}else{if("Float"!==i)throw new Error("unhanlded");switch(this.getType(r[c].test)){case"LiteralInteger":this.castLiteralToFloat(r[c].test,e);break;case"Integer":this.castValueToFloat(r[c].test,e)}}if(!r[c].consequent||0===r[c].consequent.length){o=!0,e.push(" || ");continue}e.push(") {\n")}else{if(r.length>c+1){u=!0,this.astGeneric(r[c].consequent,s);continue}e.push(" else {\n")}this.astGeneric(r[c].consequent,e),e.push("\n}")}return u&&(e.push(" else {"),e.push(s.join("")),e.push("}")),e}},{key:"astThisExpression",value:function(t,e){return e.push("this"),e}},{key:"astMemberExpression",value:function(t,e){var n=this.getMemberExpressionDetails(t),i=n.property,a=n.name,o=n.signature,s=n.origin,u=n.type,l=n.xProperty,c=n.yProperty,h=n.zProperty;switch(o){case"value.thread.value":case"this.thread.value":if("x"!==a&&"y"!==a&&"z"!==a)throw this.astErrorOutput("Unexpected expression, expected `this.thread.x`, `this.thread.y`, or `this.thread.z`",t);return e.push("threadId.".concat(a)),e;case"this.output.value":if(this.dynamicOutput)switch(a){case"x":this.isState("casting-to-float")?e.push("float(uOutputDim.x)"):e.push("uOutputDim.x");break;case"y":this.isState("casting-to-float")?e.push("float(uOutputDim.y)"):e.push("uOutputDim.y");break;case"z":this.isState("casting-to-float")?e.push("float(uOutputDim.z)"):e.push("uOutputDim.z");break;default:throw this.astErrorOutput("Unexpected expression",t)}else switch(a){case"x":this.isState("casting-to-integer")?e.push(this.output[0]):e.push(this.output[0],".0");break;case"y":this.isState("casting-to-integer")?e.push(this.output[1]):e.push(this.output[1],".0");break;case"z":this.isState("casting-to-integer")?e.push(this.output[2]):e.push(this.output[2],".0");break;default:throw this.astErrorOutput("Unexpected expression",t)}return e;case"value":throw this.astErrorOutput("Unexpected expression",t);case"value[]":case"value[][]":case"value[][][]":case"value[][][][]":case"value.value":if("Math"===s)return e.push(Math[a]),e;var f=r.sanitizeName(a);switch(i){case"r":return e.push("user_".concat(f,".r")),e;case"g":return e.push("user_".concat(f,".g")),e;case"b":return e.push("user_".concat(f,".b")),e;case"a":return e.push("user_".concat(f,".a")),e}break;case"this.constants.value":if("undefined"===typeof l)switch(u){case"Array(2)":case"Array(3)":case"Array(4)":return e.push("constants_".concat(r.sanitizeName(a))),e}case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":case"this.constants.value[][][][]":break;case"fn()[]":return this.astCallExpression(t.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(i)),e.push("]"),e;case"fn()[][]":return this.astCallExpression(t.object.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(t.object.property)),e.push("]"),e.push("["),e.push(this.memberExpressionPropertyMarkup(t.property)),e.push("]"),e;case"[][]":return this.astArrayExpression(t.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(i)),e.push("]"),e;default:throw this.astErrorOutput("Unexpected expression",t)}if(!1===t.computed)switch(u){case"Number":case"Integer":case"Float":case"Boolean":return e.push("".concat(s,"_").concat(r.sanitizeName(a))),e}var p="".concat(s,"_").concat(r.sanitizeName(a));switch(u){case"Array(2)":case"Array(3)":case"Array(4)":this.astGeneric(t.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(l)),e.push("]");break;case"HTMLImageArray":e.push("getImage3D(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"ArrayTexture(1)":e.push("getFloatFromSampler2D(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"Array1D(2)":case"Array2D(2)":case"Array3D(2)":e.push("getMemoryOptimizedVec2(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"ArrayTexture(2)":e.push("getVec2FromSampler2D(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"Array1D(3)":case"Array2D(3)":case"Array3D(3)":e.push("getMemoryOptimizedVec3(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"ArrayTexture(3)":e.push("getVec3FromSampler2D(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"Array1D(4)":case"Array2D(4)":case"Array3D(4)":e.push("getMemoryOptimizedVec4(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"ArrayTexture(4)":case"HTMLCanvas":case"HTMLImage":case"HTMLVideo":e.push("getVec4FromSampler2D(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"NumberTexture":case"Array":case"Array2D":case"Array3D":case"Array4D":case"Input":case"Number":case"Float":case"Integer":if("single"===this.precision)e.push("getMemoryOptimized32(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");else{var d="user"===s?this.lookupFunctionArgumentBitRatio(this.name,a):this.constantBitRatios[a];switch(d){case 1:e.push("get8(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, "));break;case 2:e.push("get16(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, "));break;case 4:case 0:e.push("get32(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, "));break;default:throw new Error("unhandled bit ratio of ".concat(d))}this.memberExpressionXYZ(l,c,h,e),e.push(")")}break;case"MemoryOptimizedNumberTexture":e.push("getMemoryOptimized32(".concat(p,", ").concat(p,"Size, ").concat(p,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":e.push("".concat(p,"[").concat(this.memberExpressionPropertyMarkup(c),"]")),c&&e.push("[".concat(this.memberExpressionPropertyMarkup(l),"]"));break;default:throw new Error('unhandled member expression "'.concat(u,'"'))}return e}},{key:"astCallExpression",value:function(t,e){if(!t.callee)throw this.astErrorOutput("Unknown CallExpression",t);var n=null,i=this.isAstMathFunction(t);if(!(n=i||t.callee.object&&"ThisExpression"===t.callee.object.type?t.callee.property.name:"SequenceExpression"!==t.callee.type||"Literal"!==t.callee.expressions[0].type||isNaN(t.callee.expressions[0].raw)?t.callee.name:t.callee.expressions[1].property.name))throw this.astErrorOutput("Unhandled function, couldn't find name",t);switch(n){case"pow":n="_pow";break;case"round":n="_round"}if(this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),"random"===n&&this.plugins&&this.plugins.length>0)for(var a=0;a<this.plugins.length;a++){var o=this.plugins[a];if("Math.random()"===o.functionMatch&&o.functionReplace)return e.push(o.functionReplace),e}if(this.onFunctionCall&&this.onFunctionCall(this.name,n,t.arguments),e.push(n),e.push("("),i)for(var s=0;s<t.arguments.length;++s){var u=t.arguments[s],l=this.getType(u);switch(s>0&&e.push(", "),l){case"Integer":this.castValueToFloat(u,e);break;default:this.astGeneric(u,e)}}else for(var c=this.lookupFunctionArgumentTypes(n)||[],h=0;h<t.arguments.length;++h){var f=t.arguments[h],p=c[h];h>0&&e.push(", ");var d=this.getType(f);switch(p||(this.triggerImplyArgumentType(n,h,d,this),p=d),d){case"Boolean":this.astGeneric(f,e);continue;case"Number":case"Float":if("Integer"===p){e.push("int("),this.astGeneric(f,e),e.push(")");continue}if("Number"===p||"Float"===p){this.astGeneric(f,e);continue}if("LiteralInteger"===p){this.castLiteralToFloat(f,e);continue}break;case"Integer":if("Number"===p||"Float"===p){e.push("float("),this.astGeneric(f,e),e.push(")");continue}if("Integer"===p){this.astGeneric(f,e);continue}break;case"LiteralInteger":if("Integer"===p){this.castLiteralToInteger(f,e);continue}if("Number"===p||"Float"===p){this.castLiteralToFloat(f,e);continue}if("LiteralInteger"===p){this.astGeneric(f,e);continue}break;case"Array(2)":case"Array(3)":case"Array(4)":if(p===d){if("Identifier"===f.type)e.push("user_".concat(r.sanitizeName(f.name)));else{if("ArrayExpression"!==f.type&&"MemberExpression"!==f.type&&"CallExpression"!==f.type)throw this.astErrorOutput("Unhandled argument type ".concat(f.type),t);this.astGeneric(f,e)}continue}break;case"HTMLCanvas":case"HTMLImage":case"HTMLImageArray":case"HTMLVideo":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"Array":case"Input":if(p===d){if("Identifier"!==f.type)throw this.astErrorOutput("Unhandled argument type ".concat(f.type),t);this.triggerImplyArgumentBitRatio(this.name,f.name,n,h);var g=r.sanitizeName(f.name);e.push("user_".concat(g,",user_").concat(g,"Size,user_").concat(g,"Dim"));continue}}throw this.astErrorOutput("Unhandled argument combination of ".concat(d," and ").concat(p,' for argument named "').concat(f.name,'"'),t)}return e.push(")"),e}},{key:"astArrayExpression",value:function(t,e){var n=this.getType(t),r=t.elements.length;switch(n){case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":e.push("mat".concat(r,"("));break;default:e.push("vec".concat(r,"("))}for(var i=0;i<r;++i){i>0&&e.push(", ");var a=t.elements[i];this.astGeneric(a,e)}return e.push(")"),e}},{key:"memberExpressionXYZ",value:function(t,e,n,r){return n?r.push(this.memberExpressionPropertyMarkup(n),", "):r.push("0, "),e?r.push(this.memberExpressionPropertyMarkup(e),", "):r.push("0, "),r.push(this.memberExpressionPropertyMarkup(t)),r}},{key:"memberExpressionPropertyMarkup",value:function(t){if(!t)throw new Error("Property not set");var e=[];switch(this.getType(t)){case"Number":case"Float":this.castValueToInteger(t,e);break;case"LiteralInteger":this.castLiteralToInteger(t,e);break;default:this.astGeneric(t,e)}return e.join("")}}]),n}(t("../function-node").FunctionNode),a={Array:"sampler2D","Array(2)":"vec2","Array(3)":"vec3","Array(4)":"vec4","Matrix(2)":"mat2","Matrix(3)":"mat3","Matrix(4)":"mat4",Array2D:"sampler2D",Array3D:"sampler2D",Boolean:"bool",Float:"float",Input:"sampler2D",Integer:"int",Number:"float",LiteralInteger:"float",NumberTexture:"sampler2D",MemoryOptimizedNumberTexture:"sampler2D","ArrayTexture(1)":"sampler2D","ArrayTexture(2)":"sampler2D","ArrayTexture(3)":"sampler2D","ArrayTexture(4)":"sampler2D",HTMLVideo:"sampler2D",HTMLCanvas:"sampler2D",HTMLImage:"sampler2D",HTMLImageArray:"sampler2DArray"},c={"===":"==","!==":"!="};e.exports={WebGLFunctionNode:i}},{"../../utils":114,"../function-node":10}],39:[function(t,e,n){var r=t("./kernel-value/boolean").WebGLKernelValueBoolean,i=t("./kernel-value/float").WebGLKernelValueFloat,a=t("./kernel-value/integer").WebGLKernelValueInteger,o=t("./kernel-value/html-image").WebGLKernelValueHTMLImage,s=t("./kernel-value/dynamic-html-image").WebGLKernelValueDynamicHTMLImage,u=t("./kernel-value/html-video").WebGLKernelValueHTMLVideo,l=t("./kernel-value/dynamic-html-video").WebGLKernelValueDynamicHTMLVideo,c=t("./kernel-value/single-input").WebGLKernelValueSingleInput,h=t("./kernel-value/dynamic-single-input").WebGLKernelValueDynamicSingleInput,f=t("./kernel-value/unsigned-input").WebGLKernelValueUnsignedInput,p=t("./kernel-value/dynamic-unsigned-input").WebGLKernelValueDynamicUnsignedInput,d=t("./kernel-value/memory-optimized-number-texture").WebGLKernelValueMemoryOptimizedNumberTexture,g=t("./kernel-value/dynamic-memory-optimized-number-texture").WebGLKernelValueDynamicMemoryOptimizedNumberTexture,m=t("./kernel-value/number-texture").WebGLKernelValueNumberTexture,y=t("./kernel-value/dynamic-number-texture").WebGLKernelValueDynamicNumberTexture,v=t("./kernel-value/single-array").WebGLKernelValueSingleArray,x=t("./kernel-value/dynamic-single-array").WebGLKernelValueDynamicSingleArray,b=t("./kernel-value/single-array1d-i").WebGLKernelValueSingleArray1DI,w=t("./kernel-value/dynamic-single-array1d-i").WebGLKernelValueDynamicSingleArray1DI,k=t("./kernel-value/single-array2d-i").WebGLKernelValueSingleArray2DI,_=t("./kernel-value/dynamic-single-array2d-i").WebGLKernelValueDynamicSingleArray2DI,T=t("./kernel-value/single-array3d-i").WebGLKernelValueSingleArray3DI,S=t("./kernel-value/dynamic-single-array3d-i").WebGLKernelValueDynamicSingleArray3DI,E=t("./kernel-value/array2").WebGLKernelValueArray2,A=t("./kernel-value/array3").WebGLKernelValueArray3,L=t("./kernel-value/array4").WebGLKernelValueArray4,D=t("./kernel-value/unsigned-array").WebGLKernelValueUnsignedArray,C={unsigned:{dynamic:{Boolean:r,Integer:a,Float:i,Array:t("./kernel-value/dynamic-unsigned-array").WebGLKernelValueDynamicUnsignedArray,"Array(2)":E,"Array(3)":A,"Array(4)":L,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:p,NumberTexture:y,"ArrayTexture(1)":y,"ArrayTexture(2)":y,"ArrayTexture(3)":y,"ArrayTexture(4)":y,MemoryOptimizedNumberTexture:g,HTMLCanvas:s,HTMLImage:s,HTMLImageArray:!1,HTMLVideo:l},static:{Boolean:r,Float:i,Integer:a,Array:D,"Array(2)":E,"Array(3)":A,"Array(4)":L,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:f,NumberTexture:m,"ArrayTexture(1)":m,"ArrayTexture(2)":m,"ArrayTexture(3)":m,"ArrayTexture(4)":m,MemoryOptimizedNumberTexture:d,HTMLCanvas:o,HTMLImage:o,HTMLImageArray:!1,HTMLVideo:u}},single:{dynamic:{Boolean:r,Integer:a,Float:i,Array:x,"Array(2)":E,"Array(3)":A,"Array(4)":L,"Array1D(2)":w,"Array1D(3)":w,"Array1D(4)":w,"Array2D(2)":_,"Array2D(3)":_,"Array2D(4)":_,"Array3D(2)":S,"Array3D(3)":S,"Array3D(4)":S,Input:h,NumberTexture:y,"ArrayTexture(1)":y,"ArrayTexture(2)":y,"ArrayTexture(3)":y,"ArrayTexture(4)":y,MemoryOptimizedNumberTexture:g,HTMLCanvas:s,HTMLImage:s,HTMLImageArray:!1,HTMLVideo:l},static:{Boolean:r,Float:i,Integer:a,Array:v,"Array(2)":E,"Array(3)":A,"Array(4)":L,"Array1D(2)":b,"Array1D(3)":b,"Array1D(4)":b,"Array2D(2)":k,"Array2D(3)":k,"Array2D(4)":k,"Array3D(2)":T,"Array3D(3)":T,"Array3D(4)":T,Input:c,NumberTexture:m,"ArrayTexture(1)":m,"ArrayTexture(2)":m,"ArrayTexture(3)":m,"ArrayTexture(4)":m,MemoryOptimizedNumberTexture:d,HTMLCanvas:o,HTMLImage:o,HTMLImageArray:!1,HTMLVideo:u}}};e.exports={lookupKernelValueType:function(t,e,n,r){if(!t)throw new Error("type missing");if(!e)throw new Error("dynamic missing");if(!n)throw new Error("precision missing");r.type&&(t=r.type);var i=C[n][e];if(!1===i[t])return null;if(void 0===i[t])throw new Error("Could not find a KernelValue for ".concat(t));return i[t]},kernelValueMaps:C}},{"./kernel-value/array2":41,"./kernel-value/array3":42,"./kernel-value/array4":43,"./kernel-value/boolean":44,"./kernel-value/dynamic-html-image":45,"./kernel-value/dynamic-html-video":46,"./kernel-value/dynamic-memory-optimized-number-texture":47,"./kernel-value/dynamic-number-texture":48,"./kernel-value/dynamic-single-array":49,"./kernel-value/dynamic-single-array1d-i":50,"./kernel-value/dynamic-single-array2d-i":51,"./kernel-value/dynamic-single-array3d-i":52,"./kernel-value/dynamic-single-input":53,"./kernel-value/dynamic-unsigned-array":54,"./kernel-value/dynamic-unsigned-input":55,"./kernel-value/float":56,"./kernel-value/html-image":57,"./kernel-value/html-video":58,"./kernel-value/integer":60,"./kernel-value/memory-optimized-number-texture":61,"./kernel-value/number-texture":62,"./kernel-value/single-array":63,"./kernel-value/single-array1d-i":64,"./kernel-value/single-array2d-i":65,"./kernel-value/single-array3d-i":66,"./kernel-value/single-input":67,"./kernel-value/unsigned-array":68,"./kernel-value/unsigned-input":69}],40:[function(t,e,n){var r=t("./index").WebGLKernelValue,i=t("../../../input").Input,a=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"checkSize",value:function(t,e){if(this.kernel.validate){var n=this.kernel.constructor.features.maxTextureSize;if(t>n||e>n)throw t>e?new Error("Argument texture width of ".concat(t," larger than maximum size of ").concat(n," for your GPU")):t<e?new Error("Argument texture height of ".concat(e," larger than maximum size of ").concat(n," for your GPU")):new Error("Argument texture height and width of ".concat(e," larger than maximum size of ").concat(n," for your GPU"))}}},{key:"setup",value:function(){this.requestTexture(),this.setupTexture(),this.defineTexture()}},{key:"requestTexture",value:function(){this.texture=this.onRequestTexture()}},{key:"defineTexture",value:function(){var t=this.context;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)}},{key:"setupTexture",value:function(){this.contextHandle=this.onRequestContextHandle(),this.index=this.onRequestIndex(),this.dimensionsId=this.id+"Dim",this.sizeId=this.id+"Size"}},{key:"getBitRatio",value:function(t){if(Array.isArray(t[0]))return this.getBitRatio(t[0]);if(t.constructor===i)return this.getBitRatio(t.value);switch(t.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}},{key:"destroy",value:function(){this.prevArg&&this.prevArg.delete(),this.context.deleteTexture(this.texture)}}]),n}(r);e.exports={WebGLKernelArray:a}},{"../../../input":110,"./index":59}],41:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return s(n,[{key:"getSource",value:function(t){return"constants"===this.origin?"const vec2 ".concat(this.id," = vec2(").concat(t[0],",").concat(t[1],");\n"):"uniform vec2 ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"constants"===this.origin?"":"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform2fv(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueArray2:r}},{"./index":59}],42:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return s(n,[{key:"getSource",value:function(t){return"constants"===this.origin?"const vec3 ".concat(this.id," = vec3(").concat(t[0],",").concat(t[1],",").concat(t[2],");\n"):"uniform vec3 ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"constants"===this.origin?"":"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform3fv(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueArray3:r}},{"./index":59}],43:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return s(n,[{key:"getSource",value:function(t){return"constants"===this.origin?"const vec4 ".concat(this.id," = vec4(").concat(t[0],",").concat(t[1],",").concat(t[2],",").concat(t[3],");\n"):"uniform vec4 ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"constants"===this.origin?"":"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform4fv(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueArray4:r}},{"./index":59}],44:[function(t,e,n){t("../../../utils").utils;var r=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return s(n,[{key:"getSource",value:function(t){return"constants"===this.origin?"const bool ".concat(this.id," = ").concat(t,";\n"):"uniform bool ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueBoolean:r}},{"../../../utils":114,"./index":59}],45:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=t.width,r=t.height;this.checkSize(e,r),this.dimensions=[e,r,1],this.textureSize=[e,r],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./html-image").WebGLKernelValueHTMLImage);e.exports={WebGLKernelValueDynamicHTMLImage:c}},{"../../../utils":114,"./html-image":57}],46:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(t("./dynamic-html-image").WebGLKernelValueDynamicHTMLImage);e.exports={WebGLKernelValueDynamicHTMLVideo:r}},{"./dynamic-html-image":45}],47:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=t.dimensions,this.checkSize(t.size[0],t.size[1]),this.textureSize=t.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./memory-optimized-number-texture").WebGLKernelValueMemoryOptimizedNumberTexture);e.exports={WebGLKernelValueDynamicMemoryOptimizedNumberTexture:c}},{"../../../utils":114,"./memory-optimized-number-texture":61}],48:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=t.dimensions,this.checkSize(t.size[0],t.size[1]),this.textureSize=t.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./number-texture").WebGLKernelValueNumberTexture);e.exports={WebGLKernelValueDynamicNumberTexture:c}},{"../../../utils":114,"./number-texture":62}],49:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-array").WebGLKernelValueSingleArray);e.exports={WebGLKernelValueDynamicSingleArray:c}},{"../../../utils":114,"./single-array":63}],50:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-array1d-i").WebGLKernelValueSingleArray1DI);e.exports={WebGLKernelValueDynamicSingleArray1DI:c}},{"../../../utils":114,"./single-array1d-i":64}],51:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-array2d-i").WebGLKernelValueSingleArray2DI);e.exports={WebGLKernelValueDynamicSingleArray2DI:c}},{"../../../utils":114,"./single-array2d-i":65}],52:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-array3d-i").WebGLKernelValueSingleArray3DI);e.exports={WebGLKernelValueDynamicSingleArray3DI:c}},{"../../../utils":114,"./single-array3d-i":66}],53:[function(t,e,n){var r=t("../../../utils").utils,h=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=c(t.size,3),o=e[0],s=e[1],u=e[2];this.dimensions=new Int32Array([o||1,s||1,u||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-input").WebGLKernelValueSingleInput);e.exports={WebGLKernelValueDynamicSingleInput:h}},{"../../../utils":114,"./single-input":67}],54:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);var e=this.getTransferArrayType(t);this.preUploadValue=new e(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./unsigned-array").WebGLKernelValueUnsignedArray);e.exports={WebGLKernelValueDynamicUnsignedArray:c}},{"../../../utils":114,"./unsigned-array":68}],55:[function(t,e,n){var r=t("../../../utils").utils,h=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=c(t.size,3),o=e[0],s=e[1],u=e[2];this.dimensions=new Int32Array([o||1,s||1,u||1]),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);var l=this.getTransferArrayType(t.value);this.preUploadValue=new l(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./unsigned-input").WebGLKernelValueUnsignedInput);e.exports={WebGLKernelValueDynamicUnsignedInput:h}},{"../../../utils":114,"./unsigned-input":69}],56:[function(t,e,n){t("../../../utils").utils;var r=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return s(n,[{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(t){return"constants"===this.origin?Number.isInteger(t)?"const float ".concat(this.id," = ").concat(t,".0;\n"):"const float ".concat(this.id," = ").concat(t,";\n"):"uniform float ".concat(this.id,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform1f(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueFloat:r}},{"../../../utils":114,"./index":59}],57:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;o(this,n),i=e.call(this,t,r);var a=t.width,s=t.height;return i.checkSize(a,s),i.dimensions=[a,s,1],i.textureSize=[a,s],i.uploadValue=t,i}return s(n,[{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue=t),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueHTMLImage:i}},{"../../../utils":114,"./array":40}],58:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(t("./html-image").WebGLKernelValueHTMLImage);e.exports={WebGLKernelValueHTMLVideo:r}},{"./html-image":57}],59:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).dimensionsId=null,i.sizeId=null,i.initialValueConstructor=t.constructor,i.onRequestTexture=r.onRequestTexture,i.onRequestIndex=r.onRequestIndex,i.uploadValue=null,i.textureSize=null,i.bitRatio=null,i.prevArg=null,i}return s(n,[{key:"id",get:function(){return"".concat(this.origin,"_").concat(r.sanitizeName(this.name))}},{key:"setup",value:function(){}},{key:"getTransferArrayType",value:function(t){if(Array.isArray(t[0]))return this.getTransferArrayType(t[0]);switch(t.constructor){case Array:case Int32Array:case Int16Array:case Int8Array:return Float32Array;case Uint8ClampedArray:case Uint8Array:case Uint16Array:case Uint32Array:case Float32Array:case Float64Array:return t.constructor}return console.warn("Unfamiliar constructor type.  Will go ahead and use, but likley this may result in a transfer of zeros"),t.constructor}},{key:"getStringValueHandler",value:function(){throw new Error('"getStringValueHandler" not implemented on '.concat(this.constructor.name))}},{key:"getVariablePrecisionString",value:function(){return this.kernel.getVariablePrecisionString(this.textureSize||void 0,this.tactic||void 0)}},{key:"destroy",value:function(){}}]),n}(t("../../kernel-value").KernelValue);e.exports={WebGLKernelValue:i}},{"../../../utils":114,"../../kernel-value":35}],60:[function(t,e,n){t("../../../utils").utils;var r=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return s(n,[{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(t){return"constants"===this.origin?"const int ".concat(this.id," = ").concat(parseInt(t),";\n"):"uniform int ".concat(this.id,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueInteger:r}},{"../../../utils":114,"./index":59}],61:[function(t,e,n){var r=t("../../../utils").utils,i=t("./array").WebGLKernelArray,a="Source and destination textures are the same.  Use immutable = true and manually cleanup kernel output texture memory with texture.delete()",h=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;o(this,n),i=e.call(this,t,r);var a=c(t.size,2),s=a[0],u=a[1];return i.checkSize(s,u),i.dimensions=t.dimensions,i.textureSize=t.size,i.uploadValue=t.texture,i.forceUploadEachRun=!0,i}return s(n,[{key:"setup",value:function(){this.setupTexture()}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,".texture;\n")}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){if(this.checkContext&&t.context!==this.context)throw new Error("Value ".concat(this.name," (").concat(this.type,") must be from same context"));var e=this.kernel,n=this.context;if(e.pipeline)if(e.immutable)e.updateTextureArgumentRefs(this,t);else{if(e.texture&&e.texture.texture===t.texture)throw new Error(a);if(e.mappedTextures)for(var r=e.mappedTextures,i=0;i<r.length;i++)if(r[i].texture===t.texture)throw new Error(a)}n.activeTexture(this.contextHandle),n.bindTexture(n.TEXTURE_2D,this.uploadValue=t.texture),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(i);e.exports={WebGLKernelValueMemoryOptimizedNumberTexture:h,sameError:a}},{"../../../utils":114,"./array":40}],62:[function(t,e,n){var r=t("../../../utils").utils,i=t("./array").WebGLKernelArray,a=t("./memory-optimized-number-texture").sameError,h=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;o(this,n),i=e.call(this,t,r);var a=c(t.size,2),s=a[0],u=a[1];i.checkSize(s,u);var l=t.size,h=t.dimensions;return i.bitRatio=i.getBitRatio(t),i.dimensions=h,i.textureSize=l,i.uploadValue=t.texture,i.forceUploadEachRun=!0,i}return s(n,[{key:"setup",value:function(){this.setupTexture()}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,".texture;\n")}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){if(this.checkContext&&t.context!==this.context)throw new Error("Value ".concat(this.name," (").concat(this.type,") must be from same context"));var e=this.kernel,n=this.context;if(e.pipeline)if(e.immutable)e.updateTextureArgumentRefs(this,t);else{if(e.texture&&e.texture.texture===t.texture)throw new Error(a);if(e.mappedTextures)for(var r=e.mappedTextures,i=0;i<r.length;i++)if(r[i].texture===t.texture)throw new Error(a)}n.activeTexture(this.contextHandle),n.bindTexture(n.TEXTURE_2D,this.uploadValue=t.texture),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(i);e.exports={WebGLKernelValueNumberTexture:h}},{"../../../utils":114,"./array":40,"./memory-optimized-number-texture":61}],63:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t,i){var a;return o(this,n),(a=e.call(this,t,i)).bitRatio=4,a.dimensions=r.getDimensions(t,!0),a.textureSize=r.getMemoryOptimizedFloatTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*a.bitRatio,a.checkSize(a.textureSize[0],a.textureSize[1]),a.uploadValue=new Float32Array(a.uploadArrayLength),a}return s(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleArray:i}},{"../../../utils":114,"./array":40}],64:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).bitRatio=4,i.setShape(t),i}return s(n,[{key:"setShape",value:function(t){var e=r.getDimensions(t,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(e,this.bitRatio),this.dimensions=new Int32Array([e[1],1,1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}},{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flatten2dArrayTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleArray1DI:i}},{"../../../utils":114,"./array":40}],65:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).bitRatio=4,i.setShape(t),i}return s(n,[{key:"setShape",value:function(t){var e=r.getDimensions(t,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(e,this.bitRatio),this.dimensions=new Int32Array([e[1],e[2],1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}},{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flatten3dArrayTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleArray2DI:i}},{"../../../utils":114,"./array":40}],66:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).bitRatio=4,i.setShape(t),i}return s(n,[{key:"setShape",value:function(t){var e=r.getDimensions(t,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(e,this.bitRatio),this.dimensions=new Int32Array([e[1],e[2],e[3]]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}},{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flatten4dArrayTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleArray3DI:i}},{"../../../utils":114,"./array":40}],67:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t,i){var a;o(this,n),(a=e.call(this,t,i)).bitRatio=4;var s=c(t.size,3),u=s[0],l=s[1],h=s[2];return a.dimensions=new Int32Array([u||1,l||1,h||1]),a.textureSize=r.getMemoryOptimizedFloatTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*a.bitRatio,a.checkSize(a.textureSize[0],a.textureSize[1]),a.uploadValue=new Float32Array(a.uploadArrayLength),a}return s(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,".value, uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t.value,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleInput:i}},{"../../../utils":114,"./array":40}],68:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t,i){var a;return o(this,n),(a=e.call(this,t,i)).bitRatio=a.getBitRatio(t),a.dimensions=r.getDimensions(t,!0),a.textureSize=r.getMemoryOptimizedPackedTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*(4/a.bitRatio),a.checkSize(a.textureSize[0],a.textureSize[1]),a.TranserArrayType=a.getTransferArrayType(t),a.preUploadValue=new a.TranserArrayType(a.uploadArrayLength),a.uploadValue=new Uint8Array(a.preUploadValue.buffer),a}return s(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const preUploadValue_".concat(this.name," = new ").concat(this.TranserArrayType.name,"(").concat(this.uploadArrayLength,")"),"const uploadValue_".concat(this.name," = new Uint8Array(preUploadValue_").concat(this.name,".buffer)"),"flattenTo(".concat(this.varName,", preUploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.preUploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueUnsignedArray:i}},{"../../../utils":114,"./array":40}],69:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t,i){var a;o(this,n),(a=e.call(this,t,i)).bitRatio=a.getBitRatio(t);var s=c(t.size,3),u=s[0],l=s[1],h=s[2];return a.dimensions=new Int32Array([u||1,l||1,h||1]),a.textureSize=r.getMemoryOptimizedPackedTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*(4/a.bitRatio),a.checkSize(a.textureSize[0],a.textureSize[1]),a.TranserArrayType=a.getTransferArrayType(t.value),a.preUploadValue=new a.TranserArrayType(a.uploadArrayLength),a.uploadValue=new Uint8Array(a.preUploadValue.buffer),a}return s(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const preUploadValue_".concat(this.name," = new ").concat(this.TranserArrayType.name,"(").concat(this.uploadArrayLength,")"),"const uploadValue_".concat(this.name," = new Uint8Array(preUploadValue_").concat(this.name,".buffer)"),"flattenTo(".concat(this.varName,".value, preUploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t.value,this.preUploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(value.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueUnsignedInput:i}},{"../../../utils":114,"./array":40}],70:[function(t,e,n){var r=t("../gl/kernel").GLKernel,c=t("../function-builder").FunctionBuilder,h=t("./function-node").WebGLFunctionNode,f=t("../../utils").utils,p=t("../../plugins/math-random-uniformly-distributed"),d=t("./fragment-shader").fragmentShader,g=t("./vertex-shader").vertexShader,m=t("../gl/kernel-string").glKernelString,y=t("./kernel-value-maps").lookupKernelValueType,v=null,x=null,b=null,w=null,k=null,_=[p],T=[],S={},E=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).program=null,i.pipeline=r.pipeline,i.endianness=f.systemEndianness(),i.extensions={},i.argumentTextureCount=0,i.constantTextureCount=0,i.fragShader=null,i.vertShader=null,i.drawBuffersMap=null,i.maxTexSize=null,i.onRequestSwitchKernel=null,i.texture=null,i.mappedTextures=null,i.mergeSettings(t.settings||r),i.threadDim=null,i.framebuffer=null,i.buffer=null,i.textureCache=[],i.programUniformLocationCache={},i.uniform1fCache={},i.uniform1iCache={},i.uniform2fCache={},i.uniform2fvCache={},i.uniform2ivCache={},i.uniform3fvCache={},i.uniform3ivCache={},i.uniform4fvCache={},i.uniform4ivCache={},i}return s(n,[{key:"initCanvas",value:function(){if("undefined"!==typeof document){var t=document.createElement("canvas");return t.width=2,t.height=2,t}if("undefined"!==typeof OffscreenCanvas)return new OffscreenCanvas(0,0)}},{key:"initContext",value:function(){var t={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext("webgl",t)||this.canvas.getContext("experimental-webgl",t)}},{key:"initPlugins",value:function(t){var e=[],n=this.source;if("string"===typeof n)for(var r=0;r<_.length;r++){var i=_[r];n.match(i.functionMatch)&&e.push(i)}else if("object"===typeof n&&t.pluginNames)for(var a=function(n){var r=_[n];t.pluginNames.some((function(t){return t===r.name}))&&e.push(r)},o=0;o<_.length;o++)a(o);return e}},{key:"initExtensions",value:function(){this.extensions={OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:this.context.getExtension("WEBGL_color_buffer_float")}}},{key:"validateSettings",value:function(t){if(this.validate){var e=this.constructor.features;if(!0===this.optimizeFloatMemory&&!e.isTextureFloat)throw new Error("Float textures are not supported");if("single"===this.precision&&!e.isFloatRead)throw new Error("Single precision not supported");if(!this.graphical&&null===this.precision&&e.isTextureFloat&&(this.precision=e.isFloatRead?"single":"unsigned"),this.subKernels&&this.subKernels.length>0&&!this.extensions.WEBGL_draw_buffers)throw new Error("could not instantiate draw buffers extension");if(null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!e.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&e.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==t.length)throw new Error("Auto output only supported for kernels with only one input");var n=f.getVariableType(t[0],this.strictIntegers);switch(n){case"Array":this.output=f.getDimensions(n);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=t[0].output;break;default:throw new Error("Auto output not supported for input type: "+n)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"precision"===this.precision&&(this.precision="unsigned",console.warn("Cannot use graphical mode and single precision at the same time")),void(this.texSize=f.clone(this.output))}null===this.precision&&e.isTextureFloat&&(this.precision="single"),this.texSize=f.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize()}else this.texSize=f.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output)}},{key:"updateMaxTexSize",value:function(){var t=this.texSize,e=this.canvas;if(null===this.maxTexSize){var n=T.indexOf(e);-1===n&&(n=T.length,T.push(e),S[n]=[t[0],t[1]]),this.maxTexSize=S[n]}this.maxTexSize[0]<t[0]&&(this.maxTexSize[0]=t[0]),this.maxTexSize[1]<t[1]&&(this.maxTexSize[1]=t[1])}},{key:"setupArguments",value:function(t){var e=this;this.kernelArguments=[],this.argumentTextureCount=0;var n=null===this.argumentTypes;if(n&&(this.argumentTypes=[]),this.argumentSizes=[],this.argumentBitRatios=[],t.length<this.argumentNames.length)throw new Error("not enough arguments for kernel");if(t.length>this.argumentNames.length)throw new Error("too many arguments for kernel");for(var r=this.context,i=0,a=function(){return e.createTexture()},o=function(){return e.constantTextureCount+i++},s=function(t){e.switchKernels({type:"argumentMismatch",needed:t})},u=function(){return r.TEXTURE0+e.constantTextureCount+e.argumentTextureCount++},l=0;l<t.length;l++){var c=t[l],h=this.argumentNames[l],p=void 0;n?(p=f.getVariableType(c,this.strictIntegers),this.argumentTypes.push(p)):p=this.argumentTypes[l];var d=this.constructor.lookupKernelValueType(p,this.dynamicArguments?"dynamic":"static",this.precision,t[l]);if(null===d)return this.requestFallback(t);var g=new d(c,{name:h,type:p,tactic:this.tactic,origin:"user",context:r,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:a,onRequestIndex:o,onUpdateValueMismatch:s,onRequestContextHandle:u});this.kernelArguments.push(g),g.setup(),this.argumentSizes.push(g.textureSize),this.argumentBitRatios[l]=g.bitRatio}}},{key:"createTexture",value:function(){var t=this.context.createTexture();return this.textureCache.push(t),t}},{key:"setupConstants",value:function(t){var e=this,n=this.context;this.kernelConstants=[],this.forceUploadKernelConstants=[];var r=null===this.constantTypes;r&&(this.constantTypes={}),this.constantBitRatios={};var i=0;for(var a in this.constants){var o=this.constants[a],s=void 0;r?(s=f.getVariableType(o,this.strictIntegers),this.constantTypes[a]=s):s=this.constantTypes[a];var u=this.constructor.lookupKernelValueType(s,"static",this.precision,o);if(null===u)return this.requestFallback(t);var l=new u(o,{name:a,type:s,tactic:this.tactic,origin:"constants",context:this.context,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:function(){return e.createTexture()},onRequestIndex:function(){return i++},onRequestContextHandle:function(){return n.TEXTURE0+e.constantTextureCount++}});this.constantBitRatios[a]=l.bitRatio,this.kernelConstants.push(l),l.setup(),l.forceUploadEachRun&&this.forceUploadKernelConstants.push(l)}}},{key:"build",value:function(){if(!this.built&&(this.initExtensions(),this.validateSettings(arguments),this.setupConstants(arguments),!this.fallbackRequested&&(this.setupArguments(arguments),!this.fallbackRequested))){this.updateMaxTexSize(),this.translateSource();var t=this.pickRenderStrategy(arguments);if(t)return t;var e=this.texSize,n=this.context,r=this.canvas;n.enable(n.SCISSOR_TEST),this.pipeline&&this.precision,n.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),r.width=this.maxTexSize[0],r.height=this.maxTexSize[1];for(var i=this.threadDim=Array.from(this.output);i.length<3;)i.push(1);var a=this.getVertexShader(arguments),o=n.createShader(n.VERTEX_SHADER);n.shaderSource(o,a),n.compileShader(o),this.vertShader=o;var s=this.getFragmentShader(arguments),u=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(u,s),n.compileShader(u),this.fragShader=u,this.debug&&(console.log("GLSL Shader Output:"),console.log(s)),!n.getShaderParameter(o,n.COMPILE_STATUS))throw new Error("Error compiling vertex shader: "+n.getShaderInfoLog(o));if(!n.getShaderParameter(u,n.COMPILE_STATUS))throw new Error("Error compiling fragment shader: "+n.getShaderInfoLog(u));var l=this.program=n.createProgram();n.attachShader(l,o),n.attachShader(l,u),n.linkProgram(l),this.framebuffer=n.createFramebuffer(),this.framebuffer.width=e[0],this.framebuffer.height=e[1],this.rawValueFramebuffers={};var c=new Float32Array([-1,-1,1,-1,-1,1,1,1]),h=new Float32Array([0,0,1,0,0,1,1,1]),f=c.byteLength,p=this.buffer;p?n.bindBuffer(n.ARRAY_BUFFER,p):(p=this.buffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,p),n.bufferData(n.ARRAY_BUFFER,c.byteLength+h.byteLength,n.STATIC_DRAW)),n.bufferSubData(n.ARRAY_BUFFER,0,c),n.bufferSubData(n.ARRAY_BUFFER,f,h);var d=n.getAttribLocation(this.program,"aPos");n.enableVertexAttribArray(d),n.vertexAttribPointer(d,2,n.FLOAT,!1,0,0);var g=n.getAttribLocation(this.program,"aTexCoord");n.enableVertexAttribArray(g),n.vertexAttribPointer(g,2,n.FLOAT,!1,0,f),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer);var m=0;for(var y in n.useProgram(this.program),this.constants)this.kernelConstants[m++].updateValue(this.constants[y]);this._setupOutputTexture(),null!==this.subKernels&&this.subKernels.length>0&&(this._mappedTextureSwitched={},this._setupSubOutputTextures()),this.buildSignature(arguments),this.built=!0}}},{key:"translateSource",value:function(){var t=c.fromKernel(this,h,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=t.getPrototypeString("kernel"),this.setupReturnTypes(t)}},{key:"setupReturnTypes",value:function(t){if(this.graphical||this.returnType||(this.returnType=t.getKernelResultType()),this.subKernels&&this.subKernels.length>0)for(var e=0;e<this.subKernels.length;e++){var n=this.subKernels[e];n.returnType||(n.returnType=t.getSubKernelResultType(e))}}},{key:"run",value:function(){var t=this.kernelArguments,e=this.texSize,n=this.forceUploadKernelConstants,r=this.context;r.useProgram(this.program),r.scissor(0,0,e[0],e[1]),this.dynamicOutput&&(this.setUniform3iv("uOutputDim",new Int32Array(this.threadDim)),this.setUniform2iv("uTexSize",e)),this.setUniform2f("ratio",e[0]/this.maxTexSize[0],e[1]/this.maxTexSize[1]);for(var i=0;i<n.length;i++){var a=n[i];if(a.updateValue(this.constants[a.name]),this.switchingKernels)return}for(var o=0;o<t.length;o++)if(t[o].updateValue(arguments[o]),this.switchingKernels)return;if(this.plugins)for(var s=0;s<this.plugins.length;s++){var u=this.plugins[s];u.onBeforeRun&&u.onBeforeRun(this)}if(this.graphical)return this.pipeline?(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),r.drawArrays(r.TRIANGLE_STRIP,0,4),this.immutable?this.texture.clone():this.texture):(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,null),void r.drawArrays(r.TRIANGLE_STRIP,0,4));r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),null!==this.subKernels&&(this.immutable&&this._replaceSubOutputTextures(),this.drawBuffers()),r.drawArrays(r.TRIANGLE_STRIP,0,4)}},{key:"drawBuffers",value:function(){this.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(this.drawBuffersMap)}},{key:"getInternalFormat",value:function(){return this.context.RGBA}},{key:"getTextureFormat",value:function(){var t=this.context;switch(this.getInternalFormat()){case t.RGBA:return t.RGBA;default:throw new Error("Unknown internal format")}}},{key:"_replaceOutputTexture",value:function(){if(this.texture.beforeMutate()||this._textureSwitched){var t=this.context;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0),this._textureSwitched=!1}}},{key:"_setupOutputTexture",value:function(){var t=this.context,e=this.texSize;if(this.texture)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0);else{var n=this.createTexture();t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var r=this.getInternalFormat();"single"===this.precision?t.texImage2D(t.TEXTURE_2D,0,r,e[0],e[1],0,t.RGBA,t.FLOAT,null):t.texImage2D(t.TEXTURE_2D,0,r,e[0],e[1],0,r,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),this.texture=new this.TextureConstructor({texture:n,size:e,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this})}}},{key:"_replaceSubOutputTextures",value:function(){for(var t=this.context,e=0;e<this.mappedTextures.length;e++){var n=this.mappedTextures[e];(n.beforeMutate()||this._mappedTextureSwitched[e])&&(t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e+1,t.TEXTURE_2D,n.texture,0),this._mappedTextureSwitched[e]=!1)}}},{key:"_setupSubOutputTextures",value:function(){var t=this.context;if(this.mappedTextures)for(var e=0;e<this.subKernels.length;e++)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e+1,t.TEXTURE_2D,this.mappedTextures[e].texture,0);else{var n=this.texSize;this.drawBuffersMap=[t.COLOR_ATTACHMENT0],this.mappedTextures=[];for(var r=0;r<this.subKernels.length;r++){var i=this.createTexture();this.drawBuffersMap.push(t.COLOR_ATTACHMENT0+r+1),t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+r),t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),"single"===this.precision?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n[0],n[1],0,t.RGBA,t.FLOAT,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n[0],n[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+r+1,t.TEXTURE_2D,i,0),this.mappedTextures.push(new this.TextureConstructor({texture:i,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}))}}}},{key:"setUniform1f",value:function(t,e){if(!this.uniform1fCache.hasOwnProperty(t)||e!==this.uniform1fCache[t]){this.uniform1fCache[t]=e;var n=this.getUniformLocation(t);this.context.uniform1f(n,e)}}},{key:"setUniform1i",value:function(t,e){if(!this.uniform1iCache.hasOwnProperty(t)||e!==this.uniform1iCache[t]){this.uniform1iCache[t]=e;var n=this.getUniformLocation(t);this.context.uniform1i(n,e)}}},{key:"setUniform2f",value:function(t,e,n){if(this.uniform2fCache.hasOwnProperty(t)){var r=this.uniform2fCache[t];if(e===r[0]&&n===r[1])return}this.uniform2fCache[t]=[e,n];var i=this.getUniformLocation(t);this.context.uniform2f(i,e,n)}},{key:"setUniform2fv",value:function(t,e){if(this.uniform2fvCache.hasOwnProperty(t)){var n=this.uniform2fvCache[t];if(e[0]===n[0]&&e[1]===n[1])return}this.uniform2fvCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform2fv(r,e)}},{key:"setUniform2iv",value:function(t,e){if(this.uniform2ivCache.hasOwnProperty(t)){var n=this.uniform2ivCache[t];if(e[0]===n[0]&&e[1]===n[1])return}this.uniform2ivCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform2iv(r,e)}},{key:"setUniform3fv",value:function(t,e){if(this.uniform3fvCache.hasOwnProperty(t)){var n=this.uniform3fvCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2])return}this.uniform3fvCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform3fv(r,e)}},{key:"setUniform3iv",value:function(t,e){if(this.uniform3ivCache.hasOwnProperty(t)){var n=this.uniform3ivCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2])return}this.uniform3ivCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform3iv(r,e)}},{key:"setUniform4fv",value:function(t,e){if(this.uniform4fvCache.hasOwnProperty(t)){var n=this.uniform4fvCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3])return}this.uniform4fvCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform4fv(r,e)}},{key:"setUniform4iv",value:function(t,e){if(this.uniform4ivCache.hasOwnProperty(t)){var n=this.uniform4ivCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3])return}this.uniform4ivCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform4iv(r,e)}},{key:"getUniformLocation",value:function(t){return this.programUniformLocationCache.hasOwnProperty(t)?this.programUniformLocationCache[t]:this.programUniformLocationCache[t]=this.context.getUniformLocation(this.program,t)}},{key:"_getFragShaderArtifactMap",value:function(t){return{HEADER:this._getHeaderString(),LOOP_MAX:this._getLoopMaxString(),PLUGINS:this._getPluginsString(),CONSTANTS:this._getConstantsString(),DECODE32_ENDIANNESS:this._getDecode32EndiannessString(),ENCODE32_ENDIANNESS:this._getEncode32EndiannessString(),DIVIDE_WITH_INTEGER_CHECK:this._getDivideWithIntegerCheckString(),INJECTED_NATIVE:this._getInjectedNative(),MAIN_CONSTANTS:this._getMainConstantsString(),MAIN_ARGUMENTS:this._getMainArgumentsString(t),KERNEL:this.getKernelString(),MAIN_RESULT:this.getMainResultString(),FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()}}},{key:"_getVertShaderArtifactMap",value:function(t){return{FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()}}},{key:"_getHeaderString",value:function(){return null!==this.subKernels?"#extension GL_EXT_draw_buffers : require\n":""}},{key:"_getLoopMaxString",value:function(){return this.loopMaxIterations?" ".concat(parseInt(this.loopMaxIterations),";\n"):" 1000;\n"}},{key:"_getPluginsString",value:function(){var t=this;return this.plugins?this.plugins.map((function(e){return e.source&&t.source.match(e.functionMatch)?e.source:""})).join("\n"):"\n"}},{key:"_getConstantsString",value:function(){var t=[],e=this.threadDim,n=this.texSize;return this.dynamicOutput?t.push("uniform ivec3 uOutputDim","uniform ivec2 uTexSize"):t.push("ivec3 uOutputDim = ivec3(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")"),"ivec2 uTexSize = ivec2(".concat(n[0],", ").concat(n[1],")")),f.linesToString(t)}},{key:"_getTextureCoordinate",value:function(){var t=this.subKernels;return null===t||t.length<1?"varying vec2 vTexCoord;\n":"out vec2 vTexCoord;\n"}},{key:"_getDecode32EndiannessString",value:function(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}},{key:"_getEncode32EndiannessString",value:function(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}},{key:"_getDivideWithIntegerCheckString",value:function(){return this.fixIntegerDivisionAccuracy?"float divWithIntCheck(float x, float y) {\n  if (floor(x) == x && floor(y) == y && integerMod(x, y) == 0.0) {\n    return float(int(x) / int(y));\n  }\n  return x / y;\n}\n\nfloat integerCorrectionModulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -(number - (divisor * floor(divWithIntCheck(number, divisor))));\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return number - (divisor * floor(divWithIntCheck(number, divisor)));\n}":""}},{key:"_getMainArgumentsString",value:function(t){for(var e=[],n=this.argumentNames,r=0;r<n.length;r++)e.push(this.kernelArguments[r].getSource(t[r]));return e.join("")}},{key:"_getInjectedNative",value:function(){return this.injectedNative||""}},{key:"_getMainConstantsString",value:function(){var t=[],e=this.constants;if(e){var n=0;for(var r in e)this.constants.hasOwnProperty(r)&&t.push(this.kernelConstants[n++].getSource(this.constants[r]))}return t.join("")}},{key:"getRawValueFramebuffer",value:function(t,e){if(this.rawValueFramebuffers[t]||(this.rawValueFramebuffers[t]={}),!this.rawValueFramebuffers[t][e]){var n=this.context.createFramebuffer();n.width=t,n.height=e,this.rawValueFramebuffers[t][e]=n}return this.rawValueFramebuffers[t][e]}},{key:"getKernelResultDeclaration",value:function(){switch(this.returnType){case"Array(2)":return"vec2 kernelResult";case"Array(3)":return"vec3 kernelResult";case"Array(4)":return"vec4 kernelResult";case"LiteralInteger":case"Float":case"Number":case"Integer":return"float kernelResult";default:if(this.graphical)return"float kernelResult";throw new Error('unrecognized output type "'.concat(this.returnType,'"'))}}},{key:"getKernelString",value:function(){var t=[this.getKernelResultDeclaration()],e=this.subKernels;if(null!==e)switch(this.returnType){case"Number":case"Float":case"Integer":for(var n=0;n<e.length;n++){var r=e[n];t.push("Integer"===r.returnType?"int subKernelResult_".concat(r.name," = 0"):"float subKernelResult_".concat(r.name," = 0.0"))}break;case"Array(2)":for(var i=0;i<e.length;i++)t.push("vec2 subKernelResult_".concat(e[i].name));break;case"Array(3)":for(var a=0;a<e.length;a++)t.push("vec3 subKernelResult_".concat(e[a].name));break;case"Array(4)":for(var o=0;o<e.length;o++)t.push("vec4 subKernelResult_".concat(e[o].name))}return f.linesToString(t)+this.translatedSource}},{key:"getMainResultGraphical",value:function(){return f.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragColor = actualColor"])}},{key:"getMainResultPackedPixels",value:function(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error('packed output only usable with Numbers, "'.concat(this.returnType,'" specified'))}}},{key:"getMainResultKernelPackedPixels",value:function(){return f.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0] = ".concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(kernelResult)")])}},{key:"getMainResultSubKernelPackedPixels",value:function(){var t=[];if(!this.subKernels)return"";for(var e=0;e<this.subKernels.length;e++)"Integer"===this.subKernels[e].returnType?t.push("  gl_FragData[".concat(e+1,"] = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(float(subKernelResult_").concat(this.subKernels[e].name,"))")):t.push("  gl_FragData[".concat(e+1,"] = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(subKernelResult_").concat(this.subKernels[e].name,")"));return f.linesToString(t)}},{key:"getMainResultMemoryOptimizedFloats",value:function(){var t=["  index *= 4"];switch(this.returnType){case"Number":case"Integer":case"Float":for(var e=["r","g","b","a"],n=0;n<e.length;n++){var r=e[n];this.getMainResultKernelMemoryOptimizedFloats(t,r),this.getMainResultSubKernelMemoryOptimizedFloats(t,r),n+1<e.length&&t.push("  index += 1")}break;default:throw new Error("optimized output only usable with Numbers, ".concat(this.returnType," specified"))}return f.linesToString(t)}},{key:"getMainResultKernelMemoryOptimizedFloats",value:function(t,e){t.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0].".concat(e," = kernelResult"))}},{key:"getMainResultSubKernelMemoryOptimizedFloats",value:function(t,e){if(!this.subKernels)return t;for(var n=0;n<this.subKernels.length;n++)"Integer"===this.subKernels[n].returnType?t.push("  gl_FragData[".concat(n+1,"].").concat(e," = float(subKernelResult_").concat(this.subKernels[n].name,")")):t.push("  gl_FragData[".concat(n+1,"].").concat(e," = subKernelResult_").concat(this.subKernels[n].name))}},{key:"getMainResultKernelNumberTexture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult"]}},{key:"getMainResultSubKernelNumberTexture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e){var n=this.subKernels[e];"Integer"===n.returnType?t.push("  gl_FragData[".concat(e+1,"][0] = float(subKernelResult_").concat(n.name,")")):t.push("  gl_FragData[".concat(e+1,"][0] = subKernelResult_").concat(n.name))}return t}},{key:"getMainResultKernelArray2Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]"]}},{key:"getMainResultSubKernelArray2Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e)t.push("  gl_FragData[".concat(e+1,"][0] = subKernelResult_").concat(this.subKernels[e].name,"[0]"),"  gl_FragData[".concat(e+1,"][1] = subKernelResult_").concat(this.subKernels[e].name,"[1]"));return t}},{key:"getMainResultKernelArray3Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]","  gl_FragData[0][2] = kernelResult[2]"]}},{key:"getMainResultSubKernelArray3Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e)t.push("  gl_FragData[".concat(e+1,"][0] = subKernelResult_").concat(this.subKernels[e].name,"[0]"),"  gl_FragData[".concat(e+1,"][1] = subKernelResult_").concat(this.subKernels[e].name,"[1]"),"  gl_FragData[".concat(e+1,"][2] = subKernelResult_").concat(this.subKernels[e].name,"[2]"));return t}},{key:"getMainResultKernelArray4Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0] = kernelResult"]}},{key:"getMainResultSubKernelArray4Texture",value:function(){var t=[];if(!this.subKernels)return t;switch(this.returnType){case"Number":case"Float":case"Integer":for(var e=0;e<this.subKernels.length;++e)"Integer"===this.subKernels[e].returnType?t.push("  gl_FragData[".concat(e+1,"] = float(subKernelResult_").concat(this.subKernels[e].name,")")):t.push("  gl_FragData[".concat(e+1,"] = subKernelResult_").concat(this.subKernels[e].name));break;case"Array(2)":for(var n=0;n<this.subKernels.length;++n)t.push("  gl_FragData[".concat(n+1,"][0] = subKernelResult_").concat(this.subKernels[n].name,"[0]"),"  gl_FragData[".concat(n+1,"][1] = subKernelResult_").concat(this.subKernels[n].name,"[1]"));break;case"Array(3)":for(var r=0;r<this.subKernels.length;++r)t.push("  gl_FragData[".concat(r+1,"][0] = subKernelResult_").concat(this.subKernels[r].name,"[0]"),"  gl_FragData[".concat(r+1,"][1] = subKernelResult_").concat(this.subKernels[r].name,"[1]"),"  gl_FragData[".concat(r+1,"][2] = subKernelResult_").concat(this.subKernels[r].name,"[2]"));break;case"Array(4)":for(var i=0;i<this.subKernels.length;++i)t.push("  gl_FragData[".concat(i+1,"][0] = subKernelResult_").concat(this.subKernels[i].name,"[0]"),"  gl_FragData[".concat(i+1,"][1] = subKernelResult_").concat(this.subKernels[i].name,"[1]"),"  gl_FragData[".concat(i+1,"][2] = subKernelResult_").concat(this.subKernels[i].name,"[2]"),"  gl_FragData[".concat(i+1,"][3] = subKernelResult_").concat(this.subKernels[i].name,"[3]"))}return t}},{key:"replaceArtifacts",value:function(t,e){return t.replace(/[ ]*__([A-Z]+[0-9]*([_]?[A-Z]*[0-9]?)*)__;\n/g,(function(t,n){if(e.hasOwnProperty(n))return e[n];throw"unhandled artifact ".concat(n)}))}},{key:"getFragmentShader",value:function(t){return null!==this.compiledFragmentShader?this.compiledFragmentShader:this.compiledFragmentShader=this.replaceArtifacts(this.constructor.fragmentShader,this._getFragShaderArtifactMap(t))}},{key:"getVertexShader",value:function(t){return null!==this.compiledVertexShader?this.compiledVertexShader:this.compiledVertexShader=this.replaceArtifacts(this.constructor.vertexShader,this._getVertShaderArtifactMap(t))}},{key:"toString",value:function(){var t=f.linesToString(["const gl = context"]);return m(this.constructor,arguments,this,t)}},{key:"destroy",value:function(t){if(this.context){for(var e in this.buffer&&this.context.deleteBuffer(this.buffer),this.framebuffer&&this.context.deleteFramebuffer(this.framebuffer),this.rawValueFramebuffers){for(var n in this.rawValueFramebuffers[e])this.context.deleteFramebuffer(this.rawValueFramebuffers[e][n]),delete this.rawValueFramebuffers[e][n];delete this.rawValueFramebuffers[e]}if(this.vertShader&&this.context.deleteShader(this.vertShader),this.fragShader&&this.context.deleteShader(this.fragShader),this.program&&this.context.deleteProgram(this.program),this.texture){this.texture.delete();var r=this.textureCache.indexOf(this.texture.texture);r>-1&&this.textureCache.splice(r,1),this.texture=null}if(this.mappedTextures&&this.mappedTextures.length){for(var i=0;i<this.mappedTextures.length;i++){var a=this.mappedTextures[i];a.delete();var o=this.textureCache.indexOf(a.texture);o>-1&&this.textureCache.splice(o,1)}this.mappedTextures=null}if(this.kernelArguments)for(var s=0;s<this.kernelArguments.length;s++)this.kernelArguments[s].destroy();if(this.kernelConstants)for(var u=0;u<this.kernelConstants.length;u++)this.kernelConstants[u].destroy();for(;this.textureCache.length>0;){var l=this.textureCache.pop();this.context.deleteTexture(l)}if(t){var c=T.indexOf(this.canvas);c>=0&&(T[c]=null,S[c]=null)}if(this.destroyExtensions(),delete this.context,delete this.canvas,this.gpu){var h=this.gpu.kernels.indexOf(this);-1!==h&&this.gpu.kernels.splice(h,1)}}}},{key:"destroyExtensions",value:function(){this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}},{key:"toJSON",value:function(){var t=i(a(n.prototype),"toJSON",this).call(this);return t.functionNodes=c.fromKernel(this,h).toJSON(),t.settings.threadDim=this.threadDim,t}}],[{key:"isSupported",get:function(){return null!==v?v:(this.setupFeatureChecks(),v=this.isContextMatch(b))}},{key:"setupFeatureChecks",value:function(){"undefined"!==typeof document?x=document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas&&(x=new OffscreenCanvas(0,0)),x&&(b=x.getContext("webgl")||x.getContext("experimental-webgl"))&&b.getExtension&&(w={OES_texture_float:b.getExtension("OES_texture_float"),OES_texture_float_linear:b.getExtension("OES_texture_float_linear"),OES_element_index_uint:b.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:b.getExtension("WEBGL_draw_buffers")},k=this.getFeatures())}},{key:"isContextMatch",value:function(t){return"undefined"!==typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext}},{key:"getIsTextureFloat",value:function(){return Boolean(w.OES_texture_float)}},{key:"getIsDrawBuffers",value:function(){return Boolean(w.WEBGL_draw_buffers)}},{key:"getChannelCount",value:function(){return w.WEBGL_draw_buffers?b.getParameter(w.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}},{key:"getMaxTextureSize",value:function(){return b.getParameter(b.MAX_TEXTURE_SIZE)}},{key:"lookupKernelValueType",value:function(t,e,n,r){return y(t,e,n,r)}},{key:"testCanvas",get:function(){return x}},{key:"testContext",get:function(){return b}},{key:"features",get:function(){return k}},{key:"fragmentShader",get:function(){return d}},{key:"vertexShader",get:function(){return g}},{key:"destroyContext",value:function(t){var e=t.getExtension("WEBGL_lose_context");e&&e.loseContext()}}]),n}(r);e.exports={WebGLKernel:E}},{"../../plugins/math-random-uniformly-distributed":112,"../../utils":114,"../function-builder":9,"../gl/kernel":13,"../gl/kernel-string":12,"./fragment-shader":37,"./function-node":38,"./kernel-value-maps":39,"./vertex-shader":71}],71:[function(t,e,n){e.exports={vertexShader:"__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nattribute vec2 aPos;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}"}},{}],72:[function(t,e,n){var r="#version 300 es\n__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n__SAMPLER_2D_ARRAY_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nin vec2 vTexCoord;\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat expm1(float x) {\n  return pow(".concat(Math.E,", x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x/y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  return texel[channel*2] * 255.0 + texel[channel*2 + 1] * 65280.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  return texel[channel] * 255.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  index = index / 4;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return texel[channel];\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, st / vec2(texSize));\n}\n\nvec4 getImage3D(sampler2DArray tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, vec3(st / vec2(texSize), z));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n\n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}");e.exports={fragmentShader:r}},{}],73:[function(t,e,n){var r=t("../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"astIdentifierExpression",value:function(t,e){if("Identifier"!==t.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",t);var n=this.getType(t),i=r.sanitizeName(t.name);return"Infinity"===t.name?e.push("intBitsToFloat(2139095039)"):"Boolean"===n&&this.argumentNames.indexOf(i)>-1?e.push("bool(user_".concat(i,")")):e.push("user_".concat(i)),e}}]),n}(t("../web-gl/function-node").WebGLFunctionNode);e.exports={WebGL2FunctionNode:i}},{"../../utils":114,"../web-gl/function-node":38}],74:[function(t,e,n){var r=t("./kernel-value/boolean").WebGL2KernelValueBoolean,i=t("./kernel-value/float").WebGL2KernelValueFloat,a=t("./kernel-value/integer").WebGL2KernelValueInteger,o=t("./kernel-value/html-image").WebGL2KernelValueHTMLImage,s=t("./kernel-value/dynamic-html-image").WebGL2KernelValueDynamicHTMLImage,u=t("./kernel-value/html-image-array").WebGL2KernelValueHTMLImageArray,l=t("./kernel-value/dynamic-html-image-array").WebGL2KernelValueDynamicHTMLImageArray,c=t("./kernel-value/html-video").WebGL2KernelValueHTMLVideo,h=t("./kernel-value/dynamic-html-video").WebGL2KernelValueDynamicHTMLVideo,f=t("./kernel-value/single-input").WebGL2KernelValueSingleInput,p=t("./kernel-value/dynamic-single-input").WebGL2KernelValueDynamicSingleInput,d=t("./kernel-value/unsigned-input").WebGL2KernelValueUnsignedInput,g=t("./kernel-value/dynamic-unsigned-input").WebGL2KernelValueDynamicUnsignedInput,m=t("./kernel-value/memory-optimized-number-texture").WebGL2KernelValueMemoryOptimizedNumberTexture,y=t("./kernel-value/dynamic-memory-optimized-number-texture").WebGL2KernelValueDynamicMemoryOptimizedNumberTexture,v=t("./kernel-value/number-texture").WebGL2KernelValueNumberTexture,x=t("./kernel-value/dynamic-number-texture").WebGL2KernelValueDynamicNumberTexture,b=t("./kernel-value/single-array").WebGL2KernelValueSingleArray,w=t("./kernel-value/dynamic-single-array").WebGL2KernelValueDynamicSingleArray,k=t("./kernel-value/single-array1d-i").WebGL2KernelValueSingleArray1DI,_=t("./kernel-value/dynamic-single-array1d-i").WebGL2KernelValueDynamicSingleArray1DI,T=t("./kernel-value/single-array2d-i").WebGL2KernelValueSingleArray2DI,S=t("./kernel-value/dynamic-single-array2d-i").WebGL2KernelValueDynamicSingleArray2DI,E=t("./kernel-value/single-array3d-i").WebGL2KernelValueSingleArray3DI,A=t("./kernel-value/dynamic-single-array3d-i").WebGL2KernelValueDynamicSingleArray3DI,L=t("./kernel-value/array2").WebGL2KernelValueArray2,D=t("./kernel-value/array3").WebGL2KernelValueArray3,C=t("./kernel-value/array4").WebGL2KernelValueArray4,I=t("./kernel-value/unsigned-array").WebGL2KernelValueUnsignedArray,M={unsigned:{dynamic:{Boolean:r,Integer:a,Float:i,Array:t("./kernel-value/dynamic-unsigned-array").WebGL2KernelValueDynamicUnsignedArray,"Array(2)":L,"Array(3)":D,"Array(4)":C,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:g,NumberTexture:x,"ArrayTexture(1)":x,"ArrayTexture(2)":x,"ArrayTexture(3)":x,"ArrayTexture(4)":x,MemoryOptimizedNumberTexture:y,HTMLCanvas:s,HTMLImage:s,HTMLImageArray:l,HTMLVideo:h},static:{Boolean:r,Float:i,Integer:a,Array:I,"Array(2)":L,"Array(3)":D,"Array(4)":C,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:d,NumberTexture:v,"ArrayTexture(1)":v,"ArrayTexture(2)":v,"ArrayTexture(3)":v,"ArrayTexture(4)":v,MemoryOptimizedNumberTexture:y,HTMLCanvas:o,HTMLImage:o,HTMLImageArray:u,HTMLVideo:c}},single:{dynamic:{Boolean:r,Integer:a,Float:i,Array:w,"Array(2)":L,"Array(3)":D,"Array(4)":C,"Array1D(2)":_,"Array1D(3)":_,"Array1D(4)":_,"Array2D(2)":S,"Array2D(3)":S,"Array2D(4)":S,"Array3D(2)":A,"Array3D(3)":A,"Array3D(4)":A,Input:p,NumberTexture:x,"ArrayTexture(1)":x,"ArrayTexture(2)":x,"ArrayTexture(3)":x,"ArrayTexture(4)":x,MemoryOptimizedNumberTexture:y,HTMLCanvas:s,HTMLImage:s,HTMLImageArray:l,HTMLVideo:h},static:{Boolean:r,Float:i,Integer:a,Array:b,"Array(2)":L,"Array(3)":D,"Array(4)":C,"Array1D(2)":k,"Array1D(3)":k,"Array1D(4)":k,"Array2D(2)":T,"Array2D(3)":T,"Array2D(4)":T,"Array3D(2)":E,"Array3D(3)":E,"Array3D(4)":E,Input:f,NumberTexture:v,"ArrayTexture(1)":v,"ArrayTexture(2)":v,"ArrayTexture(3)":v,"ArrayTexture(4)":v,MemoryOptimizedNumberTexture:m,HTMLCanvas:o,HTMLImage:o,HTMLImageArray:u,HTMLVideo:c}}};e.exports={kernelValueMaps:M,lookupKernelValueType:function(t,e,n,r){if(!t)throw new Error("type missing");if(!e)throw new Error("dynamic missing");if(!n)throw new Error("precision missing");r.type&&(t=r.type);var i=M[n][e];if(!1===i[t])return null;if(void 0===i[t])throw new Error("Could not find a KernelValue for ".concat(t));return i[t]}}},{"./kernel-value/array2":75,"./kernel-value/array3":76,"./kernel-value/array4":77,"./kernel-value/boolean":78,"./kernel-value/dynamic-html-image":80,"./kernel-value/dynamic-html-image-array":79,"./kernel-value/dynamic-html-video":81,"./kernel-value/dynamic-memory-optimized-number-texture":82,"./kernel-value/dynamic-number-texture":83,"./kernel-value/dynamic-single-array":84,"./kernel-value/dynamic-single-array1d-i":85,"./kernel-value/dynamic-single-array2d-i":86,"./kernel-value/dynamic-single-array3d-i":87,"./kernel-value/dynamic-single-input":88,"./kernel-value/dynamic-unsigned-array":89,"./kernel-value/dynamic-unsigned-input":90,"./kernel-value/float":91,"./kernel-value/html-image":93,"./kernel-value/html-image-array":92,"./kernel-value/html-video":94,"./kernel-value/integer":95,"./kernel-value/memory-optimized-number-texture":96,"./kernel-value/number-texture":97,"./kernel-value/single-array":98,"./kernel-value/single-array1d-i":99,"./kernel-value/single-array2d-i":100,"./kernel-value/single-array3d-i":101,"./kernel-value/single-input":102,"./kernel-value/unsigned-array":103,"./kernel-value/unsigned-input":104}],75:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(t("../../web-gl/kernel-value/array2").WebGLKernelValueArray2);e.exports={WebGL2KernelValueArray2:r}},{"../../web-gl/kernel-value/array2":41}],76:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(t("../../web-gl/kernel-value/array3").WebGLKernelValueArray3);e.exports={WebGL2KernelValueArray3:r}},{"../../web-gl/kernel-value/array3":42}],77:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(t("../../web-gl/kernel-value/array4").WebGLKernelValueArray4);e.exports={WebGL2KernelValueArray4:r}},{"../../web-gl/kernel-value/array4":43}],78:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(t("../../web-gl/kernel-value/boolean").WebGLKernelValueBoolean);e.exports={WebGL2KernelValueBoolean:r}},{"../../web-gl/kernel-value/boolean":44}],79:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2DArray ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=t[0],r=e.width,o=e.height;this.checkSize(r,o),this.dimensions=[r,o,t.length],this.textureSize=[r,o],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./html-image-array").WebGL2KernelValueHTMLImageArray);e.exports={WebGL2KernelValueDynamicHTMLImageArray:c}},{"../../../utils":114,"./html-image-array":92}],80:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-html-image").WebGLKernelValueDynamicHTMLImage);e.exports={WebGL2KernelValueDynamicHTMLImage:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-html-image":45}],81:[function(t,e,n){t("../../../utils").utils;var r=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(t("./dynamic-html-image").WebGL2KernelValueDynamicHTMLImage);e.exports={WebGL2KernelValueDynamicHTMLVideo:r}},{"../../../utils":114,"./dynamic-html-image":80}],82:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-memory-optimized-number-texture").WebGLKernelValueDynamicMemoryOptimizedNumberTexture);e.exports={WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-memory-optimized-number-texture":47}],83:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-number-texture").WebGLKernelValueDynamicNumberTexture);e.exports={WebGL2KernelValueDynamicNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-number-texture":48}],84:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-array").WebGL2KernelValueSingleArray);e.exports={WebGL2KernelValueDynamicSingleArray:c}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array":98}],85:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-array1d-i").WebGL2KernelValueSingleArray1DI);e.exports={WebGL2KernelValueDynamicSingleArray1DI:c}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array1d-i":99}],86:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-array2d-i").WebGL2KernelValueSingleArray2DI);e.exports={WebGL2KernelValueDynamicSingleArray2DI:c}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array2d-i":100}],87:[function(t,e,n){var r=t("../../../utils").utils,c=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-array3d-i").WebGL2KernelValueSingleArray3DI);e.exports={WebGL2KernelValueDynamicSingleArray3DI:c}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array3d-i":101}],88:[function(t,e,n){var r=t("../../../utils").utils,h=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=c(t.size,3),o=e[0],s=e[1],u=e[2];this.dimensions=new Int32Array([o||1,s||1,u||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),i(a(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-input").WebGL2KernelValueSingleInput);e.exports={WebGL2KernelValueDynamicSingleInput:h}},{"../../../utils":114,"../../web-gl2/kernel-value/single-input":102}],89:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-unsigned-array").WebGLKernelValueDynamicUnsignedArray);e.exports={WebGL2KernelValueDynamicUnsignedArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-unsigned-array":54}],90:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-unsigned-input").WebGLKernelValueDynamicUnsignedInput);e.exports={WebGL2KernelValueDynamicUnsignedInput:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-unsigned-input":55}],91:[function(t,e,n){t("../../../utils").utils;var r=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(t("../../web-gl/kernel-value/float").WebGLKernelValueFloat);e.exports={WebGL2KernelValueFloat:r}},{"../../../utils":114,"../../web-gl/kernel-value/float":56}],92:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(t,r){var i;return o(this,n),(i=e.call(this,t,r)).checkSize(t[0].width,t[0].height),i.dimensions=[t[0].width,t[0].height,t.length],i.textureSize=[t[0].width,t[0].height],i}return s(n,[{key:"defineTexture",value:function(){var t=this.context;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D_ARRAY,this.texture),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MIN_FILTER,t.NEAREST)}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2DArray ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){var e=this.context;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D_ARRAY,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage3D(e.TEXTURE_2D_ARRAY,0,e.RGBA,t[0].width,t[0].height,t.length,0,e.RGBA,e.UNSIGNED_BYTE,null);for(var n=0;n<t.length;n++)e.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,n,t[n].width,t[n].height,1,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue=t[n]);this.kernel.setUniform1i(this.id,this.index)}}]),n}(t("../../web-gl/kernel-value/array").WebGLKernelArray);e.exports={WebGL2KernelValueHTMLImageArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/array":40}],93:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}}]),n}(t("../../web-gl/kernel-value/html-image").WebGLKernelValueHTMLImage);e.exports={WebGL2KernelValueHTMLImage:i}},{"../../../utils":114,"../../web-gl/kernel-value/html-image":57}],94:[function(t,e,n){t("../../../utils").utils;var r=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(t("./html-image").WebGL2KernelValueHTMLImage);e.exports={WebGL2KernelValueHTMLVideo:r}},{"../../../utils":114,"./html-image":93}],95:[function(t,e,n){var r=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(t){var e=this.getVariablePrecisionString();return"constants"===this.origin?"const ".concat(e," int ").concat(this.id," = ").concat(parseInt(t),";\n"):"uniform ".concat(e," int ").concat(this.id,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=t)}}]),n}(t("../../web-gl/kernel-value/integer").WebGLKernelValueInteger);e.exports={WebGL2KernelValueInteger:r}},{"../../web-gl/kernel-value/integer":60}],96:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.id,e=this.sizeId,n=this.textureSize,i=this.dimensionsId,a=this.dimensions,o=this.getVariablePrecisionString();return r.linesToString(["uniform sampler2D ".concat(t),"".concat(o," ivec2 ").concat(e," = ivec2(").concat(n[0],", ").concat(n[1],")"),"".concat(o," ivec3 ").concat(i," = ivec3(").concat(a[0],", ").concat(a[1],", ").concat(a[2],")")])}}]),n}(t("../../web-gl/kernel-value/memory-optimized-number-texture").WebGLKernelValueMemoryOptimizedNumberTexture);e.exports={WebGL2KernelValueMemoryOptimizedNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/memory-optimized-number-texture":61}],97:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.id,e=this.sizeId,n=this.textureSize,i=this.dimensionsId,a=this.dimensions,o=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(o," sampler2D ").concat(t),"".concat(o," ivec2 ").concat(e," = ivec2(").concat(n[0],", ").concat(n[1],")"),"".concat(o," ivec3 ").concat(i," = ivec3(").concat(a[0],", ").concat(a[1],", ").concat(a[2],")")])}}]),n}(t("../../web-gl/kernel-value/number-texture").WebGLKernelValueNumberTexture);e.exports={WebGL2KernelValueNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/number-texture":62}],98:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("../../web-gl/kernel-value/single-array").WebGLKernelValueSingleArray);e.exports={WebGL2KernelValueSingleArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array":63}],99:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("../../web-gl/kernel-value/single-array1d-i").WebGLKernelValueSingleArray1DI);e.exports={WebGL2KernelValueSingleArray1DI:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array1d-i":64}],100:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("../../web-gl/kernel-value/single-array2d-i").WebGLKernelValueSingleArray2DI);e.exports={WebGL2KernelValueSingleArray2DI:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array2d-i":65}],101:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("../../web-gl/kernel-value/single-array3d-i").WebGLKernelValueSingleArray3DI);e.exports={WebGL2KernelValueSingleArray3DI:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array3d-i":66}],102:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){var e=this.context;r.flattenTo(t.value,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}]),n}(t("../../web-gl/kernel-value/single-input").WebGLKernelValueSingleInput);e.exports={WebGL2KernelValueSingleInput:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-input":67}],103:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}}]),n}(t("../../web-gl/kernel-value/unsigned-array").WebGLKernelValueUnsignedArray);e.exports={WebGL2KernelValueUnsignedArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/unsigned-array":68}],104:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}}]),n}(t("../../web-gl/kernel-value/unsigned-input").WebGLKernelValueUnsignedInput);e.exports={WebGL2KernelValueUnsignedInput:i}},{"../../../utils":114,"../../web-gl/kernel-value/unsigned-input":69}],105:[function(t,e,n){var r=t("../web-gl/kernel").WebGLKernel,c=t("./function-node").WebGL2FunctionNode,h=t("../function-builder").FunctionBuilder,f=t("../../utils").utils,p=t("./fragment-shader").fragmentShader,d=t("./vertex-shader").vertexShader,g=t("./kernel-value-maps").lookupKernelValueType,m=null,y=null,v=null,x=null,b=function(t){"use strict";u(n,t);var e=l(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"initContext",value:function(){return this.canvas.getContext("webgl2",{alpha:!1,depth:!1,antialias:!1})}},{key:"initExtensions",value:function(){this.extensions={EXT_color_buffer_float:this.context.getExtension("EXT_color_buffer_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear")}}},{key:"validateSettings",value:function(t){if(this.validate){var e=this.constructor.features;if("single"===this.precision&&!e.isFloatRead)throw new Error("Float texture outputs are not supported");if(this.graphical||null!==this.precision||(this.precision=e.isFloatRead?"single":"unsigned"),null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!e.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&e.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==t.length)throw new Error("Auto output only supported for kernels with only one input");var n=f.getVariableType(t[0],this.strictIntegers);switch(n){case"Array":this.output=f.getDimensions(n);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=t[0].output;break;default:throw new Error("Auto output not supported for input type: "+n)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"single"===this.precision&&(console.warn("Cannot use graphical mode and single precision at the same time"),this.precision="unsigned"),void(this.texSize=f.clone(this.output))}!this.graphical&&null===this.precision&&e.isTextureFloat&&(this.precision="single"),this.texSize=f.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize()}else this.texSize=f.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output)}},{key:"translateSource",value:function(){var t=h.fromKernel(this,c,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=t.getPrototypeString("kernel"),this.setupReturnTypes(t)}},{key:"drawBuffers",value:function(){this.context.drawBuffers(this.drawBuffersMap)}},{key:"getTextureFormat",value:function(){var t=this.context;switch(this.getInternalFormat()){case t.R32F:return t.RED;case t.RG32F:return t.RG;case t.RGBA32F:case t.RGBA:return t.RGBA;default:throw new Error("Unknown internal format")}}},{key:"getInternalFormat",value:function(){var t=this.context;if("single"===this.precision){if(this.pipeline)switch(this.returnType){case"Number":case"Float":case"Integer":return this.optimizeFloatMemory?t.RGBA32F:t.R32F;case"Array(2)":return t.RG32F;case"Array(3)":case"Array(4)":return t.RGBA32F;default:throw new Error("Unhandled return type")}return t.RGBA32F}return t.RGBA}},{key:"_setupOutputTexture",value:function(){var t=this.context;if(this.texture)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0);else{t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer);var e=t.createTexture(),n=this.texSize;t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var r=this.getInternalFormat();"single"===this.precision?t.texStorage2D(t.TEXTURE_2D,1,r,n[0],n[1]):t.texImage2D(t.TEXTURE_2D,0,r,n[0],n[1],0,r,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.texture=new this.TextureConstructor({texture:e,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this})}}},{key:"_setupSubOutputTextures",value:function(){var t=this.context;if(this.mappedTextures)for(var e=0;e<this.subKernels.length;e++)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e+1,t.TEXTURE_2D,this.mappedTextures[e].texture,0);else{var n=this.texSize;this.drawBuffersMap=[t.COLOR_ATTACHMENT0],this.mappedTextures=[];for(var r=0;r<this.subKernels.length;r++){var i=this.createTexture();this.drawBuffersMap.push(t.COLOR_ATTACHMENT0+r+1),t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+r),t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var a=this.getInternalFormat();"single"===this.precision?t.texStorage2D(t.TEXTURE_2D,1,a,n[0],n[1]):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n[0],n[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+r+1,t.TEXTURE_2D,i,0),this.mappedTextures.push(new this.TextureConstructor({texture:i,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}))}}}},{key:"_getHeaderString",value:function(){return""}},{key:"_getTextureCoordinate",value:function(){var t=this.subKernels,e=this.getVariablePrecisionString(this.texSize,this.tactic);return null===t||t.length<1?"in ".concat(e," vec2 vTexCoord;\n"):"out ".concat(e," vec2 vTexCoord;\n")}},{key:"_getMainArgumentsString",value:function(t){for(var e=[],n=this.argumentNames,r=0;r<n.length;r++)e.push(this.kernelArguments[r].getSource(t[r]));return e.join("")}},{key:"getKernelString",value:function(){var t=[this.getKernelResultDeclaration()],e=this.subKernels;if(null!==e)switch(t.push("layout(location = 0) out vec4 data0"),this.returnType){case"Number":case"Float":case"Integer":for(var n=0;n<e.length;n++){var r=e[n];t.push("Integer"===r.returnType?"int subKernelResult_".concat(r.name," = 0"):"float subKernelResult_".concat(r.name," = 0.0"),"layout(location = ".concat(n+1,") out vec4 data").concat(n+1))}break;case"Array(2)":for(var i=0;i<e.length;i++)t.push("vec2 subKernelResult_".concat(e[i].name),"layout(location = ".concat(i+1,") out vec4 data").concat(i+1));break;case"Array(3)":for(var a=0;a<e.length;a++)t.push("vec3 subKernelResult_".concat(e[a].name),"layout(location = ".concat(a+1,") out vec4 data").concat(a+1));break;case"Array(4)":for(var o=0;o<e.length;o++)t.push("vec4 subKernelResult_".concat(e[o].name),"layout(location = ".concat(o+1,") out vec4 data").concat(o+1))}else t.push("out vec4 data0");return f.linesToString(t)+this.translatedSource}},{key:"getMainResultGraphical",value:function(){return f.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = actualColor"])}},{key:"getMainResultPackedPixels",value:function(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error('packed output only usable with Numbers, "'.concat(this.returnType,'" specified'))}}},{key:"getMainResultKernelPackedPixels",value:function(){return f.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = ".concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(kernelResult)")])}},{key:"getMainResultSubKernelPackedPixels",value:function(){var t=[];if(!this.subKernels)return"";for(var e=0;e<this.subKernels.length;e++)"Integer"===this.subKernels[e].returnType?t.push("  data".concat(e+1," = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(float(subKernelResult_").concat(this.subKernels[e].name,"))")):t.push("  data".concat(e+1," = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(subKernelResult_").concat(this.subKernels[e].name,")"));return f.linesToString(t)}},{key:"getMainResultKernelMemoryOptimizedFloats",value:function(t,e){t.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0.".concat(e," = kernelResult"))}},{key:"getMainResultSubKernelMemoryOptimizedFloats",value:function(t,e){if(!this.subKernels)return t;for(var n=0;n<this.subKernels.length;n++){var r=this.subKernels[n];"Integer"===r.returnType?t.push("  data".concat(n+1,".").concat(e," = float(subKernelResult_").concat(r.name,")")):t.push("  data".concat(n+1,".").concat(e," = subKernelResult_").concat(r.name))}}},{key:"getMainResultKernelNumberTexture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult"]}},{key:"getMainResultSubKernelNumberTexture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e){var n=this.subKernels[e];"Integer"===n.returnType?t.push("  data".concat(e+1,"[0] = float(subKernelResult_").concat(n.name,")")):t.push("  data".concat(e+1,"[0] = subKernelResult_").concat(n.name))}return t}},{key:"getMainResultKernelArray2Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]"]}},{key:"getMainResultSubKernelArray2Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e){var n=this.subKernels[e];t.push("  data".concat(e+1,"[0] = subKernelResult_").concat(n.name,"[0]"),"  data".concat(e+1,"[1] = subKernelResult_").concat(n.name,"[1]"))}return t}},{key:"getMainResultKernelArray3Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]","  data0[2] = kernelResult[2]"]}},{key:"getMainResultSubKernelArray3Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e){var n=this.subKernels[e];t.push("  data".concat(e+1,"[0] = subKernelResult_").concat(n.name,"[0]"),"  data".concat(e+1,"[1] = subKernelResult_").concat(n.name,"[1]"),"  data".concat(e+1,"[2] = subKernelResult_").concat(n.name,"[2]"))}return t}},{key:"getMainResultKernelArray4Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = kernelResult"]}},{key:"getMainResultSubKernelArray4Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e)t.push("  data".concat(e+1," = subKernelResult_").concat(this.subKernels[e].name));return t}},{key:"destroyExtensions",value:function(){this.extensions.EXT_color_buffer_float=null,this.extensions.OES_texture_float_linear=null}},{key:"toJSON",value:function(){var t=i(a(n.prototype),"toJSON",this).call(this);return t.functionNodes=h.fromKernel(this,c).toJSON(),t.settings.threadDim=this.threadDim,t}}],[{key:"isSupported",get:function(){return null!==m?m:(this.setupFeatureChecks(),m=this.isContextMatch(v))}},{key:"setupFeatureChecks",value:function(){"undefined"!==typeof document?y=document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas&&(y=new OffscreenCanvas(0,0)),y&&(v=y.getContext("webgl2"))&&v.getExtension&&(v.getExtension("EXT_color_buffer_float"),v.getExtension("OES_texture_float_linear"),x=this.getFeatures())}},{key:"isContextMatch",value:function(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext}},{key:"getFeatures",value:function(){var t=this.testContext;return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),kernelMap:!0,isTextureFloat:!0,isDrawBuffers:!0,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_INT),lowFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_FLOAT),mediumIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_INT),mediumFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT),highIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT),highFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT)})}},{key:"getIsTextureFloat",value:function(){return!0}},{key:"getChannelCount",value:function(){return v.getParameter(v.MAX_DRAW_BUFFERS)}},{key:"getMaxTextureSize",value:function(){return v.getParameter(v.MAX_TEXTURE_SIZE)}},{key:"lookupKernelValueType",value:function(t,e,n,r){return g(t,e,n,r)}},{key:"testCanvas",get:function(){return y}},{key:"testContext",get:function(){return v}},{key:"features",get:function(){return x}},{key:"fragmentShader",get:function(){return p}},{key:"vertexShader",get:function(){return d}}]),n}(r);e.exports={WebGL2Kernel:b}},{"../../utils":114,"../function-builder":9,"../web-gl/kernel":70,"./fragment-shader":72,"./function-node":73,"./kernel-value-maps":74,"./vertex-shader":106}],106:[function(t,e,n){e.exports={vertexShader:"#version 300 es\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nin vec2 aPos;\nin vec2 aTexCoord;\n\nout vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}"}},{}],107:[function(t,e,n){var r=t("./index"),i=r.GPU;for(var a in r)r.hasOwnProperty(a)&&"GPU"!==a&&(i[a]=r[a]);function o(t){t.GPU||Object.defineProperty(t,"GPU",{get:function(){return i}})}"undefined"!==typeof window&&o(window),"undefined"!==typeof self&&o(self),e.exports=r},{"./index":109}],108:[function(t,e,n){var r=t("gpu-mock.js").gpuMock,i=t("./utils").utils,a=(t("./backend/kernel").Kernel,t("./backend/cpu/kernel").CPUKernel),u=t("./backend/headless-gl/kernel").HeadlessGLKernel,l=t("./backend/web-gl2/kernel").WebGL2Kernel,c=t("./backend/web-gl/kernel").WebGLKernel,h=t("./kernel-run-shortcut").kernelRunShortcut,f=[u,l,c],p=["gpu","cpu"],d={headlessgl:u,webgl2:l,webgl:c},g=!0,m=function(){"use strict";function t(e){if(o(this,t),e=e||{},this.canvas=e.canvas||null,this.context=e.context||null,this.mode=e.mode,this.Kernel=null,this.kernels=[],this.functions=[],this.nativeFunctions=[],this.injectedNative=null,"dev"!==this.mode){if(this.chooseKernel(),e.functions)for(var n=0;n<e.functions.length;n++)this.addFunction(e.functions[n]);if(e.nativeFunctions)for(var r in e.nativeFunctions)if(e.nativeFunctions.hasOwnProperty(r)){var i=e.nativeFunctions[r],a=i.name,s=i.source;this.addNativeFunction(a,s,i)}}}return s(t,[{key:"chooseKernel",value:function(){if(!this.Kernel){var t=null;if(this.context){for(var e=0;e<f.length;e++){var n=f[e];if(n.isContextMatch(this.context)){if(!n.isSupported)throw new Error("Kernel type ".concat(n.name," not supported"));t=n;break}}if(null===t)throw new Error("unknown Context")}else if(this.mode){if(this.mode in d)g&&!d[this.mode].isSupported||(t=d[this.mode]);else if("gpu"===this.mode){for(var r=0;r<f.length;r++)if(f[r].isSupported){t=f[r];break}}else"cpu"===this.mode&&(t=a);if(!t)throw new Error('A requested mode of "'.concat(this.mode,'" and is not supported'))}else{for(var i=0;i<f.length;i++)if(f[i].isSupported){t=f[i];break}t||(t=a)}this.mode||(this.mode=t.mode),this.Kernel=t}}},{key:"createKernel",value:function(t,e){if("undefined"===typeof t)throw new Error("Missing source parameter");if("object"!==typeof t&&!i.isFunction(t)&&"string"!==typeof t)throw new Error("source parameter not a function");var n=this.kernels;if("dev"===this.mode){var o=r(t,y(e));return n.push(o),o}t="function"===typeof t?t.toString():t;var s={},u=y(e)||{};function l(e){console.warn("Falling back to CPU");var n=new a(t,{argumentTypes:p.argumentTypes,constantTypes:p.constantTypes,graphical:p.graphical,loopMaxIterations:p.loopMaxIterations,constants:p.constants,dynamicOutput:p.dynamicOutput,dynamicArgument:p.dynamicArguments,output:p.output,precision:p.precision,pipeline:p.pipeline,immutable:p.immutable,optimizeFloatMemory:p.optimizeFloatMemory,fixIntegerDivisionAccuracy:p.fixIntegerDivisionAccuracy,functions:p.functions,nativeFunctions:p.nativeFunctions,injectedNative:p.injectedNative,subKernels:p.subKernels,strictIntegers:p.strictIntegers,debug:p.debug});n.build.apply(n,e);var r=n.run.apply(n,e);return p.replaceKernel(n),r}e&&"object"===typeof e.argumentTypes&&(u.argumentTypes=Object.keys(e.argumentTypes).map((function(t){return e.argumentTypes[t]})));var c=Object.assign({context:this.context,canvas:this.canvas,functions:this.functions,nativeFunctions:this.nativeFunctions,injectedNative:this.injectedNative,gpu:this,validate:g,onRequestFallback:l,onRequestSwitchKernel:function e(r,i,a){a.debug&&console.warn("Switching kernels");var o=null;if(a.signature&&!s[a.signature]&&(s[a.signature]=a),a.dynamicOutput)for(var u=r.length-1;u>=0;u--){var c=r[u];"outputPrecisionMismatch"===c.type&&(o=c.needed)}var h=a.constructor,f=h.getArgumentTypes(a,i),d=h.getSignature(a,f),m=s[d];if(m)return m.onActivate(a),m;var y=s[d]=new h(t,{argumentTypes:f,constantTypes:a.constantTypes,graphical:a.graphical,loopMaxIterations:a.loopMaxIterations,constants:a.constants,dynamicOutput:a.dynamicOutput,dynamicArgument:a.dynamicArguments,context:a.context,canvas:a.canvas,output:o||a.output,precision:a.precision,pipeline:a.pipeline,immutable:a.immutable,optimizeFloatMemory:a.optimizeFloatMemory,fixIntegerDivisionAccuracy:a.fixIntegerDivisionAccuracy,functions:a.functions,nativeFunctions:a.nativeFunctions,injectedNative:a.injectedNative,subKernels:a.subKernels,strictIntegers:a.strictIntegers,debug:a.debug,gpu:a.gpu,validate:g,returnType:a.returnType,tactic:a.tactic,onRequestFallback:l,onRequestSwitchKernel:e,texture:a.texture,mappedTextures:a.mappedTextures,drawBuffersMap:a.drawBuffersMap});return y.build.apply(y,i),p.replaceKernel(y),n.push(y),y}},u),f=new this.Kernel(t,c),p=h(f);return this.canvas||(this.canvas=f.canvas),this.context||(this.context=f.context),n.push(f),p}},{key:"createKernelMap",value:function(){var t,e,n=typeof arguments[arguments.length-2];if("function"===n||"string"===n?(t=arguments[arguments.length-2],e=arguments[arguments.length-1]):t=arguments[arguments.length-1],"dev"!==this.mode&&(!this.Kernel.isSupported||!this.Kernel.features.kernelMap)&&this.mode&&p.indexOf(this.mode)<0)throw new Error("kernelMap not supported on ".concat(this.Kernel.name));var r=y(e);if(e&&"object"===typeof e.argumentTypes&&(r.argumentTypes=Object.keys(e.argumentTypes).map((function(t){return e.argumentTypes[t]}))),Array.isArray(arguments[0])){r.subKernels=[];for(var a=arguments[0],o=0;o<a.length;o++){var s=a[o].toString(),u=i.getFunctionNameFromString(s);r.subKernels.push({name:u,source:s,property:o})}}else{r.subKernels=[];var l=arguments[0];for(var c in l)if(l.hasOwnProperty(c)){var h=l[c].toString(),f=i.getFunctionNameFromString(h);r.subKernels.push({name:f||c,source:h,property:c})}}return this.createKernel(t,r)}},{key:"combineKernels",value:function(){var t=arguments[0],e=arguments[arguments.length-1];if("cpu"===t.kernel.constructor.mode)return e;for(var n=arguments[0].canvas,r=arguments[0].context,i=arguments.length-1,a=0;a<i;a++)arguments[a].setCanvas(n).setContext(r).setPipeline(!0);return function(){var t=e.apply(this,arguments);return t.toArray?t.toArray():t}}},{key:"setFunctions",value:function(t){return this.functions=t,this}},{key:"setNativeFunctions",value:function(t){return this.nativeFunctions=t,this}},{key:"addFunction",value:function(t,e){return this.functions.push({source:t,settings:e}),this}},{key:"addNativeFunction",value:function(t,e,n){if(this.kernels.length>0)throw new Error('Cannot call "addNativeFunction" after "createKernels" has been called.');return this.nativeFunctions.push(Object.assign({name:t,source:e},n)),this}},{key:"injectNative",value:function(t){return this.injectedNative=t,this}},{key:"destroy",value:function(){var t=this;return new Promise((function(e,n){t.kernels||e(),setTimeout((function(){try{for(var r=0;r<t.kernels.length;r++)t.kernels[r].destroy(!0);var i=t.kernels[0];i&&(i.kernel&&(i=i.kernel),i.constructor.destroyContext&&i.constructor.destroyContext(t.context))}catch(a){n(a)}e()}),0)}))}}],[{key:"disableValidation",value:function(){g=!1}},{key:"enableValidation",value:function(){g=!0}},{key:"isGPUSupported",get:function(){return f.some((function(t){return t.isSupported}))}},{key:"isKernelMapSupported",get:function(){return f.some((function(t){return t.isSupported&&t.features.kernelMap}))}},{key:"isOffscreenCanvasSupported",get:function(){return"undefined"!==typeof Worker&&"undefined"!==typeof OffscreenCanvas||"undefined"!==typeof importScripts}},{key:"isWebGLSupported",get:function(){return c.isSupported}},{key:"isWebGL2Supported",get:function(){return l.isSupported}},{key:"isHeadlessGLSupported",get:function(){return u.isSupported}},{key:"isCanvasSupported",get:function(){return"undefined"!==typeof HTMLCanvasElement}},{key:"isGPUHTMLImageArraySupported",get:function(){return l.isSupported}},{key:"isSinglePrecisionSupported",get:function(){return f.some((function(t){return t.isSupported&&t.features.isFloatRead&&t.features.isTextureFloat}))}}]),t}();function y(t){if(!t)return{};var e=Object.assign({},t);return t.hasOwnProperty("floatOutput")&&(i.warnDeprecated("setting","floatOutput","precision"),e.precision=t.floatOutput?"single":"unsigned"),t.hasOwnProperty("outputToTexture")&&(i.warnDeprecated("setting","outputToTexture","pipeline"),e.pipeline=Boolean(t.outputToTexture)),t.hasOwnProperty("outputImmutable")&&(i.warnDeprecated("setting","outputImmutable","immutable"),e.immutable=Boolean(t.outputImmutable)),t.hasOwnProperty("floatTextures")&&(i.warnDeprecated("setting","floatTextures","optimizeFloatMemory"),e.optimizeFloatMemory=Boolean(t.floatTextures)),e}e.exports={GPU:m,kernelOrder:f,kernelTypes:p}},{"./backend/cpu/kernel":8,"./backend/headless-gl/kernel":34,"./backend/kernel":36,"./backend/web-gl/kernel":70,"./backend/web-gl2/kernel":105,"./kernel-run-shortcut":111,"./utils":114,"gpu-mock.js":4}],109:[function(t,e,n){var r=t("./gpu").GPU,i=t("./alias").alias,a=t("./utils").utils,o=t("./input"),s=o.Input,u=o.input,l=t("./texture").Texture,c=t("./backend/function-builder").FunctionBuilder,h=t("./backend/function-node").FunctionNode,f=t("./backend/cpu/function-node").CPUFunctionNode,p=t("./backend/cpu/kernel").CPUKernel,d=t("./backend/headless-gl/kernel").HeadlessGLKernel,g=t("./backend/web-gl/function-node").WebGLFunctionNode,m=t("./backend/web-gl/kernel").WebGLKernel,y=t("./backend/web-gl/kernel-value-maps").kernelValueMaps,v=t("./backend/web-gl2/function-node").WebGL2FunctionNode,x=t("./backend/web-gl2/kernel").WebGL2Kernel,b=t("./backend/web-gl2/kernel-value-maps").kernelValueMaps,w=t("./backend/gl/kernel").GLKernel,k=t("./backend/kernel").Kernel,_=t("./backend/function-tracer").FunctionTracer,T=t("./plugins/math-random-uniformly-distributed");e.exports={alias:i,CPUFunctionNode:f,CPUKernel:p,GPU:r,FunctionBuilder:c,FunctionNode:h,HeadlessGLKernel:d,Input:s,input:u,Texture:l,utils:a,WebGL2FunctionNode:v,WebGL2Kernel:x,webGL2KernelValueMaps:b,WebGLFunctionNode:g,WebGLKernel:m,webGLKernelValueMaps:y,GLKernel:w,Kernel:k,FunctionTracer:_,plugins:{mathRandom:T}}},{"./alias":5,"./backend/cpu/function-node":6,"./backend/cpu/kernel":8,"./backend/function-builder":9,"./backend/function-node":10,"./backend/function-tracer":11,"./backend/gl/kernel":13,"./backend/headless-gl/kernel":34,"./backend/kernel":36,"./backend/web-gl/function-node":38,"./backend/web-gl/kernel":70,"./backend/web-gl/kernel-value-maps":39,"./backend/web-gl2/function-node":73,"./backend/web-gl2/kernel":105,"./backend/web-gl2/kernel-value-maps":74,"./gpu":108,"./input":110,"./plugins/math-random-uniformly-distributed":112,"./texture":113,"./utils":114}],110:[function(t,e,n){var r=function(){"use strict";function e(t,n){o(this,e),this.value=t,Array.isArray(n)?this.size=n:(this.size=new Int32Array(3),n.z?this.size=new Int32Array([n.x,n.y,n.z]):n.y?this.size=new Int32Array([n.x,n.y]):this.size=new Int32Array([n.x]));var r=c(this.size,3),i=r[0],a=r[1],s=r[2];if(s){if(this.value.length!==i*a*s)throw new Error("Input size ".concat(this.value.length," does not match ").concat(i," * ").concat(a," * ").concat(s," = ").concat(a*i*s))}else if(a){if(this.value.length!==i*a)throw new Error("Input size ".concat(this.value.length," does not match ").concat(i," * ").concat(a," = ").concat(a*i))}else if(this.value.length!==i)throw new Error("Input size ".concat(this.value.length," does not match ").concat(i))}return s(e,[{key:"toArray",value:function(){var e=t("./utils").utils,n=c(this.size,3),r=n[0],i=n[1],a=n[2];return a?e.erectMemoryOptimized3DFloat(this.value.subarray?this.value:new Float32Array(this.value),r,i,a):i?e.erectMemoryOptimized2DFloat(this.value.subarray?this.value:new Float32Array(this.value),r,i):this.value}}]),e}();e.exports={Input:r,input:function(t,e){return new r(t,e)}}},{"./utils":114}],111:[function(t,e,n){var r=t("./utils").utils;function i(t,e){if(e.kernel)e.kernel=t;else{for(var n=r.allPropertiesOf(t),i=function(r){var i=n[r];if("_"===i[0]&&"_"===i[1])return"continue";"function"===typeof t[i]?"add"===i.substring(0,3)||"set"===i.substring(0,3)?e[i]=function(){return e.kernel[i].apply(e.kernel,arguments),e}:e[i]=function(){return e.kernel[i].apply(e.kernel,arguments)}:(e.__defineGetter__(i,(function(){return e.kernel[i]})),e.__defineSetter__(i,(function(t){e.kernel[i]=t})))},a=0;a<n.length;a++)i(a);e.kernel=t}}e.exports={kernelRunShortcut:function(t){var e=function(){return t.build.apply(t,arguments),(e=function(){var e=t.run.apply(t,arguments);if(t.switchingKernels){var r=t.resetSwitchingKernels(),i=t.onRequestSwitchKernel(r,arguments,t);n.kernel=t=i,e=i.run.apply(i,arguments)}return t.renderKernels?t.renderKernels():t.renderOutput?t.renderOutput():e}).apply(t,arguments)},n=function(){return e.apply(t,arguments)};return n.exec=function(){var t=arguments,n=this;return new Promise((function(r,i){try{r(e.apply(n,t))}catch(a){i(a)}}))},n.replaceKernel=function(e){i(t=e,n)},i(t,n),n}}},{"./utils":114}],112:[function(t,e,n){var r={name:"math-random-uniformly-distributed",onBeforeRun:function(t){t.setUniform1f("randomSeed1",Math.random()),t.setUniform1f("randomSeed2",Math.random())},functionMatch:"Math.random()",functionReplace:"nrand(vTexCoord)",functionReturnType:"Number",source:"// https://www.shadertoy.com/view/4t2SDh\n//note: uniformly distributed, normalized rand, [0,1]\nhighp float randomSeedShift = 1.0;\nhighp float slide = 1.0;\nuniform highp float randomSeed1;\nuniform highp float randomSeed2;\n\nhighp float nrand(highp vec2 n) {\n  highp float result = fract(sin(dot((n.xy + 1.0) * vec2(randomSeed1 * slide, randomSeed2 * randomSeedShift), vec2(12.9898, 78.233))) * 43758.5453);\n  randomSeedShift = result;\n  if (randomSeedShift > 0.5) {\n    slide += 0.00009; \n  } else {\n    slide += 0.0009;\n  }\n  return result;\n}"};e.exports=r},{}],113:[function(t,e,n){var r=function(){"use strict";function t(e){o(this,t);var n=e.texture,r=e.size,i=e.dimensions,a=e.output,s=e.context,u=e.type,l=void 0===u?"NumberTexture":u,c=e.kernel,h=e.internalFormat,f=e.textureFormat;if(!a)throw new Error('settings property "output" required.');if(!s)throw new Error('settings property "context" required.');if(!n)throw new Error('settings property "texture" required.');if(!c)throw new Error('settings property "kernel" required.');this.texture=n,n._refs?n._refs++:n._refs=1,this.size=r,this.dimensions=i,this.output=a,this.context=s,this.kernel=c,this.type=l,this._deleted=!1,this.internalFormat=h,this.textureFormat=f}return s(t,[{key:"toArray",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}},{key:"clone",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}},{key:"delete",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}},{key:"clear",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}}]),t}();e.exports={Texture:r}},{}],114:[function(t,e,n){var r=t("acorn"),i=t("./input").Input,a=t("./texture").Texture,o=/function ([^(]*)/,s=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,u=/([^\s,]+)/g,l={systemEndianness:function(){return d},getSystemEndianness:function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);if(e[0]=3735928559,239===n[0])return"LE";if(222===n[0])return"BE";throw new Error("unknown endianness")},isFunction:function(t){return"function"===typeof t},isFunctionString:function(t){return"string"===typeof t&&"function"===t.slice(0,"function".length).toLowerCase()},getFunctionNameFromString:function(t){var e=o.exec(t);return e&&0!==e.length?e[1].trim():null},getFunctionBodyFromString:function(t){return t.substring(t.indexOf("{")+1,t.lastIndexOf("}"))},getArgumentNamesFromString:function(t){var e=t.replace(s,""),n=e.slice(e.indexOf("(")+1,e.indexOf(")")).match(u);return null===n&&(n=[]),n},clone:function(t){if(null===t||"object"!==typeof t||t.hasOwnProperty("isActiveClone"))return t;var e=t.constructor();for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t.isActiveClone=null,e[n]=l.clone(t[n]),delete t.isActiveClone);return e},isArray:function(t){return!isNaN(t.length)},getVariableType:function(t,e){if(l.isArray(t))return t.length>0&&"IMG"===t[0].nodeName?"HTMLImageArray":"Array";switch(t.constructor){case Boolean:return"Boolean";case Number:return e&&Number.isInteger(t)?"Integer":"Float";case a:return t.type;case i:return"Input"}switch(t.nodeName){case"IMG":case"CANVAS":return"HTMLImage";case"VIDEO":return"HTMLVideo"}return t.hasOwnProperty("type")?t.type:"Unknown"},getKernelTextureSize:function(t,e){var n=c(e,3),r=n[0],i=n[1],a=(r||1)*(i||1)*(n[2]||1);return t.optimizeFloatMemory&&"single"===t.precision&&(r=a=Math.ceil(a/4)),i>1&&r*i===a?new Int32Array([r,i]):l.closestSquareDimensions(a)},closestSquareDimensions:function(t){for(var e=Math.sqrt(t),n=Math.ceil(e),r=Math.floor(e);n*r<t;)n--,r=Math.ceil(t/n);return new Int32Array([r,Math.ceil(t/r)])},getMemoryOptimizedFloatTextureSize:function(t,e){var n=l.roundTo((t[0]||1)*(t[1]||1)*(t[2]||1)*(t[3]||1),4)/e;return l.closestSquareDimensions(n)},getMemoryOptimizedPackedTextureSize:function(t,e){var n=c(t,3),r=n[0],i=n[1],a=n[2],o=l.roundTo((r||1)*(i||1)*(a||1),4)/(4/e);return l.closestSquareDimensions(o)},roundTo:function(t,e){return Math.floor((t+e-1)/e)*e},getDimensions:function(t,e){var n;if(l.isArray(t)){for(var r=[],o=t;l.isArray(o);)r.push(o.length),o=o[0];n=r.reverse()}else if(t instanceof a)n=t.output;else{if(!(t instanceof i))throw new Error("Unknown dimensions of ".concat(t));n=t.size}if(e)for(n=Array.from(n);n.length<3;)n.push(1);return new Int32Array(n)},flatten2dArrayTo:function(t,e){for(var n=0,r=0;r<t.length;r++)e.set(t[r],n),n+=t[r].length},flatten3dArrayTo:function(t,e){for(var n=0,r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)e.set(t[r][i],n),n+=t[r][i].length},flatten4dArrayTo:function(t,e){for(var n=0,r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)for(var a=0;a<t[r][i].length;a++)e.set(t[r][i][a],n),n+=t[r][i][a].length},flattenTo:function(t,e){l.isArray(t[0])?l.isArray(t[0][0])?l.isArray(t[0][0][0])?l.flatten4dArrayTo(t,e):l.flatten3dArrayTo(t,e):l.flatten2dArrayTo(t,e):e.set(t)},splitArray:function(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(new t.constructor(t.buffer,4*r+t.byteOffset,e));return n},getAstString:function(t,e){var n=Array.isArray(t)?t:t.split(/\r?\n/g),r=e.loc.start,i=e.loc.end,a=[];if(r.line===i.line)a.push(n[r.line-1].substring(r.column,i.column));else{a.push(n[r.line-1].slice(r.column));for(var o=r.line;o<i.line;o++)a.push(n[o]);a.push(n[i.line-1].slice(0,i.column))}return a.join("\n")},allPropertiesOf:function(t){var e=[];do{e.push.apply(e,Object.getOwnPropertyNames(t))}while(t=Object.getPrototypeOf(t));return e},linesToString:function(t){return t.length>0?t.join(";\n")+";\n":"\n"},warnDeprecated:function(t,e,n){n?console.warn("You are using a deprecated ".concat(t,' "').concat(e,'". It has been replaced with "').concat(n,'". Fixing, but please upgrade as it will soon be removed.')):console.warn("You are using a deprecated ".concat(t,' "').concat(e,'". It has been removed. Fixing, but please upgrade as it will soon be removed.'))},flipPixels:function(t,e,n){for(var r=n/2|0,i=4*e,a=new Uint8ClampedArray(4*e),o=t.slice(0),s=0;s<r;++s){var u=s*i,l=(n-s-1)*i;a.set(o.subarray(u,u+i)),o.copyWithin(u,l,l+i),o.set(a,l)}return o},erectPackedFloat:function(t,e){return t.subarray(0,e)},erect2DPackedFloat:function(t,e,n){for(var r=new Array(n),i=0;i<n;i++){var a=i*e,o=a+e;r[i]=t.subarray(a,o)}return r},erect3DPackedFloat:function(t,e,n,r){for(var i=new Array(r),a=0;a<r;a++){for(var o=new Array(n),s=0;s<n;s++){var u=a*n*e+s*e,l=u+e;o[s]=t.subarray(u,l)}i[a]=o}return i},erectMemoryOptimizedFloat:function(t,e){return t.subarray(0,e)},erectMemoryOptimized2DFloat:function(t,e,n){for(var r=new Array(n),i=0;i<n;i++){var a=i*e;r[i]=t.subarray(a,a+e)}return r},erectMemoryOptimized3DFloat:function(t,e,n,r){for(var i=new Array(r),a=0;a<r;a++){for(var o=new Array(n),s=0;s<n;s++){var u=a*n*e+s*e;o[s]=t.subarray(u,u+e)}i[a]=o}return i},erectFloat:function(t,e){for(var n=new Float32Array(e),r=0,i=0;i<e;i++)n[i]=t[r],r+=4;return n},erect2DFloat:function(t,e,n){for(var r=new Array(n),i=0,a=0;a<n;a++){for(var o=new Float32Array(e),s=0;s<e;s++)o[s]=t[i],i+=4;r[a]=o}return r},erect3DFloat:function(t,e,n,r){for(var i=new Array(r),a=0,o=0;o<r;o++){for(var s=new Array(n),u=0;u<n;u++){for(var l=new Float32Array(e),c=0;c<e;c++)l[c]=t[a],a+=4;s[u]=l}i[o]=s}return i},erectArray2:function(t,e){for(var n=new Array(e),r=4*e,i=0,a=0;a<r;a+=4)n[i++]=t.subarray(a,a+2);return n},erect2DArray2:function(t,e,n){for(var r=new Array(n),i=4*e,a=0;a<n;a++){for(var o=new Array(e),s=a*i,u=0,l=0;l<i;l+=4)o[u++]=t.subarray(l+s,l+s+2);r[a]=o}return r},erect3DArray2:function(t,e,n,r){for(var i=4*e,a=new Array(r),o=0;o<r;o++){for(var s=new Array(n),u=0;u<n;u++){for(var l=new Array(e),c=o*i*n+u*i,h=0,f=0;f<i;f+=4)l[h++]=t.subarray(f+c,f+c+2);s[u]=l}a[o]=s}return a},erectArray3:function(t,e){for(var n=new Array(e),r=4*e,i=0,a=0;a<r;a+=4)n[i++]=t.subarray(a,a+3);return n},erect2DArray3:function(t,e,n){for(var r=4*e,i=new Array(n),a=0;a<n;a++){for(var o=new Array(e),s=a*r,u=0,l=0;l<r;l+=4)o[u++]=t.subarray(l+s,l+s+3);i[a]=o}return i},erect3DArray3:function(t,e,n,r){for(var i=4*e,a=new Array(r),o=0;o<r;o++){for(var s=new Array(n),u=0;u<n;u++){for(var l=new Array(e),c=o*i*n+u*i,h=0,f=0;f<i;f+=4)l[h++]=t.subarray(f+c,f+c+3);s[u]=l}a[o]=s}return a},erectArray4:function(t,e){for(var n=new Array(t),r=4*e,i=0,a=0;a<r;a+=4)n[i++]=t.subarray(a,a+4);return n},erect2DArray4:function(t,e,n){for(var r=4*e,i=new Array(n),a=0;a<n;a++){for(var o=new Array(e),s=a*r,u=0,l=0;l<r;l+=4)o[u++]=t.subarray(l+s,l+s+4);i[a]=o}return i},erect3DArray4:function(t,e,n,r){for(var i=4*e,a=new Array(r),o=0;o<r;o++){for(var s=new Array(n),u=0;u<n;u++){for(var l=new Array(e),c=o*i*n+u*i,h=0,f=0;f<i;f+=4)l[h++]=t.subarray(f+c,f+c+4);s[u]=l}a[o]=s}return a},flattenFunctionToString:function(t,e){var n=e.findDependency,i=e.thisLookup,a=(e.doNotDefine,e.flattened);a||(a=e.flattened={});var o=r.parse(t),s=[],u=0,c=function t(e){if(Array.isArray(e)){for(var r=[],a=0;a<e.length;a++)r.push(t(e[a]));return r.join("")}switch(e.type){case"Program":return t(e.body)+("VariableDeclaration"===e.body[0].type?";":"");case"FunctionDeclaration":return"function ".concat(e.id.name,"(").concat(e.params.map(t).join(", "),") ").concat(t(e.body));case"BlockStatement":var o=[];u+=2;for(var c=0;c<e.body.length;c++){var h=t(e.body[c]);h&&o.push(" ".repeat(u)+h,";\n")}return u-=2,"{\n".concat(o.join(""),"}");case"VariableDeclaration":var f=l.normalizeDeclarations(e).map(t).filter((function(t){return null!==t}));return f.length<1?"":"".concat(e.kind," ").concat(f.join(","));case"VariableDeclarator":return e.init.object&&"ThisExpression"===e.init.object.type?i(e.init.property.name,!0)?"".concat(e.id.name," = ").concat(t(e.init)):null:"".concat(e.id.name," = ").concat(t(e.init));case"CallExpression":if("subarray"===e.callee.property.name)return"".concat(t(e.callee.object),".").concat(t(e.callee.property),"(").concat(e.arguments.map((function(e){return t(e)})).join(", "),")");if("gl"===e.callee.object.name||"context"===e.callee.object.name)return"".concat(t(e.callee.object),".").concat(t(e.callee.property),"(").concat(e.arguments.map((function(e){return t(e)})).join(", "),")");if("ThisExpression"===e.callee.object.type)return s.push(n("this",e.callee.property.name)),"".concat(e.callee.property.name,"(").concat(e.arguments.map((function(e){return t(e)})).join(", "),")");if(e.callee.object.name){var p=n(e.callee.object.name,e.callee.property.name);return null===p?"".concat(e.callee.object.name,".").concat(e.callee.property.name,"(").concat(e.arguments.map((function(e){return t(e)})).join(", "),")"):(s.push(p),"".concat(e.callee.property.name,"(").concat(e.arguments.map((function(e){return t(e)})).join(", "),")"))}if("MemberExpression"===e.callee.object.type)return"".concat(t(e.callee.object),".").concat(e.callee.property.name,"(").concat(e.arguments.map((function(e){return t(e)})).join(", "),")");throw new Error("unknown ast.callee");case"ReturnStatement":return"return ".concat(t(e.argument));case"BinaryExpression":return"(".concat(t(e.left)).concat(e.operator).concat(t(e.right),")");case"UnaryExpression":return e.prefix?"".concat(e.operator," ").concat(t(e.argument)):"".concat(t(e.argument)," ").concat(e.operator);case"ExpressionStatement":return"".concat(t(e.expression));case"SequenceExpression":return"(".concat(t(e.expressions),")");case"ArrowFunctionExpression":return"(".concat(e.params.map(t).join(", "),") => ").concat(t(e.body));case"Literal":return e.raw;case"Identifier":return e.name;case"MemberExpression":return"ThisExpression"===e.object.type?i(e.property.name):e.computed?"".concat(t(e.object),"[").concat(t(e.property),"]"):t(e.object)+"."+t(e.property);case"ThisExpression":return"this";case"NewExpression":return"new ".concat(t(e.callee),"(").concat(e.arguments.map((function(e){return t(e)})).join(", "),")");case"ForStatement":return"for (".concat(t(e.init),";").concat(t(e.test),";").concat(t(e.update),") ").concat(t(e.body));case"AssignmentExpression":return"".concat(t(e.left)).concat(e.operator).concat(t(e.right));case"UpdateExpression":return"".concat(t(e.argument)).concat(e.operator);case"IfStatement":return"if (".concat(t(e.test),") ").concat(t(e.consequent));case"ThrowStatement":return"throw ".concat(t(e.argument));case"ObjectPattern":return e.properties.map(t).join(", ");case"ArrayPattern":return e.elements.map(t).join(", ");case"DebuggerStatement":return"debugger;";case"ConditionalExpression":return"".concat(t(e.test),"?").concat(t(e.consequent),":").concat(t(e.alternate));case"Property":if("init"===e.kind)return t(e.key)}throw new Error("unhandled ast.type of ".concat(e.type))}(o);if(s.length>0){for(var h=[],f=0;f<s.length;f++){var p=s[f];a[p]||(a[p]=!0),p&&h.push(l.flattenFunctionToString(p,e)+"\n")}return h.join("")+c}return c},normalizeDeclarations:function(t){if("VariableDeclaration"!==t.type)throw new Error('Ast is not of type "VariableDeclaration"');for(var e=[],n=0;n<t.declarations.length;n++){var r=t.declarations[n];if(r.id&&"ObjectPattern"===r.id.type&&r.id.properties)for(var i=r.id.properties,a=0;a<i.length;a++){var o=i[a];if("ObjectPattern"===o.value.type&&o.value.properties)for(var s=0;s<o.value.properties.length;s++){var u=o.value.properties[s];if("Property"!==u.type)throw new Error("unexpected state");e.push({type:"VariableDeclarator",id:{type:"Identifier",name:u.key.name},init:{type:"MemberExpression",object:{type:"MemberExpression",object:r.init,property:{type:"Identifier",name:o.key.name},computed:!1},property:{type:"Identifier",name:u.key.name},computed:!1}})}else{if("Identifier"!==o.value.type)throw new Error("unexpected state");e.push({type:"VariableDeclarator",id:{type:"Identifier",name:o.value&&o.value.name?o.value.name:o.key.name},init:{type:"MemberExpression",object:r.init,property:{type:"Identifier",name:o.key.name},computed:!1}})}}else if(r.id&&"ArrayPattern"===r.id.type&&r.id.elements)for(var l=r.id.elements,c=0;c<l.length;c++){var h=l[c];if("Identifier"!==h.type)throw new Error("unexpected state");e.push({type:"VariableDeclarator",id:{type:"Identifier",name:h.name},init:{type:"MemberExpression",object:r.init,property:{type:"Literal",value:c,raw:c.toString(),start:h.start,end:h.end},computed:!0}})}else e.push(r)}return e},splitHTMLImageToRGB:function(t,e){var n=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].r}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),r=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].g}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),i=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].b}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),a=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].a}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),o=[n(e),r(e),i(e),a(e)];return o.rKernel=n,o.gKernel=r,o.bKernel=i,o.aKernel=a,o.gpu=t,o},splitRGBAToCanvases:function(t,e,n,r){var i=t.createKernel((function(t){var e=t[this.thread.y][this.thread.x];this.color(e.r/255,0,0,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});i(e);var a=t.createKernel((function(t){var e=t[this.thread.y][this.thread.x];this.color(0,e.g/255,0,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});a(e);var o=t.createKernel((function(t){var e=t[this.thread.y][this.thread.x];this.color(0,0,e.b/255,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});o(e);var s=t.createKernel((function(t){var e=t[this.thread.y][this.thread.x];this.color(255,255,255,e.a/255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});return s(e),[i.canvas,a.canvas,o.canvas,s.canvas]},getMinifySafeName:function(t){try{var e=r.parse("const value = ".concat(t.toString())).body[0].declarations[0].init;return e.body.name||e.body.body[0].argument.name}catch(n){throw new Error("Unrecognized function type.  Please use `() => yourFunctionVariableHere` or function() { return yourFunctionVariableHere; }")}},sanitizeName:function(t){return h.test(t)&&(t=t.replace(h,"S_S")),f.test(t)?t=t.replace(f,"U_U"):p.test(t)&&(t=t.replace(p,"u_u")),t}},h=/\$/,f=/__/,p=/_/,d=l.getSystemEndianness();e.exports={utils:l}},{"./input":110,"./texture":113,acorn:1}]},{},[107])(107)},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){var r=n(112);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){t.exports={checkSameSize:function(t,e){if(t.width!==e.width)throw new Error("Layer width mismatch of ".concat(t.width," and ").concat(e.width));if(t.height!==e.height)throw new Error("Layer height mismatch of ".concat(t.height," and ").concat(e.height))}}},function(t,e,n){var r=n(1),i=n(3),a=n(4),o=n(24).Base,s=n(7),u=n(31),l=function(t){"use strict";i(n,t);var e=a(n);function n(t,i){var a;r(this,n),(a=e.call(this)).inputLayer=t;var o=t.width,l=t.height,c=t.depth;return a.predictKernel=null,a.compareKernel=null,a.width=o,a.height=l,a.validate(),c>0?(a.depth=c,a.weights=u(o,l,c),a.deltas=u(o,l,c)):(a.weights=s(o,l),a.deltas=s(o,l)),a.setupPraxis(i),a}return n}(o);t.exports={Activation:l}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(5).makeKernel,u=n(7);function l(t){return t}function c(t,e,n,r){var i=t[this.thread.y][this.thread.x],a=r[this.thread.y][0],o=e[this.thread.y][this.thread.x],s=n[this.thread.x][0],u=this.constants.learningRate*a*s+this.constants.momentum*i;return o+u}var h=function(t){"use strict";a(n,t);var e=o(n);function n(t,i){var a;return r(this,n),(a=e.call(this,t,i)).weightsLayer=null,a.incomingLayer=null,a.deltaLayer=null,i&&(i.weightsLayer&&(a.weightsLayer=i.weightsLayer),i.incomingLayer&&(a.incomingLayer=i.incomingLayer),i.deltaLayer&&(a.deltaLayer=i.deltaLayer)),a.changes=u(t.width,t.height),a}return i(n,[{key:"run",value:function(){var t=this.kernel(this.changes,this.weightsLayer.weights,this.incomingLayer.weights,this.deltaLayer.deltas);return this.changes=t.changes,t.result}},{key:"setupKernels",value:function(){this.kernel=s(c,{map:{changes:l},output:[this.width,this.height],constants:{learningRate:this.learningRate,momentum:this.momentum}})}}],[{key:"defaults",get:function(){return{learningRate:.3,momentum:.1}}}]),n}(n(64).Base);t.exports={ArthurDeviationWeights:h,arthurDeviationWeights:function(t,e){return new h(t,e)},update:c,updateChange:l}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(5).makeKernel;function u(t,e){return t[this.thread.y][this.thread.x]+this.constants.learningRate*e[this.thread.y][this.thread.x]}var l=function(t){"use strict";a(n,t);var e=o(n);function n(t,i){var a;return r(this,n),(a=e.call(this,t,i)).kernel=null,a}return i(n,[{key:"run",value:function(t){return this.kernel(t.weights,t.deltas)}},{key:"setupKernels",value:function(){this.kernel=s(u,{output:[this.width,this.height],constants:{learningRate:this.learningRate}})}}],[{key:"defaults",get:function(){return{learningRate:.3}}}]),n}(n(64).Base);t.exports={ArthurDeviationBiases:l,arthurDeviationBiases:function(t,e){return new l(t,e)},update:u}},function(t,e){t.exports=function(){return.4*Math.random()-.2}},function(t,e){t.exports={setStride:function(t,e){var n=t.constructor.defaults;e.hasOwnProperty("stride")?(t.strideX=e.stride,t.strideY=e.stride):(e.hasOwnProperty("strideX")?t.strideX=e.strideX:t.strideX=n.stride,e.hasOwnProperty("strideY")?t.strideY=e.strideY:t.strideY=n.stride)},setPadding:function(t,e){var n=t.constructor.defaults;e.hasOwnProperty("padding")?(t.paddingX=e.padding,t.paddingY=e.padding):(e.hasOwnProperty("paddingX")?t.paddingX=e.paddingX:t.paddingX=n.padding,e.hasOwnProperty("paddingY")?t.paddingY=e.paddingY:t.paddingY=n.padding)}}},function(t,e){t.exports=function(t,e){return new Float32Array(t).fill(e)}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(5).makeKernel;function u(t){return-t[this.thread.y][this.thread.x]}var l=function(t){"use strict";a(n,t);var e=o(n);function n(t,i){var a;return r(this,n),(a=e.call(this,t)).inputLayer=i,a.validate(),a}return i(n,[{key:"setupKernels",value:function(){this.predictKernel=s(u,{output:[this.width,this.height]})}},{key:"predict",value:function(){this.weights=this.predictKernel(this.inputLayer.weights)}}]),n}(n(6).Modifier);t.exports={Negative:l,negative:function(t,e){return new l(t,e)},predict:u}},function(t,e,n){var r=n(1),i=n(3),a=n(4),o=n(288),s=n(7),u=function(t){"use strict";i(n,t);var e=a(n);function n(t){var i;return r(this,n),(i=e.call(this,t)).validate(),i.weights=o(i.width,i.height),i.deltas=s(i.width,i.height),i}return n}(n(6).Model);t.exports={Ones:u,ones:function(t){return new u(t)}}},function(t,e){t.exports=function(t){return new Float32Array(t).fill(1)}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(5),u=s.makeKernel,l=s.release,c=s.clone,h=s.clear,f=n(12),p=n(7);function d(t,e){return t[this.thread.y][this.thread.x]-e[this.thread.x]}function g(t,e){return t[this.thread.y][this.thread.x]-e[this.thread.y][this.thread.x]}var m=function(t){"use strict";a(n,t);var e=o(n);function n(t,i){var a;if(r(this,n),(a=e.call(this,t)).inputLayer=i,a.width=i.width,a.height=i.height,a.depth=i.depth,a.validate(),a.depth)throw new Error("Target layer not implemented for depth");return a.height?(a.weights=p(a.width,a.height),a.deltas=p(a.width,a.height),a.errors=p(a.width,a.height)):(a.weights=f(a.width),a.deltas=f(a.width),a.errors=f(a.width)),a}return i(n,[{key:"setupKernels",value:function(){var t=1===this.width?d:g;this.compareKernel=u(t,{output:[this.width,this.height],immutable:!0})}},{key:"predict",value:function(){l(this.weights),this.weights=c(this.inputLayer.weights),h(this.deltas)}},{key:"compare",value:function(t){l(this.deltas),l(this.errors),l(this.inputLayer.deltas),this.deltas=this.compareKernel(this.weights,t),this.inputLayer.deltas=c(this.deltas),this.errors=c(this.deltas)}},{key:"setupPraxis",value:function(){}}]),n}(n(6).Filter);t.exports={Target:m,target:function(t,e){return new m(t,e)}}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(6).Activation,u=n(5),l=u.makeKernel,c=u.release,h=u.clear,f=n(105),p=f.activate,d=f.measure;function g(t){return p(t[this.thread.y][this.thread.x])}function m(t,e){return d(t[this.thread.y][this.thread.x],e[this.thread.y][this.thread.x])}function y(t){return p(t[this.thread.z][this.thread.y][this.thread.x])}function v(t,e){return d(t[this.thread.z][this.thread.y][this.thread.x],e[this.thread.z][this.thread.y][this.thread.x])}var x=function(t){"use strict";a(n,t);var e=o(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,[{key:"setupKernels",value:function(){var t=this.inputLayer,e=t.width,n=t.height,r=t.depth;r>0?(this.predictKernel=l(y,{output:[e,n,r],functions:[p],immutable:!0}),this.compareKernel=l(v,{output:[e,n,r],functions:[d],immutable:!0})):(this.predictKernel=l(g,{output:[e,n],functions:[p],immutable:!0}),this.compareKernel=l(m,{output:[e,n],functions:[d],immutable:!0}))}},{key:"predict",value:function(){c(this.weights),this.weights=this.predictKernel(this.inputLayer.weights),h(this.deltas)}},{key:"compare",value:function(){c(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}}]),n}(s);t.exports={Relu:x,relu:function(t,e){return new x(t,e)},predict2D:g,compare2D:m,predict3D:y,compare3D:v}},function(t,e,n){var r=n(300),i=r.Adam,a=r.adam,o=n(116),s=o.ArthurDeviationBiases,u=o.arthurDeviationBiases,l=n(115),c=l.ArthurDeviationWeights,h=l.arthurDeviationWeights,f=n(301),p=f.MomentumRootMeanSquaredPropagation,d=f.momentumRootMeanSquaredPropagation,g=f.MRmsProp,m=f.mRmsProp;t.exports={Adam:i,adam:a,ArthurDeviationBiases:s,arthurDeviationBiases:u,ArthurDeviationWeights:c,arthurDeviationWeights:h,MomentumRootMeanSquaredPropagation:p,momentumRootMeanSquaredPropagation:d,MRmsProp:g,mRmsProp:m}},function(t,e,n){var r=n(306);t.exports=function(t){for(var e=t.slice(0),n=function(t){var n=0;r(e[t],(function(r){-1===e.indexOf(r)&&(e.splice(t+n,0,r),n++)}))},i=0;i<e.length;i++)n(i);return e}},function(t,e,n){var r=n(49),i=n(68);t.exports=function(t){return Math.max.apply(Math,r(i(t)))}},function(t,e){t.exports=function(t){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n],2);return e/t.length}},function(t,e){t.exports=function(t,e){for(var n=[];t<e;t++)n.push(t);return n}},function(t,e){t.exports=function(t,e){if(this.length=0,e){this.prop=e;for(var n=this.table={},r=0;r<t.length;r++){var i=t[r][e];for(var a in i)n.hasOwnProperty(a)||(n[a]=this.length++)}}else if(Array.isArray(t[0]))for(var o=this.table={},s=0;s<t.length;s++)for(var u=t[s],l=0;l<u.length;l++){var c=u[l];for(var h in c)o.hasOwnProperty(h)||(o[h]=this.length++)}else for(var f=this.table={},p=0;p<t.length;p++){var d=t[p];for(var g in d)f.hasOwnProperty(g)||(f[g]=this.length++)}}},function(t,e){t.exports={arraysToFloat32Arrays:function(t){for(var e=[],n=0;n<t.length;n++)e.push(Float32Array.from(t[n]));return e},arrayToFloat32Arrays:function(t){for(var e=[],n=0;n<t.length;n++)e.push(Float32Array.from([t[n]]));return e},arrayToFloat32Array:function(t){return Float32Array.from(t)},objectsToFloat32Arrays:function(t,e,n){for(var r=[],i=0;i<t.length;i++){var a=t[i],o=new Float32Array(n);for(var s in a)a.hasOwnProperty(s)&&(o[e[s]]=a[s]);r.push(o)}return r},objectToFloat32Arrays:function(t){var e=[];for(var n in t)e.push(Float32Array.from([t[n]]));return e},objectToFloat32Array:function(t,e,n){var r=new Float32Array(n);for(var i in t)t.hasOwnProperty(i)&&(r[e[i]]=t[i]);return r}}},function(t,e,n){"use strict";(function(e,r){var i=n(51);t.exports=x;var a,o=n(133);x.ReadableState=v;n(69).EventEmitter;var s=function(t,e){return t.listeners(e).length},u=n(134),l=n(71).Buffer,c=e.Uint8Array||function(){};var h=Object.create(n(35));h.inherits=n(26);var f=n(314),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,g=n(315),m=n(135);h.inherits(x,u);var y=["error","close","destroy","pause","resume"];function v(t,e){t=t||{};var r=e instanceof(a=a||n(20));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=n(136).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function x(t){if(a=a||n(20),!(this instanceof x))return new x(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,n,r,i){var a,o=t._readableState;null===e?(o.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,_(t)}(t,o)):(i||(a=function(t,e){var n;r=e,l.isBuffer(r)||r instanceof c||"string"===typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(o,e)),a?t.emit("error",a):o.objectMode||e&&e.length>0?("string"===typeof e||o.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),r?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(e=o.decoder.write(e),o.objectMode||0!==e.length?w(t,o,e,!1):S(t,o)):w(t,o,e,!1))):r||(o.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(o)}function w(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&_(t)),S(t,e)}Object.defineProperty(x.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),x.prototype.destroy=m.destroy,x.prototype._undestroy=m.undestroy,x.prototype._destroy=function(t,e){this.push(null),e(t)},x.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=l.from(t,e),e=""),n=!0),b(this,t,e,!1,n)},x.prototype.unshift=function(t){return b(this,t,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(t){return d||(d=n(136).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};function k(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function _(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(T,t):T(t))}function T(t){p("emit readable"),t.emit("readable"),D(t)}function S(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(E,t,e))}function E(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function A(t){p("readable nexttick read 0"),t.read(0)}function L(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),D(t),e.flowing&&!e.reading&&t.read(0)}function D(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function C(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var a=n.data,o=t>a.length?a.length:t;if(o===a.length?i+=a:i+=a.slice(0,t),0===(t-=o)){o===a.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=a.slice(o));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=l.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var a=r.data,o=t>a.length?a.length:t;if(a.copy(n,n.length-t,0,o),0===(t-=o)){o===a.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=a.slice(o));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function I(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(M,e,t))}function M(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function O(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}x.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?I(this):_(this),null;if(0===(t=k(t,e))&&e.ended)return 0===e.length&&I(this),null;var r,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=k(n,e))),null===(r=t>0?C(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&I(this)),null!==r&&this.emit("data",r),r},x.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},x.prototype.pipe=function(t,e){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,p("pipe count=%d opts=%j",a.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?c:x;function l(e,r){p("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,p("cleanup"),t.removeListener("close",y),t.removeListener("finish",v),t.removeListener("drain",h),t.removeListener("error",m),t.removeListener("unpipe",l),n.removeListener("end",c),n.removeListener("end",x),n.removeListener("data",g),f=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function c(){p("onend"),t.end()}a.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",l);var h=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,D(t))}}(n);t.on("drain",h);var f=!1;var d=!1;function g(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==O(a.pipes,t))&&!f&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function m(e){p("onerror",e),x(),t.removeListener("error",m),0===s(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",v),x()}function v(){p("onfinish"),t.removeListener("close",y),x()}function x(){p("unpipe"),n.unpipe(t)}return n.on("data",g),function(t,e,n){if("function"===typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?o(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",m),t.once("close",y),t.once("finish",v),t.emit("pipe",n),a.flowing||(p("pipe resume"),n.resume()),t},x.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=O(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},x.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_(this):i.nextTick(A,this))}return n},x.prototype.addListener=x.prototype.on,x.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(L,t,e))}(this,t)),this},x.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},x.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(p("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(p("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&void 0!==i)&&((n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause())))})),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var a=0;a<y.length;a++)t.on(y[a],this.emit.bind(this,y[a]));return this._read=function(e){p("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),x._fromList=C}).call(this,n(15),n(23))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=n(69).EventEmitter},function(t,e,n){"use strict";var r=n(51);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";var r=n(320).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!==typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function o(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!==(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},a.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},a.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=o(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=o;var r=n(20),i=Object.create(n(35));function a(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"===typeof this._flush?this._flush((function(e,n){u(t,e,n)})):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(26),i.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e,n){var r=n(49),i=n(19),a=n(1),o=n(2),s=n(13),u=n(9),l=n(3),c=n(4),h=n(326).RecurrentConnection,f=n(327).RecurrentInput,p=n(139).RecurrentZeros,d=n(6),g=d.Model,m=d.InternalModel,y=n(126),v=n(67).FeedForward,x=n(5),b=x.release,w=x.clone,k=function(t){"use strict";l(n,t);var e=c(n);function n(){return a(this,n),e.apply(this,arguments)}return o(n,[{key:"_connectLayers",value:function(){var t=this.inputLayer(),e=this._connectHiddenLayers(t);return{inputLayer:t,hiddenLayers:e,outputLayer:this.outputLayer(e[e.length-1])}}},{key:"_connectLayersDeep",value:function(){var t=[],e=this._layerSets[this._layerSets.length-1],n=0;function r(n){var r=e.indexOf(n);if(r<0)throw new Error("unable to find layer");return t[r]}function a(t){return i(i({},t),{},{weights:null,deltas:null,errors:null,praxis:null})}for(var o=0;o<e.length;o++){var s=e[o],u=null;switch(Object.getPrototypeOf(s.constructor).name){case"Activation":u=new s.constructor(r(s.inputLayer));break;case"EntryPoint":u=new s.constructor(a(s));break;case"Filter":u=new s.constructor(a(s.inputLayer),r(s.inputLayer));break;case"Internal":var l=e[this._hiddenLayerOutputIndices[n++]];switch(s.constructor.name){case"RecurrentConnection":throw new Error("unfinished");case"RecurrentInput":u=new f(l);break;case"RecurrentZeros":default:u=new f(l)}break;case"InternalModel":case"Model":u=s;break;case"Modifier":u=new s.constructor(r(s.inputLayer));break;case"Operator":u=new s.constructor(r(s.inputLayer1),r(s.inputLayer2),a(s));break;default:throw new Error("hidden layer ".concat(s.constructor.name," extends unknown hidden layer ").concat(Object.getPrototypeOf(s.constructor).name))}t.push(u)}return t}},{key:"_connectHiddenLayers",value:function(t){for(var e=[],n=0;n<this.hiddenLayers.length;n++){var r=new p,i=this.hiddenLayers[n](t,r,n);t=i,e.push(i)}return e}},{key:"initialize",value:function(){this.layers=[],this._outputConnection=new h;var t=this._connectLayers(),e=t.inputLayer,n=t.hiddenLayers,i=t.outputLayer,a=y([e].concat(r(n),[i]));this._hiddenLayerOutputIndices=n.map((function(t){return a.indexOf(t)})),this._layerSets=[a],this._model=a.filter((function(t){return t instanceof g||t instanceof m})),this.initializeLayers(a)}},{key:"initializeDeep",value:function(){for(var t=this._connectLayersDeep(),e=0;e<t.length;e++){t[e].reuseKernels(this._layerSets[0][e])}this._layerSets.push(t)}},{key:"run",value:function(t){for(;this._layerSets.length<=t.length;)this.initializeDeep();return s(u(n.prototype),"run",this).call(this,t)}},{key:"runInput",value:function(t){for(;this._layerSets.length<t.length;)this.initializeDeep();for(var e=t.length-1,n=0;n<=e;n++){var r=this._layerSets[n];r[0].predict([new Float32Array([t[n]])]);for(var i=1;i<r.length;i++)r[i].predict()}var a=this._layerSets[e],o=a[a.length-1].weights;return this.end(),o}},{key:"end",value:function(){var t=this._layerSets.length-1,e=this._layerSets[t];e[0].predict([new Float32Array([0])]);for(var n=1;n<e.length;n++)e[n].predict()}},{key:"transferData",value:function(t){return t}},{key:"_prepTraining",value:function(t,e){var r=s(u(n.prototype),"_prepTraining",this).call(this,t,e);return this.verifyIsInitialized(t),r}},{key:"_calculateTrainingError",value:function(t){for(var e=new Float32Array(1),n=0;n<t.length;++n){var r=e,i=this._trainPattern(t[n],!0);e=this.meanSquaredError.add(e,i),b(i),b(r)}var a=this.meanSquaredError.divide(t.length,e);return b(e),a.toArray?a.toArray()[0]:a[0]}},{key:"formatData",value:function(t){return t}},{key:"_calculateDeltas",value:function(t){for(var e=this._layerSets[this._layerSets.length-1],n=e.length-2;n>=0;n--)e[n].compare();for(var r=t.length-2;r>=0;r--){var i=this._layerSets[r];i[i.length-1].compare(new Float32Array([t[r+1]]));for(var a=i.length-2;a>=0;a--)i[a].compare()}}},{key:"adjustWeights",value:function(){for(var t=this._model,e=0;e<t.length;e++)t[e].learn()}},{key:"_trainPatterns",value:function(t){for(var e=0;e<t.length;++e)this._trainPattern(t[e],!1)}},{key:"_trainPattern",value:function(t,e){if(this.runInput(t),this._calculateDeltas(t),this.adjustWeights(),e){for(var n=this.meanSquaredError,r=new Float32Array(1),i=0,a=t.length-1;i<a;i++){var o=this._layerSets[i],s=o[o.length-1],u=r;r=n.addAbsolute(u,s.errors),b(u)}return w(n.divide(t.length,r))}return null}}],[{key:"structure",get:function(){return{_inputLayers:null,_hiddenLayers:null,_hiddenLayerSets:null,_layerSets:null,_hiddenLayerOutputIndices:null,_outputLayers:null,_outputConnection:null,_previousInputs:null,_model:null,_recurrentIndices:null}}}]),n}(v);t.exports={Recurrent:k}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(7),u=n(6).Internal,l=n(5),c=l.release,h=l.clear,f=function(t){"use strict";a(n,t);var e=o(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,[{key:"setDimensions",value:function(t,e){this.praxis=null,this.width=t,this.height=e,this.weights=s(t,e),this.deltas=s(t,e)}},{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(){}},{key:"predict",value:function(){}},{key:"compare",value:function(){}},{key:"learn",value:function(t,e,n){var r=this.weights;this.weights=this.praxis.run(this,t,e,n),c(r),h(this.deltas)}},{key:"validate",value:function(){throw new Error("".concat(this.constructor.name,"-validate is not yet implemented"))}},{key:"reset",value:function(){throw new Error("".concat(this.constructor.name,"-reset is not yet implemented"))}}]),n}(u);t.exports={RecurrentZeros:f,recurrentZeros:function(){return new f}}},function(t,e,n){var r=n(1),i=n(2),a=n(21),o=n(328),s=n(329),u=n(330),l=n(331),c=n(332),h=n(333),f=n(334),p=n(335),d=n(336),g=n(337),m=n(338),y=n(339),v=n(340),x=n(341),b=n(342),w=n(343),k=n(74),_=function(){"use strict";function t(){r(this,t),this.inputRow=0,this.inputValue=null,this.states=[]}return i(t,[{key:"add",value:function(t,e){if(t.weights.length!==e.weights.length)throw new Error("misaligned matrices");var n=new a(t.rows,t.columns);return this.states.push({left:t,right:e,product:n,forwardFn:s,backpropagationFn:u}),n}},{key:"allOnes",value:function(t,e){var n=new a(t,e);return this.states.push({left:n,product:n,forwardFn:l}),n}},{key:"cloneNegative",value:function(t){var e=new a(t.rows,t.columns);return this.states.push({left:t,product:e,forwardFn:o}),e}},{key:"subtract",value:function(t,e){if(t.weights.length!==e.weights.length)throw new Error("misaligned matrices");return this.add(this.add(this.allOnes(t.rows,t.columns),this.cloneNegative(t)),e)}},{key:"multiply",value:function(t,e){if(t.columns!==e.rows)throw new Error("misaligned matrices");var n=new a(t.rows,e.columns);return this.states.push({left:t,right:e,product:n,forwardFn:c,backpropagationFn:h}),n}},{key:"multiplyElement",value:function(t,e){if(t.weights.length!==e.weights.length)throw new Error("misaligned matrices");var n=new a(t.rows,t.columns);return this.states.push({left:t,right:e,product:n,forwardFn:f,backpropagationFn:p}),n}},{key:"relu",value:function(t){var e=new a(t.rows,t.columns);return this.states.push({left:t,product:e,forwardFn:d,backpropagationFn:g}),e}},{key:"input",value:function(t){var e=this;return this.states.push({product:t,forwardFn:function(n){n.weights=t.weights=e.inputValue}}),t}},{key:"inputMatrixToRow",value:function(t){var e=this,n=new a(t.columns,1);return this.states.push({left:t,get right(){return e.inputRow},product:n,forwardFn:m,backpropagationFn:y}),n}},{key:"sigmoid",value:function(t){var e=new a(t.rows,t.columns);return this.states.push({left:t,product:e,forwardFn:v,backpropagationFn:x}),e}},{key:"tanh",value:function(t){var e=new a(t.rows,t.columns);return this.states.push({left:t,product:e,forwardFn:b,backpropagationFn:w}),e}},{key:"observe",value:function(t){return this.states.push({forwardFn:function(){0},backpropagationFn:function(){0}}),t}},{key:"runIndex",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.inputRow=e;for(var n=0,r=this.states.length;n<r;n++)(t=this.states[n]).hasOwnProperty("forwardFn")&&t.forwardFn(t.product,t.left,t.right);return t.product}},{key:"runInput",value:function(t){var e;this.inputValue=t;for(var n=0,r=this.states.length;n<r;n++)(e=this.states[n]).hasOwnProperty("forwardFn")&&e.forwardFn(e.product,e.left,e.right);return e.product}},{key:"backpropagate",value:function(){for(var t,e=this.states.length;e-- >0;)(t=this.states[e]).hasOwnProperty("backpropagationFn")&&t.backpropagationFn(t.product,t.left,t.right);return t.product}},{key:"backpropagateIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.inputRow=t;for(var e,n=this.states.length;n-- >0;)(e=this.states[n]).hasOwnProperty("backpropagationFn")&&e.backpropagationFn(e.product,e.left,e.right);return e.product}},{key:"predictTarget",value:function(t,e){for(var n=this.runInput(t),r=0,i=0;i<n.weights.length;i++){var a=n.weights[i]-e[i];r+=Math.abs(a),n.deltas[i]=a}return r}},{key:"predictTargetIndex",value:function(t,e){var n=this.runIndex(t),r=n,i=k(n);return r.deltas=i.weights.slice(0),r.deltas[e]-=1,-Math.log2(i.weights[e])}}]),t}();t.exports=_},function(t,e,n){var r=n(25).randomFloat;t.exports=function(t){for(var e=r(0,1),n=0,i=0,a=t.weights;;){if((n+=a[i])>e)return i;i++}}},function(t,e){t.exports=function(t){for(var e=t.weights,n=e[0],r=0,i=1;i<e.length;i++){var a=e[i];a<n||(r=i,n=a)}return r}},function(t,e,n){var r=n(49),i=n(1),a=n(2),o=function(){"use strict";function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),void 0!==e&&(this.values=e,this.indexTable={},this.characterTable={},this.characters=[],this.specialIndexes=[],this.buildCharactersFromIterable(e),this.buildTables(n))}return a(t,[{key:"buildCharactersFromIterable",value:function(t){for(var e={},n=0,r=t.length;n<r;n++){var i=t[n];if(i.hasOwnProperty("length"))for(var a=0,o=i.length;a<o;a++){var s=i[a];e.hasOwnProperty(s)||(e[s]=!0,this.characters.push(s))}else{var u=t[n];if(e.hasOwnProperty(u))continue;e[n]=!0,this.characters.push(u)}}}},{key:"buildTables",value:function(t){for(var e=this.characters.length,n=0;n<e;n++){var r=this.characters[n];n>=t&&(this.indexTable[r]=n,this.characterTable[n]=r)}}},{key:"toIndexes",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=this.indexTable,i=0,a=t.length;i<a;i++){var o=t[i],s=r[o];if(void 0===s){if(!r.unrecognized)throw new Error('unrecognized character "'.concat(o,'"'));s=r.unrecognized}s<e||n.push(s)}return n}},{key:"toIndexesInputOutput",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=null;return r="string"===typeof t?this.toIndexes(t.split("").concat(["stop-input","start-output"]),n):"number"===typeof t?this.toIndexes(t.toString().split("").concat(["stop-input","start-output"]),n):this.toIndexes(t.concat(["stop-input","start-output"]),n),null===e?r:"string"===typeof e?r.concat(this.toIndexes(e.split(""),n)):r.concat(this.toIndexes(e,n))}},{key:"toCharacters",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=this.indexTable,i=this.characterTable,a=0,o=t.length;a<o;a++){var s=t[a];if(!(s<e)){var u=i[s];if(void 0===u){if(!r.unrecognized)throw new Error('unrecognized index "'.concat(s,'"'));u=i[r.unrecognized]}else null!==u&&n.push(u)}}return n}},{key:"toString",value:function(t,e){return this.toCharacters(t,e).join("")}},{key:"addInputOutput",value:function(){this.addSpecial("stop-input"),this.addSpecial("start-output")}},{key:"addUnrecognized",value:function(){this.addSpecial("unrecognized")}},{key:"addSpecial",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.indexTable[t]=this.characters.length;this.characterTable[n]=e,this.specialIndexes.push(this.characters.length),this.characters.push(t)}},{key:"countSpecial",value:function(t){for(var e=0,n=0;n<this.specialIndexes;n++)for(var r=-1;r=t.indexOf(this.specialIndexes[n],r)>-1;)e++;return e}},{key:"toFunctionString",value:function(){return"\nvar characterTable = ".concat(JSON.stringify(this.characterTable),";\nvar indexTable = ").concat(JSON.stringify(this.indexTable),";\nvar characters = ").concat(JSON.stringify(this.characters),";\nvar dataFormatter = {\n  ").concat(this.toIndexes.toString(),",\n  ").concat(this.toIndexesInputOutput.toString(),",\n  ").concat(this.toCharacters.toString(),"\n};")}}],[{key:"fromAllPrintable",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["\n"],r=32;r<=126;r++)n.push(String.fromCharCode(r));return new t(n,e)}},{key:"fromAllPrintableInputOutput",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["\n"],r=t.fromAllPrintable(e,n);return r.addInputOutput(),r}},{key:"fromStringInputOutput",value:function(e,n){var i,a=new t((i=String.prototype).concat.apply(i,r(new Set(e))),n);return a.addInputOutput(),a}},{key:"fromArrayInputOutput",value:function(e,n){var r=new t(e.filter((function(t,e,n){return n.indexOf(t)===e})),n);return r.addInputOutput(),r}},{key:"fromString",value:function(e,n){var i;return new t((i=String.prototype).concat.apply(i,r(new Set(e))),n)}},{key:"fromJSON",value:function(e){var n=new t;return n.indexTable=e.indexTable,n.characterTable=e.characterTable,n.values=e.values,n.characters=e.characters,n.specialIndexes=e.specialIndexes,n}}]),t}();function s(t){if("string"===typeof t)return t;if("number"===typeof t)return t.toString();if("string"===typeof t[0])return t;if("number"===typeof t[0])return t.map((function(t){return t.toString()}));throw new Error("unrecognized value, expected string[], string, number[], or number")}t.exports={DataFormatter:o,defaultRNNFormatter:function(t){if("string"!==typeof t[0]&&!Array.isArray(t[0])&&(!t[0].hasOwnProperty("input")||!t[0].hasOwnProperty("output")))return t;var e=[],n=[];if("string"===typeof t[0]||"number"===typeof t[0]||Array.isArray(t[0])){if(!this.dataFormatter){for(var r=0;r<t.length;r++)e.push(s(t[r]));this.dataFormatter=new o(e),this.dataFormatter.addUnrecognized()}for(var i=0,a=t.length;i<a;i++)n.push(this.formatDataIn(t[i]))}else{if(!t[0].input||!t[0].output)throw new Error("unrecognized data");if(!this.dataFormatter){for(var u=0;u<t.length;u++){var l=t[u];e.push(s(l.input),s(l.output))}this.dataFormatter=o.fromArrayInputOutput(e),this.dataFormatter.addUnrecognized()}for(var c=0,h=t.length;c<h;c++)n.push(this.formatDataIn(s(t[c].input),s(t[c].output)))}return n}}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(21),u=n(53),l=function(t){"use strict";a(n,t);var e=o(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,null,[{key:"getModel",value:function(t,e){return{inputMatrix:new u(t,e,.08),inputHidden:new u(t,t,.08),inputBias:new s(t,1),forgetMatrix:new u(t,e,.08),forgetHidden:new u(t,t,.08),forgetBias:new s(t,1),outputMatrix:new u(t,e,.08),outputHidden:new u(t,t,.08),outputBias:new s(t,1),cellActivationMatrix:new u(t,e,.08),cellActivationHidden:new u(t,t,.08),cellActivationBias:new s(t,1)}}},{key:"getEquation",value:function(t,e,n,r){var i=t.sigmoid.bind(t),a=t.add.bind(t),o=t.multiply.bind(t),s=t.multiplyElement.bind(t),u=t.tanh.bind(t),l=i(a(a(o(r.inputMatrix,e),o(r.inputHidden,n)),r.inputBias)),c=i(a(a(o(r.forgetMatrix,e),o(r.forgetHidden,n)),r.forgetBias)),h=i(a(a(o(r.outputMatrix,e),o(r.outputHidden,n)),r.outputBias)),f=u(a(a(o(r.cellActivationMatrix,e),o(r.cellActivationHidden,n)),r.cellActivationBias)),p=s(c,n),d=s(l,f);return s(h,u(a(p,d)))}}]),n}(n(36));t.exports=l},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(21),u=n(53),l=function(t){"use strict";a(n,t);var e=o(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,null,[{key:"getModel",value:function(t,e){return{updateGateInputMatrix:new u(t,e,.08),updateGateHiddenMatrix:new u(t,t,.08),updateGateBias:new s(t,1),resetGateInputMatrix:new u(t,e,.08),resetGateHiddenMatrix:new u(t,t,.08),resetGateBias:new s(t,1),cellWriteInputMatrix:new u(t,e,.08),cellWriteHiddenMatrix:new u(t,t,.08),cellWriteBias:new s(t,1)}}},{key:"getEquation",value:function(t,e,n,r){var i=t.sigmoid.bind(t),a=t.add.bind(t),o=t.multiply.bind(t),s=t.multiplyElement.bind(t),u=t.tanh.bind(t),l=t.allOnes.bind(t),c=t.cloneNegative.bind(t),h=i(a(a(o(r.updateGateInputMatrix,e),o(r.updateGateHiddenMatrix,n)),r.updateGateBias)),f=i(a(a(o(r.resetGateInputMatrix,e),o(r.resetGateHiddenMatrix,n)),r.resetGateBias)),p=u(a(a(o(r.cellWriteInputMatrix,e),o(r.cellWriteHiddenMatrix,s(f,n))),r.cellWriteBias));return a(s(a(l(h.rows,h.columns),c(h)),p),s(n,h))}}]),n}(n(36));t.exports=l},function(t,e,n){"use strict";function r(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function s(t){r(o,i,a,s,u,"next",t)}function u(t){r(o,i,a,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},function(t,e,n){t.exports=n(255)},function(t,e,n){"use strict";var r=n(28).compose;e.__esModule=!0,e.composeWithDevTools="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?r:r.apply(null,arguments)},e.devToolsEnhancer="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(t){return t}}},function(t,e,n){"use strict";function r(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"===typeof i?i(n,r,t):e(i)}}}}var i=r();i.withExtraArgument=r,e.a=i},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(t,e)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return i}))},,function(t,e,n){"use strict";var r=n(79),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x={};function b(t,e,n){this.props=t,this.context=e,this.refs=x,this.updater=n||v}function w(){}function k(t,e,n){this.props=t,this.context=e,this.refs=x,this.updater=n||v}b.prototype.isReactComponent={},b.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(y(85));this.updater.enqueueSetState(this,t,e,"setState")},b.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=b.prototype;var _=k.prototype=new w;_.constructor=k,r(_,b.prototype),_.isPureReactComponent=!0;var T={current:null},S=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,n){var r,i={},o=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)S.call(e,r)&&!E.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:t,key:o,ref:s,props:i,_owner:T.current}}function L(t){return"object"===typeof t&&null!==t&&t.$$typeof===a}var D=/\/+/g,C=[];function I(t,e,n,r){if(C.length){var i=C.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function M(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>C.length&&C.push(t)}function O(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case o:u=!0}}if(u)return r(i,e,""===n?"."+P(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+P(s=e[l],l);u+=t(s,c,r,i)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=m&&e[m]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=t(s=s.value,c=n+P(s,l++),r,i);else if("object"===s)throw r=""+e,Error(y(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function P(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function R(t,e){t.func.call(t.context,e,t.count++)}function N(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?F(t,r,n,(function(t){return t})):null!=t&&(L(t)&&(t=function(t,e){return{$$typeof:a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(D,"$&/")+"/")+n)),r.push(t))}function F(t,e,n,r,i){var a="";null!=n&&(a=(""+n).replace(D,"$&/")+"/"),O(t,N,e=I(e,a,r,i)),M(e)}var z={current:null};function V(){var t=z.current;if(null===t)throw Error(y(321));return t}var j={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return F(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;O(t,R,e=I(null,null,e,n)),M(e)},count:function(t){return O(t,(function(){return null}),null)},toArray:function(t){var e=[];return F(t,e,null,(function(t){return t})),e},only:function(t){if(!L(t))throw Error(y(143));return t}},e.Component=b,e.Fragment=s,e.Profiler=l,e.PureComponent=k,e.StrictMode=u,e.Suspense=p,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(y(267,t));var i=r({},t.props),o=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=T.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)S.call(e,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:a,type:t.type,key:o,ref:s,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},e.createElement=A,e.createFactory=function(t){var e=A.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:f,render:t}},e.isValidElement=L,e.lazy=function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return V().useCallback(t,e)},e.useContext=function(t,e){return V().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return V().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return V().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return V().useLayoutEffect(t,e)},e.useMemo=function(t,e){return V().useMemo(t,e)},e.useReducer=function(t,e,n){return V().useReducer(t,e,n)},e.useRef=function(t){return V().useRef(t)},e.useState=function(t){return V().useState(t)},e.version="16.14.0"},function(t,e,n){"use strict";var r=n(0),i=n(79),a=n(154);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function s(t,e,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var u=!1,l=null,c=!1,h=null,f={onError:function(t){u=!0,l=t}};function p(t,e,n,r,i,a,o,c,h){u=!1,l=null,s.apply(f,arguments)}var d=null,g=null,m=null;function y(t,e,n){var r=t.type||"unknown-event";t.currentTarget=m(n),function(t,e,n,r,i,a,s,f,d){if(p.apply(this,arguments),u){if(!u)throw Error(o(198));var g=l;u=!1,l=null,c||(c=!0,h=g)}}(r,e,void 0,t),t.currentTarget=null}var v=null,x={};function b(){if(v)for(var t in x){var e=x[t],n=v.indexOf(t);if(!(-1<n))throw Error(o(96,t));if(!k[n]){if(!e.extractEvents)throw Error(o(97,t));for(var r in k[n]=e,n=e.eventTypes){var i=void 0,a=n[r],s=e,u=r;if(_.hasOwnProperty(u))throw Error(o(99,u));_[u]=a;var l=a.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&w(l[i],s,u);i=!0}else a.registrationName?(w(a.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(o(98,r,t))}}}}function w(t,e,n){if(T[t])throw Error(o(100,t));T[t]=e,S[t]=e.eventTypes[n].dependencies}var k=[],_={},T={},S={};function E(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!x.hasOwnProperty(e)||x[e]!==r){if(x[e])throw Error(o(102,e));x[e]=r,n=!0}}n&&b()}var A=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),L=null,D=null,C=null;function I(t){if(t=g(t)){if("function"!==typeof L)throw Error(o(280));var e=t.stateNode;e&&(e=d(e),L(t.stateNode,t.type,e))}}function M(t){D?C?C.push(t):C=[t]:D=t}function O(){if(D){var t=D,e=C;if(C=D=null,I(t),e)for(t=0;t<e.length;t++)I(e[t])}}function P(t,e){return t(e)}function R(t,e,n,r,i){return t(e,n,r,i)}function N(){}var F=P,z=!1,V=!1;function j(){null===D&&null===C||(N(),O())}function U(t,e,n){if(V)return t(e,n);V=!0;try{return F(t,e,n)}finally{V=!1,j()}}var K=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B=Object.prototype.hasOwnProperty,W={},G={};function H(t,e,n,r,i,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a}var Y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){Y[t]=new H(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];Y[e]=new H(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){Y[t]=new H(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){Y[t]=new H(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){Y[t]=new H(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){Y[t]=new H(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){Y[t]=new H(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){Y[t]=new H(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){Y[t]=new H(t,5,!1,t.toLowerCase(),null,!1)}));var q=/[\-:]([a-z])/g;function X(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(q,X);Y[e]=new H(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(q,X);Y[e]=new H(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(q,X);Y[e]=new H(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){Y[t]=new H(t,1,!1,t.toLowerCase(),null,!1)})),Y.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){Y[t]=new H(t,1,!1,t.toLowerCase(),null,!0)}));var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(t,e,n,r){var i=Y.hasOwnProperty(e)?Y[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!B.call(G,t)||!B.call(W,t)&&(K.test(t)?G[t]=!0:(W[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}$.hasOwnProperty("ReactCurrentDispatcher")||($.ReactCurrentDispatcher={current:null}),$.hasOwnProperty("ReactCurrentBatchConfig")||($.ReactCurrentBatchConfig={suspense:null});var Z=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,tt=Q?Symbol.for("react.element"):60103,et=Q?Symbol.for("react.portal"):60106,nt=Q?Symbol.for("react.fragment"):60107,rt=Q?Symbol.for("react.strict_mode"):60108,it=Q?Symbol.for("react.profiler"):60114,at=Q?Symbol.for("react.provider"):60109,ot=Q?Symbol.for("react.context"):60110,st=Q?Symbol.for("react.concurrent_mode"):60111,ut=Q?Symbol.for("react.forward_ref"):60112,lt=Q?Symbol.for("react.suspense"):60113,ct=Q?Symbol.for("react.suspense_list"):60120,ht=Q?Symbol.for("react.memo"):60115,ft=Q?Symbol.for("react.lazy"):60116,pt=Q?Symbol.for("react.block"):60121,dt="function"===typeof Symbol&&Symbol.iterator;function gt(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=dt&&t[dt]||t["@@iterator"])?t:null}function mt(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case nt:return"Fragment";case et:return"Portal";case it:return"Profiler";case rt:return"StrictMode";case lt:return"Suspense";case ct:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case ot:return"Context.Consumer";case at:return"Context.Provider";case ut:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ht:return mt(t.type);case pt:return mt(t.render);case ft:if(t=1===t._status?t._result:null)return mt(t)}return null}function yt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,a=mt(t.type);n=null,r&&(n=mt(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(Z,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}e+=n,t=t.return}while(t);return e}function vt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function xt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function bt(t){t._valueTracker||(t._valueTracker=function(t){var e=xt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function wt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function kt(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function _t(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=vt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Tt(t,e){null!=(e=e.checked)&&J(t,"checked",e,!1)}function St(t,e){Tt(t,e);var n=vt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?At(t,e.type,n):e.hasOwnProperty("defaultValue")&&At(t,e.type,vt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Et(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function At(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Lt(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function Dt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Ct(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function It(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:vt(n)}}function Mt(t,e){var n=vt(e.value),r=vt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Ot(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var Pt="http://www.w3.org/1999/xhtml",Rt="http://www.w3.org/2000/svg";function Nt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ft(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Nt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var zt,Vt=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==Rt||"innerHTML"in t)t.innerHTML=e;else{for((zt=zt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function jt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function Ut(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Kt={animationend:Ut("Animation","AnimationEnd"),animationiteration:Ut("Animation","AnimationIteration"),animationstart:Ut("Animation","AnimationStart"),transitionend:Ut("Transition","TransitionEnd")},Bt={},Wt={};function Gt(t){if(Bt[t])return Bt[t];if(!Kt[t])return t;var e,n=Kt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Wt)return Bt[t]=n[e];return t}A&&(Wt=document.createElement("div").style,"AnimationEvent"in window||(delete Kt.animationend.animation,delete Kt.animationiteration.animation,delete Kt.animationstart.animation),"TransitionEvent"in window||delete Kt.transitionend.transition);var Ht=Gt("animationend"),Yt=Gt("animationiteration"),qt=Gt("animationstart"),Xt=Gt("transitionend"),$t="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jt=new("function"===typeof WeakMap?WeakMap:Map);function Zt(t){var e=Jt.get(t);return void 0===e&&(e=new Map,Jt.set(t,e)),e}function Qt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function te(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function ee(t){if(Qt(t)!==t)throw Error(o(188))}function ne(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Qt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return ee(i),t;if(a===r)return ee(i),e;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function re(t,e){if(null==e)throw Error(o(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function ie(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var ae=null;function oe(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)y(t,e[r],n[r]);else e&&y(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function se(t){if(null!==t&&(ae=re(ae,t)),t=ae,ae=null,t){if(ie(t,oe),ae)throw Error(o(95));if(c)throw t=h,c=!1,h=null,t}}function ue(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function le(t){if(!A)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}var ce=[];function he(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>ce.length&&ce.push(t)}function fe(t,e,n,r){if(ce.length){var i=ce.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function pe(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=An(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=ue(t.nativeEvent);r=t.topLevelType;var a=t.nativeEvent,o=t.eventSystemFlags;0===n&&(o|=64);for(var s=null,u=0;u<k.length;u++){var l=k[u];l&&(l=l.extractEvents(r,e,a,i,o))&&(s=re(s,l))}se(s)}}function de(t,e,n){if(!n.has(t)){switch(t){case"scroll":qe(e,"scroll",!0);break;case"focus":case"blur":qe(e,"focus",!0),qe(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":le(t)&&qe(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===$t.indexOf(t)&&Ye(t,e)}n.set(t,null)}}var ge,me,ye,ve=!1,xe=[],be=null,we=null,ke=null,_e=new Map,Te=new Map,Se=[],Ee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ae="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Le(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function De(t,e){switch(t){case"focus":case"blur":be=null;break;case"dragenter":case"dragleave":we=null;break;case"mouseover":case"mouseout":ke=null;break;case"pointerover":case"pointerout":_e.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Te.delete(e.pointerId)}}function Ce(t,e,n,r,i,a){return null===t||t.nativeEvent!==a?(t=Le(e,n,r,i,a),null!==e&&(null!==(e=Ln(e))&&me(e)),t):(t.eventSystemFlags|=r,t)}function Ie(t){var e=An(t.target);if(null!==e){var n=Qt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=te(n)))return t.blockedOn=e,void a.unstable_runWithPriority(t.priority,(function(){ye(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Me(t){if(null!==t.blockedOn)return!1;var e=Ze(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=Ln(e);return null!==n&&me(n),t.blockedOn=e,!1}return!0}function Oe(t,e,n){Me(t)&&n.delete(e)}function Pe(){for(ve=!1;0<xe.length;){var t=xe[0];if(null!==t.blockedOn){null!==(t=Ln(t.blockedOn))&&ge(t);break}var e=Ze(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:xe.shift()}null!==be&&Me(be)&&(be=null),null!==we&&Me(we)&&(we=null),null!==ke&&Me(ke)&&(ke=null),_e.forEach(Oe),Te.forEach(Oe)}function Re(t,e){t.blockedOn===e&&(t.blockedOn=null,ve||(ve=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Pe)))}function Ne(t){function e(e){return Re(e,t)}if(0<xe.length){Re(xe[0],t);for(var n=1;n<xe.length;n++){var r=xe[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==be&&Re(be,t),null!==we&&Re(we,t),null!==ke&&Re(ke,t),_e.forEach(e),Te.forEach(e),n=0;n<Se.length;n++)(r=Se[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Se.length&&null===(n=Se[0]).blockedOn;)Ie(n),null===n.blockedOn&&Se.shift()}var Fe={},ze=new Map,Ve=new Map,je=["abort","abort",Ht,"animationEnd",Yt,"animationIteration",qt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xt,"transitionEnd","waiting","waiting"];function Ue(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:e},Ve.set(r,e),ze.set(r,a),Fe[i]=a}}Ue("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ue("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ue(je,2);for(var Ke="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Be=0;Be<Ke.length;Be++)Ve.set(Ke[Be],0);var We=a.unstable_UserBlockingPriority,Ge=a.unstable_runWithPriority,He=!0;function Ye(t,e){qe(e,t,!1)}function qe(t,e,n){var r=Ve.get(e);switch(void 0===r?2:r){case 0:r=Xe.bind(null,e,1,t);break;case 1:r=$e.bind(null,e,1,t);break;default:r=Je.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Xe(t,e,n,r){z||N();var i=Je,a=z;z=!0;try{R(i,t,e,n,r)}finally{(z=a)||j()}}function $e(t,e,n,r){Ge(We,Je.bind(null,t,e,n,r))}function Je(t,e,n,r){if(He)if(0<xe.length&&-1<Ee.indexOf(t))t=Le(null,t,e,n,r),xe.push(t);else{var i=Ze(t,e,n,r);if(null===i)De(t,r);else if(-1<Ee.indexOf(t))t=Le(i,t,e,n,r),xe.push(t);else if(!function(t,e,n,r,i){switch(e){case"focus":return be=Ce(be,t,e,n,r,i),!0;case"dragenter":return we=Ce(we,t,e,n,r,i),!0;case"mouseover":return ke=Ce(ke,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return _e.set(a,Ce(_e.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Te.set(a,Ce(Te.get(a)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r)){De(t,r),t=fe(t,r,null,e);try{U(pe,t)}finally{he(t)}}}}function Ze(t,e,n,r){if(null!==(n=An(n=ue(r)))){var i=Qt(n);if(null===i)n=null;else{var a=i.tag;if(13===a){if(null!==(n=te(i)))return n;n=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=fe(t,r,n,e);try{U(pe,t)}finally{he(t)}return null}var Qe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function en(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||Qe.hasOwnProperty(t)&&Qe[t]?(""+e).trim():e+"px"}function nn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=en(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(Qe).forEach((function(t){tn.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qe[e]=Qe[t]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function an(t,e){if(e){if(rn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62,""))}}function on(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=Pt;function un(t,e){var n=Zt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=S[e];for(var r=0;r<e.length;r++)de(e[r],t,n)}function ln(){}function cn(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function hn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fn(t,e){var n,r=hn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=hn(r)}}function pn(){for(var t=window,e=cn();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=cn((t=e.contentWindow).document)}return e}function dn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var gn=null,mn=null;function yn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function vn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var xn="function"===typeof setTimeout?setTimeout:void 0,bn="function"===typeof clearTimeout?clearTimeout:void 0;function wn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function kn(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var _n=Math.random().toString(36).slice(2),Tn="__reactInternalInstance$"+_n,Sn="__reactEventHandlers$"+_n,En="__reactContainere$"+_n;function An(t){var e=t[Tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[En]||n[Tn]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=kn(t);null!==t;){if(n=t[Tn])return n;t=kn(t)}return e}n=(t=n).parentNode}return null}function Ln(t){return!(t=t[Tn]||t[En])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Dn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function Cn(t){return t[Sn]||null}function In(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Mn(t,e){var n=t.stateNode;if(!n)return null;var r=d(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}function On(t,e,n){(e=Mn(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Pn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=In(e);for(e=n.length;0<e--;)On(n[e],"captured",t);for(e=0;e<n.length;e++)On(n[e],"bubbled",t)}}function Rn(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=Mn(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Nn(t){t&&t.dispatchConfig.registrationName&&Rn(t._targetInst,null,t)}function Fn(t){ie(t,Pn)}var zn=null,Vn=null,jn=null;function Un(){if(jn)return jn;var t,e,n=Vn,r=n.length,i="value"in zn?zn.value:zn.textContent,a=i.length;for(t=0;t<r&&n[t]===i[t];t++);var o=r-t;for(e=1;e<=o&&n[r-e]===i[a-e];e++);return jn=i.slice(t,1<e?1-e:void 0)}function Kn(){return!0}function Bn(){return!1}function Wn(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Kn:Bn,this.isPropagationStopped=Bn,this}function Gn(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function Hn(t){if(!(t instanceof this))throw Error(o(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Yn(t){t.eventPool=[],t.getPooled=Gn,t.release=Hn}i(Wn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Kn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Kn)},persist:function(){this.isPersistent=Kn},isPersistent:Bn,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Bn,this._dispatchInstances=this._dispatchListeners=null}}),Wn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Wn.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var a=new e;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,Yn(n),n},Yn(Wn);var qn=Wn.extend({data:null}),Xn=Wn.extend({data:null}),$n=[9,13,27,32],Jn=A&&"CompositionEvent"in window,Zn=null;A&&"documentMode"in document&&(Zn=document.documentMode);var Qn=A&&"TextEvent"in window&&!Zn,tr=A&&(!Jn||Zn&&8<Zn&&11>=Zn),er=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(t,e){switch(t){case"keyup":return-1!==$n.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ar(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var or=!1;var sr={eventTypes:nr,extractEvents:function(t,e,n,r){var i;if(Jn)t:{switch(t){case"compositionstart":var a=nr.compositionStart;break t;case"compositionend":a=nr.compositionEnd;break t;case"compositionupdate":a=nr.compositionUpdate;break t}a=void 0}else or?ir(t,n)&&(a=nr.compositionEnd):"keydown"===t&&229===n.keyCode&&(a=nr.compositionStart);return a?(tr&&"ko"!==n.locale&&(or||a!==nr.compositionStart?a===nr.compositionEnd&&or&&(i=Un()):(Vn="value"in(zn=r)?zn.value:zn.textContent,or=!0)),a=qn.getPooled(a,e,n,r),i?a.data=i:null!==(i=ar(n))&&(a.data=i),Fn(a),i=a):i=null,(t=Qn?function(t,e){switch(t){case"compositionend":return ar(e);case"keypress":return 32!==e.which?null:(rr=!0,er);case"textInput":return(t=e.data)===er&&rr?null:t;default:return null}}(t,n):function(t,e){if(or)return"compositionend"===t||!Jn&&ir(t,e)?(t=Un(),jn=Vn=zn=null,or=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tr&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=Xn.getPooled(nr.beforeInput,e,n,r)).data=t,Fn(e)):e=null,null===i?e:null===e?i:[i,e]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!ur[t.type]:"textarea"===e}var cr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function hr(t,e,n){return(t=Wn.getPooled(cr.change,t,e,n)).type="change",M(n),Fn(t),t}var fr=null,pr=null;function dr(t){se(t)}function gr(t){if(wt(Dn(t)))return t}function mr(t,e){if("change"===t)return e}var yr=!1;function vr(){fr&&(fr.detachEvent("onpropertychange",xr),pr=fr=null)}function xr(t){if("value"===t.propertyName&&gr(pr))if(t=hr(pr,t,ue(t)),z)se(t);else{z=!0;try{P(dr,t)}finally{z=!1,j()}}}function br(t,e,n){"focus"===t?(vr(),pr=n,(fr=e).attachEvent("onpropertychange",xr)):"blur"===t&&vr()}function wr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return gr(pr)}function kr(t,e){if("click"===t)return gr(e)}function _r(t,e){if("input"===t||"change"===t)return gr(e)}A&&(yr=le("input")&&(!document.documentMode||9<document.documentMode));var Tr={eventTypes:cr,_isInputEventSupported:yr,extractEvents:function(t,e,n,r){var i=e?Dn(e):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var o=mr;else if(lr(i))if(yr)o=_r;else{o=wr;var s=br}else(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=kr);if(o&&(o=o(t,e)))return hr(o,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&At(i,"number",i.value)}},Sr=Wn.extend({view:null,detail:null}),Er={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ar(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Er[t])&&!!e[t]}function Lr(){return Ar}var Dr=0,Cr=0,Ir=!1,Mr=!1,Or=Sr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Lr,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Dr;return Dr=t.screenX,Ir?"mousemove"===t.type?t.screenX-e:0:(Ir=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Cr;return Cr=t.screenY,Mr?"mousemove"===t.type?t.screenY-e:0:(Mr=!0,0)}}),Pr=Or.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Rr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Nr={eventTypes:Rr,extractEvents:function(t,e,n,r,i){var a="mouseover"===t||"pointerover"===t,o="mouseout"===t||"pointerout"===t;if(a&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,o)?(o=e,null!==(e=(e=n.relatedTarget||n.toElement)?An(e):null)&&(e!==Qt(e)||5!==e.tag&&6!==e.tag)&&(e=null)):o=null;if(o===e)return null;if("mouseout"===t||"mouseover"===t)var s=Or,u=Rr.mouseLeave,l=Rr.mouseEnter,c="mouse";else"pointerout"!==t&&"pointerover"!==t||(s=Pr,u=Rr.pointerLeave,l=Rr.pointerEnter,c="pointer");if(t=null==o?a:Dn(o),a=null==e?a:Dn(e),(u=s.getPooled(u,o,n,r)).type=c+"leave",u.target=t,u.relatedTarget=a,(n=s.getPooled(l,e,n,r)).type=c+"enter",n.target=a,n.relatedTarget=t,c=e,(r=o)&&c)t:{for(l=c,o=0,t=s=r;t;t=In(t))o++;for(t=0,e=l;e;e=In(e))t++;for(;0<o-t;)s=In(s),o--;for(;0<t-o;)l=In(l),t--;for(;o--;){if(s===l||s===l.alternate)break t;s=In(s),l=In(l)}s=null}else s=null;for(l=s,s=[];r&&r!==l&&(null===(o=r.alternate)||o!==l);)s.push(r),r=In(r);for(r=[];c&&c!==l&&(null===(o=c.alternate)||o!==l);)r.push(c),c=In(c);for(c=0;c<s.length;c++)Rn(s[c],"bubbled",u);for(c=r.length;0<c--;)Rn(r[c],"captured",n);return 0===(64&i)?[u]:[u,n]}};var Fr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},zr=Object.prototype.hasOwnProperty;function Vr(t,e){if(Fr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!zr.call(e,n[r])||!Fr(t[n[r]],e[n[r]]))return!1;return!0}var jr=A&&"documentMode"in document&&11>=document.documentMode,Ur={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Kr=null,Br=null,Wr=null,Gr=!1;function Hr(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Gr||null==Kr||Kr!==cn(n)?null:("selectionStart"in(n=Kr)&&dn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Wr&&Vr(Wr,n)?null:(Wr=n,(t=Wn.getPooled(Ur.select,Br,t,e)).type="select",t.target=Kr,Fn(t),t))}var Yr={eventTypes:Ur,extractEvents:function(t,e,n,r,i,a){if(!(a=!(i=a||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){t:{i=Zt(i),a=S.onSelect;for(var o=0;o<a.length;o++)if(!i.has(a[o])){i=!1;break t}i=!0}a=!i}if(a)return null;switch(i=e?Dn(e):window,t){case"focus":(lr(i)||"true"===i.contentEditable)&&(Kr=i,Br=e,Wr=null);break;case"blur":Wr=Br=Kr=null;break;case"mousedown":Gr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Gr=!1,Hr(n,r);case"selectionchange":if(jr)break;case"keydown":case"keyup":return Hr(n,r)}return null}},qr=Wn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Xr=Wn.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$r=Sr.extend({relatedTarget:null});function Jr(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var Zr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ti=Sr.extend({key:function(t){if(t.key){var e=Zr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Jr(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Qr[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Lr,charCode:function(t){return"keypress"===t.type?Jr(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Jr(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),ei=Or.extend({dataTransfer:null}),ni=Sr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Lr}),ri=Wn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Or.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),ai={eventTypes:Fe,extractEvents:function(t,e,n,r){var i=ze.get(t);if(!i)return null;switch(t){case"keypress":if(0===Jr(n))return null;case"keydown":case"keyup":t=ti;break;case"blur":case"focus":t=$r;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ei;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=ni;break;case Ht:case Yt:case qt:t=qr;break;case Xt:t=ri;break;case"scroll":t=Sr;break;case"wheel":t=ii;break;case"copy":case"cut":case"paste":t=Xr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Pr;break;default:t=Wn}return Fn(e=t.getPooled(i,e,n,r)),e}};if(v)throw Error(o(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),d=Cn,g=Ln,m=Dn,E({SimpleEventPlugin:ai,EnterLeaveEventPlugin:Nr,ChangeEventPlugin:Tr,SelectEventPlugin:Yr,BeforeInputEventPlugin:sr});var oi=[],si=-1;function ui(t){0>si||(t.current=oi[si],oi[si]=null,si--)}function li(t,e){si++,oi[si]=t.current,t.current=e}var ci={},hi={current:ci},fi={current:!1},pi=ci;function di(t,e){var n=t.type.contextTypes;if(!n)return ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function gi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function mi(){ui(fi),ui(hi)}function yi(t,e,n){if(hi.current!==ci)throw Error(o(168));li(hi,e),li(fi,n)}function vi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(o(108,mt(e)||"Unknown",a));return i({},n,{},r)}function xi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,pi=hi.current,li(hi,t),li(fi,fi.current),!0}function bi(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=vi(t,e,pi),r.__reactInternalMemoizedMergedChildContext=t,ui(fi),ui(hi),li(hi,t)):ui(fi),li(fi,n)}var wi=a.unstable_runWithPriority,ki=a.unstable_scheduleCallback,_i=a.unstable_cancelCallback,Ti=a.unstable_requestPaint,Si=a.unstable_now,Ei=a.unstable_getCurrentPriorityLevel,Ai=a.unstable_ImmediatePriority,Li=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Ci=a.unstable_LowPriority,Ii=a.unstable_IdlePriority,Mi={},Oi=a.unstable_shouldYield,Pi=void 0!==Ti?Ti:function(){},Ri=null,Ni=null,Fi=!1,zi=Si(),Vi=1e4>zi?Si:function(){return Si()-zi};function ji(){switch(Ei()){case Ai:return 99;case Li:return 98;case Di:return 97;case Ci:return 96;case Ii:return 95;default:throw Error(o(332))}}function Ui(t){switch(t){case 99:return Ai;case 98:return Li;case 97:return Di;case 96:return Ci;case 95:return Ii;default:throw Error(o(332))}}function Ki(t,e){return t=Ui(t),wi(t,e)}function Bi(t,e,n){return t=Ui(t),ki(t,e,n)}function Wi(t){return null===Ri?(Ri=[t],Ni=ki(Ai,Hi)):Ri.push(t),Mi}function Gi(){if(null!==Ni){var t=Ni;Ni=null,_i(t)}Hi()}function Hi(){if(!Fi&&null!==Ri){Fi=!0;var t=0;try{var e=Ri;Ki(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Ri=null}catch(n){throw null!==Ri&&(Ri=Ri.slice(t+1)),ki(Ai,Gi),n}finally{Fi=!1}}}function Yi(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function qi(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Xi={current:null},$i=null,Ji=null,Zi=null;function Qi(){Zi=Ji=$i=null}function ta(t){var e=Xi.current;ui(Xi),t.type._context._currentValue=e}function ea(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function na(t,e){$i=t,Zi=Ji=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Co=!0),t.firstContext=null)}function ra(t,e){if(Zi!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Zi=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Ji){if(null===$i)throw Error(o(308));Ji=e,$i.dependencies={expirationTime:0,firstContext:e,responders:null}}else Ji=Ji.next=e;return t._currentValue}var ia=!1;function aa(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oa(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function sa(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function ua(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function la(t,e){var n=t.alternate;null!==n&&oa(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function ca(t,e,n,r){var a=t.updateQueue;ia=!1;var o=a.baseQueue,s=a.shared.pending;if(null!==s){if(null!==o){var u=o.next;o.next=s.next,s.next=u}o=s,a.shared.pending=null,null!==(u=t.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=s))}if(null!==o){u=o.next;var l=a.baseState,c=0,h=null,f=null,p=null;if(null!==u)for(var d=u;;){if((s=d.expirationTime)<r){var g={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(f=p=g,h=l):p=p.next=g,s>c&&(c=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),au(s,d.suspenseConfig);t:{var m=t,y=d;switch(s=e,g=n,y.tag){case 1:if("function"===typeof(m=y.payload)){l=m.call(g,l,s);break t}l=m;break t;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null===(s="function"===typeof(m=y.payload)?m.call(g,l,s):m)||void 0===s)break t;l=i({},l,s);break t;case 2:ia=!0}}null!==d.callback&&(t.effectTag|=32,null===(s=a.effects)?a.effects=[d]:s.push(d))}if(null===(d=d.next)||d===u){if(null===(s=a.shared.pending))break;d=o.next=s.next,s.next=u,a.baseQueue=o=s,a.shared.pending=null}}null===p?h=l:p.next=f,a.baseState=h,a.baseQueue=p,ou(c),t.expirationTime=c,t.memoizedState=l}}function ha(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var fa=$.ReactCurrentBatchConfig,pa=(new r.Component).refs;function da(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var ga={isMounted:function(t){return!!(t=t._reactInternalFiber)&&Qt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Hs(),i=fa.suspense;(i=sa(r=Ys(r,t,i),i)).payload=e,void 0!==n&&null!==n&&(i.callback=n),ua(t,i),qs(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Hs(),i=fa.suspense;(i=sa(r=Ys(r,t,i),i)).tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),ua(t,i),qs(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Hs(),r=fa.suspense;(r=sa(n=Ys(n,t,r),r)).tag=2,void 0!==e&&null!==e&&(r.callback=e),ua(t,r),qs(t,n)}};function ma(t,e,n,r,i,a,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,a,o):!e.prototype||!e.prototype.isPureReactComponent||(!Vr(n,r)||!Vr(i,a))}function ya(t,e,n){var r=!1,i=ci,a=e.contextType;return"object"===typeof a&&null!==a?a=ra(a):(i=gi(e)?pi:hi.current,a=(r=null!==(r=e.contextTypes)&&void 0!==r)?di(t,i):ci),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ga,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function va(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ga.enqueueReplaceState(e,e.state,null)}function xa(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=pa,aa(t);var a=e.contextType;"object"===typeof a&&null!==a?i.context=ra(a):(a=gi(e)?pi:hi.current,i.context=di(t,a)),ca(t,n,i,r),i.state=t.memoizedState,"function"===typeof(a=e.getDerivedStateFromProps)&&(da(t,e,a,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&ga.enqueueReplaceState(i,i.state,null),ca(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.effectTag|=4)}var ba=Array.isArray;function wa(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===pa&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function ka(t,e){if("textarea"!==t.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function _a(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Eu(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=Du(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=wa(t,e,n),r.return=t,r):((r=Au(n.type,n.key,n.props,null,t.mode,r)).ref=wa(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Cu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,a){return null===e||7!==e.tag?((e=Lu(n,t.mode,r,a)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Du(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case tt:return(n=Au(e.type,e.key,e.props,null,t.mode,n)).ref=wa(t,null,e),n.return=t,n;case et:return(e=Cu(e,t.mode,n)).return=t,e}if(ba(e)||gt(e))return(e=Lu(e,t.mode,n,null)).return=t,e;ka(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case tt:return n.key===i?n.type===nt?h(t,e,n.props.children,r,i):l(t,e,n,r):null;case et:return n.key===i?c(t,e,n,r):null}if(ba(n)||gt(n))return null!==i?null:h(t,e,n,r,null);ka(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case tt:return t=t.get(null===r.key?n:r.key)||null,r.type===nt?h(e,t,r.props.children,i,r.key):l(e,t,r,i);case et:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(ba(r)||gt(r))return h(e,t=t.get(n)||null,r,i,null);ka(e,r)}return null}function g(i,o,s,u){for(var l=null,c=null,h=o,g=o=0,m=null;null!==h&&g<s.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=p(i,h,s[g],u);if(null===y){null===h&&(h=m);break}t&&h&&null===y.alternate&&e(i,h),o=a(y,o,g),null===c?l=y:c.sibling=y,c=y,h=m}if(g===s.length)return n(i,h),l;if(null===h){for(;g<s.length;g++)null!==(h=f(i,s[g],u))&&(o=a(h,o,g),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);g<s.length;g++)null!==(m=d(h,i,g,s[g],u))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=a(m,o,g),null===c?l=m:c.sibling=m,c=m);return t&&h.forEach((function(t){return e(i,t)})),l}function m(i,s,u,l){var c=gt(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var h=c=null,g=s,m=s=0,y=null,v=u.next();null!==g&&!v.done;m++,v=u.next()){g.index>m?(y=g,g=null):y=g.sibling;var x=p(i,g,v.value,l);if(null===x){null===g&&(g=y);break}t&&g&&null===x.alternate&&e(i,g),s=a(x,s,m),null===h?c=x:h.sibling=x,h=x,g=y}if(v.done)return n(i,g),c;if(null===g){for(;!v.done;m++,v=u.next())null!==(v=f(i,v.value,l))&&(s=a(v,s,m),null===h?c=v:h.sibling=v,h=v);return c}for(g=r(i,g);!v.done;m++,v=u.next())null!==(v=d(g,i,m,v.value,l))&&(t&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=a(v,s,m),null===h?c=v:h.sibling=v,h=v);return t&&g.forEach((function(t){return e(i,t)})),c}return function(t,r,a,u){var l="object"===typeof a&&null!==a&&a.type===nt&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case tt:t:{for(c=a.key,l=r;null!==l;){if(l.key===c){switch(l.tag){case 7:if(a.type===nt){n(t,l.sibling),(r=i(l,a.props.children)).return=t,t=r;break t}break;default:if(l.elementType===a.type){n(t,l.sibling),(r=i(l,a.props)).ref=wa(t,l,a),r.return=t,t=r;break t}}n(t,l);break}e(t,l),l=l.sibling}a.type===nt?((r=Lu(a.props.children,t.mode,u,a.key)).return=t,t=r):((u=Au(a.type,a.key,a.props,null,t.mode,u)).ref=wa(t,r,a),u.return=t,t=u)}return s(t);case et:t:{for(l=a.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(t,r.sibling),(r=i(r,a.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Cu(a,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,a)).return=t,t=r):(n(t,r),(r=Du(a,t.mode,u)).return=t,t=r),s(t);if(ba(a))return g(t,r,a,u);if(gt(a))return m(t,r,a,u);if(c&&ka(t,a),"undefined"===typeof a&&!l)switch(t.tag){case 1:case 0:throw t=t.type,Error(o(152,t.displayName||t.name||"Component"))}return n(t,r)}}var Ta=_a(!0),Sa=_a(!1),Ea={},Aa={current:Ea},La={current:Ea},Da={current:Ea};function Ca(t){if(t===Ea)throw Error(o(174));return t}function Ia(t,e){switch(li(Da,e),li(La,t),li(Aa,Ea),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ft(null,"");break;default:e=Ft(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ui(Aa),li(Aa,e)}function Ma(){ui(Aa),ui(La),ui(Da)}function Oa(t){Ca(Da.current);var e=Ca(Aa.current),n=Ft(e,t.type);e!==n&&(li(La,t),li(Aa,n))}function Pa(t){La.current===t&&(ui(Aa),ui(La))}var Ra={current:0};function Na(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Fa(t,e){return{responder:t,props:e}}var za=$.ReactCurrentDispatcher,Va=$.ReactCurrentBatchConfig,ja=0,Ua=null,Ka=null,Ba=null,Wa=!1;function Ga(){throw Error(o(321))}function Ha(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fr(t[n],e[n]))return!1;return!0}function Ya(t,e,n,r,i,a){if(ja=a,Ua=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,za.current=null===t||null===t.memoizedState?yo:vo,t=n(r,i),e.expirationTime===ja){a=0;do{if(e.expirationTime=0,!(25>a))throw Error(o(301));a+=1,Ba=Ka=null,e.updateQueue=null,za.current=xo,t=n(r,i)}while(e.expirationTime===ja)}if(za.current=mo,e=null!==Ka&&null!==Ka.next,ja=0,Ba=Ka=Ua=null,Wa=!1,e)throw Error(o(300));return t}function qa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ba?Ua.memoizedState=Ba=t:Ba=Ba.next=t,Ba}function Xa(){if(null===Ka){var t=Ua.alternate;t=null!==t?t.memoizedState:null}else t=Ka.next;var e=null===Ba?Ua.memoizedState:Ba.next;if(null!==e)Ba=e,Ka=t;else{if(null===t)throw Error(o(310));t={memoizedState:(Ka=t).memoizedState,baseState:Ka.baseState,baseQueue:Ka.baseQueue,queue:Ka.queue,next:null},null===Ba?Ua.memoizedState=Ba=t:Ba=Ba.next=t}return Ba}function $a(t,e){return"function"===typeof e?e(t):e}function Ja(t){var e=Xa(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=Ka,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,l=i;do{var c=l.expirationTime;if(c<ja){var h={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=h,a=r):u=u.next=h,c>Ua.expirationTime&&(Ua.expirationTime=c,ou(c))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),au(c,l.suspenseConfig),r=l.eagerReducer===t?l.eagerState:t(r,l.action);l=l.next}while(null!==l&&l!==i);null===u?a=r:u.next=s,Fr(r,e.memoizedState)||(Co=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function Za(t){var e=Xa(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);Fr(a,e.memoizedState)||(Co=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Qa(t){var e=qa();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:$a,lastRenderedState:t}).dispatch=go.bind(null,Ua,t),[e.memoizedState,t]}function to(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Ua.updateQueue)?(e={lastEffect:null},Ua.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function eo(){return Xa().memoizedState}function no(t,e,n,r){var i=qa();Ua.effectTag|=t,i.memoizedState=to(1|e,n,void 0,void 0===r?null:r)}function ro(t,e,n,r){var i=Xa();r=void 0===r?null:r;var a=void 0;if(null!==Ka){var o=Ka.memoizedState;if(a=o.destroy,null!==r&&Ha(r,o.deps))return void to(e,n,a,r)}Ua.effectTag|=t,i.memoizedState=to(1|e,n,a,r)}function io(t,e){return no(516,4,t,e)}function ao(t,e){return ro(516,4,t,e)}function oo(t,e){return ro(4,2,t,e)}function so(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function uo(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ro(4,2,so.bind(null,e,t),n)}function lo(){}function co(t,e){return qa().memoizedState=[t,void 0===e?null:e],t}function ho(t,e){var n=Xa();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ha(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fo(t,e){var n=Xa();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ha(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function po(t,e,n){var r=ji();Ki(98>r?98:r,(function(){t(!0)})),Ki(97<r?97:r,(function(){var r=Va.suspense;Va.suspense=void 0===e?null:e;try{t(!1),n()}finally{Va.suspense=r}}))}function go(t,e,n){var r=Hs(),i=fa.suspense;i={expirationTime:r=Ys(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var a=e.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),e.pending=i,a=t.alternate,t===Ua||null!==a&&a===Ua)Wa=!0,i.expirationTime=ja,Ua.expirationTime=ja;else{if(0===t.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=e.lastRenderedReducer))try{var o=e.lastRenderedState,s=a(o,n);if(i.eagerReducer=a,i.eagerState=s,Fr(s,o))return}catch(u){}qs(t,r)}}var mo={readContext:ra,useCallback:Ga,useContext:Ga,useEffect:Ga,useImperativeHandle:Ga,useLayoutEffect:Ga,useMemo:Ga,useReducer:Ga,useRef:Ga,useState:Ga,useDebugValue:Ga,useResponder:Ga,useDeferredValue:Ga,useTransition:Ga},yo={readContext:ra,useCallback:co,useContext:ra,useEffect:io,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,no(4,2,so.bind(null,e,t),n)},useLayoutEffect:function(t,e){return no(4,2,t,e)},useMemo:function(t,e){var n=qa();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qa();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=go.bind(null,Ua,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},qa().memoizedState=t},useState:Qa,useDebugValue:lo,useResponder:Fa,useDeferredValue:function(t,e){var n=Qa(t),r=n[0],i=n[1];return io((function(){var n=Va.suspense;Va.suspense=void 0===e?null:e;try{i(t)}finally{Va.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Qa(!1),n=e[0];return e=e[1],[co(po.bind(null,e,t),[e,t]),n]}},vo={readContext:ra,useCallback:ho,useContext:ra,useEffect:ao,useImperativeHandle:uo,useLayoutEffect:oo,useMemo:fo,useReducer:Ja,useRef:eo,useState:function(){return Ja($a)},useDebugValue:lo,useResponder:Fa,useDeferredValue:function(t,e){var n=Ja($a),r=n[0],i=n[1];return ao((function(){var n=Va.suspense;Va.suspense=void 0===e?null:e;try{i(t)}finally{Va.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Ja($a),n=e[0];return e=e[1],[ho(po.bind(null,e,t),[e,t]),n]}},xo={readContext:ra,useCallback:ho,useContext:ra,useEffect:ao,useImperativeHandle:uo,useLayoutEffect:oo,useMemo:fo,useReducer:Za,useRef:eo,useState:function(){return Za($a)},useDebugValue:lo,useResponder:Fa,useDeferredValue:function(t,e){var n=Za($a),r=n[0],i=n[1];return ao((function(){var n=Va.suspense;Va.suspense=void 0===e?null:e;try{i(t)}finally{Va.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Za($a),n=e[0];return e=e[1],[ho(po.bind(null,e,t),[e,t]),n]}},bo=null,wo=null,ko=!1;function _o(t,e){var n=Tu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function To(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function So(t){if(ko){var e=wo;if(e){var n=e;if(!To(t,e)){if(!(e=wn(n.nextSibling))||!To(t,e))return t.effectTag=-1025&t.effectTag|2,ko=!1,void(bo=t);_o(bo,n)}bo=t,wo=wn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,ko=!1,bo=t}}function Eo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;bo=t}function Ao(t){if(t!==bo)return!1;if(!ko)return Eo(t),ko=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!vn(e,t.memoizedProps))for(e=wo;e;)_o(t,e),e=wn(e.nextSibling);if(Eo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){wo=wn(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}wo=null}}else wo=bo?wn(t.stateNode.nextSibling):null;return!0}function Lo(){wo=bo=null,ko=!1}var Do=$.ReactCurrentOwner,Co=!1;function Io(t,e,n,r){e.child=null===t?Sa(e,null,n,r):Ta(e,t.child,n,r)}function Mo(t,e,n,r,i){n=n.render;var a=e.ref;return na(e,i),r=Ya(t,e,n,r,a,i),null===t||Co?(e.effectTag|=1,Io(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),qo(t,e,i))}function Oo(t,e,n,r,i,a){if(null===t){var o=n.type;return"function"!==typeof o||Su(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Au(n.type,null,r,null,e.mode,a)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Po(t,e,o,r,i,a))}return o=t.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Vr)(i,r)&&t.ref===e.ref)?qo(t,e,a):(e.effectTag|=1,(t=Eu(o,r)).ref=e.ref,t.return=e,e.child=t)}function Po(t,e,n,r,i,a){return null!==t&&Vr(t.memoizedProps,r)&&t.ref===e.ref&&(Co=!1,i<a)?(e.expirationTime=t.expirationTime,qo(t,e,a)):No(t,e,n,r,a)}function Ro(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function No(t,e,n,r,i){var a=gi(n)?pi:hi.current;return a=di(e,a),na(e,i),n=Ya(t,e,n,r,a,i),null===t||Co?(e.effectTag|=1,Io(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),qo(t,e,i))}function Fo(t,e,n,r,i){if(gi(n)){var a=!0;xi(e)}else a=!1;if(na(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),ya(e,n,r),xa(e,n,r,i),r=!0;else if(null===t){var o=e.stateNode,s=e.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=ra(l):l=di(e,l=gi(n)?pi:hi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&va(e,o,r,l),ia=!1;var f=e.memoizedState;o.state=f,ca(e,r,o,i),u=e.memoizedState,s!==r||f!==u||fi.current||ia?("function"===typeof c&&(da(e,n,c,r),u=e.memoizedState),(s=ia||ma(e,n,s,r,f,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.effectTag|=4)):("function"===typeof o.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(e.effectTag|=4),r=!1)}else o=e.stateNode,oa(t,e),s=e.memoizedProps,o.props=e.type===e.elementType?s:qi(e.type,s),u=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ra(l):l=di(e,l=gi(n)?pi:hi.current),(h="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&va(e,o,r,l),ia=!1,u=e.memoizedState,o.state=u,ca(e,r,o,i),f=e.memoizedState,s!==r||u!==f||fi.current||ia?("function"===typeof c&&(da(e,n,c,r),f=e.memoizedState),(c=ia||ma(e,n,s,r,u,f,l))?(h||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(e.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return zo(t,e,n,r,a,i)}function zo(t,e,n,r,i,a){Ro(t,e);var o=0!==(64&e.effectTag);if(!r&&!o)return i&&bi(e,n,!1),qo(t,e,a);r=e.stateNode,Do.current=e;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&o?(e.child=Ta(e,t.child,null,a),e.child=Ta(e,null,s,a)):Io(t,e,s,a),e.memoizedState=r.state,i&&bi(e,n,!0),e.child}function Vo(t){var e=t.stateNode;e.pendingContext?yi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&yi(0,e.context,!1),Ia(t,e.containerInfo)}var jo,Uo,Ko,Bo={dehydrated:null,retryTime:0};function Wo(t,e,n){var r,i=e.mode,a=e.pendingProps,o=Ra.current,s=!1;if((r=0!==(64&e.effectTag))||(r=0!==(2&o)&&(null===t||null!==t.memoizedState)),r?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),li(Ra,1&o),null===t){if(void 0!==a.fallback&&So(e),s){if(s=a.fallback,(a=Lu(null,i,0,null)).return=e,0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,a.child=t;null!==t;)t.return=a,t=t.sibling;return(n=Lu(s,i,n,null)).return=e,a.sibling=n,e.memoizedState=Bo,e.child=a,n}return i=a.children,e.memoizedState=null,e.child=Sa(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,s){if(a=a.fallback,(n=Eu(t,t.pendingProps)).return=e,0===(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Eu(i,a)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=Bo,e.child=n,i}return n=Ta(e,t.child,a.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=a.fallback,(a=Lu(null,i,0,null)).return=e,a.child=t,null!==t&&(t.return=a),0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,a.child=t;null!==t;)t.return=a,t=t.sibling;return(n=Lu(s,i,n,null)).return=e,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,e.memoizedState=Bo,e.child=a,n}return e.memoizedState=null,e.child=Ta(e,t,a.children,n)}function Go(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),ea(t.return,e)}function Ho(t,e,n,r,i,a){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=a)}function Yo(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Io(t,e,r.children,n),0!==(2&(r=Ra.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!==(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Go(t,n);else if(19===t.tag)Go(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(li(Ra,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Na(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ho(e,!1,i,n,a,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Na(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ho(e,!0,n,null,a,e.lastEffect);break;case"together":Ho(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function qo(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&ou(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Eu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Eu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Xo(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $o(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return gi(e.type)&&mi(),null;case 3:return Ma(),ui(fi),ui(hi),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Ao(e)||(e.effectTag|=4),null;case 5:Pa(e),n=Ca(Da.current);var a=e.type;if(null!==t&&null!=e.stateNode)Uo(t,e,a,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(o(166));return null}if(t=Ca(Aa.current),Ao(e)){r=e.stateNode,a=e.type;var s=e.memoizedProps;switch(r[Tn]=e,r[Sn]=s,a){case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(t=0;t<$t.length;t++)Ye($t[t],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"form":Ye("reset",r),Ye("submit",r);break;case"details":Ye("toggle",r);break;case"input":_t(r,s),Ye("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ye("invalid",r),un(n,"onChange");break;case"textarea":It(r,s),Ye("invalid",r),un(n,"onChange")}for(var u in an(a,s),t=null,s)if(s.hasOwnProperty(u)){var l=s[u];"children"===u?"string"===typeof l?r.textContent!==l&&(t=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(t=["children",""+l]):T.hasOwnProperty(u)&&null!=l&&un(n,u)}switch(a){case"input":bt(r),Et(r,s,!0);break;case"textarea":bt(r),Ot(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=ln)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,t===sn&&(t=Nt(a)),t===sn?"script"===a?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=u.createElement(a,{is:r.is}):(t=u.createElement(a),"select"===a&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,a),t[Tn]=e,t[Sn]=r,jo(t,e),e.stateNode=t,u=on(a,r),a){case"iframe":case"object":case"embed":Ye("load",t),l=r;break;case"video":case"audio":for(l=0;l<$t.length;l++)Ye($t[l],t);l=r;break;case"source":Ye("error",t),l=r;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),l=r;break;case"form":Ye("reset",t),Ye("submit",t),l=r;break;case"details":Ye("toggle",t),l=r;break;case"input":_t(t,r),l=kt(t,r),Ye("invalid",t),un(n,"onChange");break;case"option":l=Lt(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},l=i({},r,{value:void 0}),Ye("invalid",t),un(n,"onChange");break;case"textarea":It(t,r),l=Ct(t,r),Ye("invalid",t),un(n,"onChange");break;default:l=r}an(a,l);var c=l;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?nn(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&Vt(t,h):"children"===s?"string"===typeof h?("textarea"!==a||""!==h)&&jt(t,h):"number"===typeof h&&jt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(T.hasOwnProperty(s)?null!=h&&un(n,s):null!=h&&J(t,s,h,u))}switch(a){case"input":bt(t),Et(t,r,!1);break;case"textarea":bt(t),Ot(t);break;case"option":null!=r.value&&t.setAttribute("value",""+vt(r.value));break;case"select":t.multiple=!!r.multiple,null!=(n=r.value)?Dt(t,!!r.multiple,n,!1):null!=r.defaultValue&&Dt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof l.onClick&&(t.onclick=ln)}yn(a,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Ko(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));n=Ca(Da.current),Ca(Aa.current),Ao(e)?(n=e.stateNode,r=e.memoizedProps,n[Tn]=e,n.nodeValue!==r&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Tn]=e,e.stateNode=n)}return null;case 13:return ui(Ra),r=e.memoizedState,0!==(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Ao(e):(r=null!==(a=t.memoizedState),n||null===a||null!==(a=t.child.sibling)&&(null!==(s=e.firstEffect)?(e.firstEffect=a,a.nextEffect=s):(e.firstEffect=e.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Ra.current)?As===bs&&(As=ws):(As!==bs&&As!==ws||(As=ks),0!==Ms&&null!==Ts&&(Ou(Ts,Es),Pu(Ts,Ms)))),(n||r)&&(e.effectTag|=4),null);case 4:return Ma(),null;case 10:return ta(e),null;case 17:return gi(e.type)&&mi(),null;case 19:if(ui(Ra),null===(r=e.memoizedState))return null;if(a=0!==(64&e.effectTag),null===(s=r.rendering)){if(a)Xo(r,!1);else if(As!==bs||null!==t&&0!==(64&t.effectTag))for(s=e.child;null!==s;){if(null!==(t=Na(s))){for(e.effectTag|=64,Xo(r,!1),null!==(a=t.updateQueue)&&(e.updateQueue=a,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)s=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(t=a.alternate)?(a.childExpirationTime=0,a.expirationTime=s,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=t.childExpirationTime,a.expirationTime=t.expirationTime,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return li(Ra,1&Ra.current|2),e.child}s=s.sibling}}else{if(!a)if(null!==(t=Na(s))){if(e.effectTag|=64,a=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),Xo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Vi()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,a=!0,Xo(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(s.sibling=e.child,e.child=s):(null!==(n=r.last)?n.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Vi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Vi(),n.sibling=null,e=Ra.current,li(Ra,a?1&e|2:1&e),n):null}throw Error(o(156,e.tag))}function Jo(t){switch(t.tag){case 1:gi(t.type)&&mi();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Ma(),ui(fi),ui(hi),0!==(64&(e=t.effectTag)))throw Error(o(285));return t.effectTag=-4097&e|64,t;case 5:return Pa(t),null;case 13:return ui(Ra),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return ui(Ra),null;case 4:return Ma(),null;case 10:return ta(t),null;default:return null}}function Zo(t,e){return{value:t,source:e,stack:yt(e)}}jo=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Uo=function(t,e,n,r,a){var o=t.memoizedProps;if(o!==r){var s,u,l=e.stateNode;switch(Ca(Aa.current),t=null,n){case"input":o=kt(l,o),r=kt(l,r),t=[];break;case"option":o=Lt(l,o),r=Lt(l,r),t=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":o=Ct(l,o),r=Ct(l,r),t=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(l.onclick=ln)}for(s in an(n,r),n=null,o)if(!r.hasOwnProperty(s)&&o.hasOwnProperty(s)&&null!=o[s])if("style"===s)for(u in l=o[s])l.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(T.hasOwnProperty(s)?t||(t=[]):(t=t||[]).push(s,null));for(s in r){var c=r[s];if(l=null!=o?o[s]:void 0,r.hasOwnProperty(s)&&c!==l&&(null!=c||null!=l))if("style"===s)if(l){for(u in l)!l.hasOwnProperty(u)||c&&c.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in c)c.hasOwnProperty(u)&&l[u]!==c[u]&&(n||(n={}),n[u]=c[u])}else n||(t||(t=[]),t.push(s,n)),n=c;else"dangerouslySetInnerHTML"===s?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(t=t||[]).push(s,c)):"children"===s?l===c||"string"!==typeof c&&"number"!==typeof c||(t=t||[]).push(s,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(T.hasOwnProperty(s)?(null!=c&&un(a,s),t||l===c||(t=[])):(t=t||[]).push(s,c))}n&&(t=t||[]).push("style",n),a=t,(e.updateQueue=a)&&(e.effectTag|=4)}},Ko=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var Qo="function"===typeof WeakSet?WeakSet:Set;function ts(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=yt(n)),null!==n&&mt(n.type),e=e.value,null!==t&&1===t.tag&&mt(t.type);try{console.error(e)}catch(i){setTimeout((function(){throw i}))}}function es(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){vu(t,n)}else e.current=null}function ns(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:qi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(o(163))}function rs(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function is(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function as(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void is(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:qi(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&ha(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ha(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&yn(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ne(n)))));case 19:case 17:case 20:case 21:return}throw Error(o(163))}function os(t,e,n){switch("function"===typeof ku&&ku(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Ki(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(a){vu(i,a)}}t=t.next}while(t!==r)}))}break;case 1:es(e),"function"===typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(n){vu(t,n)}}(e,n);break;case 5:es(e);break;case 4:cs(t,e,n)}}function ss(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&ss(e)}function us(t){return 5===t.tag||3===t.tag||4===t.tag}function ls(t){t:{for(var e=t.return;null!==e;){if(us(e)){var n=e;break t}e=e.return}throw Error(o(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(jt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||us(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?function t(e,n,r){var i=e.tag,a=5===i||6===i;if(a)e=a?e.stateNode:e.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(8===r.nodeType?(n=r.parentNode).insertBefore(e,r):(n=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=ln));else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e):function t(e,n,r){var i=e.tag,a=5===i||6===i;if(a)e=a?e.stateNode:e.stateNode.instance,n?r.insertBefore(e,n):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e)}function cs(t,e,n){for(var r,i,a=e,s=!1;;){if(!s){s=a.return;t:for(;;){if(null===s)throw Error(o(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}s=s.return}s=!0}if(5===a.tag||6===a.tag){t:for(var u=t,l=a,c=n,h=l;;)if(os(u,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===l)break t;for(;null===h.sibling;){if(null===h.return||h.return===l)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,l=a.stateNode,8===u.nodeType?u.parentNode.removeChild(l):u.removeChild(l)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(os(t,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function hs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void rs(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var a=e.updateQueue;if(e.updateQueue=null,null!==a){for(n[Sn]=r,"input"===t&&"radio"===r.type&&null!=r.name&&Tt(n,r),on(t,i),e=on(t,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?nn(n,u):"dangerouslySetInnerHTML"===s?Vt(n,u):"children"===s?jt(n,u):J(n,s,u,e)}switch(t){case"input":St(n,r);break;case"textarea":Mt(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?Dt(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?Dt(n,!!r.multiple,r.defaultValue,!0):Dt(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(o(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,Ne(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,Ps=Vi()),null!==n)t:for(t=n;;){if(5===t.tag)a=t.stateNode,r?"function"===typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=t.stateNode,i=void 0!==(i=t.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,a.style.display=en("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(a=t.child.sibling).return=t,t=a;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void fs(e);case 19:return void fs(e);case 17:return}throw Error(o(163))}function fs(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Qo),e.forEach((function(e){var r=bu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function ds(t,e,n){(n=sa(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ns||(Ns=!0,Fs=r),ts(t,e)},n}function gs(t,e,n){(n=sa(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return ts(t,e),r(i)}}var a=t.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===zs?zs=new Set([this]):zs.add(this),ts(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var ms,ys=Math.ceil,vs=$.ReactCurrentDispatcher,xs=$.ReactCurrentOwner,bs=0,ws=3,ks=4,_s=0,Ts=null,Ss=null,Es=0,As=bs,Ls=null,Ds=1073741823,Cs=1073741823,Is=null,Ms=0,Os=!1,Ps=0,Rs=null,Ns=!1,Fs=null,zs=null,Vs=!1,js=null,Us=90,Ks=null,Bs=0,Ws=null,Gs=0;function Hs(){return 0!==(48&_s)?1073741821-(Vi()/10|0):0!==Gs?Gs:Gs=1073741821-(Vi()/10|0)}function Ys(t,e,n){if(0===(2&(e=e.mode)))return 1073741823;var r=ji();if(0===(4&e))return 99===r?1073741823:1073741822;if(0!==(16&_s))return Es;if(null!==n)t=Yi(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=Yi(t,150,100);break;case 97:case 96:t=Yi(t,5e3,250);break;case 95:t=2;break;default:throw Error(o(326))}return null!==Ts&&t===Es&&--t,t}function qs(t,e){if(50<Bs)throw Bs=0,Ws=null,Error(o(185));if(null!==(t=Xs(t,e))){var n=ji();1073741823===e?0!==(8&_s)&&0===(48&_s)?Qs(t):(Js(t),0===_s&&Gi()):Js(t),0===(4&_s)||98!==n&&99!==n||(null===Ks?Ks=new Map([[t,e]]):(void 0===(n=Ks.get(t))||n>e)&&Ks.set(t,e))}}function Xs(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ts===i&&(ou(e),As===ks&&Ou(i,Es)),Pu(i,e)),i}function $s(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Mu(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function Js(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Wi(Qs.bind(null,t));else{var e=$s(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=Hs();if(1073741823===e?r=99:1===e||2===e?r=95:r=0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Mi&&_i(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?Wi(Qs.bind(null,t)):Bi(r,Zs.bind(null,t),{timeout:10*(1073741821-e)-Vi()}),t.callbackNode=e}}}function Zs(t,e){if(Gs=0,e)return Ru(t,e=Hs()),Js(t),null;var n=$s(t);if(0!==n){if(e=t.callbackNode,0!==(48&_s))throw Error(o(327));if(gu(),t===Ts&&n===Es||nu(t,n),null!==Ss){var r=_s;_s|=16;for(var i=iu();;)try{uu();break}catch(u){ru(t,u)}if(Qi(),_s=r,vs.current=i,1===As)throw e=Ls,nu(t,n),Ou(t,n),Js(t),e;if(null===Ss)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=As,Ts=null,r){case bs:case 1:throw Error(o(345));case 2:Ru(t,2<n?2:n);break;case ws:if(Ou(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(i)),1073741823===Ds&&10<(i=Ps+500-Vi())){if(Os){var a=t.lastPingedTime;if(0===a||a>=n){t.lastPingedTime=n,nu(t,n);break}}if(0!==(a=$s(t))&&a!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=xn(fu.bind(null,t),i);break}fu(t);break;case ks:if(Ou(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(i)),Os&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,nu(t,n);break}if(0!==(i=$s(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==Cs?r=10*(1073741821-Cs)-Vi():1073741823===Ds?r=0:(r=10*(1073741821-Ds)-5e3,0>(r=(i=Vi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ys(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=xn(fu.bind(null,t),r);break}fu(t);break;case 5:if(1073741823!==Ds&&null!==Is){a=Ds;var s=Is;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(a=Vi()-(10*(1073741821-a)-(0|s.timeoutMs||5e3)))<=i?0:i+r-a),10<r){Ou(t,n),t.timeoutHandle=xn(fu.bind(null,t),r);break}}fu(t);break;default:throw Error(o(329))}if(Js(t),t.callbackNode===e)return Zs.bind(null,t)}}return null}function Qs(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!==(48&_s))throw Error(o(327));if(gu(),t===Ts&&e===Es||nu(t,e),null!==Ss){var n=_s;_s|=16;for(var r=iu();;)try{su();break}catch(i){ru(t,i)}if(Qi(),_s=n,vs.current=r,1===As)throw n=Ls,nu(t,e),Ou(t,e),Js(t),n;if(null!==Ss)throw Error(o(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Ts=null,fu(t),Js(t)}return null}function tu(t,e){var n=_s;_s|=1;try{return t(e)}finally{0===(_s=n)&&Gi()}}function eu(t,e){var n=_s;_s&=-2,_s|=8;try{return t(e)}finally{0===(_s=n)&&Gi()}}function nu(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,bn(n)),null!==Ss)for(n=Ss.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&mi();break;case 3:Ma(),ui(fi),ui(hi);break;case 5:Pa(r);break;case 4:Ma();break;case 13:case 19:ui(Ra);break;case 10:ta(r)}n=n.return}Ts=t,Ss=Eu(t.current,null),Es=e,As=bs,Ls=null,Cs=Ds=1073741823,Is=null,Ms=0,Os=!1}function ru(t,e){for(;;){try{if(Qi(),za.current=mo,Wa)for(var n=Ua.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(ja=0,Ba=Ka=Ua=null,Wa=!1,null===Ss||null===Ss.return)return As=1,Ls=e,Ss=null;t:{var i=t,a=Ss.return,o=Ss,s=e;if(e=Es,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s;if(0===(2&o.mode)){var l=o.alternate;l?(o.updateQueue=l.updateQueue,o.memoizedState=l.memoizedState,o.expirationTime=l.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var c=0!==(1&Ra.current),h=a;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var d=h.memoizedProps;f=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!c)}}if(f){var g=h.updateQueue;if(null===g){var m=new Set;m.add(u),h.updateQueue=m}else g.add(u);if(0===(2&h.mode)){if(h.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var y=sa(1073741823,null);y.tag=2,ua(o,y)}o.expirationTime=1073741823;break t}s=void 0,o=e;var v=i.pingCache;if(null===v?(v=i.pingCache=new ps,s=new Set,v.set(u,s)):void 0===(s=v.get(u))&&(s=new Set,v.set(u,s)),!s.has(o)){s.add(o);var x=xu.bind(null,i,u,o);u.then(x,x)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);s=Error((mt(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+yt(o))}5!==As&&(As=2),s=Zo(s,o),h=a;do{switch(h.tag){case 3:u=s,h.effectTag|=4096,h.expirationTime=e,la(h,ds(h,u,e));break t;case 1:u=s;var b=h.type,w=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===zs||!zs.has(w)))){h.effectTag|=4096,h.expirationTime=e,la(h,gs(h,u,e));break t}}h=h.return}while(null!==h)}Ss=cu(Ss)}catch(k){e=k;continue}break}}function iu(){var t=vs.current;return vs.current=mo,null===t?mo:t}function au(t,e){t<Ds&&2<t&&(Ds=t),null!==e&&t<Cs&&2<t&&(Cs=t,Is=e)}function ou(t){t>Ms&&(Ms=t)}function su(){for(;null!==Ss;)Ss=lu(Ss)}function uu(){for(;null!==Ss&&!Oi();)Ss=lu(Ss)}function lu(t){var e=ms(t.alternate,t,Es);return t.memoizedProps=t.pendingProps,null===e&&(e=cu(t)),xs.current=null,e}function cu(t){Ss=t;do{var e=Ss.alternate;if(t=Ss.return,0===(2048&Ss.effectTag)){if(e=$o(e,Ss,Es),1===Es||1!==Ss.childExpirationTime){for(var n=0,r=Ss.child;null!==r;){var i=r.expirationTime,a=r.childExpirationTime;i>n&&(n=i),a>n&&(n=a),r=r.sibling}Ss.childExpirationTime=n}if(null!==e)return e;null!==t&&0===(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Ss.firstEffect),null!==Ss.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Ss.firstEffect),t.lastEffect=Ss.lastEffect),1<Ss.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Ss:t.firstEffect=Ss,t.lastEffect=Ss))}else{if(null!==(e=Jo(Ss)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Ss.sibling))return e;Ss=t}while(null!==Ss);return As===bs&&(As=5),null}function hu(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function fu(t){var e=ji();return Ki(99,pu.bind(null,t,e)),null}function pu(t,e){do{gu()}while(null!==js);if(0!==(48&_s))throw Error(o(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=hu(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===Ts&&(Ss=Ts=null,Es=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var a=_s;_s|=32,xs.current=null,gn=He;var s=pn();if(dn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{var l=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(l&&0!==l.rangeCount){u=l.anchorNode;var c=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{u.nodeType,h.nodeType}catch(E){u=null;break t}var f=0,p=-1,d=-1,g=0,m=0,y=s,v=null;e:for(;;){for(var x;y!==u||0!==c&&3!==y.nodeType||(p=f+c),y!==h||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(x=y.firstChild);)v=y,y=x;for(;;){if(y===s)break e;if(v===u&&++g===c&&(p=f),v===h&&++m===l&&(d=f),null!==(x=y.nextSibling))break;v=(y=v).parentNode}y=x}u=-1===p||-1===d?null:{start:p,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;mn={activeElementDetached:null,focusedElem:s,selectionRange:u},He=!1,Rs=i;do{try{du()}catch(E){if(null===Rs)throw Error(o(330));vu(Rs,E),Rs=Rs.nextEffect}}while(null!==Rs);Rs=i;do{try{for(s=t,u=e;null!==Rs;){var b=Rs.effectTag;if(16&b&&jt(Rs.stateNode,""),128&b){var w=Rs.alternate;if(null!==w){var k=w.ref;null!==k&&("function"===typeof k?k(null):k.current=null)}}switch(1038&b){case 2:ls(Rs),Rs.effectTag&=-3;break;case 6:ls(Rs),Rs.effectTag&=-3,hs(Rs.alternate,Rs);break;case 1024:Rs.effectTag&=-1025;break;case 1028:Rs.effectTag&=-1025,hs(Rs.alternate,Rs);break;case 4:hs(Rs.alternate,Rs);break;case 8:cs(s,c=Rs,u),ss(c)}Rs=Rs.nextEffect}}catch(E){if(null===Rs)throw Error(o(330));vu(Rs,E),Rs=Rs.nextEffect}}while(null!==Rs);if(k=mn,w=pn(),b=k.focusedElem,u=k.selectionRange,w!==b&&b&&b.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==u&&dn(b)&&(w=u.start,void 0===(k=u.end)&&(k=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(k,b.value.length)):(k=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(k=k.getSelection(),c=b.textContent.length,s=Math.min(u.start,c),u=void 0===u.end?s:Math.min(u.end,c),!k.extend&&s>u&&(c=u,u=s,s=c),c=fn(b,s),h=fn(b,u),c&&h&&(1!==k.rangeCount||k.anchorNode!==c.node||k.anchorOffset!==c.offset||k.focusNode!==h.node||k.focusOffset!==h.offset)&&((w=w.createRange()).setStart(c.node,c.offset),k.removeAllRanges(),s>u?(k.addRange(w),k.extend(h.node,h.offset)):(w.setEnd(h.node,h.offset),k.addRange(w))))),w=[];for(k=b;k=k.parentNode;)1===k.nodeType&&w.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<w.length;b++)(k=w[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}He=!!gn,mn=gn=null,t.current=n,Rs=i;do{try{for(b=t;null!==Rs;){var _=Rs.effectTag;if(36&_&&as(b,Rs.alternate,Rs),128&_){w=void 0;var T=Rs.ref;if(null!==T){var S=Rs.stateNode;switch(Rs.tag){case 5:w=S;break;default:w=S}"function"===typeof T?T(w):T.current=w}}Rs=Rs.nextEffect}}catch(E){if(null===Rs)throw Error(o(330));vu(Rs,E),Rs=Rs.nextEffect}}while(null!==Rs);Rs=null,Pi(),_s=a}else t.current=n;if(Vs)Vs=!1,js=t,Us=e;else for(Rs=i;null!==Rs;)e=Rs.nextEffect,Rs.nextEffect=null,Rs=e;if(0===(e=t.firstPendingTime)&&(zs=null),1073741823===e?t===Ws?Bs++:(Bs=0,Ws=t):Bs=0,"function"===typeof wu&&wu(n.stateNode,r),Js(t),Ns)throw Ns=!1,t=Fs,Fs=null,t;return 0!==(8&_s)||Gi(),null}function du(){for(;null!==Rs;){var t=Rs.effectTag;0!==(256&t)&&ns(Rs.alternate,Rs),0===(512&t)||Vs||(Vs=!0,Bi(97,(function(){return gu(),null}))),Rs=Rs.nextEffect}}function gu(){if(90!==Us){var t=97<Us?97:Us;return Us=90,Ki(t,mu)}}function mu(){if(null===js)return!1;var t=js;if(js=null,0!==(48&_s))throw Error(o(331));var e=_s;for(_s|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:rs(5,n),is(5,n)}}catch(r){if(null===t)throw Error(o(330));vu(t,r)}n=t.nextEffect,t.nextEffect=null,t=n}return _s=e,Gi(),!0}function yu(t,e,n){ua(t,e=ds(t,e=Zo(n,e),1073741823)),null!==(t=Xs(t,1073741823))&&Js(t)}function vu(t,e){if(3===t.tag)yu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){yu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zs||!zs.has(r))){ua(n,t=gs(n,t=Zo(e,t),1073741823)),null!==(n=Xs(n,1073741823))&&Js(n);break}}n=n.return}}function xu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),Ts===t&&Es===n?As===ks||As===ws&&1073741823===Ds&&Vi()-Ps<500?nu(t,Es):Os=!0:Mu(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,Js(t)))}function bu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(e=Ys(e=Hs(),t,null)),null!==(t=Xs(t,e))&&Js(t)}ms=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||fi.current)Co=!0;else{if(r<n){switch(Co=!1,e.tag){case 3:Vo(e),Lo();break;case 5:if(Oa(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:gi(e.type)&&xi(e);break;case 4:Ia(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,li(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?Wo(t,e,n):(li(Ra,1&Ra.current),null!==(e=qo(t,e,n))?e.sibling:null);li(Ra,1&Ra.current);break;case 19:if(r=e.childExpirationTime>=n,0!==(64&t.effectTag)){if(r)return Yo(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),li(Ra,Ra.current),!r)return null}return qo(t,e,n)}Co=!1}}else Co=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=di(e,hi.current),na(e,n),i=Ya(null,e,r,t,i,n),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,gi(r)){var a=!0;xi(e)}else a=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,aa(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&da(e,r,s,t),i.updater=ga,e.stateNode=i,i._reactInternalFiber=e,xa(e,r,t,n),e=zo(null,e,r,!0,a,n)}else e.tag=0,Io(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,a=e.tag=function(t){if("function"===typeof t)return Su(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===ut)return 11;if(t===ht)return 14}return 2}(i),t=qi(i,t),a){case 0:e=No(null,e,i,t,n);break t;case 1:e=Fo(null,e,i,t,n);break t;case 11:e=Mo(null,e,i,t,n);break t;case 14:e=Oo(null,e,i,qi(i.type,t),r,n);break t}throw Error(o(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,No(t,e,r,i=e.elementType===r?i:qi(r,i),n);case 1:return r=e.type,i=e.pendingProps,Fo(t,e,r,i=e.elementType===r?i:qi(r,i),n);case 3:if(Vo(e),r=e.updateQueue,null===t||null===r)throw Error(o(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,oa(t,e),ca(e,r,null,n),(r=e.memoizedState.element)===i)Lo(),e=qo(t,e,n);else{if((i=e.stateNode.hydrate)&&(wo=wn(e.stateNode.containerInfo.firstChild),bo=e,i=ko=!0),i)for(n=Sa(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Io(t,e,r,n),Lo();e=e.child}return e;case 5:return Oa(e),null===t&&So(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,vn(r,i)?s=null:null!==a&&vn(r,a)&&(e.effectTag|=16),Ro(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Io(t,e,s,n),e=e.child),e;case 6:return null===t&&So(e),null;case 13:return Wo(t,e,n);case 4:return Ia(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Ta(e,null,r,n):Io(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Mo(t,e,r,i=e.elementType===r?i:qi(r,i),n);case 7:return Io(t,e,e.pendingProps,n),e.child;case 8:case 12:return Io(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value;var u=e.type._context;if(li(Xi,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=Fr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!fi.current){e=qo(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&a)){1===u.tag&&((c=sa(n,null)).tag=2,ua(u,c)),u.expirationTime<n&&(u.expirationTime=n),null!==(c=u.alternate)&&c.expirationTime<n&&(c.expirationTime=n),ea(u.return,n),l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Io(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(a=e.pendingProps).children,na(e,n),r=r(i=ra(i,a.unstable_observedBits)),e.effectTag|=1,Io(t,e,r,n),e.child;case 14:return a=qi(i=e.type,e.pendingProps),Oo(t,e,i,a=qi(i.type,a),r,n);case 15:return Po(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,gi(r)?(t=!0,xi(e)):t=!1,na(e,n),ya(e,r,i),xa(e,r,i,n),zo(null,e,r,!0,t,n);case 19:return Yo(t,e,n)}throw Error(o(156,e.tag))};var wu=null,ku=null;function _u(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Tu(t,e,n,r){return new _u(t,e,n,r)}function Su(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Eu(t,e){var n=t.alternate;return null===n?((n=Tu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Au(t,e,n,r,i,a){var s=2;if(r=t,"function"===typeof t)Su(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case nt:return Lu(n.children,i,a,e);case st:s=8,i|=7;break;case rt:s=8,i|=1;break;case it:return(t=Tu(12,n,e,8|i)).elementType=it,t.type=it,t.expirationTime=a,t;case lt:return(t=Tu(13,n,e,i)).type=lt,t.elementType=lt,t.expirationTime=a,t;case ct:return(t=Tu(19,n,e,i)).elementType=ct,t.expirationTime=a,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case at:s=10;break t;case ot:s=9;break t;case ut:s=11;break t;case ht:s=14;break t;case ft:s=16,r=null;break t;case pt:s=22;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Tu(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=a,e}function Lu(t,e,n,r){return(t=Tu(7,t,r,e)).expirationTime=n,t}function Du(t,e,n){return(t=Tu(6,t,null,e)).expirationTime=n,t}function Cu(t,e,n){return(e=Tu(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Iu(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Mu(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Ou(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Pu(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Ru(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function Nu(t,e,n,r){var i=e.current,a=Hs(),s=fa.suspense;a=Ys(a,i,s);t:if(n){e:{if(Qt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(gi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var l=n.type;if(gi(l)){n=vi(n,l,u);break t}}n=u}else n=ci;return null===e.context?e.context=n:e.pendingContext=n,(e=sa(a,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),ua(i,e),qs(i,a),a}function Fu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function zu(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function Vu(t,e){zu(t,e),(t=t.alternate)&&zu(t,e)}function ju(t,e,n){var r=new Iu(t,e,n=null!=n&&!0===n.hydrate),i=Tu(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,aa(i),t[En]=r.current,n&&0!==e&&function(t,e){var n=Zt(e);Ee.forEach((function(t){de(t,e,n)})),Ae.forEach((function(t){de(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function Uu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ku(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=Fu(o);s.call(t)}}Nu(e,o,t,i)}else{if(a=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new ju(t,0,e?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var t=Fu(o);u.call(t)}}eu((function(){Nu(e,o,t,i)}))}return Fu(o)}function Bu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Wu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Uu(e))throw Error(o(200));return Bu(t,e,null,n)}ju.prototype.render=function(t){Nu(t,this._internalRoot,null,null)},ju.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Nu(null,t,null,(function(){e[En]=null}))},ge=function(t){if(13===t.tag){var e=Yi(Hs(),150,100);qs(t,e),Vu(t,e)}},me=function(t){13===t.tag&&(qs(t,3),Vu(t,3))},ye=function(t){if(13===t.tag){var e=Hs();qs(t,e=Ys(e,t,null)),Vu(t,e)}},L=function(t,e,n){switch(e){case"input":if(St(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Cn(r);if(!i)throw Error(o(90));wt(r),St(r,i)}}}break;case"textarea":Mt(t,n);break;case"select":null!=(e=n.value)&&Dt(t,!!n.multiple,e,!1)}},P=tu,R=function(t,e,n,r,i){var a=_s;_s|=4;try{return Ki(98,t.bind(null,e,n,r,i))}finally{0===(_s=a)&&Gi()}},N=function(){0===(49&_s)&&(function(){if(null!==Ks){var t=Ks;Ks=null,t.forEach((function(t,e){Ru(e,t),Js(e)})),Gi()}}(),gu())},F=function(t,e){var n=_s;_s|=2;try{return t(e)}finally{0===(_s=n)&&Gi()}};var Gu={Events:[Ln,Dn,Cn,E,_,Fn,function(t){ie(t,Nn)},M,O,Je,se,gu,{current:!1}]};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);wu=function(t){try{e.onCommitFiberRoot(n,t,void 0,64===(64&t.current.effectTag))}catch(r){}},ku=function(t){try{e.onCommitFiberUnmount(n,t)}catch(r){}}}catch(r){}})(i({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ne(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:An,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gu,e.createPortal=Wu,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw Error(o(268,Object.keys(t)))}return t=null===(t=ne(e))?null:t.stateNode},e.flushSync=function(t,e){if(0!==(48&_s))throw Error(o(187));var n=_s;_s|=1;try{return Ki(99,t.bind(null,e))}finally{_s=n,Gi()}},e.hydrate=function(t,e,n){if(!Uu(e))throw Error(o(200));return Ku(null,t,e,!0,n)},e.render=function(t,e,n){if(!Uu(e))throw Error(o(200));return Ku(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Uu(t))throw Error(o(40));return!!t._reactRootContainer&&(eu((function(){Ku(null,null,t,!1,(function(){t._reactRootContainer=null,t[En]=null}))})),!0)},e.unstable_batchedUpdates=tu,e.unstable_createPortal=function(t,e){return Wu(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Uu(n))throw Error(o(200));if(null==t||void 0===t._reactInternalFiber)throw Error(o(38));return Ku(t,e,n,!1,r)},e.version="16.14.0"},function(t,e,n){"use strict";t.exports=n(155)},function(t,e,n){"use strict";var r,i,a,o,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,l=null,c=function t(){if(null!==u)try{var n=e.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(t,0),r}},h=Date.now();e.unstable_now=function(){return Date.now()-h},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(c,0))},i=function(t,e){l=setTimeout(t,e)},a=function(){clearTimeout(l)},o=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var f=window.performance,p=window.Date,d=window.setTimeout,g=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)e.unstable_now=function(){return f.now()};else{var y=p.now();e.unstable_now=function(){return p.now()-y}}var v=!1,x=null,b=-1,w=5,k=0;o=function(){return e.unstable_now()>=k},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<t?Math.floor(1e3/t):5};var _=new MessageChannel,T=_.port2;_.port1.onmessage=function(){if(null!==x){var t=e.unstable_now();k=t+w;try{x(!0,t)?T.postMessage(null):(v=!1,x=null)}catch(n){throw T.postMessage(null),n}}else v=!1},r=function(t){x=t,v||(v=!0,T.postMessage(null))},i=function(t,n){b=d((function(){t(e.unstable_now())}),n)},a=function(){g(b),b=-1}}function S(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<L(i,e)))break t;t[r]=e,t[n]=i,n=r}}function E(t){return void 0===(t=t[0])?null:t}function A(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var a=2*(r+1)-1,o=t[a],s=a+1,u=t[s];if(void 0!==o&&0>L(o,n))void 0!==u&&0>L(u,o)?(t[r]=u,t[s]=n,r=s):(t[r]=o,t[a]=n,r=a);else{if(!(void 0!==u&&0>L(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function L(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var D=[],C=[],I=1,M=null,O=3,P=!1,R=!1,N=!1;function F(t){for(var e=E(C);null!==e;){if(null===e.callback)A(C);else{if(!(e.startTime<=t))break;A(C),e.sortIndex=e.expirationTime,S(D,e)}e=E(C)}}function z(t){if(N=!1,F(t),!R)if(null!==E(D))R=!0,r(V);else{var e=E(C);null!==e&&i(z,e.startTime-t)}}function V(t,n){R=!1,N&&(N=!1,a()),P=!0;var r=O;try{for(F(n),M=E(D);null!==M&&(!(M.expirationTime>n)||t&&!o());){var s=M.callback;if(null!==s){M.callback=null,O=M.priorityLevel;var u=s(M.expirationTime<=n);n=e.unstable_now(),"function"===typeof u?M.callback=u:M===E(D)&&A(D),F(n)}else A(D);M=E(D)}if(null!==M)var l=!0;else{var c=E(C);null!==c&&i(z,c.startTime-n),l=!1}return l}finally{M=null,O=r,P=!1}}function j(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){R||P||(R=!0,r(V))},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return E(D)},e.unstable_next=function(t){switch(O){case 1:case 2:case 3:var e=3;break;default:e=O}var n=O;O=e;try{return t()}finally{O=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=U,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=O;O=t;try{return e()}finally{O=n}},e.unstable_scheduleCallback=function(t,n,o){var s=e.unstable_now();if("object"===typeof o&&null!==o){var u=o.delay;u="number"===typeof u&&0<u?s+u:s,o="number"===typeof o.timeout?o.timeout:j(t)}else o=j(t),u=s;return t={id:I++,callback:n,priorityLevel:t,startTime:u,expirationTime:o=u+o,sortIndex:-1},u>s?(t.sortIndex=u,S(C,t),null===E(D)&&t===E(C)&&(N?a():N=!0,i(z,u-s))):(t.sortIndex=o,S(D,t),R||P||(R=!0,r(V))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();F(t);var n=E(D);return n!==M&&null!==M&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<M.expirationTime||o()},e.unstable_wrapCallback=function(t){var e=O;return function(){var n=O;O=e;try{return t.apply(this,arguments)}finally{O=n}}}},,,function(t,e,n){"use strict";var r=n(159);function i(){}function a(){}a.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){t.exports=function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},n=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[e[r]]=r);var i=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in i)if(i.hasOwnProperty(a)){if(!("channels"in i[a]))throw new Error("missing channels property: "+a);if(!("labels"in i[a]))throw new Error("missing channel labels property: "+a);if(i[a].labels.length!==i[a].channels)throw new Error("channel and label counts mismatch: "+a);var o=i[a].channels,s=i[a].labels;delete i[a].channels,delete i[a].labels,Object.defineProperty(i[a],"channels",{value:o}),Object.defineProperty(i[a],"labels",{value:s})}i.rgb.hsl=function(t){var e,n,r=t[0]/255,i=t[1]/255,a=t[2]/255,o=Math.min(r,i,a),s=Math.max(r,i,a),u=s-o;return s===o?e=0:r===s?e=(i-a)/u:i===s?e=2+(a-r)/u:a===s&&(e=4+(r-i)/u),(e=Math.min(60*e,360))<0&&(e+=360),n=(o+s)/2,[e,100*(s===o?0:n<=.5?u/(s+o):u/(2-s-o)),100*n]},i.rgb.hsv=function(t){var e,n,r,i,a,o=t[0]/255,s=t[1]/255,u=t[2]/255,l=Math.max(o,s,u),c=l-Math.min(o,s,u),h=function(t){return(l-t)/6/c+.5};return 0===c?i=a=0:(a=c/l,e=h(o),n=h(s),r=h(u),o===l?i=r-n:s===l?i=1/3+e-r:u===l&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*a,100*l]},i.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2];return[i.rgb.hsl(t)[0],1/255*Math.min(e,Math.min(n,r))*100,100*(r=1-1/255*Math.max(e,Math.max(n,r)))]},i.rgb.cmyk=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-r,1-i)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]},i.rgb.keyword=function(t){var r=n[t];if(r)return r;var i,a,o,s=1/0;for(var u in e)if(e.hasOwnProperty(u)){var l=e[u],c=(a=t,o=l,Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)+Math.pow(a[2]-o[2],2));c<s&&(s=c,i=u)}return i},i.keyword.rgb=function(t){return e[t]},i.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},i.rgb.lab=function(t){var e=i.rgb.xyz(t),n=e[0],r=e[1],a=e[2];return r/=100,a/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},i.hsl.rgb=function(t){var e,n,r,i,a,o=t[0]/360,s=t[1]/100,u=t[2]/100;if(0===s)return[a=255*u,a,a];e=2*u-(n=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var l=0;l<3;l++)(r=o+1/3*-(l-1))<0&&r++,r>1&&r--,a=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[l]=255*a;return i},i.hsl.hsv=function(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=n,a=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=a<=1?a:2-a,[e,100*(0===r?2*i/(a+i):2*n/(r+n)),(r+n)/2*100]},i.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,a=e-Math.floor(e),o=255*r*(1-n),s=255*r*(1-n*a),u=255*r*(1-n*(1-a));switch(r*=255,i){case 0:return[r,u,o];case 1:return[s,r,o];case 2:return[o,r,u];case 3:return[o,s,r];case 4:return[u,o,r];case 5:return[r,o,s]}},i.hsv.hsl=function(t){var e,n,r,i=t[0],a=t[1]/100,o=t[2]/100,s=Math.max(o,.01);return r=(2-a)*o,n=a*s,[i,100*(n=(n/=(e=(2-a)*s)<=1?e:2-e)||0),100*(r/=2)]},i.hwb.rgb=function(t){var e,n,r,i,a,o,s,u=t[0]/360,l=t[1]/100,c=t[2]/100,h=l+c;switch(h>1&&(l/=h,c/=h),r=6*u-(e=Math.floor(6*u)),0!==(1&e)&&(r=1-r),i=l+r*((n=1-c)-l),e){default:case 6:case 0:a=n,o=i,s=l;break;case 1:a=i,o=n,s=l;break;case 2:a=l,o=n,s=i;break;case 3:a=l,o=i,s=n;break;case 4:a=i,o=l,s=n;break;case 5:a=n,o=l,s=i}return[255*a,255*o,255*s]},i.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},i.xyz.rgb=function(t){var e,n,r,i=t[0]/100,a=t[1]/100,o=t[2]/100;return n=-.9689*i+1.8758*a+.0415*o,r=.0557*i+-.204*a+1.057*o,e=(e=3.2406*i+-1.5372*a+-.4986*o)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},i.xyz.lab=function(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},i.lab.xyz=function(t){var e,n,r,i=t[0];e=t[1]/500+(n=(i+16)/116),r=n-t[2]/200;var a=Math.pow(n,3),o=Math.pow(e,3),s=Math.pow(r,3);return n=a>.008856?a:(n-16/116)/7.787,e=o>.008856?o:(e-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[e*=95.047,n*=100,r*=108.883]},i.lab.lch=function(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]},i.lch.lab=function(t){var e,n=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[n,r*Math.cos(e),r*Math.sin(e)]},i.rgb.ansi16=function(t){var e=t[0],n=t[1],r=t[2],a=1 in arguments?arguments[1]:i.rgb.hsv(t)[2];if(0===(a=Math.round(a/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===a&&(o+=60),o},i.hsv.ansi16=function(t){return i.rgb.ansi16(i.hsv.rgb(t),t[2])},i.rgb.ansi256=function(t){var e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},i.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},i.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},i.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},i.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},i.rgb.hcg=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,a=Math.max(Math.max(n,r),i),o=Math.min(Math.min(n,r),i),s=a-o;return e=s<=0?0:a===n?(r-i)/s%6:a===r?2+(i-n)/s:4+(n-r)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?o/(1-s):0)]},i.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1,i=0;return(r=n<.5?2*e*n:2*e*(1-n))<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},i.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=e*n,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},i.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];var i,a=[0,0,0],o=e%1*6,s=o%1,u=1-s;switch(Math.floor(o)){case 0:a[0]=1,a[1]=s,a[2]=0;break;case 1:a[0]=u,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=s;break;case 3:a[0]=0,a[1]=u,a[2]=1;break;case 4:a[0]=s,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=u}return i=(1-n)*r,[255*(n*a[0]+i),255*(n*a[1]+i),255*(n*a[2]+i)]},i.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},i.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},i.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},i.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,r=n-e,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},i.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},i.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},i.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},i.gray.hsl=i.gray.hsv=function(t){return[0,0,t[0]]},i.gray.hwb=function(t){return[0,100,t[0]]},i.gray.cmyk=function(t){return[0,0,0,t[0]]},i.gray.lab=function(t){return[t[0],0,0]},i.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},i.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}}));function r(t){var e=function(){for(var t={},e=Object.keys(n),r=e.length,i=0;i<r;i++)t[e[i]]={distance:-1,parent:null};return t}(),r=[t];for(e[t].distance=0;r.length;)for(var i=r.pop(),a=Object.keys(n[i]),o=a.length,s=0;s<o;s++){var u=a[s],l=e[u];-1===l.distance&&(l.distance=e[i].distance+1,l.parent=i,r.unshift(u))}return e}function i(t,e){return function(n){return e(t(n))}}function a(t,e){for(var r=[e[t].parent,t],a=n[e[t].parent][t],o=e[t].parent;e[o].parent;)r.unshift(e[o].parent),a=i(n[e[o].parent][o],a),o=e[o].parent;return a.conversion=r,a}n.rgb,n.hsl,n.hsv,n.hwb,n.cmyk,n.xyz,n.lab,n.lch,n.hex,n.keyword,n.ansi16,n.ansi256,n.hcg,n.apple,n.gray;var o={};Object.keys(n).forEach((function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:n[t].channels}),Object.defineProperty(o[t],"labels",{value:n[t].labels});var e=function(t){for(var e=r(t),n={},i=Object.keys(e),o=i.length,s=0;s<o;s++){var u=i[s];null!==e[u].parent&&(n[u]=a(u,e))}return n}(t);Object.keys(e).forEach((function(n){var r=e[n];o[t][n]=function(t){var e=function(e){if(void 0===e||null===e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"===typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(r),o[t][n].raw=function(t){var e=function(e){return void 0===e||null===e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)}))}));var s=o,u={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},l={getRgba:c,getHsla:h,getRgb:function(t){var e=c(t);return e&&e.slice(0,3)},getHsl:function(t){var e=h(t);return e&&e.slice(0,3)},getHwb:f,getAlpha:function(t){var e=c(t);return e||(e=h(t))||(e=f(t))?e[3]:void 0},hexString:function(t,e){return e=void 0!==e&&3===t.length?e:t[3],"#"+y(t[0])+y(t[1])+y(t[2])+(e>=0&&e<1?y(Math.round(255*e)):"")},rgbString:function(t,e){return e<1||t[3]&&t[3]<1?p(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:p,percentString:function(t,e){if(e<1||t[3]&&t[3]<1)return d(t,e);var n=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),i=Math.round(t[2]/255*100);return"rgb("+n+"%, "+r+"%, "+i+"%)"},percentaString:d,hslString:function(t,e){return e<1||t[3]&&t[3]<1?g(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:g,hwbString:function(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return v[t.slice(0,3)]}};function c(t){if(t){var e=[0,0,0],n=1,r=t.match(/^#([a-fA-F0-9]{3,4})$/i),i="";if(r){i=(r=r[1])[3];for(var a=0;a<e.length;a++)e[a]=parseInt(r[a]+r[a],16);i&&(n=Math.round(parseInt(i+i,16)/255*100)/100)}else if(r=t.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(i=r[2],r=r[1],a=0;a<e.length;a++)e[a]=parseInt(r.slice(2*a,2*a+2),16);i&&(n=Math.round(parseInt(i,16)/255*100)/100)}else if(r=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<e.length;a++)e[a]=parseInt(r[a+1]);n=parseFloat(r[4])}else if(r=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<e.length;a++)e[a]=Math.round(2.55*parseFloat(r[a+1]));n=parseFloat(r[4])}else if(r=t.match(/(\w+)/)){if("transparent"==r[1])return[0,0,0,0];if(!(e=u[r[1]]))return}for(a=0;a<e.length;a++)e[a]=m(e[a],0,255);return n=n||0==n?m(n,0,1):1,e[3]=n,e}}function h(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[m(parseInt(e[1]),0,360),m(parseFloat(e[2]),0,100),m(parseFloat(e[3]),0,100),m(isNaN(n)?1:n,0,1)]}}}function f(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[m(parseInt(e[1]),0,360),m(parseFloat(e[2]),0,100),m(parseFloat(e[3]),0,100),m(isNaN(n)?1:n,0,1)]}}}function p(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function d(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function g(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function m(t,e,n){return Math.min(Math.max(e,t),n)}function y(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var v={};for(var x in u)v[u[x]]=x;var b=function t(e){return e instanceof t?e:this instanceof t?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"===typeof e?(n=l.getRgba(e))?this.setValues("rgb",n):(n=l.getHsla(e))?this.setValues("hsl",n):(n=l.getHwb(e))&&this.setValues("hwb",n):"object"===typeof e&&(void 0!==(n=e).r||void 0!==n.red?this.setValues("rgb",n):void 0!==n.l||void 0!==n.lightness?this.setValues("hsl",n):void 0!==n.v||void 0!==n.value?this.setValues("hsv",n):void 0!==n.w||void 0!==n.whiteness?this.setValues("hwb",n):void 0===n.c&&void 0===n.cyan||this.setValues("cmyk",n)))):new t(e);var n};(b.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return l.hexString(this.values.rgb)},rgbString:function(){return l.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return l.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return l.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return l.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return l.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return l.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return l.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,n=(e[0]+t)%360;return e[0]=n<0?360+n:n,this.setValues("hsl",e),this},mix:function(t,e){var n=t,r=void 0===e?.5:e,i=2*r-1,a=this.alpha()-n.alpha(),o=((i*a===-1?i:(i+a)/(1+i*a))+1)/2,s=1-o;return this.rgb(o*this.red()+s*n.red(),o*this.green()+s*n.green(),o*this.blue()+s*n.blue()).alpha(this.alpha()*r+n.alpha()*(1-r))},toJSON:function(){return this.rgb()},clone:function(){var t,e,n=new b,r=this.values,i=n.values;for(var a in r)r.hasOwnProperty(a)&&(t=r[a],"[object Array]"===(e={}.toString.call(t))?i[a]=t.slice(0):"[object Number]"===e?i[a]=t:console.error("unexpected color value:",t));return n}}).spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},b.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},b.prototype.getValues=function(t){for(var e=this.values,n={},r=0;r<t.length;r++)n[t.charAt(r)]=e[t][r];return 1!==e.alpha&&(n.a=e.alpha),n},b.prototype.setValues=function(t,e){var n,r,i=this.values,a=this.spaces,o=this.maxes,u=1;if(this.valid=!0,"alpha"===t)u=e;else if(e.length)i[t]=e.slice(0,t.length),u=e[t.length];else if(void 0!==e[t.charAt(0)]){for(n=0;n<t.length;n++)i[t][n]=e[t.charAt(n)];u=e.a}else if(void 0!==e[a[t][0]]){var l=a[t];for(n=0;n<t.length;n++)i[t][n]=e[l[n]];u=e.alpha}if(i.alpha=Math.max(0,Math.min(1,void 0===u?i.alpha:u)),"alpha"===t)return!1;for(n=0;n<t.length;n++)r=Math.max(0,Math.min(o[t][n],i[t][n])),i[t][n]=Math.round(r);for(var c in a)c!==t&&(i[c]=s[t][c](i[t]));return!0},b.prototype.setSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"===typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n),this)},b.prototype.setChannel=function(t,e,n){var r=this.values[t];return void 0===n?r[e]:(n===r[e]||(r[e]=n,this.setValues(t,r)),this)},"undefined"!==typeof window&&(window.Color=b);var w=b;function k(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}var _={noop:function(){},uid:function(){var t=0;return function(){return t++}}(),isNullOrUndef:function(t){return null===t||"undefined"===typeof t},isArray:function(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},isFinite:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return("number"===typeof t||t instanceof Number)&&isFinite(t)})),valueOrDefault:function(t,e){return"undefined"===typeof t?e:t},valueAtIndexOrDefault:function(t,e,n){return _.valueOrDefault(_.isArray(t)?t[e]:t,n)},callback:function(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)},each:function(t,e,n,r){var i,a,o;if(_.isArray(t))if(a=t.length,r)for(i=a-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<a;i++)e.call(n,t[i],i);else if(_.isObject(t))for(a=(o=Object.keys(t)).length,i=0;i<a;i++)e.call(n,t[o[i]],o[i])},arrayEquals:function(t,e){var n,r,i,a;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],a=e[n],i instanceof Array&&a instanceof Array){if(!_.arrayEquals(i,a))return!1}else if(i!==a)return!1;return!0},clone:function(t){if(_.isArray(t))return t.map(_.clone);if(_.isObject(t)){for(var e=Object.create(t),n=Object.keys(t),r=n.length,i=0;i<r;++i)e[n[i]]=_.clone(t[n[i]]);return e}return t},_merger:function(t,e,n,r){if(k(t)){var i=e[t],a=n[t];_.isObject(i)&&_.isObject(a)?_.merge(i,a,r):e[t]=_.clone(a)}},_mergerIf:function(t,e,n){if(k(t)){var r=e[t],i=n[t];_.isObject(r)&&_.isObject(i)?_.mergeIf(r,i):e.hasOwnProperty(t)||(e[t]=_.clone(i))}},merge:function(t,e,n){var r,i,a,o,s,u=_.isArray(e)?e:[e],l=u.length;if(!_.isObject(t))return t;for(r=(n=n||{}).merger||_._merger,i=0;i<l;++i)if(e=u[i],_.isObject(e))for(s=0,o=(a=Object.keys(e)).length;s<o;++s)r(a[s],t,e,n);return t},mergeIf:function(t,e){return _.merge(t,e,{merger:_._mergerIf})},extend:Object.assign||function(t){return _.merge(t,[].slice.call(arguments,1),{merger:function(t,e,n){e[t]=n[t]}})},inherits:function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},r=function(){this.constructor=n};return r.prototype=e.prototype,n.prototype=new r,n.extend=_.inherits,t&&_.extend(n.prototype,t),n.__super__=e.prototype,n},_deprecated:function(t,e,n,r){void 0!==e&&console.warn(t+': "'+n+'" is deprecated. Please use "'+r+'" instead')}},T=_;_.callCallback=_.callback,_.indexOf=function(t,e,n){return Array.prototype.indexOf.call(t,e,n)},_.getValueOrDefault=_.valueOrDefault,_.getValueAtIndexOrDefault=_.valueAtIndexOrDefault;var S={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,r=1;return 0===t?0:1===t?1:(n||(n=.3),r<1?(r=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n))},easeOutElastic:function(t){var e=1.70158,n=0,r=1;return 0===t?0:1===t?1:(n||(n=.3),r<1?(r=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,r=1;return 0===t?0:2===(t/=.5)?1:(n||(n=.45),r<1?(r=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-S.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*S.easeInBounce(2*t):.5*S.easeOutBounce(2*t-1)+.5}},E={effects:S};T.easingEffects=S;var A=Math.PI,L=A/180,D=2*A,C=A/2,I=A/4,M=2*A/3,O={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,n,r,i,a){if(a){var o=Math.min(a,i/2,r/2),s=e+o,u=n+o,l=e+r-o,c=n+i-o;t.moveTo(e,u),s<l&&u<c?(t.arc(s,u,o,-A,-C),t.arc(l,u,o,-C,0),t.arc(l,c,o,0,C),t.arc(s,c,o,C,A)):s<l?(t.moveTo(s,n),t.arc(l,u,o,-C,C),t.arc(s,u,o,C,A+C)):u<c?(t.arc(s,u,o,-A,0),t.arc(s,c,o,0,A)):t.arc(s,u,o,-A,A),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,r,i)},drawPoint:function(t,e,n,r,i,a){var o,s,u,l,c,h=(a||0)*L;if(e&&"object"===typeof e&&("[object HTMLImageElement]"===(o=e.toString())||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(r,i),t.rotate(h),t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),void t.restore();if(!(isNaN(n)||n<=0)){switch(t.beginPath(),e){default:t.arc(r,i,n,0,D),t.closePath();break;case"triangle":t.moveTo(r+Math.sin(h)*n,i-Math.cos(h)*n),h+=M,t.lineTo(r+Math.sin(h)*n,i-Math.cos(h)*n),h+=M,t.lineTo(r+Math.sin(h)*n,i-Math.cos(h)*n),t.closePath();break;case"rectRounded":l=n-(c=.516*n),s=Math.cos(h+I)*l,u=Math.sin(h+I)*l,t.arc(r-s,i-u,c,h-A,h-C),t.arc(r+u,i-s,c,h-C,h),t.arc(r+s,i+u,c,h,h+C),t.arc(r-u,i+s,c,h+C,h+A),t.closePath();break;case"rect":if(!a){l=Math.SQRT1_2*n,t.rect(r-l,i-l,2*l,2*l);break}h+=I;case"rectRot":s=Math.cos(h)*n,u=Math.sin(h)*n,t.moveTo(r-s,i-u),t.lineTo(r+u,i-s),t.lineTo(r+s,i+u),t.lineTo(r-u,i+s),t.closePath();break;case"crossRot":h+=I;case"cross":s=Math.cos(h)*n,u=Math.sin(h)*n,t.moveTo(r-s,i-u),t.lineTo(r+s,i+u),t.moveTo(r+u,i-s),t.lineTo(r-u,i+s);break;case"star":s=Math.cos(h)*n,u=Math.sin(h)*n,t.moveTo(r-s,i-u),t.lineTo(r+s,i+u),t.moveTo(r+u,i-s),t.lineTo(r-u,i+s),h+=I,s=Math.cos(h)*n,u=Math.sin(h)*n,t.moveTo(r-s,i-u),t.lineTo(r+s,i+u),t.moveTo(r+u,i-s),t.lineTo(r-u,i+s);break;case"line":s=Math.cos(h)*n,u=Math.sin(h)*n,t.moveTo(r-s,i-u),t.lineTo(r+s,i+u);break;case"dash":t.moveTo(r,i),t.lineTo(r+Math.cos(h)*n,i+Math.sin(h)*n)}t.fill(),t.stroke()}},_isPointInArea:function(t,e){return t.x>e.left-1e-6&&t.x<e.right+1e-6&&t.y>e.top-1e-6&&t.y<e.bottom+1e-6},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,n,r){var i=n.steppedLine;if(i){if("middle"===i){var a=(e.x+n.x)/2;t.lineTo(a,r?n.y:e.y),t.lineTo(a,r?e.y:n.y)}else"after"===i&&!r||"after"!==i&&r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}else n.tension?t.bezierCurveTo(r?e.controlPointPreviousX:e.controlPointNextX,r?e.controlPointPreviousY:e.controlPointNextY,r?n.controlPointNextX:n.controlPointPreviousX,r?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):t.lineTo(n.x,n.y)}},P=O;T.clear=O.clear,T.drawRoundedRectangle=function(t){t.beginPath(),O.roundedRect.apply(O,arguments)};var R={_set:function(t,e){return T.merge(this[t]||(this[t]={}),e)}};R._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var N=R,F=T.valueOrDefault,z={toLineHeight:function(t,e){var n=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,n,r,i;return T.isObject(t)?(e=+t.top||0,n=+t.right||0,r=+t.bottom||0,i=+t.left||0):e=n=r=i=+t||0,{top:e,right:n,bottom:r,left:i,height:e+r,width:i+n}},_parseFont:function(t){var e=N.global,n=F(t.fontSize,e.defaultFontSize),r={family:F(t.fontFamily,e.defaultFontFamily),lineHeight:T.options.toLineHeight(F(t.lineHeight,e.defaultLineHeight),n),size:n,style:F(t.fontStyle,e.defaultFontStyle),weight:null,string:""};return r.string=function(t){return!t||T.isNullOrUndef(t.size)||T.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r},resolve:function(t,e,n,r){var i,a,o,s=!0;for(i=0,a=t.length;i<a;++i)if(void 0!==(o=t[i])&&(void 0!==e&&"function"===typeof o&&(o=o(e),s=!1),void 0!==n&&T.isArray(o)&&(o=o[n],s=!1),void 0!==o))return r&&!s&&(r.cacheable=!1),o}},V={_factorize:function(t){var e,n=[],r=Math.sqrt(t);for(e=1;e<r;e++)t%e===0&&(n.push(e),n.push(t/e));return r===(0|r)&&n.push(r),n.sort((function(t,e){return t-e})).pop(),n},log10:Math.log10||function(t){var e=Math.log(t)*Math.LOG10E,n=Math.round(e);return t===Math.pow(10,n)?n:e}},j=V;T.log10=V.log10;var U=T,K=E,B=P,W=z,G=j,H={getRtlAdapter:function(t,e,n){return t?function(t,e){return{x:function(n){return t+t+e-n},setWidth:function(t){e=t},textAlign:function(t){return"center"===t?t:"right"===t?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}}(e,n):{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}},overrideTextDirection:function(t,e){var n,r;"ltr"!==e&&"rtl"!==e||(r=[(n=t.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)},restoreTextDirection:function(t){var e=t.prevTextDirection;void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}};U.easing=K,U.canvas=B,U.options=W,U.math=G,U.rtl=H;var Y=function(t){U.extend(this,t),this.initialize.apply(this,arguments)};U.extend(Y.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=U.extend({},t._model)),t._start={},t},transition:function(t){var e=this,n=e._model,r=e._start,i=e._view;return n&&1!==t?(i||(i=e._view={}),r||(r=e._start={}),function(t,e,n,r){var i,a,o,s,u,l,c,h,f,p=Object.keys(n);for(i=0,a=p.length;i<a;++i)if(l=n[o=p[i]],e.hasOwnProperty(o)||(e[o]=l),(s=e[o])!==l&&"_"!==o[0]){if(t.hasOwnProperty(o)||(t[o]=s),(c=typeof l)===typeof(u=t[o]))if("string"===c){if((h=w(u)).valid&&(f=w(l)).valid){e[o]=f.mix(h,r).rgbString();continue}}else if(U.isFinite(u)&&U.isFinite(l)){e[o]=u+(l-u)*r;continue}e[o]=l}}(r,i,n,t),e):(e._view=U.extend({},n),e._start=null,e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return U.isNumber(this._model.x)&&U.isNumber(this._model.y)}}),Y.extend=U.inherits;var q=Y,X=q.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),$=X;Object.defineProperty(X.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(X.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),N._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:U.noop,onComplete:U.noop}});var J={animations:[],request:null,addAnimation:function(t,e,n,r){var i,a,o=this.animations;for(e.chart=t,e.startTime=Date.now(),e.duration=n,r||(t.animating=!0),i=0,a=o.length;i<a;++i)if(o[i].chart===t)return void(o[i]=e);o.push(e),1===o.length&&this.requestAnimationFrame()},cancelAnimation:function(t){var e=U.findIndex(this.animations,(function(e){return e.chart===t}));-1!==e&&(this.animations.splice(e,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=U.requestAnimFrame.call(window,(function(){t.request=null,t.startDigest()})))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var t,e,n,r,i=this.animations,a=0;a<i.length;)e=(t=i[a]).chart,n=t.numSteps,r=Math.floor((Date.now()-t.startTime)/t.duration*n)+1,t.currentStep=Math.min(r,n),U.callback(t.render,[e,t],e),U.callback(t.onAnimationProgress,[t],e),t.currentStep>=n?(U.callback(t.onAnimationComplete,[t],e),e.animating=!1,i.splice(a,1)):++a}},Z=U.options.resolve,Q=["push","pop","shift","splice","unshift"];function tt(t,e){var n=t._chartjs;if(n){var r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(Q.forEach((function(e){delete t[e]})),delete t._chartjs)}}var et=function(t,e){this.initialize(t,e)};U.extend(et.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,e){var n=this;n.chart=t,n.index=e,n.linkScales(),n.addElements(),n._type=n.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this.getMeta(),e=this.chart,n=e.scales,r=this.getDataset(),i=e.options.scales;null!==t.xAxisID&&t.xAxisID in n&&!r.xAxisID||(t.xAxisID=r.xAxisID||i.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in n&&!r.yAxisID||(t.yAxisID=r.yAxisID||i.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&tt(this._data,this)},createMetaDataset:function(){var t=this.datasetElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(t){var e=this.dataElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index,_index:t})},addElements:function(){var t,e,n=this.getMeta(),r=this.getDataset().data||[],i=n.data;for(t=0,e=r.length;t<e;++t)i[t]=i[t]||this.createMetaData(t);n.dataset=n.dataset||this.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t,e,n=this,r=n.getDataset(),i=r.data||(r.data=[]);n._data!==i&&(n._data&&tt(n._data,n),i&&Object.isExtensible(i)&&(e=n,(t=i)._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Q.forEach((function(e){var n="onData"+e.charAt(0).toUpperCase()+e.slice(1),r=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),i=r.apply(this,e);return U.each(t._chartjs.listeners,(function(t){"function"===typeof t[n]&&t[n].apply(t,e)})),i}})})))),n._data=i),n.resyncElements()},_configure:function(){this._config=U.merge(Object.create(null),[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(t,e,n){"_meta"!==t&&"data"!==t&&U._merger(t,e,n)}})},_update:function(t){this._configure(),this._cachedDataOpts=null,this.update(t)},update:U.noop,transition:function(t){for(var e=this.getMeta(),n=e.data||[],r=n.length,i=0;i<r;++i)n[i].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],n=e.length,r=0;for(t.dataset&&t.dataset.draw();r<n;++r)e[r].draw()},getStyle:function(t){var e,n=this.getMeta(),r=n.dataset;return this._configure(),r&&void 0===t?e=this._resolveDatasetElementOptions(r||{}):(t=t||0,e=this._resolveDataElementOptions(n.data[t]||{},t)),!1!==e.fill&&null!==e.fill||(e.backgroundColor=e.borderColor),e},_resolveDatasetElementOptions:function(t,e){var n,r,i,a,o=this,s=o.chart,u=o._config,l=t.custom||{},c=s.options.elements[o.datasetElementType.prototype._type]||{},h=o._datasetElementOptions,f={},p={chart:s,dataset:o.getDataset(),datasetIndex:o.index,hover:e};for(n=0,r=h.length;n<r;++n)i=h[n],a=e?"hover"+i.charAt(0).toUpperCase()+i.slice(1):i,f[i]=Z([l[a],u[a],c[a]],p);return f},_resolveDataElementOptions:function(t,e){var n=this,r=t&&t.custom,i=n._cachedDataOpts;if(i&&!r)return i;var a,o,s,u,l=n.chart,c=n._config,h=l.options.elements[n.dataElementType.prototype._type]||{},f=n._dataElementOptions,p={},d={chart:l,dataIndex:e,dataset:n.getDataset(),datasetIndex:n.index},g={cacheable:!r};if(r=r||{},U.isArray(f))for(o=0,s=f.length;o<s;++o)p[u=f[o]]=Z([r[u],c[u],h[u]],d,e,g);else for(o=0,s=(a=Object.keys(f)).length;o<s;++o)p[u=a[o]]=Z([r[u],c[f[u]],c[u],h[u]],d,e,g);return g.cacheable&&(n._cachedDataOpts=Object.freeze(p)),p},removeHoverStyle:function(t){U.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],n=t._index,r=t.custom||{},i=t._model,a=U.getHoverColor;t.$previousStyle={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:i.borderWidth},i.backgroundColor=Z([r.hoverBackgroundColor,e.hoverBackgroundColor,a(i.backgroundColor)],void 0,n),i.borderColor=Z([r.hoverBorderColor,e.hoverBorderColor,a(i.borderColor)],void 0,n),i.borderWidth=Z([r.hoverBorderWidth,e.hoverBorderWidth,i.borderWidth],void 0,n)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;t&&this.removeHoverStyle(t)},_setDatasetHoverStyle:function(){var t,e,n,r,i,a,o=this.getMeta().dataset,s={};if(o){for(a=o._model,i=this._resolveDatasetElementOptions(o,!0),t=0,e=(r=Object.keys(i)).length;t<e;++t)s[n=r[t]]=a[n],a[n]=i[n];o.$previousStyle=s}},resyncElements:function(){var t=this.getMeta(),e=this.getDataset().data,n=t.data.length,r=e.length;r<n?t.data.splice(r,n-r):r>n&&this.insertElements(n,r-n)},insertElements:function(t,e){for(var n=0;n<e;++n)this.addElementAndReset(t+n)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),et.extend=U.inherits;var nt=et,rt=2*Math.PI;function it(t,e){var n=e.startAngle,r=e.endAngle,i=e.pixelMargin,a=i/e.outerRadius,o=e.x,s=e.y;t.beginPath(),t.arc(o,s,e.outerRadius,n-a,r+a),e.innerRadius>i?(a=i/e.innerRadius,t.arc(o,s,e.innerRadius-i,r+a,n-a,!0)):t.arc(o,s,i,r+Math.PI/2,n-Math.PI/2),t.closePath(),t.clip()}function at(t,e,n){var r="inner"===e.borderAlign;r?(t.lineWidth=2*e.borderWidth,t.lineJoin="round"):(t.lineWidth=e.borderWidth,t.lineJoin="bevel"),n.fullCircles&&function(t,e,n,r){var i,a=n.endAngle;for(r&&(n.endAngle=n.startAngle+rt,it(t,n),n.endAngle=a,n.endAngle===n.startAngle&&n.fullCircles&&(n.endAngle+=rt,n.fullCircles--)),t.beginPath(),t.arc(n.x,n.y,n.innerRadius,n.startAngle+rt,n.startAngle,!0),i=0;i<n.fullCircles;++i)t.stroke();for(t.beginPath(),t.arc(n.x,n.y,e.outerRadius,n.startAngle,n.startAngle+rt),i=0;i<n.fullCircles;++i)t.stroke()}(t,e,n,r),r&&it(t,n),t.beginPath(),t.arc(n.x,n.y,e.outerRadius,n.startAngle,n.endAngle),t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),t.closePath(),t.stroke()}N._set("global",{elements:{arc:{backgroundColor:N.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var ot=q.extend({_type:"arc",inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var n=this._view;if(n){for(var r=U.getAngleFromPoint(n,{x:t,y:e}),i=r.angle,a=r.distance,o=n.startAngle,s=n.endAngle;s<o;)s+=rt;for(;i>s;)i-=rt;for(;i<o;)i+=rt;var u=i>=o&&i<=s,l=a>=n.innerRadius&&a<=n.outerRadius;return u&&l}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,n=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,n=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},draw:function(){var t,e=this._chart.ctx,n=this._view,r="inner"===n.borderAlign?.33:0,i={x:n.x,y:n.y,innerRadius:n.innerRadius,outerRadius:Math.max(n.outerRadius-r,0),pixelMargin:r,startAngle:n.startAngle,endAngle:n.endAngle,fullCircles:Math.floor(n.circumference/rt)};if(e.save(),e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,i.fullCircles){for(i.endAngle=i.startAngle+rt,e.beginPath(),e.arc(i.x,i.y,i.outerRadius,i.startAngle,i.endAngle),e.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,!0),e.closePath(),t=0;t<i.fullCircles;++t)e.fill();i.endAngle=i.startAngle+n.circumference%rt}e.beginPath(),e.arc(i.x,i.y,i.outerRadius,i.startAngle,i.endAngle),e.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,!0),e.closePath(),e.fill(),n.borderWidth&&at(e,n,i),e.restore()}}),st=U.valueOrDefault,ut=N.global.defaultColor;N._set("global",{elements:{line:{tension:.4,backgroundColor:ut,borderWidth:3,borderColor:ut,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var lt=q.extend({_type:"line",draw:function(){var t,e,n,r=this,i=r._view,a=r._chart.ctx,o=i.spanGaps,s=r._children.slice(),u=N.global,l=u.elements.line,c=-1,h=r._loop;if(s.length){if(r._loop){for(t=0;t<s.length;++t)if(e=U.previousItem(s,t),!s[t]._view.skip&&e._view.skip){s=s.slice(t).concat(s.slice(0,t)),h=o;break}h&&s.push(s[0])}for(a.save(),a.lineCap=i.borderCapStyle||l.borderCapStyle,a.setLineDash&&a.setLineDash(i.borderDash||l.borderDash),a.lineDashOffset=st(i.borderDashOffset,l.borderDashOffset),a.lineJoin=i.borderJoinStyle||l.borderJoinStyle,a.lineWidth=st(i.borderWidth,l.borderWidth),a.strokeStyle=i.borderColor||u.defaultColor,a.beginPath(),(n=s[0]._view).skip||(a.moveTo(n.x,n.y),c=0),t=1;t<s.length;++t)n=s[t]._view,e=-1===c?U.previousItem(s,t):s[c],n.skip||(c!==t-1&&!o||-1===c?a.moveTo(n.x,n.y):U.canvas.lineTo(a,e._view,n),c=t);h&&a.closePath(),a.stroke(),a.restore()}}}),ct=U.valueOrDefault,ht=N.global.defaultColor;function ft(t){var e=this._view;return!!e&&Math.abs(t-e.x)<e.radius+e.hitRadius}N._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:ht,borderColor:ht,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var pt=q.extend({_type:"point",inRange:function(t,e){var n=this._view;return!!n&&Math.pow(t-n.x,2)+Math.pow(e-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:ft,inXRange:ft,inYRange:function(t){var e=this._view;return!!e&&Math.abs(t-e.y)<e.radius+e.hitRadius},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,n=this._chart.ctx,r=e.pointStyle,i=e.rotation,a=e.radius,o=e.x,s=e.y,u=N.global,l=u.defaultColor;e.skip||(void 0===t||U.canvas._isPointInArea(e,t))&&(n.strokeStyle=e.borderColor||l,n.lineWidth=ct(e.borderWidth,u.elements.point.borderWidth),n.fillStyle=e.backgroundColor||l,U.canvas.drawPoint(n,r,a,o,s,i))}}),dt=N.global.defaultColor;function gt(t){return t&&void 0!==t.width}function mt(t){var e,n,r,i,a;return gt(t)?(a=t.width/2,e=t.x-a,n=t.x+a,r=Math.min(t.y,t.base),i=Math.max(t.y,t.base)):(a=t.height/2,e=Math.min(t.x,t.base),n=Math.max(t.x,t.base),r=t.y-a,i=t.y+a),{left:e,top:r,right:n,bottom:i}}function yt(t,e,n){return t===e?n:t===n?e:t}function vt(t,e,n){var r,i,a,o,s=t.borderWidth,u=function(t){var e=t.borderSkipped,n={};return e?(t.horizontal?t.base>t.x&&(e=yt(e,"left","right")):t.base<t.y&&(e=yt(e,"bottom","top")),n[e]=!0,n):n}(t);return U.isObject(s)?(r=+s.top||0,i=+s.right||0,a=+s.bottom||0,o=+s.left||0):r=i=a=o=+s||0,{t:u.top||r<0?0:r>n?n:r,r:u.right||i<0?0:i>e?e:i,b:u.bottom||a<0?0:a>n?n:a,l:u.left||o<0?0:o>e?e:o}}function xt(t,e,n){var r=null===e,i=null===n,a=!(!t||r&&i)&&mt(t);return a&&(r||e>=a.left&&e<=a.right)&&(i||n>=a.top&&n<=a.bottom)}N._set("global",{elements:{rectangle:{backgroundColor:dt,borderColor:dt,borderSkipped:"bottom",borderWidth:0}}});var bt=q.extend({_type:"rectangle",draw:function(){var t=this._chart.ctx,e=this._view,n=function(t){var e=mt(t),n=e.right-e.left,r=e.bottom-e.top,i=vt(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b}}}(e),r=n.outer,i=n.inner;t.fillStyle=e.backgroundColor,t.fillRect(r.x,r.y,r.w,r.h),r.w===i.w&&r.h===i.h||(t.save(),t.beginPath(),t.rect(r.x,r.y,r.w,r.h),t.clip(),t.fillStyle=e.borderColor,t.rect(i.x,i.y,i.w,i.h),t.fill("evenodd"),t.restore())},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return xt(this._view,t,e)},inLabelRange:function(t,e){var n=this._view;return gt(n)?xt(n,t,null):xt(n,null,e)},inXRange:function(t){return xt(this._view,t,null)},inYRange:function(t){return xt(this._view,null,t)},getCenterPoint:function(){var t,e,n=this._view;return gt(n)?(t=n.x,e=(n.y+n.base)/2):(t=(n.x+n.base)/2,e=n.y),{x:t,y:e}},getArea:function(){var t=this._view;return gt(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),wt={},kt=ot,_t=lt,Tt=pt,St=bt;wt.Arc=kt,wt.Line=_t,wt.Point=Tt,wt.Rectangle=St;var Et=U._deprecated,At=U.valueOrDefault;function Lt(t,e,n){var r,i,a=n.barThickness,o=e.stackCount,s=e.pixels[t],u=U.isNullOrUndef(a)?function(t,e){var n,r,i,a,o=t._length;for(i=1,a=e.length;i<a;++i)o=Math.min(o,Math.abs(e[i]-e[i-1]));for(i=0,a=t.getTicks().length;i<a;++i)r=t.getPixelForTick(i),o=i>0?Math.min(o,Math.abs(r-n)):o,n=r;return o}(e.scale,e.pixels):-1;return U.isNullOrUndef(a)?(r=u*n.categoryPercentage,i=n.barPercentage):(r=a*o,i=1),{chunk:r/o,ratio:i,start:s-r/2}}N._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),N._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var Dt=nt.extend({dataElementType:wt.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t,e,n=this;nt.prototype.initialize.apply(n,arguments),(t=n.getMeta()).stack=n.getDataset().stack,t.bar=!0,e=n._getIndexScale().options,Et("bar chart",e.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Et("bar chart",e.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Et("bar chart",e.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Et("bar chart",n._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Et("bar chart",e.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var e,n,r=this.getMeta().data;for(this._ruler=this.getRuler(),e=0,n=r.length;e<n;++e)this.updateElement(r[e],e,t)},updateElement:function(t,e,n){var r=this,i=r.getMeta(),a=r.getDataset(),o=r._resolveDataElementOptions(t,e);t._xScale=r.getScaleForId(i.xAxisID),t._yScale=r.getScaleForId(i.yAxisID),t._datasetIndex=r.index,t._index=e,t._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:a.label,label:r.chart.data.labels[e]},U.isArray(a.data[e])&&(t._model.borderSkipped=null),r._updateElementGeometry(t,e,n,o),t.pivot()},_updateElementGeometry:function(t,e,n,r){var i=this,a=t._model,o=i._getValueScale(),s=o.getBasePixel(),u=o.isHorizontal(),l=i._ruler||i.getRuler(),c=i.calculateBarValuePixels(i.index,e,r),h=i.calculateBarIndexPixels(i.index,e,l,r);a.horizontal=u,a.base=n?s:c.base,a.x=u?n?s:c.head:h.center,a.y=u?h.center:n?s:c.head,a.height=u?h.size:void 0,a.width=u?void 0:h.size},_getStacks:function(t){var e,n,r=this._getIndexScale(),i=r._getMatchingVisibleMetas(this._type),a=r.options.stacked,o=i.length,s=[];for(e=0;e<o&&(n=i[e],(!1===a||-1===s.indexOf(n.stack)||void 0===a&&void 0===n.stack)&&s.push(n.stack),n.index!==t);++e);return s},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var n=this._getStacks(t),r=void 0!==e?n.indexOf(e):-1;return-1===r?n.length-1:r},getRuler:function(){var t,e,n=this._getIndexScale(),r=[];for(t=0,e=this.getMeta().data.length;t<e;++t)r.push(n.getPixelForValue(null,t,this.index));return{pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this.getStackCount(),scale:n}},calculateBarValuePixels:function(t,e,n){var r,i,a,o,s,u,l,c=this.chart,h=this._getValueScale(),f=h.isHorizontal(),p=c.data.datasets,d=h._getMatchingVisibleMetas(this._type),g=h._parseValue(p[t].data[e]),m=n.minBarLength,y=h.options.stacked,v=this.getMeta().stack,x=void 0===g.start?0:g.max>=0&&g.min>=0?g.min:g.max,b=void 0===g.start?g.end:g.max>=0&&g.min>=0?g.max-g.min:g.min-g.max,w=d.length;if(y||void 0===y&&void 0!==v)for(r=0;r<w&&(i=d[r]).index!==t;++r)i.stack===v&&(a=void 0===(l=h._parseValue(p[i.index].data[e])).start?l.end:l.min>=0&&l.max>=0?l.max:l.min,(g.min<0&&a<0||g.max>=0&&a>0)&&(x+=a));return o=h.getPixelForValue(x),u=(s=h.getPixelForValue(x+b))-o,void 0!==m&&Math.abs(u)<m&&(u=m,s=b>=0&&!f||b<0&&f?o-m:o+m),{size:u,base:o,head:s,center:s+u/2}},calculateBarIndexPixels:function(t,e,n,r){var i="flex"===r.barThickness?function(t,e,n){var r,i=e.pixels,a=i[t],o=t>0?i[t-1]:null,s=t<i.length-1?i[t+1]:null,u=n.categoryPercentage;return null===o&&(o=a-(null===s?e.end-e.start:s-a)),null===s&&(s=a+a-o),r=a-(a-Math.min(o,s))/2*u,{chunk:Math.abs(s-o)/2*u/e.stackCount,ratio:n.barPercentage,start:r}}(e,n,r):Lt(e,n,r),a=this.getStackIndex(t,this.getMeta().stack),o=i.start+i.chunk*a+i.chunk/2,s=Math.min(At(r.maxBarThickness,1/0),i.chunk*i.ratio);return{base:o-s/2,head:o+s/2,center:o,size:s}},draw:function(){var t=this.chart,e=this._getValueScale(),n=this.getMeta().data,r=this.getDataset(),i=n.length,a=0;for(U.canvas.clipArea(t.ctx,t.chartArea);a<i;++a){var o=e._parseValue(r.data[a]);isNaN(o.min)||isNaN(o.max)||n[a].draw()}U.canvas.unclipArea(t.ctx)},_resolveDataElementOptions:function(){var t=this,e=U.extend({},nt.prototype._resolveDataElementOptions.apply(t,arguments)),n=t._getIndexScale().options,r=t._getValueScale().options;return e.barPercentage=At(n.barPercentage,e.barPercentage),e.barThickness=At(n.barThickness,e.barThickness),e.categoryPercentage=At(n.categoryPercentage,e.categoryPercentage),e.maxBarThickness=At(n.maxBarThickness,e.maxBarThickness),e.minBarLength=At(r.minBarLength,e.minBarLength),e}}),Ct=U.valueOrDefault,It=U.options.resolve;N._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.datasets[t.datasetIndex].label||"",r=e.datasets[t.datasetIndex].data[t.index];return n+": ("+t.xLabel+", "+t.yLabel+", "+r.r+")"}}}});var Mt=nt.extend({dataElementType:wt.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(t){var e=this,n=e.getMeta().data;U.each(n,(function(n,r){e.updateElement(n,r,t)}))},updateElement:function(t,e,n){var r=this,i=r.getMeta(),a=t.custom||{},o=r.getScaleForId(i.xAxisID),s=r.getScaleForId(i.yAxisID),u=r._resolveDataElementOptions(t,e),l=r.getDataset().data[e],c=r.index,h=n?o.getPixelForDecimal(.5):o.getPixelForValue("object"===typeof l?l:NaN,e,c),f=n?s.getBasePixel():s.getPixelForValue(l,e,c);t._xScale=o,t._yScale=s,t._options=u,t._datasetIndex=c,t._index=e,t._model={backgroundColor:u.backgroundColor,borderColor:u.borderColor,borderWidth:u.borderWidth,hitRadius:u.hitRadius,pointStyle:u.pointStyle,rotation:u.rotation,radius:n?0:u.radius,skip:a.skip||isNaN(h)||isNaN(f),x:h,y:f},t.pivot()},setHoverStyle:function(t){var e=t._model,n=t._options,r=U.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Ct(n.hoverBackgroundColor,r(n.backgroundColor)),e.borderColor=Ct(n.hoverBorderColor,r(n.borderColor)),e.borderWidth=Ct(n.hoverBorderWidth,n.borderWidth),e.radius=n.radius+n.hoverRadius},_resolveDataElementOptions:function(t,e){var n=this,r=n.chart,i=n.getDataset(),a=t.custom||{},o=i.data[e]||{},s=nt.prototype._resolveDataElementOptions.apply(n,arguments),u={chart:r,dataIndex:e,dataset:i,datasetIndex:n.index};return n._cachedDataOpts===s&&(s=U.extend({},s)),s.radius=It([a.radius,o.r,n._config.radius,r.options.elements.point.radius],u,e),s}}),Ot=U.valueOrDefault,Pt=Math.PI,Rt=2*Pt,Nt=Pt/2;N._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e,n,r,i=document.createElement("ul"),a=t.data,o=a.datasets,s=a.labels;if(i.setAttribute("class",t.id+"-legend"),o.length)for(e=0,n=o[0].data.length;e<n;++e)(r=i.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[0].backgroundColor[e],s[e]&&r.appendChild(document.createTextNode(s[e]));return i.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(n,r){var i=t.getDatasetMeta(0),a=i.controller.getStyle(r);return{text:n,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,hidden:isNaN(e.datasets[0].data[r])||i.data[r].hidden,index:r}})):[]}},onClick:function(t,e){var n,r,i,a=e.index,o=this.chart;for(n=0,r=(o.data.datasets||[]).length;n<r;++n)(i=o.getDatasetMeta(n)).data[a]&&(i.data[a].hidden=!i.data[a].hidden);o.update()}},cutoutPercentage:50,rotation:-Nt,circumference:Rt,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.labels[t.index],r=": "+e.datasets[t.datasetIndex].data[t.index];return U.isArray(n)?(n=n.slice())[0]+=r:n+=r,n}}}});var Ft=nt.extend({dataElementType:wt.Arc,linkScales:U.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&++e;return e},update:function(t){var e,n,r,i,a=this,o=a.chart,s=o.chartArea,u=o.options,l=1,c=1,h=0,f=0,p=a.getMeta(),d=p.data,g=u.cutoutPercentage/100||0,m=u.circumference,y=a._getRingWeight(a.index);if(m<Rt){var v=u.rotation%Rt,x=(v+=v>=Pt?-Rt:v<-Pt?Rt:0)+m,b=Math.cos(v),w=Math.sin(v),k=Math.cos(x),_=Math.sin(x),T=v<=0&&x>=0||x>=Rt,S=v<=Nt&&x>=Nt||x>=Rt+Nt,E=v<=-Nt&&x>=-Nt||x>=Pt+Nt,A=v===-Pt||x>=Pt?-1:Math.min(b,b*g,k,k*g),L=E?-1:Math.min(w,w*g,_,_*g),D=T?1:Math.max(b,b*g,k,k*g),C=S?1:Math.max(w,w*g,_,_*g);l=(D-A)/2,c=(C-L)/2,h=-(D+A)/2,f=-(C+L)/2}for(r=0,i=d.length;r<i;++r)d[r]._options=a._resolveDataElementOptions(d[r],r);for(o.borderWidth=a.getMaxBorderWidth(),e=(s.right-s.left-o.borderWidth)/l,n=(s.bottom-s.top-o.borderWidth)/c,o.outerRadius=Math.max(Math.min(e,n)/2,0),o.innerRadius=Math.max(o.outerRadius*g,0),o.radiusLength=(o.outerRadius-o.innerRadius)/(a._getVisibleDatasetWeightTotal()||1),o.offsetX=h*o.outerRadius,o.offsetY=f*o.outerRadius,p.total=a.calculateTotal(),a.outerRadius=o.outerRadius-o.radiusLength*a._getRingWeightOffset(a.index),a.innerRadius=Math.max(a.outerRadius-o.radiusLength*y,0),r=0,i=d.length;r<i;++r)a.updateElement(d[r],r,t)},updateElement:function(t,e,n){var r=this,i=r.chart,a=i.chartArea,o=i.options,s=o.animation,u=(a.left+a.right)/2,l=(a.top+a.bottom)/2,c=o.rotation,h=o.rotation,f=r.getDataset(),p=n&&s.animateRotate||t.hidden?0:r.calculateCircumference(f.data[e])*(o.circumference/Rt),d=n&&s.animateScale?0:r.innerRadius,g=n&&s.animateScale?0:r.outerRadius,m=t._options||{};U.extend(t,{_datasetIndex:r.index,_index:e,_model:{backgroundColor:m.backgroundColor,borderColor:m.borderColor,borderWidth:m.borderWidth,borderAlign:m.borderAlign,x:u+i.offsetX,y:l+i.offsetY,startAngle:c,endAngle:h,circumference:p,outerRadius:g,innerRadius:d,label:U.valueAtIndexOrDefault(f.label,e,i.data.labels[e])}});var y=t._model;n&&s.animateRotate||(y.startAngle=0===e?o.rotation:r.getMeta().data[e-1]._model.endAngle,y.endAngle=y.startAngle+y.circumference),t.pivot()},calculateTotal:function(){var t,e=this.getDataset(),n=this.getMeta(),r=0;return U.each(n.data,(function(n,i){t=e.data[i],isNaN(t)||n.hidden||(r+=Math.abs(t))})),r},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?Rt*(Math.abs(t)/e):0},getMaxBorderWidth:function(t){var e,n,r,i,a,o,s,u,l=0,c=this.chart;if(!t)for(e=0,n=c.data.datasets.length;e<n;++e)if(c.isDatasetVisible(e)){t=(r=c.getDatasetMeta(e)).data,e!==this.index&&(a=r.controller);break}if(!t)return 0;for(e=0,n=t.length;e<n;++e)i=t[e],a?(a._configure(),o=a._resolveDataElementOptions(i,e)):o=i._options,"inner"!==o.borderAlign&&(s=o.borderWidth,l=(u=o.hoverBorderWidth)>(l=s>l?s:l)?u:l);return l},setHoverStyle:function(t){var e=t._model,n=t._options,r=U.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=Ot(n.hoverBackgroundColor,r(n.backgroundColor)),e.borderColor=Ot(n.hoverBorderColor,r(n.borderColor)),e.borderWidth=Ot(n.hoverBorderWidth,n.borderWidth)},_getRingWeightOffset:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e},_getRingWeight:function(t){return Math.max(Ot(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});N._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),N._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var zt=Dt.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Vt=U.valueOrDefault,jt=U.options.resolve,Ut=U.canvas._isPointInArea;function Kt(t,e){var n=t&&t.options.ticks||{},r=n.reverse,i=void 0===n.min?e:0,a=void 0===n.max?e:0;return{start:r?a:i,end:r?i:a}}function Bt(t,e,n){var r=n/2,i=Kt(t,r),a=Kt(e,r);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function Wt(t){var e,n,r,i;return U.isObject(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i}}N._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var Gt=nt.extend({datasetElementType:wt.Line,dataElementType:wt.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var e,n,r=this,i=r.getMeta(),a=i.dataset,o=i.data||[],s=r.chart.options,u=r._config,l=r._showLine=Vt(u.showLine,s.showLines);for(r._xScale=r.getScaleForId(i.xAxisID),r._yScale=r.getScaleForId(i.yAxisID),l&&(void 0!==u.tension&&void 0===u.lineTension&&(u.lineTension=u.tension),a._scale=r._yScale,a._datasetIndex=r.index,a._children=o,a._model=r._resolveDatasetElementOptions(a),a.pivot()),e=0,n=o.length;e<n;++e)r.updateElement(o[e],e,t);for(l&&0!==a._model.tension&&r.updateBezierControlPoints(),e=0,n=o.length;e<n;++e)o[e].pivot()},updateElement:function(t,e,n){var r,i,a=this,o=a.getMeta(),s=t.custom||{},u=a.getDataset(),l=a.index,c=u.data[e],h=a._xScale,f=a._yScale,p=o.dataset._model,d=a._resolveDataElementOptions(t,e);r=h.getPixelForValue("object"===typeof c?c:NaN,e,l),i=n?f.getBasePixel():a.calculatePointY(c,e,l),t._xScale=h,t._yScale=f,t._options=d,t._datasetIndex=l,t._index=e,t._model={x:r,y:i,skip:s.skip||isNaN(r)||isNaN(i),radius:d.radius,pointStyle:d.pointStyle,rotation:d.rotation,backgroundColor:d.backgroundColor,borderColor:d.borderColor,borderWidth:d.borderWidth,tension:Vt(s.tension,p?p.tension:0),steppedLine:!!p&&p.steppedLine,hitRadius:d.hitRadius}},_resolveDatasetElementOptions:function(t){var e=this,n=e._config,r=t.custom||{},i=e.chart.options,a=i.elements.line,o=nt.prototype._resolveDatasetElementOptions.apply(e,arguments);return o.spanGaps=Vt(n.spanGaps,i.spanGaps),o.tension=Vt(n.lineTension,a.tension),o.steppedLine=jt([r.steppedLine,n.steppedLine,a.stepped]),o.clip=Wt(Vt(n.clip,Bt(e._xScale,e._yScale,o.borderWidth))),o},calculatePointY:function(t,e,n){var r,i,a,o,s,u,l,c=this.chart,h=this._yScale,f=0,p=0;if(h.options.stacked){for(s=+h.getRightValue(t),l=(u=c._getSortedVisibleDatasetMetas()).length,r=0;r<l&&(a=u[r]).index!==n;++r)i=c.data.datasets[a.index],"line"===a.type&&a.yAxisID===h.id&&((o=+h.getRightValue(i.data[e]))<0?p+=o||0:f+=o||0);return s<0?h.getPixelForValue(p+s):h.getPixelForValue(f+s)}return h.getPixelForValue(t)},updateBezierControlPoints:function(){var t,e,n,r,i=this.chart,a=this.getMeta(),o=a.dataset._model,s=i.chartArea,u=a.data||[];function l(t,e,n){return Math.max(Math.min(t,n),e)}if(o.spanGaps&&(u=u.filter((function(t){return!t._model.skip}))),"monotone"===o.cubicInterpolationMode)U.splineCurveMonotone(u);else for(t=0,e=u.length;t<e;++t)n=u[t]._model,r=U.splineCurve(U.previousItem(u,t)._model,n,U.nextItem(u,t)._model,o.tension),n.controlPointPreviousX=r.previous.x,n.controlPointPreviousY=r.previous.y,n.controlPointNextX=r.next.x,n.controlPointNextY=r.next.y;if(i.options.elements.line.capBezierPoints)for(t=0,e=u.length;t<e;++t)n=u[t]._model,Ut(n,s)&&(t>0&&Ut(u[t-1]._model,s)&&(n.controlPointPreviousX=l(n.controlPointPreviousX,s.left,s.right),n.controlPointPreviousY=l(n.controlPointPreviousY,s.top,s.bottom)),t<u.length-1&&Ut(u[t+1]._model,s)&&(n.controlPointNextX=l(n.controlPointNextX,s.left,s.right),n.controlPointNextY=l(n.controlPointNextY,s.top,s.bottom)))},draw:function(){var t,e=this.chart,n=this.getMeta(),r=n.data||[],i=e.chartArea,a=e.canvas,o=0,s=r.length;for(this._showLine&&(t=n.dataset._model.clip,U.canvas.clipArea(e.ctx,{left:!1===t.left?0:i.left-t.left,right:!1===t.right?a.width:i.right+t.right,top:!1===t.top?0:i.top-t.top,bottom:!1===t.bottom?a.height:i.bottom+t.bottom}),n.dataset.draw(),U.canvas.unclipArea(e.ctx));o<s;++o)r[o].draw(i)},setHoverStyle:function(t){var e=t._model,n=t._options,r=U.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Vt(n.hoverBackgroundColor,r(n.backgroundColor)),e.borderColor=Vt(n.hoverBorderColor,r(n.borderColor)),e.borderWidth=Vt(n.hoverBorderWidth,n.borderWidth),e.radius=Vt(n.hoverRadius,n.radius)}}),Ht=U.options.resolve;N._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e,n,r,i=document.createElement("ul"),a=t.data,o=a.datasets,s=a.labels;if(i.setAttribute("class",t.id+"-legend"),o.length)for(e=0,n=o[0].data.length;e<n;++e)(r=i.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[0].backgroundColor[e],s[e]&&r.appendChild(document.createTextNode(s[e]));return i.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(n,r){var i=t.getDatasetMeta(0),a=i.controller.getStyle(r);return{text:n,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,hidden:isNaN(e.datasets[0].data[r])||i.data[r].hidden,index:r}})):[]}},onClick:function(t,e){var n,r,i,a=e.index,o=this.chart;for(n=0,r=(o.data.datasets||[]).length;n<r;++n)(i=o.getDatasetMeta(n)).data[a].hidden=!i.data[a].hidden;o.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var Yt=nt.extend({dataElementType:wt.Arc,linkScales:U.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,n,r,i=this,a=i.getDataset(),o=i.getMeta(),s=i.chart.options.startAngle||0,u=i._starts=[],l=i._angles=[],c=o.data;for(i._updateRadius(),o.count=i.countVisibleElements(),e=0,n=a.data.length;e<n;e++)u[e]=s,r=i._computeAngle(e),l[e]=r,s+=r;for(e=0,n=c.length;e<n;++e)c[e]._options=i._resolveDataElementOptions(c[e],e),i.updateElement(c[e],e,t)},_updateRadius:function(){var t=this,e=t.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top);e.outerRadius=Math.max(i/2,0),e.innerRadius=Math.max(r.cutoutPercentage?e.outerRadius/100*r.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),t.outerRadius=e.outerRadius-e.radiusLength*t.index,t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,n){var r=this,i=r.chart,a=r.getDataset(),o=i.options,s=o.animation,u=i.scale,l=i.data.labels,c=u.xCenter,h=u.yCenter,f=o.startAngle,p=t.hidden?0:u.getDistanceFromCenterForValue(a.data[e]),d=r._starts[e],g=d+(t.hidden?0:r._angles[e]),m=s.animateScale?0:u.getDistanceFromCenterForValue(a.data[e]),y=t._options||{};U.extend(t,{_datasetIndex:r.index,_index:e,_scale:u,_model:{backgroundColor:y.backgroundColor,borderColor:y.borderColor,borderWidth:y.borderWidth,borderAlign:y.borderAlign,x:c,y:h,innerRadius:0,outerRadius:n?m:p,startAngle:n&&s.animateRotate?f:d,endAngle:n&&s.animateRotate?f:g,label:U.valueAtIndexOrDefault(l,e,l[e])}}),t.pivot()},countVisibleElements:function(){var t=this.getDataset(),e=this.getMeta(),n=0;return U.each(e.data,(function(e,r){isNaN(t.data[r])||e.hidden||n++})),n},setHoverStyle:function(t){var e=t._model,n=t._options,r=U.getHoverColor,i=U.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=i(n.hoverBackgroundColor,r(n.backgroundColor)),e.borderColor=i(n.hoverBorderColor,r(n.borderColor)),e.borderWidth=i(n.hoverBorderWidth,n.borderWidth)},_computeAngle:function(t){var e=this,n=this.getMeta().count,r=e.getDataset(),i=e.getMeta();if(isNaN(r.data[t])||i.data[t].hidden)return 0;var a={chart:e.chart,dataIndex:t,dataset:r,datasetIndex:e.index};return Ht([e.chart.options.elements.arc.angle,2*Math.PI/n],a,t)}});N._set("pie",U.clone(N.doughnut)),N._set("pie",{cutoutPercentage:0});var qt=Ft,Xt=U.valueOrDefault;N._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var $t=nt.extend({datasetElementType:wt.Line,dataElementType:wt.Point,linkScales:U.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,n,r=this,i=r.getMeta(),a=i.dataset,o=i.data||[],s=r.chart.scale,u=r._config;for(void 0!==u.tension&&void 0===u.lineTension&&(u.lineTension=u.tension),a._scale=s,a._datasetIndex=r.index,a._children=o,a._loop=!0,a._model=r._resolveDatasetElementOptions(a),a.pivot(),e=0,n=o.length;e<n;++e)r.updateElement(o[e],e,t);for(r.updateBezierControlPoints(),e=0,n=o.length;e<n;++e)o[e].pivot()},updateElement:function(t,e,n){var r=this,i=t.custom||{},a=r.getDataset(),o=r.chart.scale,s=o.getPointPositionForValue(e,a.data[e]),u=r._resolveDataElementOptions(t,e),l=r.getMeta().dataset._model,c=n?o.xCenter:s.x,h=n?o.yCenter:s.y;t._scale=o,t._options=u,t._datasetIndex=r.index,t._index=e,t._model={x:c,y:h,skip:i.skip||isNaN(c)||isNaN(h),radius:u.radius,pointStyle:u.pointStyle,rotation:u.rotation,backgroundColor:u.backgroundColor,borderColor:u.borderColor,borderWidth:u.borderWidth,tension:Xt(i.tension,l?l.tension:0),hitRadius:u.hitRadius}},_resolveDatasetElementOptions:function(){var t=this,e=t._config,n=t.chart.options,r=nt.prototype._resolveDatasetElementOptions.apply(t,arguments);return r.spanGaps=Xt(e.spanGaps,n.spanGaps),r.tension=Xt(e.lineTension,n.elements.line.tension),r},updateBezierControlPoints:function(){var t,e,n,r,i=this.getMeta(),a=this.chart.chartArea,o=i.data||[];function s(t,e,n){return Math.max(Math.min(t,n),e)}for(i.dataset._model.spanGaps&&(o=o.filter((function(t){return!t._model.skip}))),t=0,e=o.length;t<e;++t)n=o[t]._model,r=U.splineCurve(U.previousItem(o,t,!0)._model,n,U.nextItem(o,t,!0)._model,n.tension),n.controlPointPreviousX=s(r.previous.x,a.left,a.right),n.controlPointPreviousY=s(r.previous.y,a.top,a.bottom),n.controlPointNextX=s(r.next.x,a.left,a.right),n.controlPointNextY=s(r.next.y,a.top,a.bottom)},setHoverStyle:function(t){var e=t._model,n=t._options,r=U.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Xt(n.hoverBackgroundColor,r(n.backgroundColor)),e.borderColor=Xt(n.hoverBorderColor,r(n.borderColor)),e.borderWidth=Xt(n.hoverBorderWidth,n.borderWidth),e.radius=Xt(n.hoverRadius,n.radius)}});N._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),N._set("global",{datasets:{scatter:{showLine:!1}}});var Jt={bar:Dt,bubble:Mt,doughnut:Ft,horizontalBar:zt,line:Gt,polarArea:Yt,pie:qt,radar:$t,scatter:Gt};function Zt(t,e){return t.native?{x:t.x,y:t.y}:U.getRelativePosition(t,e)}function Qt(t,e){var n,r,i,a,o,s,u=t._getSortedVisibleDatasetMetas();for(r=0,a=u.length;r<a;++r)for(i=0,o=(n=u[r].data).length;i<o;++i)(s=n[i])._view.skip||e(s)}function te(t,e){var n=[];return Qt(t,(function(t){t.inRange(e.x,e.y)&&n.push(t)})),n}function ee(t,e,n,r){var i=Number.POSITIVE_INFINITY,a=[];return Qt(t,(function(t){if(!n||t.inRange(e.x,e.y)){var o=t.getCenterPoint(),s=r(e,o);s<i?(a=[t],i=s):s===i&&a.push(t)}})),a}function ne(t){var e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){var i=e?Math.abs(t.x-r.x):0,a=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function re(t,e,n){var r=Zt(e,t);n.axis=n.axis||"x";var i=ne(n.axis),a=n.intersect?te(t,r):ee(t,r,!1,i),o=[];return a.length?(t._getSortedVisibleDatasetMetas().forEach((function(t){var e=t.data[a[0]._index];e&&!e._view.skip&&o.push(e)})),o):[]}var ie={modes:{single:function(t,e){var n=Zt(e,t),r=[];return Qt(t,(function(t){if(t.inRange(n.x,n.y))return r.push(t),r})),r.slice(0,1)},label:re,index:re,dataset:function(t,e,n){var r=Zt(e,t);n.axis=n.axis||"xy";var i=ne(n.axis),a=n.intersect?te(t,r):ee(t,r,!1,i);return a.length>0&&(a=t.getDatasetMeta(a[0]._datasetIndex).data),a},"x-axis":function(t,e){return re(t,e,{intersect:!1})},point:function(t,e){return te(t,Zt(e,t))},nearest:function(t,e,n){var r=Zt(e,t);n.axis=n.axis||"xy";var i=ne(n.axis);return ee(t,r,n.intersect,i)},x:function(t,e,n){var r=Zt(e,t),i=[],a=!1;return Qt(t,(function(t){t.inXRange(r.x)&&i.push(t),t.inRange(r.x,r.y)&&(a=!0)})),n.intersect&&!a&&(i=[]),i},y:function(t,e,n){var r=Zt(e,t),i=[],a=!1;return Qt(t,(function(t){t.inYRange(r.y)&&i.push(t),t.inRange(r.x,r.y)&&(a=!0)})),n.intersect&&!a&&(i=[]),i}}},ae=U.extend;function oe(t,e){return U.where(t,(function(t){return t.pos===e}))}function se(t,e){return t.sort((function(t,n){var r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function ue(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function le(t,e,n){var r,i,a=n.box,o=t.maxPadding;if(n.size&&(t[n.pos]-=n.size),n.size=n.horizontal?a.height:a.width,t[n.pos]+=n.size,a.getPadding){var s=a.getPadding();o.top=Math.max(o.top,s.top),o.left=Math.max(o.left,s.left),o.bottom=Math.max(o.bottom,s.bottom),o.right=Math.max(o.right,s.right)}if(r=e.outerWidth-ue(o,t,"left","right"),i=e.outerHeight-ue(o,t,"top","bottom"),r!==t.w||i!==t.h){t.w=r,t.h=i;var u=n.horizontal?[r,t.w]:[i,t.h];return u[0]!==u[1]&&(!isNaN(u[0])||!isNaN(u[1]))}}function ce(t,e){var n=e.maxPadding;function r(t){var r={left:0,top:0,right:0,bottom:0};return t.forEach((function(t){r[t]=Math.max(e[t],n[t])})),r}return r(t?["left","right"]:["top","bottom"])}function he(t,e,n){var r,i,a,o,s,u,l=[];for(r=0,i=t.length;r<i;++r)(o=(a=t[r]).box).update(a.width||e.w,a.height||e.h,ce(a.horizontal,e)),le(e,n,a)&&(u=!0,l.length&&(s=!0)),o.fullWidth||l.push(a);return s&&he(l,e,n)||u}function fe(t,e,n){var r,i,a,o,s=n.padding,u=e.x,l=e.y;for(r=0,i=t.length;r<i;++r)o=(a=t[r]).box,a.horizontal?(o.left=o.fullWidth?s.left:e.left,o.right=o.fullWidth?n.outerWidth-s.right:e.left+e.w,o.top=l,o.bottom=l+o.height,o.width=o.right-o.left,l=o.bottom):(o.left=u,o.right=u+o.width,o.top=e.top,o.bottom=e.top+e.h,o.height=o.bottom-o.top,u=o.right);e.x=u,e.y=l}N._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var pe,de={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]},t.boxes.push(e)},removeBox:function(t,e){var n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure:function(t,e,n){for(var r,i=["fullWidth","position","weight"],a=i.length,o=0;o<a;++o)r=i[o],n.hasOwnProperty(r)&&(e[r]=n[r])},update:function(t,e,n){if(t){var r=t.options.layout||{},i=U.options.toPadding(r.padding),a=e-i.width,o=n-i.height,s=function(t){var e=function(t){var e,n,r,i=[];for(e=0,n=(t||[]).length;e<n;++e)r=t[e],i.push({index:e,box:r,pos:r.position,horizontal:r.isHorizontal(),weight:r.weight});return i}(t),n=se(oe(e,"left"),!0),r=se(oe(e,"right")),i=se(oe(e,"top"),!0),a=se(oe(e,"bottom"));return{leftAndTop:n.concat(i),rightAndBottom:r.concat(a),chartArea:oe(e,"chartArea"),vertical:n.concat(r),horizontal:i.concat(a)}}(t.boxes),u=s.vertical,l=s.horizontal,c=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:a,vBoxMaxWidth:a/2/u.length,hBoxMaxHeight:o/2}),h=ae({maxPadding:ae({},i),w:a,h:o,x:i.left,y:i.top},i);!function(t,e){var n,r,i;for(n=0,r=t.length;n<r;++n)(i=t[n]).width=i.horizontal?i.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth,i.height=i.horizontal&&e.hBoxMaxHeight}(u.concat(l),c),he(u,h,c),he(l,h,c)&&he(u,h,c),function(t){var e=t.maxPadding;function n(n){var r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(h),fe(s.leftAndTop,h,c),h.x+=h.w,h.y+=h.h,fe(s.rightAndBottom,h,c),t.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h},U.each(s.chartArea,(function(e){var n=e.box;ae(n,t.chartArea),n.update(h.w,h.h)}))}}},ge=(pe=Object.freeze({__proto__:null,default:"/*\r\n * DOM element rendering detection\r\n * https://davidwalsh.name/detect-node-insertion\r\n */\r\n@keyframes chartjs-render-animation {\r\n\tfrom { opacity: 0.99; }\r\n\tto { opacity: 1; }\r\n}\r\n\r\n.chartjs-render-monitor {\r\n\tanimation: chartjs-render-animation 0.001s;\r\n}\r\n\r\n/*\r\n * DOM element resizing detection\r\n * https://github.com/marcj/css-element-queries\r\n */\r\n.chartjs-size-monitor,\r\n.chartjs-size-monitor-expand,\r\n.chartjs-size-monitor-shrink {\r\n\tposition: absolute;\r\n\tdirection: ltr;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\tvisibility: hidden;\r\n\tz-index: -1;\r\n}\r\n\r\n.chartjs-size-monitor-expand > div {\r\n\tposition: absolute;\r\n\twidth: 1000000px;\r\n\theight: 1000000px;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n\r\n.chartjs-size-monitor-shrink > div {\r\n\tposition: absolute;\r\n\twidth: 200%;\r\n\theight: 200%;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n"}))&&pe.default||pe,me=["animationstart","webkitAnimationStart"],ye={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function ve(t,e){var n=U.getStyle(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?Number(r[1]):void 0}var xe=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(n){}return t}()&&{passive:!0};function be(t,e,n){t.addEventListener(e,n,xe)}function we(t,e,n){t.removeEventListener(e,n,xe)}function ke(t,e,n,r,i){return{type:t,chart:e,native:i||null,x:void 0!==n?n:null,y:void 0!==r?r:null}}function _e(t){var e=document.createElement("div");return e.className=t||"",e}function Te(t,e,n){var r=t.$chartjs||(t.$chartjs={}),i=r.resizer=function(t){var e=_e("chartjs-size-monitor"),n=_e("chartjs-size-monitor-expand"),r=_e("chartjs-size-monitor-shrink");n.appendChild(_e()),r.appendChild(_e()),e.appendChild(n),e.appendChild(r),e._reset=function(){n.scrollLeft=1e6,n.scrollTop=1e6,r.scrollLeft=1e6,r.scrollTop=1e6};var i=function(){e._reset(),t()};return be(n,"scroll",i.bind(n,"expand")),be(r,"scroll",i.bind(r,"shrink")),e}(function(t,e){var n=!1,r=[];return function(){r=Array.prototype.slice.call(arguments),e=e||this,n||(n=!0,U.requestAnimFrame.call(window,(function(){n=!1,t.apply(e,r)})))}}((function(){if(r.resizer){var i=n.options.maintainAspectRatio&&t.parentNode,a=i?i.clientWidth:0;e(ke("resize",n)),i&&i.clientWidth<a&&n.canvas&&e(ke("resize",n))}})));!function(t,e){var n=t.$chartjs||(t.$chartjs={}),r=n.renderProxy=function(t){"chartjs-render-animation"===t.animationName&&e()};U.each(me,(function(e){be(t,e,r)})),n.reflow=!!t.offsetParent,t.classList.add("chartjs-render-monitor")}(t,(function(){if(r.resizer){var e=t.parentNode;e&&e!==i.parentNode&&e.insertBefore(i,e.firstChild),i._reset()}}))}function Se(t){var e=t.$chartjs||{},n=e.resizer;delete e.resizer,function(t){var e=t.$chartjs||{},n=e.renderProxy;n&&(U.each(me,(function(e){we(t,e,n)})),delete e.renderProxy),t.classList.remove("chartjs-render-monitor")}(t),n&&n.parentNode&&n.parentNode.removeChild(n)}var Ee={disableCSSInjection:!1,_enabled:"undefined"!==typeof window&&"undefined"!==typeof document,_ensureLoaded:function(t){if(!this.disableCSSInjection){var e=t.getRootNode?t.getRootNode():document;!function(t,e){var n=t.$chartjs||(t.$chartjs={});if(!n.containsStyles){n.containsStyles=!0,e="/* Chart.js */\n"+e;var r=document.createElement("style");r.setAttribute("type","text/css"),r.appendChild(document.createTextNode(e)),t.appendChild(r)}}(e.host?e:document.head,ge)}},acquireContext:function(t,e){"string"===typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(this._ensureLoaded(t),function(t,e){var n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t.$chartjs={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===i||""===i){var a=ve(t,"width");void 0!==a&&(t.width=a)}if(null===r||""===r)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var o=ve(t,"height");void 0!==a&&(t.height=o)}}(t,e),n):null},releaseContext:function(t){var e=t.canvas;if(e.$chartjs){var n=e.$chartjs.initial;["height","width"].forEach((function(t){var r=n[t];U.isNullOrUndef(r)?e.removeAttribute(t):e.setAttribute(t,r)})),U.each(n.style||{},(function(t,n){e.style[n]=t})),e.width=e.width,delete e.$chartjs}},addEventListener:function(t,e,n){var r=t.canvas;if("resize"!==e){var i=n.$chartjs||(n.$chartjs={});be(r,e,(i.proxies||(i.proxies={}))[t.id+"_"+e]=function(e){n(function(t,e){var n=ye[t.type]||t.type,r=U.getRelativePosition(t,e);return ke(n,e,r.x,r.y,t)}(e,t))})}else Te(r,n,t)},removeEventListener:function(t,e,n){var r=t.canvas;if("resize"!==e){var i=((n.$chartjs||{}).proxies||{})[t.id+"_"+e];i&&we(r,e,i)}else Se(r)}};U.addEvent=be,U.removeEvent=we;var Ae=Ee._enabled?Ee:{acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}},Le=U.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Ae);N._set("global",{plugins:{}});var De={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),this._cacheId++},unregister:function(t){var e=this._plugins;[].concat(t).forEach((function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,n){var r,i,a,o,s,u=this.descriptors(t),l=u.length;for(r=0;r<l;++r)if("function"===typeof(s=(a=(i=u[r]).plugin)[e])&&((o=[t].concat(n||[])).push(i.options),!1===s.apply(a,o)))return!1;return!0},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var n=[],r=[],i=t&&t.config||{},a=i.options&&i.options.plugins||{};return this._plugins.concat(i.plugins||[]).forEach((function(t){if(-1===n.indexOf(t)){var e=t.id,i=a[e];!1!==i&&(!0===i&&(i=U.clone(N.global.plugins[e])),n.push(t),r.push({plugin:t,options:i||{}}))}})),e.descriptors=r,e.id=this._cacheId,r},_invalidate:function(t){delete t.$plugins}},Ce={constructors:{},defaults:{},registerScaleType:function(t,e,n){this.constructors[t]=e,this.defaults[t]=U.clone(n)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?U.merge(Object.create(null),[N.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){this.defaults.hasOwnProperty(t)&&(this.defaults[t]=U.extend(this.defaults[t],e))},addScalesToLayout:function(t){U.each(t.scales,(function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,de.addBox(t,e)}))}},Ie=U.valueOrDefault,Me=U.rtl.getRtlAdapter;N._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:U.noop,title:function(t,e){var n="",r=e.labels,i=r?r.length:0;if(t.length>0){var a=t[0];a.label?n=a.label:a.xLabel?n=a.xLabel:i>0&&a.index<i&&(n=r[a.index])}return n},afterTitle:U.noop,beforeBody:U.noop,beforeLabel:U.noop,label:function(t,e){var n=e.datasets[t.datasetIndex].label||"";return n&&(n+=": "),U.isNullOrUndef(t.value)?n+=t.yLabel:n+=t.value,n},labelColor:function(t,e){var n=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:U.noop,afterBody:U.noop,beforeFooter:U.noop,footer:U.noop,afterFooter:U.noop}}});var Oe={average:function(t){if(!t.length)return!1;var e,n,r=0,i=0,a=0;for(e=0,n=t.length;e<n;++e){var o=t[e];if(o&&o.hasValue()){var s=o.tooltipPosition();r+=s.x,i+=s.y,++a}}return{x:r/a,y:i/a}},nearest:function(t,e){var n,r,i,a=e.x,o=e.y,s=Number.POSITIVE_INFINITY;for(n=0,r=t.length;n<r;++n){var u=t[n];if(u&&u.hasValue()){var l=u.getCenterPoint(),c=U.distanceBetweenPoints(e,l);c<s&&(s=c,i=u)}}if(i){var h=i.tooltipPosition();a=h.x,o=h.y}return{x:a,y:o}}};function Pe(t,e){return e&&(U.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Re(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Ne(t){var e=t._xScale,n=t._yScale||t._scale,r=t._index,i=t._datasetIndex,a=t._chart.getDatasetMeta(i).controller,o=a._getIndexScale(),s=a._getValueScale();return{xLabel:e?e.getLabelForIndex(r,i):"",yLabel:n?n.getLabelForIndex(r,i):"",label:o?""+o.getLabelForIndex(r,i):"",value:s?""+s.getLabelForIndex(r,i):"",index:r,datasetIndex:i,x:t._model.x,y:t._model.y}}function Fe(t){var e=N.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:Ie(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Ie(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:Ie(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:Ie(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Ie(t.titleFontStyle,e.defaultFontStyle),titleFontSize:Ie(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:Ie(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Ie(t.footerFontStyle,e.defaultFontStyle),footerFontSize:Ie(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function ze(t,e){return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-t.xPadding:t.x+t.xPadding}function Ve(t){return Pe([],Re(t))}var je=q.extend({initialize:function(){this._model=Fe(this._options),this._lastActive=[]},getTitle:function(){var t=this,e=t._options,n=e.callbacks,r=n.beforeTitle.apply(t,arguments),i=n.title.apply(t,arguments),a=n.afterTitle.apply(t,arguments),o=[];return o=Pe(o,Re(r)),o=Pe(o,Re(i)),o=Pe(o,Re(a))},getBeforeBody:function(){return Ve(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,e){var n=this,r=n._options.callbacks,i=[];return U.each(t,(function(t){var a={before:[],lines:[],after:[]};Pe(a.before,Re(r.beforeLabel.call(n,t,e))),Pe(a.lines,r.label.call(n,t,e)),Pe(a.after,Re(r.afterLabel.call(n,t,e))),i.push(a)})),i},getAfterBody:function(){return Ve(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this,e=t._options.callbacks,n=e.beforeFooter.apply(t,arguments),r=e.footer.apply(t,arguments),i=e.afterFooter.apply(t,arguments),a=[];return a=Pe(a,Re(n)),a=Pe(a,Re(r)),a=Pe(a,Re(i))},update:function(t){var e,n,r=this,i=r._options,a=r._model,o=r._model=Fe(i),s=r._active,u=r._data,l={xAlign:a.xAlign,yAlign:a.yAlign},c={x:a.x,y:a.y},h={width:a.width,height:a.height},f={x:a.caretX,y:a.caretY};if(s.length){o.opacity=1;var p=[],d=[];f=Oe[i.position].call(r,s,r._eventPosition);var g=[];for(e=0,n=s.length;e<n;++e)g.push(Ne(s[e]));i.filter&&(g=g.filter((function(t){return i.filter(t,u)}))),i.itemSort&&(g=g.sort((function(t,e){return i.itemSort(t,e,u)}))),U.each(g,(function(t){p.push(i.callbacks.labelColor.call(r,t,r._chart)),d.push(i.callbacks.labelTextColor.call(r,t,r._chart))})),o.title=r.getTitle(g,u),o.beforeBody=r.getBeforeBody(g,u),o.body=r.getBody(g,u),o.afterBody=r.getAfterBody(g,u),o.footer=r.getFooter(g,u),o.x=f.x,o.y=f.y,o.caretPadding=i.caretPadding,o.labelColors=p,o.labelTextColors=d,o.dataPoints=g,h=function(t,e){var n=t._chart.ctx,r=2*e.yPadding,i=0,a=e.body,o=a.reduce((function(t,e){return t+e.before.length+e.lines.length+e.after.length}),0);o+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,u=e.footer.length,l=e.titleFontSize,c=e.bodyFontSize,h=e.footerFontSize;r+=s*l,r+=s?(s-1)*e.titleSpacing:0,r+=s?e.titleMarginBottom:0,r+=o*c,r+=o?(o-1)*e.bodySpacing:0,r+=u?e.footerMarginTop:0,r+=u*h,r+=u?(u-1)*e.footerSpacing:0;var f=0,p=function(t){i=Math.max(i,n.measureText(t).width+f)};return n.font=U.fontString(l,e._titleFontStyle,e._titleFontFamily),U.each(e.title,p),n.font=U.fontString(c,e._bodyFontStyle,e._bodyFontFamily),U.each(e.beforeBody.concat(e.afterBody),p),f=e.displayColors?c+2:0,U.each(a,(function(t){U.each(t.before,p),U.each(t.lines,p),U.each(t.after,p)})),f=0,n.font=U.fontString(h,e._footerFontStyle,e._footerFontFamily),U.each(e.footer,p),{width:i+=2*e.xPadding,height:r}}(this,o),c=function(t,e,n,r){var i=t.x,a=t.y,o=t.caretSize,s=t.caretPadding,u=t.cornerRadius,l=n.xAlign,c=n.yAlign,h=o+s,f=u+s;return"right"===l?i-=e.width:"center"===l&&((i-=e.width/2)+e.width>r.width&&(i=r.width-e.width),i<0&&(i=0)),"top"===c?a+=h:a-="bottom"===c?e.height+h:e.height/2,"center"===c?"left"===l?i+=h:"right"===l&&(i-=h):"left"===l?i-=f:"right"===l&&(i+=f),{x:i,y:a}}(o,h,l=function(t,e){var n,r,i,a,o,s=t._model,u=t._chart,l=t._chart.chartArea,c="center",h="center";s.y<e.height?h="top":s.y>u.height-e.height&&(h="bottom");var f=(l.left+l.right)/2,p=(l.top+l.bottom)/2;"center"===h?(n=function(t){return t<=f},r=function(t){return t>f}):(n=function(t){return t<=e.width/2},r=function(t){return t>=u.width-e.width/2}),i=function(t){return t+e.width+s.caretSize+s.caretPadding>u.width},a=function(t){return t-e.width-s.caretSize-s.caretPadding<0},o=function(t){return t<=p?"top":"bottom"},n(s.x)?(c="left",i(s.x)&&(c="center",h=o(s.y))):r(s.x)&&(c="right",a(s.x)&&(c="center",h=o(s.y)));var d=t._options;return{xAlign:d.xAlign?d.xAlign:c,yAlign:d.yAlign?d.yAlign:h}}(this,h),r._chart)}else o.opacity=0;return o.xAlign=l.xAlign,o.yAlign=l.yAlign,o.x=c.x,o.y=c.y,o.width=h.width,o.height=h.height,o.caretX=f.x,o.caretY=f.y,r._model=o,t&&i.custom&&i.custom.call(r,o),r},drawCaret:function(t,e){var n=this._chart.ctx,r=this._view,i=this.getCaretPosition(t,e,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)},getCaretPosition:function(t,e,n){var r,i,a,o,s,u,l=n.caretSize,c=n.cornerRadius,h=n.xAlign,f=n.yAlign,p=t.x,d=t.y,g=e.width,m=e.height;if("center"===f)s=d+m/2,"left"===h?(i=(r=p)-l,a=r,o=s+l,u=s-l):(i=(r=p+g)+l,a=r,o=s-l,u=s+l);else if("left"===h?(r=(i=p+c+l)-l,a=i+l):"right"===h?(r=(i=p+g-c-l)-l,a=i+l):(r=(i=n.caretX)-l,a=i+l),"top"===f)s=(o=d)-l,u=o;else{s=(o=d+m)+l,u=o;var y=a;a=r,r=y}return{x1:r,x2:i,x3:a,y1:o,y2:s,y3:u}},drawTitle:function(t,e,n){var r,i,a,o=e.title,s=o.length;if(s){var u=Me(e.rtl,e.x,e.width);for(t.x=ze(e,e._titleAlign),n.textAlign=u.textAlign(e._titleAlign),n.textBaseline="middle",r=e.titleFontSize,i=e.titleSpacing,n.fillStyle=e.titleFontColor,n.font=U.fontString(r,e._titleFontStyle,e._titleFontFamily),a=0;a<s;++a)n.fillText(o[a],u.x(t.x),t.y+r/2),t.y+=r+i,a+1===s&&(t.y+=e.titleMarginBottom-i)}},drawBody:function(t,e,n){var r,i,a,o,s,u,l,c,h=e.bodyFontSize,f=e.bodySpacing,p=e._bodyAlign,d=e.body,g=e.displayColors,m=0,y=g?ze(e,"left"):0,v=Me(e.rtl,e.x,e.width),x=function(e){n.fillText(e,v.x(t.x+m),t.y+h/2),t.y+=h+f},b=v.textAlign(p);for(n.textAlign=p,n.textBaseline="middle",n.font=U.fontString(h,e._bodyFontStyle,e._bodyFontFamily),t.x=ze(e,b),n.fillStyle=e.bodyFontColor,U.each(e.beforeBody,x),m=g&&"right"!==b?"center"===p?h/2+1:h+2:0,s=0,l=d.length;s<l;++s){for(r=d[s],i=e.labelTextColors[s],a=e.labelColors[s],n.fillStyle=i,U.each(r.before,x),u=0,c=(o=r.lines).length;u<c;++u){if(g){var w=v.x(y);n.fillStyle=e.legendColorBackground,n.fillRect(v.leftForLtr(w,h),t.y,h,h),n.lineWidth=1,n.strokeStyle=a.borderColor,n.strokeRect(v.leftForLtr(w,h),t.y,h,h),n.fillStyle=a.backgroundColor,n.fillRect(v.leftForLtr(v.xPlus(w,1),h-2),t.y+1,h-2,h-2),n.fillStyle=i}x(o[u])}U.each(r.after,x)}m=0,U.each(e.afterBody,x),t.y-=f},drawFooter:function(t,e,n){var r,i,a=e.footer,o=a.length;if(o){var s=Me(e.rtl,e.x,e.width);for(t.x=ze(e,e._footerAlign),t.y+=e.footerMarginTop,n.textAlign=s.textAlign(e._footerAlign),n.textBaseline="middle",r=e.footerFontSize,n.fillStyle=e.footerFontColor,n.font=U.fontString(r,e._footerFontStyle,e._footerFontFamily),i=0;i<o;++i)n.fillText(a[i],s.x(t.x),t.y+r/2),t.y+=r+e.footerSpacing}},drawBackground:function(t,e,n,r){n.fillStyle=e.backgroundColor,n.strokeStyle=e.borderColor,n.lineWidth=e.borderWidth;var i=e.xAlign,a=e.yAlign,o=t.x,s=t.y,u=r.width,l=r.height,c=e.cornerRadius;n.beginPath(),n.moveTo(o+c,s),"top"===a&&this.drawCaret(t,r),n.lineTo(o+u-c,s),n.quadraticCurveTo(o+u,s,o+u,s+c),"center"===a&&"right"===i&&this.drawCaret(t,r),n.lineTo(o+u,s+l-c),n.quadraticCurveTo(o+u,s+l,o+u-c,s+l),"bottom"===a&&this.drawCaret(t,r),n.lineTo(o+c,s+l),n.quadraticCurveTo(o,s+l,o,s+l-c),"center"===a&&"left"===i&&this.drawCaret(t,r),n.lineTo(o,s+c),n.quadraticCurveTo(o,s,o+c,s),n.closePath(),n.fill(),e.borderWidth>0&&n.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var n={width:e.width,height:e.height},r={x:e.x,y:e.y},i=Math.abs(e.opacity<.001)?0:e.opacity,a=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,e,t,n),r.y+=e.yPadding,U.rtl.overrideTextDirection(t,e.textDirection),this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),U.rtl.restoreTextDirection(t,e.textDirection),t.restore())}},handleEvent:function(t){var e,n=this,r=n._options;return n._lastActive=n._lastActive||[],"mouseout"===t.type?n._active=[]:(n._active=n._chart.getElementsAtEventForMode(t,r.mode,r),r.reverse&&n._active.reverse()),(e=!U.arrayEquals(n._active,n._lastActive))&&(n._lastActive=n._active,(r.enabled||r.custom)&&(n._eventPosition={x:t.x,y:t.y},n.update(!0),n.pivot())),e}}),Ue=Oe,Ke=je;Ke.positioners=Ue;var Be=U.valueOrDefault;function We(){return U.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,e,n,r){if("xAxes"===t||"yAxes"===t){var i,a,o,s=n[t].length;for(e[t]||(e[t]=[]),i=0;i<s;++i)o=n[t][i],a=Be(o.type,"xAxes"===t?"category":"linear"),i>=e[t].length&&e[t].push({}),!e[t][i].type||o.type&&o.type!==e[t][i].type?U.merge(e[t][i],[Ce.getScaleDefaults(a),o]):U.merge(e[t][i],o)}else U._merger(t,e,n,r)}})}function Ge(){return U.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,e,n,r){var i=e[t]||Object.create(null),a=n[t];"scales"===t?e[t]=We(i,a):"scale"===t?e[t]=U.merge(i,[Ce.getScaleDefaults(a.type),a]):U._merger(t,e,n,r)}})}function He(t){var e=t.options;U.each(t.scales,(function(e){de.removeBox(t,e)})),e=Ge(N.global,N[t.config.type],e),t.options=t.config.options=e,t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.tooltip._options=e.tooltips,t.tooltip.initialize()}function Ye(t,e,n){var r,i=function(t){return t.id===r};do{r=e+n++}while(U.findIndex(t,i)>=0);return r}function qe(t){return"top"===t||"bottom"===t}function Xe(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}N._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var $e=function(t,e){return this.construct(t,e),this};U.extend($e.prototype,{construct:function(t,e){var n=this;e=function(t){var e=(t=t||Object.create(null)).data=t.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],t.options=Ge(N.global,N[t.type],t.options||{}),t}(e);var r=Le.acquireContext(t,e),i=r&&r.canvas,a=i&&i.height,o=i&&i.width;n.id=U.uid(),n.ctx=r,n.canvas=i,n.config=e,n.width=o,n.height=a,n.aspectRatio=a?o/a:null,n.options=e.options,n._bufferedRender=!1,n._layers=[],n.chart=n,n.controller=n,$e.instances[n.id]=n,Object.defineProperty(n,"data",{get:function(){return n.config.data},set:function(t){n.config.data=t}}),r&&i?(n.initialize(),n.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return De.notify(t,"beforeInit"),U.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.initToolTip(),De.notify(t,"afterInit"),t},clear:function(){return U.canvas.clear(this),this},stop:function(){return J.cancelAnimation(this),this},resize:function(t){var e=this,n=e.options,r=e.canvas,i=n.maintainAspectRatio&&e.aspectRatio||null,a=Math.max(0,Math.floor(U.getMaximumWidth(r))),o=Math.max(0,Math.floor(i?a/i:U.getMaximumHeight(r)));if((e.width!==a||e.height!==o)&&(r.width=e.width=a,r.height=e.height=o,r.style.width=a+"px",r.style.height=o+"px",U.retinaScale(e,n.devicePixelRatio),!t)){var s={width:a,height:o};De.notify(e,"resize",[s]),n.onResize&&n.onResize(e,s),e.stop(),e.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},n=t.scale;U.each(e.xAxes,(function(t,n){t.id||(t.id=Ye(e.xAxes,"x-axis-",n))})),U.each(e.yAxes,(function(t,n){t.id||(t.id=Ye(e.yAxes,"y-axis-",n))})),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var t=this,e=t.options,n=t.scales||{},r=[],i=Object.keys(n).reduce((function(t,e){return t[e]=!1,t}),{});e.scales&&(r=r.concat((e.scales.xAxes||[]).map((function(t){return{options:t,dtype:"category",dposition:"bottom"}})),(e.scales.yAxes||[]).map((function(t){return{options:t,dtype:"linear",dposition:"left"}})))),e.scale&&r.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),U.each(r,(function(e){var r=e.options,a=r.id,o=Be(r.type,e.dtype);qe(r.position)!==qe(e.dposition)&&(r.position=e.dposition),i[a]=!0;var s=null;if(a in n&&n[a].type===o)(s=n[a]).options=r,s.ctx=t.ctx,s.chart=t;else{var u=Ce.getScaleConstructor(o);if(!u)return;s=new u({id:a,type:o,options:r,ctx:t.ctx,chart:t}),n[s.id]=s}s.mergeTicksOptions(),e.isDefault&&(t.scale=s)})),U.each(i,(function(t,e){t||delete n[e]})),t.scales=n,Ce.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t,e,n=this,r=[],i=n.data.datasets;for(t=0,e=i.length;t<e;t++){var a=i[t],o=n.getDatasetMeta(t),s=a.type||n.config.type;if(o.type&&o.type!==s&&(n.destroyDatasetMeta(t),o=n.getDatasetMeta(t)),o.type=s,o.order=a.order||0,o.index=t,o.controller)o.controller.updateIndex(t),o.controller.linkScales();else{var u=Jt[o.type];if(void 0===u)throw new Error('"'+o.type+'" is not a chart type.');o.controller=new u(n,t),r.push(o.controller)}}return r},resetElements:function(){var t=this;U.each(t.data.datasets,(function(e,n){t.getDatasetMeta(n).controller.reset()}),t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var e,n,r=this;if(t&&"object"===typeof t||(t={duration:t,lazy:arguments[1]}),He(r),De._invalidate(r),!1!==De.notify(r,"beforeUpdate")){r.tooltip._data=r.data;var i=r.buildOrUpdateControllers();for(e=0,n=r.data.datasets.length;e<n;e++)r.getDatasetMeta(e).controller.buildOrUpdateElements();r.updateLayout(),r.options.animation&&r.options.animation.duration&&U.each(i,(function(t){t.reset()})),r.updateDatasets(),r.tooltip.initialize(),r.lastActive=[],De.notify(r,"afterUpdate"),r._layers.sort(Xe("z","_idx")),r._bufferedRender?r._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:r.render(t)}},updateLayout:function(){var t=this;!1!==De.notify(t,"beforeLayout")&&(de.update(this,this.width,this.height),t._layers=[],U.each(t.boxes,(function(e){e._configure&&e._configure(),t._layers.push.apply(t._layers,e._layers())}),t),t._layers.forEach((function(t,e){t._idx=e})),De.notify(t,"afterScaleUpdate"),De.notify(t,"afterLayout"))},updateDatasets:function(){if(!1!==De.notify(this,"beforeDatasetsUpdate")){for(var t=0,e=this.data.datasets.length;t<e;++t)this.updateDataset(t);De.notify(this,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this.getDatasetMeta(t),n={meta:e,index:t};!1!==De.notify(this,"beforeDatasetUpdate",[n])&&(e.controller._update(),De.notify(this,"afterDatasetUpdate",[n]))},render:function(t){var e=this;t&&"object"===typeof t||(t={duration:t,lazy:arguments[1]});var n=e.options.animation,r=Be(t.duration,n&&n.duration),i=t.lazy;if(!1!==De.notify(e,"beforeRender")){var a=function(t){De.notify(e,"afterRender"),U.callback(n&&n.onComplete,[t],e)};if(n&&r){var o=new $({numSteps:r/16.66,easing:t.easing||n.easing,render:function(t,e){var n=U.easing.effects[e.easing],r=e.currentStep,i=r/e.numSteps;t.draw(n(i),i,r)},onAnimationProgress:n.onProgress,onAnimationComplete:a});J.addAnimation(e,o,r,i)}else e.draw(),a(new $({numSteps:0,chart:e}));return e}},draw:function(t){var e,n,r=this;if(r.clear(),U.isNullOrUndef(t)&&(t=1),r.transition(t),!(r.width<=0||r.height<=0)&&!1!==De.notify(r,"beforeDraw",[t])){for(n=r._layers,e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(r.chartArea);for(r.drawDatasets(t);e<n.length;++e)n[e].draw(r.chartArea);r._drawTooltip(t),De.notify(r,"afterDraw",[t])}},transition:function(t){for(var e=0,n=(this.data.datasets||[]).length;e<n;++e)this.isDatasetVisible(e)&&this.getDatasetMeta(e).controller.transition(t);this.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var e,n,r=[];for(e=0,n=(this.data.datasets||[]).length;e<n;++e)t&&!this.isDatasetVisible(e)||r.push(this.getDatasetMeta(e));return r.sort(Xe("order","index")),r},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(t){var e,n;if(!1!==De.notify(this,"beforeDatasetsDraw",[t])){for(n=(e=this._getSortedVisibleDatasetMetas()).length-1;n>=0;--n)this.drawDataset(e[n],t);De.notify(this,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var n={meta:t,index:t.index,easingValue:e};!1!==De.notify(this,"beforeDatasetDraw",[n])&&(t.controller.draw(e),De.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(t){var e=this.tooltip,n={tooltip:e,easingValue:t};!1!==De.notify(this,"beforeTooltipDraw",[n])&&(e.draw(),De.notify(this,"afterTooltipDraw",[n]))},getElementAtEvent:function(t){return ie.modes.single(this,t)},getElementsAtEvent:function(t){return ie.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return ie.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,n){var r=ie.modes[e];return"function"===typeof r?r(this,t,n):[]},getDatasetAtEvent:function(t){return ie.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this.data.datasets[t];e._meta||(e._meta={});var n=e._meta[this.id];return n||(n=e._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e.order||0,index:t}),n},getVisibleDatasetCount:function(){for(var t=0,e=0,n=this.data.datasets.length;e<n;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"===typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,n=this.data.datasets[t],r=n._meta&&n._meta[e];r&&(r.controller.destroy(),delete n._meta[e])},destroy:function(){var t,e,n=this,r=n.canvas;for(n.stop(),t=0,e=n.data.datasets.length;t<e;++t)n.destroyDatasetMeta(t);r&&(n.unbindEvents(),U.canvas.clear(n),Le.releaseContext(n.ctx),n.canvas=null,n.ctx=null),De.notify(n,"destroy"),delete $e.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new Ke({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var t=this,e=t._listeners={},n=function(){t.eventHandler.apply(t,arguments)};U.each(t.options.events,(function(r){Le.addEventListener(t,r,n),e[r]=n})),t.options.responsive&&(n=function(){t.resize()},Le.addEventListener(t,"resize",n),e.resize=n)},unbindEvents:function(){var t=this,e=t._listeners;e&&(delete t._listeners,U.each(e,(function(e,n){Le.removeEventListener(t,n,e)})))},updateHoverStyle:function(t,e,n){var r,i,a,o=n?"set":"remove";for(i=0,a=t.length;i<a;++i)(r=t[i])&&this.getDatasetMeta(r._datasetIndex).controller[o+"HoverStyle"](r);"dataset"===e&&this.getDatasetMeta(t[0]._datasetIndex).controller["_"+o+"DatasetHoverStyle"]()},eventHandler:function(t){var e=this,n=e.tooltip;if(!1!==De.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var r=e.handleEvent(t);n&&(r=n._start?n.handleEvent(t):r|n.handleEvent(t)),De.notify(e,"afterEvent",[t]);var i=e._bufferedRequest;return i?e.render(i):r&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e,n=this,r=n.options||{},i=r.hover;return n.lastActive=n.lastActive||[],"mouseout"===t.type?n.active=[]:n.active=n.getElementsAtEventForMode(t,i.mode,i),U.callback(r.onHover||r.hover.onHover,[t.native,n.active],n),"mouseup"!==t.type&&"click"!==t.type||r.onClick&&r.onClick.call(n,t.native,n.active),n.lastActive.length&&n.updateHoverStyle(n.lastActive,i.mode,!1),n.active.length&&i.mode&&n.updateHoverStyle(n.active,i.mode,!0),e=!U.arrayEquals(n.active,n.lastActive),n.lastActive=n.active,e}}),$e.instances={};var Je=$e;function Ze(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Qe(t){this.options=t||{}}$e.Controller=$e,$e.types={},U.configMerge=Ge,U.scaleMerge=We,U.extend(Qe.prototype,{formats:Ze,parse:Ze,format:Ze,add:Ze,diff:Ze,startOf:Ze,endOf:Ze,_create:function(t){return t}}),Qe.override=function(t){U.extend(Qe.prototype,t)};var tn={_date:Qe},en={formatters:{values:function(t){return U.isArray(t)?t:""+t},linear:function(t,e,n){var r=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(r)>1&&t!==Math.floor(t)&&(r=t-Math.floor(t));var i=U.log10(Math.abs(r)),a="";if(0!==t)if(Math.max(Math.abs(n[0]),Math.abs(n[n.length-1]))<1e-4){var o=U.log10(Math.abs(t)),s=Math.floor(o)-Math.floor(i);s=Math.max(Math.min(s,20),0),a=t.toExponential(s)}else{var u=-1*Math.floor(i);u=Math.max(Math.min(u,20),0),a=t.toFixed(u)}else a="0";return a},logarithmic:function(t,e,n){var r=t/Math.pow(10,Math.floor(U.log10(t)));return 0===t?"0":1===r||2===r||5===r||0===e||e===n.length-1?t.toExponential():""}}},nn=U.isArray,rn=U.isNullOrUndef,an=U.valueOrDefault,on=U.valueAtIndexOrDefault;function sn(t,e,n){var r,i=t.getTicks().length,a=Math.min(e,i-1),o=t.getPixelForTick(a),s=t._startPixel,u=t._endPixel;if(!(n&&(r=1===i?Math.max(o-s,u-o):0===e?(t.getPixelForTick(1)-o)/2:(o-t.getPixelForTick(a-1))/2,(o+=a<e?r:-r)<s-1e-6||o>u+1e-6)))return o}function un(t,e,n,r){var i,a,o,s,u,l,c,h,f,p,d,g,m,y=n.length,v=[],x=[],b=[],w=0,k=0;for(i=0;i<y;++i){if(s=n[i].label,u=n[i].major?e.major:e.minor,t.font=l=u.string,c=r[l]=r[l]||{data:{},gc:[]},h=u.lineHeight,f=p=0,rn(s)||nn(s)){if(nn(s))for(a=0,o=s.length;a<o;++a)d=s[a],rn(d)||nn(d)||(f=U.measureText(t,c.data,c.gc,f,d),p+=h)}else f=U.measureText(t,c.data,c.gc,f,s),p=h;v.push(f),x.push(p),b.push(h/2),w=Math.max(f,w),k=Math.max(p,k)}function _(t){return{width:v[t]||0,height:x[t]||0,offset:b[t]||0}}return function(t,e){U.each(t,(function(t){var n,r=t.gc,i=r.length/2;if(i>e){for(n=0;n<i;++n)delete t.data[r[n]];r.splice(0,i)}}))}(r,y),g=v.indexOf(w),m=x.indexOf(k),{first:_(0),last:_(y-1),widest:_(g),highest:_(m)}}function ln(t){return t.drawTicks?t.tickMarkLength:0}function cn(t){var e,n;return t.display?(e=U.options._parseFont(t),n=U.options.toPadding(t.padding),e.lineHeight+n.height):0}function hn(t,e){return U.extend(U.options._parseFont({fontFamily:an(e.fontFamily,t.fontFamily),fontSize:an(e.fontSize,t.fontSize),fontStyle:an(e.fontStyle,t.fontStyle),lineHeight:an(e.lineHeight,t.lineHeight)}),{color:U.options.resolve([e.fontColor,t.fontColor,N.global.defaultFontColor])})}function fn(t){var e=hn(t,t.minor);return{minor:e,major:t.major.enabled?hn(t,t.major):e}}function pn(t){var e,n,r,i=[];for(n=0,r=t.length;n<r;++n)"undefined"!==typeof(e=t[n])._index&&i.push(e);return i}function dn(t,e,n,r){var i,a,o,s,u=an(n,0),l=Math.min(an(r,t.length),t.length),c=0;for(e=Math.ceil(e),r&&(e=(i=r-n)/Math.floor(i/e)),s=u;s<0;)c++,s=Math.round(u+c*e);for(a=Math.max(u,0);a<l;a++)o=t[a],a===s?(o._index=a,c++,s=Math.round(u+c*e)):delete o.label}N._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:en.formatters.values,minor:{},major:{}}});var gn=q.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){U.callback(this.options.beforeUpdate,[this])},update:function(t,e,n){var r,i,a,o,s,u=this,l=u.options.ticks,c=l.sampleSize;if(u.beforeUpdate(),u.maxWidth=t,u.maxHeight=e,u.margins=U.extend({left:0,right:0,top:0,bottom:0},n),u._ticks=null,u.ticks=null,u._labelSizes=null,u._maxLabelLines=0,u.longestLabelWidth=0,u.longestTextCache=u.longestTextCache||{},u._gridLineItems=null,u._labelItems=null,u.beforeSetDimensions(),u.setDimensions(),u.afterSetDimensions(),u.beforeDataLimits(),u.determineDataLimits(),u.afterDataLimits(),u.beforeBuildTicks(),o=u.buildTicks()||[],(!(o=u.afterBuildTicks(o)||o)||!o.length)&&u.ticks)for(o=[],r=0,i=u.ticks.length;r<i;++r)o.push({value:u.ticks[r],major:!1});return u._ticks=o,s=c<o.length,a=u._convertTicksToLabels(s?function(t,e){for(var n=[],r=t.length/e,i=0,a=t.length;i<a;i+=r)n.push(t[Math.floor(i)]);return n}(o,c):o),u._configure(),u.beforeCalculateTickRotation(),u.calculateTickRotation(),u.afterCalculateTickRotation(),u.beforeFit(),u.fit(),u.afterFit(),u._ticksToDraw=l.display&&(l.autoSkip||"auto"===l.source)?u._autoSkip(o):o,s&&(a=u._convertTicksToLabels(u._ticksToDraw)),u.ticks=a,u.afterUpdate(),u.minSize},_configure:function(){var t,e,n=this,r=n.options.ticks.reverse;n.isHorizontal()?(t=n.left,e=n.right):(t=n.top,e=n.bottom,r=!r),n._startPixel=t,n._endPixel=e,n._reversePixels=r,n._length=e-t},afterUpdate:function(){U.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){U.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){U.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){U.callback(this.options.beforeDataLimits,[this])},determineDataLimits:U.noop,afterDataLimits:function(){U.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){U.callback(this.options.beforeBuildTicks,[this])},buildTicks:U.noop,afterBuildTicks:function(t){var e=this;return nn(t)&&t.length?U.callback(e.options.afterBuildTicks,[e,t]):(e.ticks=U.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,t)},beforeTickToLabelConversion:function(){U.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this.options.ticks;this.ticks=this.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){U.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){U.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t,e,n,r,i,a,o,s=this,u=s.options,l=u.ticks,c=s.getTicks().length,h=l.minRotation||0,f=l.maxRotation,p=h;!s._isVisible()||!l.display||h>=f||c<=1||!s.isHorizontal()?s.labelRotation=h:(e=(t=s._getLabelSizes()).widest.width,n=t.highest.height-t.highest.offset,r=Math.min(s.maxWidth,s.chart.width-e),e+6>(i=u.offset?s.maxWidth/c:r/(c-1))&&(i=r/(c-(u.offset?.5:1)),a=s.maxHeight-ln(u.gridLines)-l.padding-cn(u.scaleLabel),o=Math.sqrt(e*e+n*n),p=U.toDegrees(Math.min(Math.asin(Math.min((t.highest.height+6)/i,1)),Math.asin(Math.min(a/o,1))-Math.asin(n/o))),p=Math.max(h,Math.min(f,p))),s.labelRotation=p)},afterCalculateTickRotation:function(){U.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){U.callback(this.options.beforeFit,[this])},fit:function(){var t=this,e=t.minSize={width:0,height:0},n=t.chart,r=t.options,i=r.ticks,a=r.scaleLabel,o=r.gridLines,s=t._isVisible(),u="bottom"===r.position,l=t.isHorizontal();if(l?e.width=t.maxWidth:s&&(e.width=ln(o)+cn(a)),l?s&&(e.height=ln(o)+cn(a)):e.height=t.maxHeight,i.display&&s){var c=fn(i),h=t._getLabelSizes(),f=h.first,p=h.last,d=h.widest,g=h.highest,m=.4*c.minor.lineHeight,y=i.padding;if(l){var v=0!==t.labelRotation,x=U.toRadians(t.labelRotation),b=Math.cos(x),w=Math.sin(x),k=w*d.width+b*(g.height-(v?g.offset:0))+(v?0:m);e.height=Math.min(t.maxHeight,e.height+k+y);var _,T,S=t.getPixelForTick(0)-t.left,E=t.right-t.getPixelForTick(t.getTicks().length-1);v?(_=u?b*f.width+w*f.offset:w*(f.height-f.offset),T=u?w*(p.height-p.offset):b*p.width+w*p.offset):(_=f.width/2,T=p.width/2),t.paddingLeft=Math.max((_-S)*t.width/(t.width-S),0)+3,t.paddingRight=Math.max((T-E)*t.width/(t.width-E),0)+3}else{var A=i.mirror?0:d.width+y+m;e.width=Math.min(t.maxWidth,e.width+A),t.paddingTop=f.height/2,t.paddingBottom=p.height/2}}t.handleMargins(),l?(t.width=t._length=n.width-t.margins.left-t.margins.right,t.height=e.height):(t.width=e.width,t.height=t._length=n.height-t.margins.top-t.margins.bottom)},handleMargins:function(){var t=this;t.margins&&(t.margins.left=Math.max(t.paddingLeft,t.margins.left),t.margins.top=Math.max(t.paddingTop,t.margins.top),t.margins.right=Math.max(t.paddingRight,t.margins.right),t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom))},afterFit:function(){U.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(rn(t))return NaN;if(("number"===typeof t||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},_convertTicksToLabels:function(t){var e,n,r,i=this;for(i.ticks=t.map((function(t){return t.value})),i.beforeTickToLabelConversion(),e=i.convertTicksToLabels(t)||i.ticks,i.afterTickToLabelConversion(),n=0,r=t.length;n<r;++n)t[n].label=e[n];return e},_getLabelSizes:function(){var t=this,e=t._labelSizes;return e||(t._labelSizes=e=un(t.ctx,fn(t.options.ticks),t.getTicks(),t.longestTextCache),t.longestLabelWidth=e.widest.width),e},_parseValue:function(t){var e,n,r,i;return nn(t)?(e=+this.getRightValue(t[0]),n=+this.getRightValue(t[1]),r=Math.min(e,n),i=Math.max(e,n)):(e=void 0,n=t=+this.getRightValue(t),r=t,i=t),{min:r,max:i,start:e,end:n}},_getScaleLabel:function(t){var e=this._parseValue(t);return void 0!==e.start?"["+e.start+", "+e.end+"]":+this.getRightValue(t)},getLabelForIndex:U.noop,getPixelForValue:U.noop,getValueForPixel:U.noop,getPixelForTick:function(t){var e=this.options.offset,n=this._ticks.length,r=1/Math.max(n-(e?0:1),1);return t<0||t>n-1?null:this.getPixelForDecimal(t*r+(e?r/2:0))},getPixelForDecimal:function(t){return this._reversePixels&&(t=1-t),this._startPixel+t*this._length},getDecimalForPixel:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this.min,e=this.max;return this.beginAtZero?0:t<0&&e<0?e:t>0&&e>0?t:0},_autoSkip:function(t){var e,n,r,i,a=this.options.ticks,o=this._length,s=a.maxTicksLimit||o/this._tickSize()+1,u=a.major.enabled?function(t){var e,n,r=[];for(e=0,n=t.length;e<n;e++)t[e].major&&r.push(e);return r}(t):[],l=u.length,c=u[0],h=u[l-1];if(l>s)return function(t,e,n){var r,i,a=0,o=e[0];for(n=Math.ceil(n),r=0;r<t.length;r++)i=t[r],r===o?(i._index=r,o=e[++a*n]):delete i.label}(t,u,l/s),pn(t);if(r=function(t,e,n,r){var i,a,o,s,u=function(t){var e,n,r=t.length;if(r<2)return!1;for(n=t[0],e=1;e<r;++e)if(t[e]-t[e-1]!==n)return!1;return n}(t),l=(e.length-1)/r;if(!u)return Math.max(l,1);for(o=0,s=(i=U.math._factorize(u)).length-1;o<s;o++)if((a=i[o])>l)return a;return Math.max(l,1)}(u,t,0,s),l>0){for(e=0,n=l-1;e<n;e++)dn(t,r,u[e],u[e+1]);return i=l>1?(h-c)/(l-1):null,dn(t,r,U.isNullOrUndef(i)?0:c-i,c),dn(t,r,h,U.isNullOrUndef(i)?t.length:h+i),pn(t)}return dn(t,r),pn(t)},_tickSize:function(){var t=this.options.ticks,e=U.toRadians(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),i=this._getLabelSizes(),a=t.autoSkipPadding||0,o=i?i.widest.width+a:0,s=i?i.highest.height+a:0;return this.isHorizontal()?s*n>o*r?o/n:s/r:s*r<o*n?s/n:o/r},_isVisible:function(){var t,e,n,r=this.chart,i=this.options.display;if("auto"!==i)return!!i;for(t=0,e=r.data.datasets.length;t<e;++t)if(r.isDatasetVisible(t)&&((n=r.getDatasetMeta(t)).xAxisID===this.id||n.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(t){var e,n,r,i,a,o,s,u,l,c,h,f,p,d,g,m,y,v=this,x=v.chart,b=v.options,w=b.gridLines,k=b.position,_=w.offsetGridLines,T=v.isHorizontal(),S=v._ticksToDraw,E=S.length+(_?1:0),A=ln(w),L=[],D=w.drawBorder?on(w.lineWidth,0,0):0,C=D/2,I=U._alignPixel,M=function(t){return I(x,t,D)};for("top"===k?(e=M(v.bottom),s=v.bottom-A,l=e-C,h=M(t.top)+C,p=t.bottom):"bottom"===k?(e=M(v.top),h=t.top,p=M(t.bottom)-C,s=e+C,l=v.top+A):"left"===k?(e=M(v.right),o=v.right-A,u=e-C,c=M(t.left)+C,f=t.right):(e=M(v.left),c=t.left,f=M(t.right)-C,o=e+C,u=v.left+A),n=0;n<E;++n)r=S[n]||{},rn(r.label)&&n<S.length||(n===v.zeroLineIndex&&b.offset===_?(d=w.zeroLineWidth,g=w.zeroLineColor,m=w.zeroLineBorderDash||[],y=w.zeroLineBorderDashOffset||0):(d=on(w.lineWidth,n,1),g=on(w.color,n,"rgba(0,0,0,0.1)"),m=w.borderDash||[],y=w.borderDashOffset||0),void 0!==(i=sn(v,r._index||n,_))&&(a=I(x,i,d),T?o=u=c=f=a:s=l=h=p=a,L.push({tx1:o,ty1:s,tx2:u,ty2:l,x1:c,y1:h,x2:f,y2:p,width:d,color:g,borderDash:m,borderDashOffset:y})));return L.ticksLength=E,L.borderValue=e,L},_computeLabelItems:function(){var t,e,n,r,i,a,o,s,u,l,c,h,f=this,p=f.options,d=p.ticks,g=p.position,m=d.mirror,y=f.isHorizontal(),v=f._ticksToDraw,x=fn(d),b=d.padding,w=ln(p.gridLines),k=-U.toRadians(f.labelRotation),_=[];for("top"===g?(a=f.bottom-w-b,o=k?"left":"center"):"bottom"===g?(a=f.top+w+b,o=k?"right":"center"):"left"===g?(i=f.right-(m?0:w)-b,o=m?"left":"right"):(i=f.left+(m?0:w)+b,o=m?"right":"left"),t=0,e=v.length;t<e;++t)r=(n=v[t]).label,rn(r)||(s=f.getPixelForTick(n._index||t)+d.labelOffset,l=(u=n.major?x.major:x.minor).lineHeight,c=nn(r)?r.length:1,y?(i=s,h="top"===g?((k?1:.5)-c)*l:(k?0:.5)*l):(a=s,h=(1-c)*l/2),_.push({x:i,y:a,rotation:k,label:r,font:u,textOffset:h,textAlign:o}));return _},_drawGrid:function(t){var e=this,n=e.options.gridLines;if(n.display){var r,i,a,o,s,u=e.ctx,l=e.chart,c=U._alignPixel,h=n.drawBorder?on(n.lineWidth,0,0):0,f=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));for(a=0,o=f.length;a<o;++a)r=(s=f[a]).width,i=s.color,r&&i&&(u.save(),u.lineWidth=r,u.strokeStyle=i,u.setLineDash&&(u.setLineDash(s.borderDash),u.lineDashOffset=s.borderDashOffset),u.beginPath(),n.drawTicks&&(u.moveTo(s.tx1,s.ty1),u.lineTo(s.tx2,s.ty2)),n.drawOnChartArea&&(u.moveTo(s.x1,s.y1),u.lineTo(s.x2,s.y2)),u.stroke(),u.restore());if(h){var p,d,g,m,y=h,v=on(n.lineWidth,f.ticksLength-1,1),x=f.borderValue;e.isHorizontal()?(p=c(l,e.left,y)-y/2,d=c(l,e.right,v)+v/2,g=m=x):(g=c(l,e.top,y)-y/2,m=c(l,e.bottom,v)+v/2,p=d=x),u.lineWidth=h,u.strokeStyle=on(n.color,0),u.beginPath(),u.moveTo(p,g),u.lineTo(d,m),u.stroke()}}},_drawLabels:function(){var t=this;if(t.options.ticks.display){var e,n,r,i,a,o,s,u,l=t.ctx,c=t._labelItems||(t._labelItems=t._computeLabelItems());for(e=0,r=c.length;e<r;++e){if(o=(a=c[e]).font,l.save(),l.translate(a.x,a.y),l.rotate(a.rotation),l.font=o.string,l.fillStyle=o.color,l.textBaseline="middle",l.textAlign=a.textAlign,s=a.label,u=a.textOffset,nn(s))for(n=0,i=s.length;n<i;++n)l.fillText(""+s[n],0,u),u+=o.lineHeight;else l.fillText(s,0,u);l.restore()}}},_drawTitle:function(){var t=this,e=t.ctx,n=t.options,r=n.scaleLabel;if(r.display){var i,a,o=an(r.fontColor,N.global.defaultFontColor),s=U.options._parseFont(r),u=U.options.toPadding(r.padding),l=s.lineHeight/2,c=n.position,h=0;if(t.isHorizontal())i=t.left+t.width/2,a="bottom"===c?t.bottom-l-u.bottom:t.top+l+u.top;else{var f="left"===c;i=f?t.left+l+u.top:t.right-l-u.top,a=t.top+t.height/2,h=f?-.5*Math.PI:.5*Math.PI}e.save(),e.translate(i,a),e.rotate(h),e.textAlign="center",e.textBaseline="middle",e.fillStyle=o,e.font=s.string,e.fillText(r.labelString,0,0),e.restore()}},draw:function(t){this._isVisible()&&(this._drawGrid(t),this._drawTitle(),this._drawLabels())},_layers:function(){var t=this,e=t.options,n=e.ticks&&e.ticks.z||0,r=e.gridLines&&e.gridLines.z||0;return t._isVisible()&&n!==r&&t.draw===t._draw?[{z:r,draw:function(){t._drawGrid.apply(t,arguments),t._drawTitle.apply(t,arguments)}},{z:n,draw:function(){t._drawLabels.apply(t,arguments)}}]:[{z:n,draw:function(){t.draw.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(t){var e=this,n=e.isHorizontal();return e.chart._getSortedVisibleDatasetMetas().filter((function(r){return(!t||r.type===t)&&(n?r.xAxisID===e.id:r.yAxisID===e.id)}))}});gn.prototype._draw=gn.prototype.draw;var mn=gn,yn=U.isNullOrUndef,vn=mn.extend({determineDataLimits:function(){var t,e=this,n=e._getLabels(),r=e.options.ticks,i=r.min,a=r.max,o=0,s=n.length-1;void 0!==i&&(t=n.indexOf(i))>=0&&(o=t),void 0!==a&&(t=n.indexOf(a))>=0&&(s=t),e.minIndex=o,e.maxIndex=s,e.min=n[o],e.max=n[s]},buildTicks:function(){var t=this._getLabels(),e=this.minIndex,n=this.maxIndex;this.ticks=0===e&&n===t.length-1?t:t.slice(e,n+1)},getLabelForIndex:function(t,e){var n=this.chart;return n.getDatasetMeta(e).controller._getValueScaleId()===this.id?this.getRightValue(n.data.datasets[e].data[t]):this._getLabels()[t]},_configure:function(){var t=this,e=t.options.offset,n=t.ticks;mn.prototype._configure.call(t),t.isHorizontal()||(t._reversePixels=!t._reversePixels),n&&(t._startValue=t.minIndex-(e?.5:0),t._valueRange=Math.max(n.length-(e?0:1),1))},getPixelForValue:function(t,e,n){var r,i,a,o=this;return yn(e)||yn(n)||(t=o.chart.data.datasets[n].data[e]),yn(t)||(r=o.isHorizontal()?t.x:t.y),(void 0!==r||void 0!==t&&isNaN(e))&&(i=o._getLabels(),t=U.valueOrDefault(r,t),e=-1!==(a=i.indexOf(t))?a:e,isNaN(e)&&(e=t)),o.getPixelForDecimal((e-o._startValue)/o._valueRange)},getPixelForTick:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t],t+this.minIndex)},getValueForPixel:function(t){var e=Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange);return Math.min(Math.max(e,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}}),xn={position:"bottom"};vn._defaults=xn;var bn=U.noop,wn=U.isNullOrUndef,kn=mn.extend({getRightValue:function(t){return"string"===typeof t?+t:mn.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var n=U.sign(t.min),r=U.sign(t.max);n<0&&r<0?t.max=0:n>0&&r>0&&(t.min=0)}var i=void 0!==e.min||void 0!==e.suggestedMin,a=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(null===t.min?t.min=e.suggestedMin:t.min=Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(null===t.max?t.max=e.suggestedMax:t.max=Math.max(t.max,e.suggestedMax)),i!==a&&t.min>=t.max&&(i?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:function(){var t,e=this.options.ticks,n=e.stepSize,r=e.maxTicksLimit;return n?t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1:(t=this._computeTickLimit(),r=r||11),r&&(t=Math.min(r,t)),t},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:bn,buildTicks:function(){var t=this,e=t.options.ticks,n=t.getTickLimit(),r={maxTicks:n=Math.max(2,n),min:e.min,max:e.max,precision:e.precision,stepSize:U.valueOrDefault(e.fixedStepSize,e.stepSize)},i=t.ticks=function(t,e){var n,r,i,a,o=[],s=t.stepSize,u=s||1,l=t.maxTicks-1,c=t.min,h=t.max,f=t.precision,p=e.min,d=e.max,g=U.niceNum((d-p)/l/u)*u;if(g<1e-14&&wn(c)&&wn(h))return[p,d];(a=Math.ceil(d/g)-Math.floor(p/g))>l&&(g=U.niceNum(a*g/l/u)*u),s||wn(f)?n=Math.pow(10,U._decimalPlaces(g)):(n=Math.pow(10,f),g=Math.ceil(g*n)/n),r=Math.floor(p/g)*g,i=Math.ceil(d/g)*g,s&&(!wn(c)&&U.almostWhole(c/g,g/1e3)&&(r=c),!wn(h)&&U.almostWhole(h/g,g/1e3)&&(i=h)),a=(i-r)/g,a=U.almostEquals(a,Math.round(a),g/1e3)?Math.round(a):Math.ceil(a),r=Math.round(r*n)/n,i=Math.round(i*n)/n,o.push(wn(c)?r:c);for(var m=1;m<a;++m)o.push(Math.round((r+m*g)*n)/n);return o.push(wn(h)?i:h),o}(r,t);t.handleDirectionalChanges(),t.max=U.max(i),t.min=U.min(i),e.reverse?(i.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),mn.prototype.convertTicksToLabels.call(t)},_configure:function(){var t,e=this,n=e.getTicks(),r=e.min,i=e.max;mn.prototype._configure.call(e),e.options.offset&&n.length&&(r-=t=(i-r)/Math.max(n.length-1,1)/2,i+=t),e._startValue=r,e._endValue=i,e._valueRange=i-r}}),_n={position:"left",ticks:{callback:en.formatters.linear}};function Tn(t,e,n,r){var i,a,o=t.options,s=function(t,e,n){var r=[n.type,void 0===e&&void 0===n.stack?n.index:"",n.stack].join(".");return void 0===t[r]&&(t[r]={pos:[],neg:[]}),t[r]}(e,o.stacked,n),u=s.pos,l=s.neg,c=r.length;for(i=0;i<c;++i)a=t._parseValue(r[i]),isNaN(a.min)||isNaN(a.max)||n.data[i].hidden||(u[i]=u[i]||0,l[i]=l[i]||0,o.relativePoints?u[i]=100:a.min<0||a.max<0?l[i]+=a.min:u[i]+=a.max)}function Sn(t,e,n){var r,i,a=n.length;for(r=0;r<a;++r)i=t._parseValue(n[r]),isNaN(i.min)||isNaN(i.max)||e.data[r].hidden||(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}var En=kn.extend({determineDataLimits:function(){var t,e,n,r,i=this,a=i.options,o=i.chart.data.datasets,s=i._getMatchingVisibleMetas(),u=a.stacked,l={},c=s.length;if(i.min=Number.POSITIVE_INFINITY,i.max=Number.NEGATIVE_INFINITY,void 0===u)for(t=0;!u&&t<c;++t)u=void 0!==(e=s[t]).stack;for(t=0;t<c;++t)n=o[(e=s[t]).index].data,u?Tn(i,l,e,n):Sn(i,e,n);U.each(l,(function(t){r=t.pos.concat(t.neg),i.min=Math.min(i.min,U.min(r)),i.max=Math.max(i.max,U.max(r))})),i.min=U.isFinite(i.min)&&!isNaN(i.min)?i.min:0,i.max=U.isFinite(i.max)&&!isNaN(i.max)?i.max:1,i.handleTickRangeOptions()},_computeTickLimit:function(){var t;return this.isHorizontal()?Math.ceil(this.width/40):(t=U.options._parseFont(this.options.ticks),Math.ceil(this.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){return this.getPixelForDecimal((+this.getRightValue(t)-this._startValue)/this._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var e=this.ticksAsNumbers;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])}}),An=_n;En._defaults=An;var Ln=U.valueOrDefault,Dn=U.math.log10,Cn={position:"left",ticks:{callback:en.formatters.logarithmic}};function In(t,e){return U.isFinite(t)&&t>=0?t:e}var Mn=mn.extend({determineDataLimits:function(){var t,e,n,r,i,a,o=this,s=o.options,u=o.chart,l=u.data.datasets,c=o.isHorizontal();function h(t){return c?t.xAxisID===o.id:t.yAxisID===o.id}o.min=Number.POSITIVE_INFINITY,o.max=Number.NEGATIVE_INFINITY,o.minNotZero=Number.POSITIVE_INFINITY;var f=s.stacked;if(void 0===f)for(t=0;t<l.length;t++)if(e=u.getDatasetMeta(t),u.isDatasetVisible(t)&&h(e)&&void 0!==e.stack){f=!0;break}if(s.stacked||f){var p={};for(t=0;t<l.length;t++){var d=[(e=u.getDatasetMeta(t)).type,void 0===s.stacked&&void 0===e.stack?t:"",e.stack].join(".");if(u.isDatasetVisible(t)&&h(e))for(void 0===p[d]&&(p[d]=[]),i=0,a=(r=l[t].data).length;i<a;i++){var g=p[d];n=o._parseValue(r[i]),isNaN(n.min)||isNaN(n.max)||e.data[i].hidden||n.min<0||n.max<0||(g[i]=g[i]||0,g[i]+=n.max)}}U.each(p,(function(t){if(t.length>0){var e=U.min(t),n=U.max(t);o.min=Math.min(o.min,e),o.max=Math.max(o.max,n)}}))}else for(t=0;t<l.length;t++)if(e=u.getDatasetMeta(t),u.isDatasetVisible(t)&&h(e))for(i=0,a=(r=l[t].data).length;i<a;i++)n=o._parseValue(r[i]),isNaN(n.min)||isNaN(n.max)||e.data[i].hidden||n.min<0||n.max<0||(o.min=Math.min(n.min,o.min),o.max=Math.max(n.max,o.max),0!==n.min&&(o.minNotZero=Math.min(n.min,o.minNotZero)));o.min=U.isFinite(o.min)?o.min:null,o.max=U.isFinite(o.max)?o.max:null,o.minNotZero=U.isFinite(o.minNotZero)?o.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;t.min=In(e.min,t.min),t.max=In(e.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(Dn(t.min))-1),t.max=Math.pow(10,Math.floor(Dn(t.max))+1)):(t.min=1,t.max=10)),null===t.min&&(t.min=Math.pow(10,Math.floor(Dn(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(Dn(t.min))+1):10),null===t.minNotZero&&(t.min>0?t.minNotZero=t.min:t.max<1?t.minNotZero=Math.pow(10,Math.floor(Dn(t.max))):t.minNotZero=1)},buildTicks:function(){var t=this,e=t.options.ticks,n=!t.isHorizontal(),r={min:In(e.min),max:In(e.max)},i=t.ticks=function(t,e){var n,r,i=[],a=Ln(t.min,Math.pow(10,Math.floor(Dn(e.min)))),o=Math.floor(Dn(e.max)),s=Math.ceil(e.max/Math.pow(10,o));0===a?(n=Math.floor(Dn(e.minNotZero)),r=Math.floor(e.minNotZero/Math.pow(10,n)),i.push(a),a=r*Math.pow(10,n)):(n=Math.floor(Dn(a)),r=Math.floor(a/Math.pow(10,n)));var u=n<0?Math.pow(10,Math.abs(n)):1;do{i.push(a),10===++r&&(r=1,u=++n>=0?1:u),a=Math.round(r*Math.pow(10,n)*u)/u}while(n<o||n===o&&r<s);var l=Ln(t.max,a);return i.push(l),i}(r,t);t.max=U.max(i),t.min=U.min(i),e.reverse?(n=!n,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),n&&i.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),mn.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){var e=this.tickValues;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])},_getFirstTickValue:function(t){var e=Math.floor(Dn(t));return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)},_configure:function(){var t=this,e=t.min,n=0;mn.prototype._configure.call(t),0===e&&(e=t._getFirstTickValue(t.minNotZero),n=Ln(t.options.ticks.fontSize,N.global.defaultFontSize)/t._length),t._startValue=Dn(e),t._valueOffset=n,t._valueRange=(Dn(t.max)-Dn(e))/(1-n)},getPixelForValue:function(t){var e=this,n=0;return(t=+e.getRightValue(t))>e.min&&t>0&&(n=(Dn(t)-e._startValue)/e._valueRange+e._valueOffset),e.getPixelForDecimal(n)},getValueForPixel:function(t){var e=this,n=e.getDecimalForPixel(t);return 0===n&&0===e.min?0:Math.pow(10,e._startValue+(n-e._valueOffset)*e._valueRange)}}),On=Cn;Mn._defaults=On;var Pn=U.valueOrDefault,Rn=U.valueAtIndexOrDefault,Nn=U.options.resolve,Fn={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:en.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}};function zn(t){var e=t.ticks;return e.display&&t.display?Pn(e.fontSize,N.global.defaultFontSize)+2*e.backdropPaddingY:0}function Vn(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function jn(t){return 0===t||180===t?"center":t<180?"left":"right"}function Un(t,e,n,r){var i,a,o=n.y+r/2;if(U.isArray(e))for(i=0,a=e.length;i<a;++i)t.fillText(e[i],n.x,o),o+=r;else t.fillText(e,n.x,o)}function Kn(t,e,n){90===t||270===t?n.y-=e.h/2:(t>270||t<90)&&(n.y-=e.h)}function Bn(t){return U.isNumber(t)?t:0}var Wn=kn.extend({setDimensions:function(){var t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=zn(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var t=this,e=t.chart,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;U.each(e.data.datasets,(function(i,a){if(e.isDatasetVisible(a)){var o=e.getDatasetMeta(a);U.each(i.data,(function(e,i){var a=+t.getRightValue(e);isNaN(a)||o.data[i].hidden||(n=Math.min(a,n),r=Math.max(a,r))}))}})),t.min=n===Number.POSITIVE_INFINITY?0:n,t.max=r===Number.NEGATIVE_INFINITY?0:r,t.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/zn(this.options))},convertTicksToLabels:function(){var t=this;kn.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map((function(){var e=U.callback(t.options.pointLabels.callback,arguments,t);return e||0===e?e:""}))},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this.options;t.display&&t.pointLabels.display?function(t){var e,n,r,i=U.options._parseFont(t.options.pointLabels),a={l:0,r:t.width,t:0,b:t.height-t.paddingTop},o={};t.ctx.font=i.string,t._pointLabelSizes=[];var s,u,l,c=t.chart.data.labels.length;for(e=0;e<c;e++){r=t.getPointPosition(e,t.drawingArea+5),s=t.ctx,u=i.lineHeight,l=t.pointLabels[e],n=U.isArray(l)?{w:U.longestText(s,s.font,l),h:l.length*u}:{w:s.measureText(l).width,h:u},t._pointLabelSizes[e]=n;var h=t.getIndexAngle(e),f=U.toDegrees(h)%360,p=Vn(f,r.x,n.w,0,180),d=Vn(f,r.y,n.h,90,270);p.start<a.l&&(a.l=p.start,o.l=h),p.end>a.r&&(a.r=p.end,o.r=h),d.start<a.t&&(a.t=d.start,o.t=h),d.end>a.b&&(a.b=d.end,o.b=h)}t.setReductions(t.drawingArea,a,o)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(t,e,n){var r=this,i=e.l/Math.sin(n.l),a=Math.max(e.r-r.width,0)/Math.sin(n.r),o=-e.t/Math.cos(n.t),s=-Math.max(e.b-(r.height-r.paddingTop),0)/Math.cos(n.b);i=Bn(i),a=Bn(a),o=Bn(o),s=Bn(s),r.drawingArea=Math.min(Math.floor(t-(i+a)/2),Math.floor(t-(o+s)/2)),r.setCenterPoint(i,a,o,s)},setCenterPoint:function(t,e,n,r){var i=this,a=i.width-e-i.drawingArea,o=t+i.drawingArea,s=n+i.drawingArea,u=i.height-i.paddingTop-r-i.drawingArea;i.xCenter=Math.floor((o+a)/2+i.left),i.yCenter=Math.floor((s+u)/2+i.top+i.paddingTop)},getIndexAngle:function(t){var e=this.chart,n=(t*(360/e.data.labels.length)+((e.options||{}).startAngle||0))%360;return(n<0?n+360:n)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(U.isNullOrUndef(t))return NaN;var n=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*n:(t-e.min)*n},getPointPosition:function(t,e){var n=this.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(t){var e=this.min,n=this.max;return this.getPointPositionForValue(t||0,this.beginAtZero?0:e<0&&n<0?n:e>0&&n>0?e:0)},_drawGrid:function(){var t,e,n,r=this,i=r.ctx,a=r.options,o=a.gridLines,s=a.angleLines,u=Pn(s.lineWidth,o.lineWidth),l=Pn(s.color,o.color);if(a.pointLabels.display&&function(t){var e=t.ctx,n=t.options,r=n.pointLabels,i=zn(n),a=t.getDistanceFromCenterForValue(n.ticks.reverse?t.min:t.max),o=U.options._parseFont(r);e.save(),e.font=o.string,e.textBaseline="middle";for(var s=t.chart.data.labels.length-1;s>=0;s--){var u=0===s?i/2:0,l=t.getPointPosition(s,a+u+5),c=Rn(r.fontColor,s,N.global.defaultFontColor);e.fillStyle=c;var h=t.getIndexAngle(s),f=U.toDegrees(h);e.textAlign=jn(f),Kn(f,t._pointLabelSizes[s],l),Un(e,t.pointLabels[s],l,o.lineHeight)}e.restore()}(r),o.display&&U.each(r.ticks,(function(t,n){0!==n&&(e=r.getDistanceFromCenterForValue(r.ticksAsNumbers[n]),function(t,e,n,r){var i,a=t.ctx,o=e.circular,s=t.chart.data.labels.length,u=Rn(e.color,r-1),l=Rn(e.lineWidth,r-1);if((o||s)&&u&&l){if(a.save(),a.strokeStyle=u,a.lineWidth=l,a.setLineDash&&(a.setLineDash(e.borderDash||[]),a.lineDashOffset=e.borderDashOffset||0),a.beginPath(),o)a.arc(t.xCenter,t.yCenter,n,0,2*Math.PI);else{i=t.getPointPosition(0,n),a.moveTo(i.x,i.y);for(var c=1;c<s;c++)i=t.getPointPosition(c,n),a.lineTo(i.x,i.y)}a.closePath(),a.stroke(),a.restore()}}(r,o,e,n))})),s.display&&u&&l){for(i.save(),i.lineWidth=u,i.strokeStyle=l,i.setLineDash&&(i.setLineDash(Nn([s.borderDash,o.borderDash,[]])),i.lineDashOffset=Nn([s.borderDashOffset,o.borderDashOffset,0])),t=r.chart.data.labels.length-1;t>=0;t--)e=r.getDistanceFromCenterForValue(a.ticks.reverse?r.min:r.max),n=r.getPointPosition(t,e),i.beginPath(),i.moveTo(r.xCenter,r.yCenter),i.lineTo(n.x,n.y),i.stroke();i.restore()}},_drawLabels:function(){var t=this,e=t.ctx,n=t.options.ticks;if(n.display){var r,i,a=t.getIndexAngle(0),o=U.options._parseFont(n),s=Pn(n.fontColor,N.global.defaultFontColor);e.save(),e.font=o.string,e.translate(t.xCenter,t.yCenter),e.rotate(a),e.textAlign="center",e.textBaseline="middle",U.each(t.ticks,(function(a,u){(0!==u||n.reverse)&&(r=t.getDistanceFromCenterForValue(t.ticksAsNumbers[u]),n.showLabelBackdrop&&(i=e.measureText(a).width,e.fillStyle=n.backdropColor,e.fillRect(-i/2-n.backdropPaddingX,-r-o.size/2-n.backdropPaddingY,i+2*n.backdropPaddingX,o.size+2*n.backdropPaddingY)),e.fillStyle=s,e.fillText(a,0,-r))})),e.restore()}},_drawTitle:U.noop}),Gn=Fn;Wn._defaults=Gn;var Hn=U._deprecated,Yn=U.options.resolve,qn=U.valueOrDefault,Xn=Number.MIN_SAFE_INTEGER||-9007199254740991,$n=Number.MAX_SAFE_INTEGER||9007199254740991,Jn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Zn=Object.keys(Jn);function Qn(t,e){return t-e}function tr(t){return U.valueOrDefault(t.time.min,t.ticks.min)}function er(t){return U.valueOrDefault(t.time.max,t.ticks.max)}function nr(t,e,n,r){var i=function(t,e,n){for(var r,i,a,o=0,s=t.length-1;o>=0&&o<=s;){if(i=t[(r=o+s>>1)-1]||null,a=t[r],!i)return{lo:null,hi:a};if(a[e]<n)o=r+1;else{if(!(i[e]>n))return{lo:i,hi:a};s=r-1}}return{lo:a,hi:null}}(t,e,n),a=i.lo?i.hi?i.lo:t[t.length-2]:t[0],o=i.lo?i.hi?i.hi:t[t.length-1]:t[1],s=o[e]-a[e],u=s?(n-a[e])/s:0,l=(o[r]-a[r])*u;return a[r]+l}function rr(t,e){var n=t._adapter,r=t.options.time,i=r.parser,a=i||r.format,o=e;return"function"===typeof i&&(o=i(o)),U.isFinite(o)||(o="string"===typeof a?n.parse(o,a):n.parse(o)),null!==o?+o:(i||"function"!==typeof a||(o=a(e),U.isFinite(o)||(o=n.parse(o))),o)}function ir(t,e){if(U.isNullOrUndef(e))return null;var n=t.options.time,r=rr(t,t.getRightValue(e));return null===r||n.round&&(r=+t._adapter.startOf(r,n.round)),r}function ar(t,e,n,r){var i,a,o,s=Zn.length;for(i=Zn.indexOf(t);i<s-1;++i)if(o=(a=Jn[Zn[i]]).steps?a.steps:$n,a.common&&Math.ceil((n-e)/(o*a.size))<=r)return Zn[i];return Zn[s-1]}function or(t,e,n){var r,i,a=[],o={},s=e.length;for(r=0;r<s;++r)o[i=e[r]]=r,a.push({value:i,major:!1});return 0!==s&&n?function(t,e,n,r){var i,a,o=t._adapter,s=+o.startOf(e[0].value,r),u=e[e.length-1].value;for(i=s;i<=u;i=+o.add(i,1,r))(a=n[i])>=0&&(e[a].major=!0);return e}(t,a,o,n):a}var sr=mn.extend({initialize:function(){this.mergeTicksOptions(),mn.prototype.initialize.call(this)},update:function(){var t=this,e=t.options,n=e.time||(e.time={}),r=t._adapter=new tn._date(e.adapters.date);return Hn("time scale",n.format,"time.format","time.parser"),Hn("time scale",n.min,"time.min","ticks.min"),Hn("time scale",n.max,"time.max","ticks.max"),U.mergeIf(n.displayFormats,r.formats()),mn.prototype.update.apply(t,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),mn.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,e,n,r,i,a,o,s=this,u=s.chart,l=s._adapter,c=s.options,h=c.time.unit||"day",f=$n,p=Xn,d=[],g=[],m=[],y=s._getLabels();for(t=0,n=y.length;t<n;++t)m.push(ir(s,y[t]));for(t=0,n=(u.data.datasets||[]).length;t<n;++t)if(u.isDatasetVisible(t))if(i=u.data.datasets[t].data,U.isObject(i[0]))for(g[t]=[],e=0,r=i.length;e<r;++e)a=ir(s,i[e]),d.push(a),g[t][e]=a;else g[t]=m.slice(0),o||(d=d.concat(m),o=!0);else g[t]=[];m.length&&(f=Math.min(f,m[0]),p=Math.max(p,m[m.length-1])),d.length&&(d=n>1?function(t){var e,n,r,i={},a=[];for(e=0,n=t.length;e<n;++e)i[r=t[e]]||(i[r]=!0,a.push(r));return a}(d).sort(Qn):d.sort(Qn),f=Math.min(f,d[0]),p=Math.max(p,d[d.length-1])),f=ir(s,tr(c))||f,p=ir(s,er(c))||p,f=f===$n?+l.startOf(Date.now(),h):f,p=p===Xn?+l.endOf(Date.now(),h)+1:p,s.min=Math.min(f,p),s.max=Math.max(f+1,p),s._table=[],s._timestamps={data:d,datasets:g,labels:m}},buildTicks:function(){var t,e,n,r=this,i=r.min,a=r.max,o=r.options,s=o.ticks,u=o.time,l=r._timestamps,c=[],h=r.getLabelCapacity(i),f=s.source,p=o.distribution;for(l="data"===f||"auto"===f&&"series"===p?l.data:"labels"===f?l.labels:function(t,e,n,r){var i,a=t._adapter,o=t.options,s=o.time,u=s.unit||ar(s.minUnit,e,n,r),l=Yn([s.stepSize,s.unitStepSize,1]),c="week"===u&&s.isoWeekday,h=e,f=[];if(c&&(h=+a.startOf(h,"isoWeek",c)),h=+a.startOf(h,c?"day":u),a.diff(n,e,u)>1e5*l)throw e+" and "+n+" are too far apart with stepSize of "+l+" "+u;for(i=h;i<n;i=+a.add(i,l,u))f.push(i);return i!==n&&"ticks"!==o.bounds||f.push(i),f}(r,i,a,h),"ticks"===o.bounds&&l.length&&(i=l[0],a=l[l.length-1]),i=ir(r,tr(o))||i,a=ir(r,er(o))||a,t=0,e=l.length;t<e;++t)(n=l[t])>=i&&n<=a&&c.push(n);return r.min=i,r.max=a,r._unit=u.unit||(s.autoSkip?ar(u.minUnit,r.min,r.max,h):function(t,e,n,r,i){var a,o;for(a=Zn.length-1;a>=Zn.indexOf(n);a--)if(o=Zn[a],Jn[o].common&&t._adapter.diff(i,r,o)>=e-1)return o;return Zn[n?Zn.indexOf(n):0]}(r,c.length,u.minUnit,r.min,r.max)),r._majorUnit=s.major.enabled&&"year"!==r._unit?function(t){for(var e=Zn.indexOf(t)+1,n=Zn.length;e<n;++e)if(Jn[Zn[e]].common)return Zn[e]}(r._unit):void 0,r._table=function(t,e,n,r){if("linear"===r||!t.length)return[{time:e,pos:0},{time:n,pos:1}];var i,a,o,s,u,l=[],c=[e];for(i=0,a=t.length;i<a;++i)(s=t[i])>e&&s<n&&c.push(s);for(c.push(n),i=0,a=c.length;i<a;++i)u=c[i+1],o=c[i-1],s=c[i],void 0!==o&&void 0!==u&&Math.round((u+o)/2)===s||l.push({time:s,pos:i/(a-1)});return l}(r._timestamps.data,i,a,p),r._offsets=function(t,e,n,r,i){var a,o,s=0,u=0;return i.offset&&e.length&&(a=nr(t,"time",e[0],"pos"),s=1===e.length?1-a:(nr(t,"time",e[1],"pos")-a)/2,o=nr(t,"time",e[e.length-1],"pos"),u=1===e.length?o:(o-nr(t,"time",e[e.length-2],"pos"))/2),{start:s,end:u,factor:1/(s+1+u)}}(r._table,c,0,0,o),s.reverse&&c.reverse(),or(r,c,r._majorUnit)},getLabelForIndex:function(t,e){var n=this,r=n._adapter,i=n.chart.data,a=n.options.time,o=i.labels&&t<i.labels.length?i.labels[t]:"",s=i.datasets[e].data[t];return U.isObject(s)&&(o=n.getRightValue(s)),a.tooltipFormat?r.format(rr(n,o),a.tooltipFormat):"string"===typeof o?o:r.format(rr(n,o),a.displayFormats.datetime)},tickFormatFunction:function(t,e,n,r){var i=this._adapter,a=this.options,o=a.time.displayFormats,s=o[this._unit],u=this._majorUnit,l=o[u],c=n[e],h=a.ticks,f=u&&l&&c&&c.major,p=i.format(t,r||(f?l:s)),d=f?h.major:h.minor,g=Yn([d.callback,d.userCallback,h.callback,h.userCallback]);return g?g(p,e,n):p},convertTicksToLabels:function(t){var e,n,r=[];for(e=0,n=t.length;e<n;++e)r.push(this.tickFormatFunction(t[e].value,e,t));return r},getPixelForOffset:function(t){var e=this._offsets,n=nr(this._table,"time",t,"pos");return this.getPixelForDecimal((e.start+n)*e.factor)},getPixelForValue:function(t,e,n){var r=null;if(void 0!==e&&void 0!==n&&(r=this._timestamps.datasets[n][e]),null===r&&(r=ir(this,t)),null!==r)return this.getPixelForOffset(r)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end,r=nr(this._table,"pos",n,"time");return this._adapter._create(r)},_getLabelSize:function(t){var e=this.options.ticks,n=this.ctx.measureText(t).width,r=U.toRadians(this.isHorizontal()?e.maxRotation:e.minRotation),i=Math.cos(r),a=Math.sin(r),o=qn(e.fontSize,N.global.defaultFontSize);return{w:n*i+o*a,h:n*a+o*i}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var e=this,n=e.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,a=e.tickFormatFunction(t,0,or(e,[t],e._majorUnit),i),o=e._getLabelSize(a),s=Math.floor(e.isHorizontal()?e.width/o.w:e.height/o.h);return e.options.offset&&s--,s>0?s:1}}),ur={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};sr._defaults=ur;var lr={category:vn,linear:En,logarithmic:Mn,radialLinear:Wn,time:sr},cr={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};tn._date.override("function"===typeof t?{_id:"moment",formats:function(){return cr},parse:function(e,n){return"string"===typeof e&&"string"===typeof n?e=t(e,n):e instanceof t||(e=t(e)),e.isValid()?e.valueOf():null},format:function(e,n){return t(e).format(n)},add:function(e,n,r){return t(e).add(n,r).valueOf()},diff:function(e,n,r){return t(e).diff(t(n),r)},startOf:function(e,n,r){return e=t(e),"isoWeek"===n?e.isoWeekday(r).valueOf():e.startOf(n).valueOf()},endOf:function(e,n){return t(e).endOf(n).valueOf()},_create:function(e){return t(e)}}:{}),N._set("global",{plugins:{filler:{propagate:!0}}});var hr={dataset:function(t){var e=t.fill,n=t.chart,r=n.getDatasetMeta(e),i=r&&n.isDatasetVisible(e)&&r.dataset._children||[],a=i.length||0;return a?function(t,e){return e<a&&i[e]._view||null}:null},boundary:function(t){var e=t.boundary,n=e?e.x:null,r=e?e.y:null;return U.isArray(e)?function(t,n){return e[n]}:function(t){return{x:null===n?t.x:n,y:null===r?t.y:r}}}};function fr(t,e,n){var r,i=t._model||{},a=i.fill;if(void 0===a&&(a=!!i.backgroundColor),!1===a||null===a)return!1;if(!0===a)return"origin";if(r=parseFloat(a,10),isFinite(r)&&Math.floor(r)===r)return"-"!==a[0]&&"+"!==a[0]||(r=e+r),!(r===e||r<0||r>=n)&&r;switch(a){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return a;default:return!1}}function pr(t){return(t.el._scale||{}).getPointPositionForValue?function(t){var e,n,r,i,a,o=t.el._scale,s=o.options,u=o.chart.data.labels.length,l=t.fill,c=[];if(!u)return null;for(e=s.ticks.reverse?o.max:o.min,n=s.ticks.reverse?o.min:o.max,r=o.getPointPositionForValue(0,e),i=0;i<u;++i)a="start"===l||"end"===l?o.getPointPositionForValue(i,"start"===l?e:n):o.getBasePosition(i),s.gridLines.circular&&(a.cx=r.x,a.cy=r.y,a.angle=o.getIndexAngle(i)-Math.PI/2),c.push(a);return c}(t):function(t){var e,n=t.el._model||{},r=t.el._scale||{},i=t.fill,a=null;if(isFinite(i))return null;if("start"===i?a=void 0===n.scaleBottom?r.bottom:n.scaleBottom:"end"===i?a=void 0===n.scaleTop?r.top:n.scaleTop:void 0!==n.scaleZero?a=n.scaleZero:r.getBasePixel&&(a=r.getBasePixel()),void 0!==a&&null!==a){if(void 0!==a.x&&void 0!==a.y)return a;if(U.isFinite(a))return{x:(e=r.isHorizontal())?a:null,y:e?null:a}}return null}(t)}function dr(t,e,n){var r,i=t[e].fill,a=[e];if(!n)return i;for(;!1!==i&&-1===a.indexOf(i);){if(!isFinite(i))return i;if(!(r=t[i]))return!1;if(r.visible)return i;a.push(i),i=r.fill}return!1}function gr(t){var e=t.fill,n="dataset";return!1===e?null:(isFinite(e)||(n="boundary"),hr[n](t))}function mr(t){return t&&!t.skip}function yr(t,e,n,r,i){var a,o,s,u;if(r&&i){for(t.moveTo(e[0].x,e[0].y),a=1;a<r;++a)U.canvas.lineTo(t,e[a-1],e[a]);if(void 0===n[0].angle)for(t.lineTo(n[i-1].x,n[i-1].y),a=i-1;a>0;--a)U.canvas.lineTo(t,n[a],n[a-1],!0);else for(o=n[0].cx,s=n[0].cy,u=Math.sqrt(Math.pow(n[0].x-o,2)+Math.pow(n[0].y-s,2)),a=i-1;a>0;--a)t.arc(o,s,u,n[a].angle,n[a-1].angle,!0)}}function vr(t,e,n,r,i,a){var o,s,u,l,c,h,f,p,d=e.length,g=r.spanGaps,m=[],y=[],v=0,x=0;for(t.beginPath(),o=0,s=d;o<s;++o)c=n(l=e[u=o%d]._view,u,r),h=mr(l),f=mr(c),a&&void 0===p&&h&&(s=d+(p=o+1)),h&&f?(v=m.push(l),x=y.push(c)):v&&x&&(g?(h&&m.push(l),f&&y.push(c)):(yr(t,m,y,v,x),v=x=0,m=[],y=[]));yr(t,m,y,v,x),t.closePath(),t.fillStyle=i,t.fill()}var xr={id:"filler",afterDatasetsUpdate:function(t,e){var n,r,i,a,o=(t.data.datasets||[]).length,s=e.propagate,u=[];for(r=0;r<o;++r)a=null,(i=(n=t.getDatasetMeta(r)).dataset)&&i._model&&i instanceof wt.Line&&(a={visible:t.isDatasetVisible(r),fill:fr(i,r,o),chart:t,el:i}),n.$filler=a,u.push(a);for(r=0;r<o;++r)(a=u[r])&&(a.fill=dr(u,r,s),a.boundary=pr(a),a.mapper=gr(a))},beforeDatasetsDraw:function(t){var e,n,r,i,a,o,s,u=t._getSortedVisibleDatasetMetas(),l=t.ctx;for(n=u.length-1;n>=0;--n)(e=u[n].$filler)&&e.visible&&(i=(r=e.el)._view,a=r._children||[],o=e.mapper,s=i.backgroundColor||N.global.defaultColor,o&&s&&a.length&&(U.canvas.clipArea(l,t.chartArea),vr(l,a,o,i,s,r._loop),U.canvas.unclipArea(l)))}},br=U.rtl.getRtlAdapter,wr=U.noop,kr=U.valueOrDefault;function _r(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}N._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var n=e.datasetIndex,r=this.chart,i=r.getDatasetMeta(n);i.hidden=null===i.hidden?!r.data.datasets[n].hidden:null,r.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data.datasets,n=t.options.legend||{},r=n.labels&&n.labels.usePointStyle;return t._getSortedDatasetMetas().map((function(n){var i=n.controller.getStyle(r?0:void 0);return{text:e[n.index].label,fillStyle:i.backgroundColor,hidden:!t.isDatasetVisible(n.index),lineCap:i.borderCapStyle,lineDash:i.borderDash,lineDashOffset:i.borderDashOffset,lineJoin:i.borderJoinStyle,lineWidth:i.borderWidth,strokeStyle:i.borderColor,pointStyle:i.pointStyle,rotation:i.rotation,datasetIndex:n.index}}),this)}}},legendCallback:function(t){var e,n,r,i=document.createElement("ul"),a=t.data.datasets;for(i.setAttribute("class",t.id+"-legend"),e=0,n=a.length;e<n;e++)(r=i.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[e].backgroundColor,a[e].label&&r.appendChild(document.createTextNode(a[e].label));return i.outerHTML}});var Tr=q.extend({initialize:function(t){U.extend(this,t),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:wr,update:function(t,e,n){var r=this;return r.beforeUpdate(),r.maxWidth=t,r.maxHeight=e,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:wr,beforeSetDimensions:wr,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:wr,beforeBuildLabels:wr,buildLabels:function(){var t=this,e=t.options.labels||{},n=U.callback(e.generateLabels,[t.chart],t)||[];e.filter&&(n=n.filter((function(n){return e.filter(n,t.chart.data)}))),t.options.reverse&&n.reverse(),t.legendItems=n},afterBuildLabels:wr,beforeFit:wr,fit:function(){var t=this,e=t.options,n=e.labels,r=e.display,i=t.ctx,a=U.options._parseFont(n),o=a.size,s=t.legendHitBoxes=[],u=t.minSize,l=t.isHorizontal();if(l?(u.width=t.maxWidth,u.height=r?10:0):(u.width=r?10:0,u.height=t.maxHeight),r){if(i.font=a.string,l){var c=t.lineWidths=[0],h=0;i.textAlign="left",i.textBaseline="middle",U.each(t.legendItems,(function(t,e){var r=_r(n,o)+o/2+i.measureText(t.text).width;(0===e||c[c.length-1]+r+2*n.padding>u.width)&&(h+=o+n.padding,c[c.length-(e>0?0:1)]=0),s[e]={left:0,top:0,width:r,height:o},c[c.length-1]+=r+n.padding})),u.height+=h}else{var f=n.padding,p=t.columnWidths=[],d=t.columnHeights=[],g=n.padding,m=0,y=0;U.each(t.legendItems,(function(t,e){var r=_r(n,o)+o/2+i.measureText(t.text).width;e>0&&y+o+2*f>u.height&&(g+=m+n.padding,p.push(m),d.push(y),m=0,y=0),m=Math.max(m,r),y+=o+f,s[e]={left:0,top:0,width:r,height:o}})),g+=m,p.push(m),d.push(y),u.width+=g}t.width=u.width,t.height=u.height}else t.width=u.width=t.height=u.height=0},afterFit:wr,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var t=this,e=t.options,n=e.labels,r=N.global,i=r.defaultColor,a=r.elements.line,o=t.height,s=t.columnHeights,u=t.width,l=t.lineWidths;if(e.display){var c,h=br(e.rtl,t.left,t.minSize.width),f=t.ctx,p=kr(n.fontColor,r.defaultFontColor),d=U.options._parseFont(n),g=d.size;f.textAlign=h.textAlign("left"),f.textBaseline="middle",f.lineWidth=.5,f.strokeStyle=p,f.fillStyle=p,f.font=d.string;var m=_r(n,g),y=t.legendHitBoxes,v=function(t,r){switch(e.align){case"start":return n.padding;case"end":return t-r;default:return(t-r+n.padding)/2}},x=t.isHorizontal();c=x?{x:t.left+v(u,l[0]),y:t.top+n.padding,line:0}:{x:t.left+n.padding,y:t.top+v(o,s[0]),line:0},U.rtl.overrideTextDirection(t.ctx,e.textDirection);var b=g+n.padding;U.each(t.legendItems,(function(e,r){var p=f.measureText(e.text).width,d=m+g/2+p,w=c.x,k=c.y;h.setWidth(t.minSize.width),x?r>0&&w+d+n.padding>t.left+t.minSize.width&&(k=c.y+=b,c.line++,w=c.x=t.left+v(u,l[c.line])):r>0&&k+b>t.top+t.minSize.height&&(w=c.x=w+t.columnWidths[c.line]+n.padding,c.line++,k=c.y=t.top+v(o,s[c.line]));var _=h.x(w);!function(t,e,r){if(!(isNaN(m)||m<=0)){f.save();var o=kr(r.lineWidth,a.borderWidth);if(f.fillStyle=kr(r.fillStyle,i),f.lineCap=kr(r.lineCap,a.borderCapStyle),f.lineDashOffset=kr(r.lineDashOffset,a.borderDashOffset),f.lineJoin=kr(r.lineJoin,a.borderJoinStyle),f.lineWidth=o,f.strokeStyle=kr(r.strokeStyle,i),f.setLineDash&&f.setLineDash(kr(r.lineDash,a.borderDash)),n&&n.usePointStyle){var s=m*Math.SQRT2/2,u=h.xPlus(t,m/2),l=e+g/2;U.canvas.drawPoint(f,r.pointStyle,s,u,l,r.rotation)}else f.fillRect(h.leftForLtr(t,m),e,m,g),0!==o&&f.strokeRect(h.leftForLtr(t,m),e,m,g);f.restore()}}(_,k,e),y[r].left=h.leftForLtr(_,y[r].width),y[r].top=k,function(t,e,n,r){var i=g/2,a=h.xPlus(t,m+i),o=e+i;f.fillText(n.text,a,o),n.hidden&&(f.beginPath(),f.lineWidth=2,f.moveTo(a,o),f.lineTo(h.xPlus(a,r),o),f.stroke())}(_,k,e,p),x?c.x+=d+n.padding:c.y+=b})),U.rtl.restoreTextDirection(t.ctx,e.textDirection)}},_getLegendItemAt:function(t,e){var n,r,i,a=this;if(t>=a.left&&t<=a.right&&e>=a.top&&e<=a.bottom)for(i=a.legendHitBoxes,n=0;n<i.length;++n)if(t>=(r=i[n]).left&&t<=r.left+r.width&&e>=r.top&&e<=r.top+r.height)return a.legendItems[n];return null},handleEvent:function(t){var e,n=this,r=n.options,i="mouseup"===t.type?"click":t.type;if("mousemove"===i){if(!r.onHover&&!r.onLeave)return}else{if("click"!==i)return;if(!r.onClick)return}e=n._getLegendItemAt(t.x,t.y),"click"===i?e&&r.onClick&&r.onClick.call(n,t.native,e):(r.onLeave&&e!==n._hoveredItem&&(n._hoveredItem&&r.onLeave.call(n,t.native,n._hoveredItem),n._hoveredItem=e),r.onHover&&e&&r.onHover.call(n,t.native,e))}});function Sr(t,e){var n=new Tr({ctx:t.ctx,options:e,chart:t});de.configure(t,n,e),de.addBox(t,n),t.legend=n}var Er={id:"legend",_element:Tr,beforeInit:function(t){var e=t.options.legend;e&&Sr(t,e)},beforeUpdate:function(t){var e=t.options.legend,n=t.legend;e?(U.mergeIf(e,N.global.legend),n?(de.configure(t,n,e),n.options=e):Sr(t,e)):n&&(de.removeBox(t,n),delete t.legend)},afterEvent:function(t,e){var n=t.legend;n&&n.handleEvent(e)}},Ar=U.noop;N._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Lr=q.extend({initialize:function(t){U.extend(this,t),this.legendHitBoxes=[]},beforeUpdate:Ar,update:function(t,e,n){var r=this;return r.beforeUpdate(),r.maxWidth=t,r.maxHeight=e,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:Ar,beforeSetDimensions:Ar,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:Ar,beforeBuildLabels:Ar,buildLabels:Ar,afterBuildLabels:Ar,beforeFit:Ar,fit:function(){var t,e=this,n=e.options,r=e.minSize={},i=e.isHorizontal();n.display?(t=(U.isArray(n.text)?n.text.length:1)*U.options._parseFont(n).lineHeight+2*n.padding,e.width=r.width=i?e.maxWidth:t,e.height=r.height=i?t:e.maxHeight):e.width=r.width=e.height=r.height=0},afterFit:Ar,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,n=t.options;if(n.display){var r,i,a,o=U.options._parseFont(n),s=o.lineHeight,u=s/2+n.padding,l=0,c=t.top,h=t.left,f=t.bottom,p=t.right;e.fillStyle=U.valueOrDefault(n.fontColor,N.global.defaultFontColor),e.font=o.string,t.isHorizontal()?(i=h+(p-h)/2,a=c+u,r=p-h):(i="left"===n.position?h+u:p-u,a=c+(f-c)/2,r=f-c,l=Math.PI*("left"===n.position?-.5:.5)),e.save(),e.translate(i,a),e.rotate(l),e.textAlign="center",e.textBaseline="middle";var d=n.text;if(U.isArray(d))for(var g=0,m=0;m<d.length;++m)e.fillText(d[m],0,g,r),g+=s;else e.fillText(d,0,0,r);e.restore()}}});function Dr(t,e){var n=new Lr({ctx:t.ctx,options:e,chart:t});de.configure(t,n,e),de.addBox(t,n),t.titleBlock=n}var Cr={},Ir=xr,Mr=Er,Or={id:"title",_element:Lr,beforeInit:function(t){var e=t.options.title;e&&Dr(t,e)},beforeUpdate:function(t){var e=t.options.title,n=t.titleBlock;e?(U.mergeIf(e,N.global.title),n?(de.configure(t,n,e),n.options=e):Dr(t,e)):n&&(de.removeBox(t,n),delete t.titleBlock)}};for(var Pr in Cr.filler=Ir,Cr.legend=Mr,Cr.title=Or,Je.helpers=U,function(){function t(t,e,n){var r;return"string"===typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}function e(t){return void 0!==t&&null!==t&&"none"!==t}function n(n,r,i){var a=document.defaultView,o=U._getParentNode(n),s=a.getComputedStyle(n)[r],u=a.getComputedStyle(o)[r],l=e(s),c=e(u),h=Number.POSITIVE_INFINITY;return l||c?Math.min(l?t(s,n,i):h,c?t(u,o,i):h):"none"}U.where=function(t,e){if(U.isArray(t)&&Array.prototype.filter)return t.filter(e);var n=[];return U.each(t,(function(t){e(t)&&n.push(t)})),n},U.findIndex=Array.prototype.findIndex?function(t,e,n){return t.findIndex(e,n)}:function(t,e,n){n=void 0===n?t:n;for(var r=0,i=t.length;r<i;++r)if(e.call(n,t[r],r,t))return r;return-1},U.findNextWhere=function(t,e,n){U.isNullOrUndef(n)&&(n=-1);for(var r=n+1;r<t.length;r++){var i=t[r];if(e(i))return i}},U.findPreviousWhere=function(t,e,n){U.isNullOrUndef(n)&&(n=t.length);for(var r=n-1;r>=0;r--){var i=t[r];if(e(i))return i}},U.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},U.almostEquals=function(t,e,n){return Math.abs(t-e)<n},U.almostWhole=function(t,e){var n=Math.round(t);return n-e<=t&&n+e>=t},U.max=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.max(t,e)}),Number.NEGATIVE_INFINITY)},U.min=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.min(t,e)}),Number.POSITIVE_INFINITY)},U.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1},U.toRadians=function(t){return t*(Math.PI/180)},U.toDegrees=function(t){return t*(180/Math.PI)},U._decimalPlaces=function(t){if(U.isFinite(t)){for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}},U.getAngleFromPoint=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r),a=Math.atan2(r,n);return a<-.5*Math.PI&&(a+=2*Math.PI),{angle:a,distance:i}},U.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},U.aliasPixel=function(t){return t%2===0?0:.5},U._alignPixel=function(t,e,n){var r=t.currentDevicePixelRatio,i=n/2;return Math.round((e-i)*r)/r+i},U.splineCurve=function(t,e,n,r){var i=t.skip?e:t,a=e,o=n.skip?e:n,s=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2)),u=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),l=s/(s+u),c=u/(s+u),h=r*(l=isNaN(l)?0:l),f=r*(c=isNaN(c)?0:c);return{previous:{x:a.x-h*(o.x-i.x),y:a.y-h*(o.y-i.y)},next:{x:a.x+f*(o.x-i.x),y:a.y+f*(o.y-i.y)}}},U.EPSILON=Number.EPSILON||1e-14,U.splineCurveMonotone=function(t){var e,n,r,i,a,o,s,u,l,c=(t||[]).map((function(t){return{model:t._model,deltaK:0,mK:0}})),h=c.length;for(e=0;e<h;++e)if(!(r=c[e]).model.skip){if(n=e>0?c[e-1]:null,(i=e<h-1?c[e+1]:null)&&!i.model.skip){var f=i.model.x-r.model.x;r.deltaK=0!==f?(i.model.y-r.model.y)/f:0}!n||n.model.skip?r.mK=r.deltaK:!i||i.model.skip?r.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(r.deltaK)?r.mK=0:r.mK=(n.deltaK+r.deltaK)/2}for(e=0;e<h-1;++e)r=c[e],i=c[e+1],r.model.skip||i.model.skip||(U.almostEquals(r.deltaK,0,this.EPSILON)?r.mK=i.mK=0:(a=r.mK/r.deltaK,o=i.mK/r.deltaK,(u=Math.pow(a,2)+Math.pow(o,2))<=9||(s=3/Math.sqrt(u),r.mK=a*s*r.deltaK,i.mK=o*s*r.deltaK)));for(e=0;e<h;++e)(r=c[e]).model.skip||(n=e>0?c[e-1]:null,i=e<h-1?c[e+1]:null,n&&!n.model.skip&&(l=(r.model.x-n.model.x)/3,r.model.controlPointPreviousX=r.model.x-l,r.model.controlPointPreviousY=r.model.y-l*r.mK),i&&!i.model.skip&&(l=(i.model.x-r.model.x)/3,r.model.controlPointNextX=r.model.x+l,r.model.controlPointNextY=r.model.y+l*r.mK))},U.nextItem=function(t,e,n){return n?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},U.previousItem=function(t,e,n){return n?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},U.niceNum=function(t,e){var n=Math.floor(U.log10(t)),r=t/Math.pow(10,n);return(e?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10)*Math.pow(10,n)},U.requestAnimFrame="undefined"===typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},U.getRelativePosition=function(t,e){var n,r,i=t.originalEvent||t,a=t.target||t.srcElement,o=a.getBoundingClientRect(),s=i.touches;s&&s.length>0?(n=s[0].clientX,r=s[0].clientY):(n=i.clientX,r=i.clientY);var u=parseFloat(U.getStyle(a,"padding-left")),l=parseFloat(U.getStyle(a,"padding-top")),c=parseFloat(U.getStyle(a,"padding-right")),h=parseFloat(U.getStyle(a,"padding-bottom")),f=o.right-o.left-u-c,p=o.bottom-o.top-l-h;return{x:n=Math.round((n-o.left-u)/f*a.width/e.currentDevicePixelRatio),y:r=Math.round((r-o.top-l)/p*a.height/e.currentDevicePixelRatio)}},U.getConstraintWidth=function(t){return n(t,"max-width","clientWidth")},U.getConstraintHeight=function(t){return n(t,"max-height","clientHeight")},U._calculatePadding=function(t,e,n){return(e=U.getStyle(t,e)).indexOf("%")>-1?n*parseInt(e,10)/100:parseInt(e,10)},U._getParentNode=function(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e},U.getMaximumWidth=function(t){var e=U._getParentNode(t);if(!e)return t.clientWidth;var n=e.clientWidth,r=n-U._calculatePadding(e,"padding-left",n)-U._calculatePadding(e,"padding-right",n),i=U.getConstraintWidth(t);return isNaN(i)?r:Math.min(r,i)},U.getMaximumHeight=function(t){var e=U._getParentNode(t);if(!e)return t.clientHeight;var n=e.clientHeight,r=n-U._calculatePadding(e,"padding-top",n)-U._calculatePadding(e,"padding-bottom",n),i=U.getConstraintHeight(t);return isNaN(i)?r:Math.min(r,i)},U.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},U.retinaScale=function(t,e){var n=t.currentDevicePixelRatio=e||"undefined"!==typeof window&&window.devicePixelRatio||1;if(1!==n){var r=t.canvas,i=t.height,a=t.width;r.height=i*n,r.width=a*n,t.ctx.scale(n,n),r.style.height||r.style.width||(r.style.height=i+"px",r.style.width=a+"px")}},U.fontString=function(t,e,n){return e+" "+t+"px "+n},U.longestText=function(t,e,n,r){var i=(r=r||{}).data=r.data||{},a=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},a=r.garbageCollect=[],r.font=e),t.font=e;var o,s,u,l,c,h=0,f=n.length;for(o=0;o<f;o++)if(void 0!==(l=n[o])&&null!==l&&!0!==U.isArray(l))h=U.measureText(t,i,a,h,l);else if(U.isArray(l))for(s=0,u=l.length;s<u;s++)void 0===(c=l[s])||null===c||U.isArray(c)||(h=U.measureText(t,i,a,h,c));var p=a.length/2;if(p>n.length){for(o=0;o<p;o++)delete i[a[o]];a.splice(0,p)}return h},U.measureText=function(t,e,n,r,i){var a=e[i];return a||(a=e[i]=t.measureText(i).width,n.push(i)),a>r&&(r=a),r},U.numberOfLabelLines=function(t){var e=1;return U.each(t,(function(t){U.isArray(t)&&t.length>e&&(e=t.length)})),e},U.color=w?function(t){return t instanceof CanvasGradient&&(t=N.global.defaultColor),w(t)}:function(t){return console.error("Color.js not found!"),t},U.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:U.color(t).saturate(.5).darken(.1).rgbString()}}(),Je._adapters=tn,Je.Animation=$,Je.animationService=J,Je.controllers=Jt,Je.DatasetController=nt,Je.defaults=N,Je.Element=q,Je.elements=wt,Je.Interaction=ie,Je.layouts=de,Je.platform=Le,Je.plugins=De,Je.Scale=mn,Je.scaleService=Ce,Je.Ticks=en,Je.Tooltip=Ke,Je.helpers.each(lr,(function(t,e){Je.scaleService.registerScaleType(e,t,t._defaults)})),Cr)Cr.hasOwnProperty(Pr)&&Je.plugins.register(Cr[Pr]);Je.platform.initialize();var Rr=Je;return"undefined"!==typeof window&&(window.Chart=Je),Je.Chart=Je,Je.Legend=Cr.legend._element,Je.Title=Cr.title._element,Je.pluginService=Je.plugins,Je.PluginBase=Je.Element.extend({}),Je.canvasHelpers=Je.helpers.canvas,Je.layoutService=Je.layouts,Je.LinearScaleBase=kn,Je.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(t){Je[t]=function(e,n){return new Je(e,Je.helpers.merge(n||{},{type:t.charAt(0).toLowerCase()+t.slice(1)}))}})),Rr}(function(){try{return n(75)}catch(t){}}())},function(t,e,n){var r=n(56);t.exports=function(t,e){return r(t,e)}},function(t,e,n){var r=n(81),i=n(86),a=n(196),o=n(200),s=n(218),u=n(11),l=n(88),c=n(90),h="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,p,d,g){var m=u(t),y=u(e),v=m?"[object Array]":s(t),x=y?"[object Array]":s(e),b=(v="[object Arguments]"==v?h:v)==h,w=(x="[object Arguments]"==x?h:x)==h,k=v==x;if(k&&l(t)){if(!l(e))return!1;m=!0,b=!1}if(k&&!b)return g||(g=new r),m||c(t)?i(t,e,n,p,d,g):a(t,e,v,n,p,d,g);if(!(1&n)){var _=b&&f.call(t,"__wrapped__"),T=w&&f.call(e,"__wrapped__");if(_||T){var S=_?t.value():t,E=T?e.value():e;return g||(g=new r),d(S,E,n,p,g)}}return!!k&&(g||(g=new r),o(t,e,n,p,d,g))}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(40),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(40);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(40);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(40);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(39);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(39),i=n(57),a=n(59);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(83),i=n(176),a=n(58),o=n(85),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||i(t))&&(r(t)?f:s).test(o(t))}},function(t,e,n){var r=n(41),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=o.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(177),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(10)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(180),i=n(39),a=n(57);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},function(t,e,n){var r=n(181),i=n(182),a=n(183),o=n(184),s=n(185);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(42);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(42),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(42),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(42);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(43);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(43);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(43);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(43);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(59),i=n(192),a=n(193);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,t.exports=o},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(41),i=n(197),a=n(82),o=n(86),s=n(198),u=n(199),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=s;case"[object Set]":var d=1&r;if(p||(p=u),t.size!=e.size&&!d)return!1;var g=f.get(t);if(g)return g==e;r|=2,f.set(t,e);var m=o(p(t),p(e),r,l,h,f);return f.delete(t),m;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},function(t,e,n){var r=n(10).Uint8Array;t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(201),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,o,s){var u=1&n,l=r(t),c=l.length;if(c!=r(e).length&&!u)return!1;for(var h=c;h--;){var f=l[h];if(!(u?f in e:i.call(e,f)))return!1}var p=s.get(t),d=s.get(e);if(p&&d)return p==e&&d==t;var g=!0;s.set(t,e),s.set(e,t);for(var m=u;++h<c;){var y=t[f=l[h]],v=e[f];if(a)var x=u?a(v,y,f,e,t,s):a(y,v,f,t,e,s);if(!(void 0===x?y===v||o(y,v,n,a,s):x)){g=!1;break}m||(m="constructor"==f)}if(g&&!m){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(g=!1)}return s.delete(t),s.delete(e),g}},function(t,e,n){var r=n(202),i=n(204),a=n(60);t.exports=function(t){return r(t,a,i)}},function(t,e,n){var r=n(203),i=n(11);t.exports=function(t,e,n){var a=e(t);return i(t)?a:r(a,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(205),i=n(206),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(t){return null==t?[]:(t=Object(t),r(o(t),(function(e){return a.call(t,e)})))}:i;t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(208),i=n(87),a=n(11),o=n(88),s=n(89),u=n(90),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),c=!n&&i(t),h=!n&&!c&&o(t),f=!n&&!c&&!h&&u(t),p=n||c||h||f,d=p?r(t.length,String):[],g=d.length;for(var m in t)!e&&!l.call(t,m)||p&&("length"==m||h&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||d.push(m);return d}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(29),i=n(30);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(29),i=n(61),a=n(30),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&i(t.length)&&!!o[r(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(84),i=e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i&&r.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(e){}}();t.exports=s}).call(this,n(55)(t))},function(t,e,n){var r=n(215),i=n(216),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(217)(Object.keys,Object);t.exports=r},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(219),i=n(57),a=n(220),o=n(221),s=n(222),u=n(29),l=n(85),c=l(r),h=l(i),f=l(a),p=l(o),d=l(s),g=u;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||a&&"[object Promise]"!=g(a.resolve())||o&&"[object Set]"!=g(new o)||s&&"[object WeakMap]"!=g(new s))&&(g=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case c:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=g},function(t,e,n){var r=n(14)(n(10),"DataView");t.exports=r},function(t,e,n){var r=n(14)(n(10),"Promise");t.exports=r},function(t,e,n){var r=n(14)(n(10),"Set");t.exports=r},function(t,e,n){var r=n(14)(n(10),"WeakMap");t.exports=r},function(t,e,n){var r=n(224),i=n(226)((function(t,e,n){r(t,n,e)}));t.exports=i},function(t,e,n){var r=n(225);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(14),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},function(t,e,n){var r=n(227),i=n(228),a=n(234),o=n(11);t.exports=function(t,e){return function(n,s){var u=o(n)?r:i,l=e?e():{};return u(n,t,a(s,2),l)}}},function(t,e){t.exports=function(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(r,o,n(o),t)}return r}},function(t,e,n){var r=n(229);t.exports=function(t,e,n,i){return r(t,(function(t,r,a){e(i,t,n(t),a)})),i}},function(t,e,n){var r=n(230),i=n(233)(r);t.exports=i},function(t,e,n){var r=n(231),i=n(60);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(232)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}}},function(t,e,n){var r=n(91);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var a=n.length,o=e?a:-1,s=Object(n);(e?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},function(t,e,n){var r=n(235),i=n(238),a=n(249),o=n(11),s=n(250);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?o(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(236),i=n(237),a=n(93);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(81),i=n(56);t.exports=function(t,e,n,a){var o=n.length,s=o,u=!a;if(null==t)return!s;for(t=Object(t);o--;){var l=n[o];if(u&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<s;){var c=(l=n[o])[0],h=t[c],f=l[1];if(u&&l[2]){if(void 0===h&&!(c in t))return!1}else{var p=new r;if(a)var d=a(h,f,c,t,e,p);if(!(void 0===d?i(f,h,3,a,p):d))return!1}}return!0}},function(t,e,n){var r=n(92),i=n(60);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var a=e[n],o=t[a];e[n]=[a,o,r(o)]}return e}},function(t,e,n){var r=n(56),i=n(239),a=n(246),o=n(62),s=n(92),u=n(93),l=n(44);t.exports=function(t,e){return o(t)&&s(e)?u(l(t),e):function(n){var o=i(n,t);return void 0===o&&o===e?a(n,t):r(e,o,3)}}},function(t,e,n){var r=n(94);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(241),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(a,"$1"):n||t)})),e}));t.exports=o},function(t,e,n){var r=n(242);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(59);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(244);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(41),i=n(245),a=n(11),o=n(63),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return i(e,t)+"";if(o(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(247),i=n(248);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(95),i=n(87),a=n(11),o=n(89),s=n(61),u=n(44);t.exports=function(t,e,n){for(var l=-1,c=(e=r(e,t)).length,h=!1;++l<c;){var f=u(e[l]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++l!=c?h:!!(c=null==t?0:t.length)&&s(c)&&o(f,c)&&(a(t)||i(t))}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(251),i=n(252),a=n(62),o=n(44);t.exports=function(t){return a(t)?r(o(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(94);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,x=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function k(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case h:case f:case o:case u:case s:case d:return t;default:switch(t=t&&t.$$typeof){case c:case p:case y:case m:case l:return t;default:return e}}case a:return e}}}function _(t){return k(t)===f}e.AsyncMode=h,e.ConcurrentMode=f,e.ContextConsumer=c,e.ContextProvider=l,e.Element=i,e.ForwardRef=p,e.Fragment=o,e.Lazy=y,e.Memo=m,e.Portal=a,e.Profiler=u,e.StrictMode=s,e.Suspense=d,e.isAsyncMode=function(t){return _(t)||k(t)===h},e.isConcurrentMode=_,e.isContextConsumer=function(t){return k(t)===c},e.isContextProvider=function(t){return k(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return k(t)===p},e.isFragment=function(t){return k(t)===o},e.isLazy=function(t){return k(t)===y},e.isMemo=function(t){return k(t)===m},e.isPortal=function(t){return k(t)===a},e.isProfiler=function(t){return k(t)===u},e.isStrictMode=function(t){return k(t)===s},e.isSuspense=function(t){return k(t)===d},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===f||t===u||t===s||t===d||t===g||"object"===typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===m||t.$$typeof===l||t.$$typeof===c||t.$$typeof===p||t.$$typeof===x||t.$$typeof===b||t.$$typeof===w||t.$$typeof===v)},e.typeOf=k},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var c={};function h(){}function f(){}function p(){}var d={};d[i]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(T([])));m&&m!==e&&n.call(m,i)&&(d=m);var y=p.prototype=h.prototype=Object.create(d);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var u=l(t[i],t,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(u.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=y.constructor=p,p.constructor=f,f.displayName=s(p,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(x.prototype),x.prototype[a]=function(){return this},t.AsyncIterator=x,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new x(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},v(y),s(y,o,"Generator"),y[i]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";var r=n(8),i=n(96),a=n(256),o=n(102);function s(t){var e=new a(t),n=i(a.prototype.request,e);return r.extend(n,a.prototype,e),r.extend(n,e),n}var u=s(n(99));u.Axios=a,u.create=function(t){return s(o(u.defaults,t))},u.Cancel=n(103),u.CancelToken=n(269),u.isCancel=n(98),u.all=function(t){return Promise.all(t)},u.spread=n(270),t.exports=u,t.exports.default=u},function(t,e,n){"use strict";var r=n(8),i=n(97),a=n(257),o=n(258),s=n(102);function u(t){this.defaults=t,this.interceptors={request:new a,response:new a}}u.prototype.request=function(t){"string"===typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[o,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},u.prototype.getUri=function(t){return t=s(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,n){return this.request(r.merge(n||{},{method:t,url:e}))}})),r.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,n,i){return this.request(r.merge(i||{},{method:t,url:e,data:n}))}})),t.exports=u},function(t,e,n){"use strict";var r=n(8);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},function(t,e,n){"use strict";var r=n(8),i=n(259),a=n(98),o=n(99);function s(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return s(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||o.adapter)(t).then((function(e){return s(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return a(e)||(s(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,n){"use strict";var r=n(8);t.exports=function(t,e,n){return r.forEach(n,(function(n){t=n(t,e)})),t}},function(t,e,n){"use strict";var r=n(8);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},function(t,e,n){"use strict";var r=n(101);t.exports=function(t,e,n){var i=n.config.validateStatus;!i||i(n.status)?t(n):e(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,n){"use strict";var r=n(264),i=n(265);t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(8),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,a,o={};return t?(r.forEach(t.split("\n"),(function(t){if(a=t.indexOf(":"),e=r.trim(t.substr(0,a)).toLowerCase(),n=r.trim(t.substr(a+1)),e){if(o[e]&&i.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([n]):o[e]?o[e]+", "+n:n}})),o):o}},function(t,e,n){"use strict";var r=n(8);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var r=n(8);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,a,o){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var r=n(103);function i(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){var r=n(104),i=n(105),a=n(106),o=n(107);t.exports={leakyRelu:r,relu:i,sigmoid:a,tanh:o}},function(t,e,n){var r=n(1),i=n(2),a=function(){"use strict";function t(e,n){r(this,t),this.Classifier=e,this.options=n,this.json=null}return i(t,[{key:"testPartition",value:function(t,e,n){var r=new this.Classifier(this.options),i=Date.now(),a=r.train(e,t),o=Date.now(),s=r.test(n),u=Date.now();return Object.assign({},s,{trainTime:o-i,testTime:u-o,iterations:a.iterations,error:a.error,total:s.total,learningRate:r.trainOpts.learningRate,hiddenLayers:r.hiddenLayers,network:r.toJSON()})}},{key:"shuffleArray",value:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}},{key:"train",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(t.length<n)throw new Error("Training set size is too small for ".concat(t.length," k folds of ").concat(n));var r=t.length/n;if(t.constructor===Array)this.shuffleArray(t);else{var i={};this.shuffleArray(Object.keys(t)).forEach((function(e){i[e]=t[e]})),t=i}for(var a,o={trainTime:0,testTime:0,iterations:0,error:0},s={total:0},u={total:0,truePos:0,trueNeg:0,falsePos:0,falseNeg:0},l=[],c=null,h=0;h<n;h++){var f=t.slice(0),p=f.splice(h*r,r),d=f,g=this.testPartition(e,d,p);for(a in null===c&&(c=g.hasOwnProperty("falseNeg")&&g.hasOwnProperty("falsePos")&&g.hasOwnProperty("trueNeg")&&g.hasOwnProperty("truePos"))&&Object.assign(s,u),o)a in o&&(o[a]+=g[a]);for(a in s)a in s&&(s[a]+=g[a]);l.push(g)}for(a in o)a in o&&(o[a]/=n);return c&&(s.precision=s.truePos/(s.truePos+s.falsePos),s.recall=s.truePos/(s.truePos+s.falseNeg),s.accuracy=(s.trueNeg+s.truePos)/s.total),s.testSize=r,s.trainSize=t.length-r,this.json={avgs:o,stats:s,sets:l}}},{key:"toNeuralNetwork",value:function(){return this.fromJSON(this.json)}},{key:"toJSON",value:function(){return this.json}},{key:"fromJSON",value:function(t){var e=this.Classifier,n=t.sets.reduce((function(t,e){return t.error<e.error?t:e}),{error:1/0}).network;if(e.fromJSON)return e.fromJSON(n);var r=new e;return r.fromJSON(n),r}}]),t}();t.exports=a},function(t,e,n){var r=n(9);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e,n){var r=n(277),i=n(45);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?i(t):e}},function(t,e){function n(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){var r=n(279),i=n(280),a=n(111),o=n(281);t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||o()}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var r=n(115).arthurDeviationWeights,i=n(116).arthurDeviationBiases,a=n(16).add,o=n(17).random,s=n(18).multiply,u=n(33).sigmoid;t.exports={arthurFeedForward:function(t,e){var n=t.height,l=o({name:"weights",height:n,width:e.height,praxis:function(t,e){var n=r(t,e);return n.setupKernels(),n}}),c=o({name:"biases",height:n,praxis:function(t,e){var n=i(t,e);return n.setupKernels(),n}}),h=s(l,e),f=a(h,c),p=u(f);return l.praxis.weightsLayer=l,l.praxis.incomingLayer=e,l.praxis.deltaLayer=p,p}}},function(t,e,n){var r=n(1),i=n(2),a=n(45),o=n(3),s=n(4),u=n(5),l=u.makeKernel,c=u.release,h=u.clone,f=u.clear,p=n(118),d=p.setStride,g=p.setPadding,m=n(6).Filter,y=n(32),v=n(47),x=n(31),b=n(119);function w(t,e,n){for(var r=this.constants.paddingX-this.thread.x*this.constants.strideX,i=this.thread.x*this.constants.strideX-this.constants.paddingX,a=Math.min(this.constants.filterWidth,r+this.constants.inputWidth),o=this.constants.paddingY-this.thread.y*this.constants.strideY,s=this.thread.y*this.constants.strideY-this.constants.paddingY,u=Math.min(this.constants.filterHeight,o+this.constants.inputHeight),l=0,c=0;c<this.constants.inputDepth;c++)for(var h=Math.max(0,o),f=Math.max(0,s);h<u;h++,f++)for(var p=Math.max(0,r),d=Math.max(0,i);p<a;p++,d++)l+=e[c][h][p]*t[c][f][d];return l+n[this.thread.z]}function k(t,e,n){for(var r=Math.max(0,Math.ceil((this.constants.paddingX-this.thread.x)/this.constants.strideX)),i=r*this.constants.strideX+this.thread.x-this.constants.paddingX,a=Math.min(this.constants.deltaWidth,Math.floor((this.constants.inputWidth-1-this.thread.x+this.constants.paddingX)/this.constants.strideX)+1),o=Math.max(0,Math.ceil((this.constants.paddingY-this.thread.y)/this.constants.strideY)),s=o*this.constants.strideY+this.thread.y-this.constants.paddingY,u=Math.min(this.constants.deltaHeight,Math.floor((this.constants.inputHeight-1-this.thread.y+this.constants.paddingY)/this.constants.strideY)+1),l=t[this.thread.z][this.thread.y][this.thread.x],c=o,h=s;c<u;c++,h+=this.constants.strideY)for(var f=r,p=i;f<a;f++,p+=this.constants.strideX)l+=e[this.thread.z][h][p]*n[this.constants.deltaZ][c][f];return l}function _(t,e,n){for(var r=this.thread.x+this.constants.paddingX,i=r<this.constants.filterWidth?0:Math.floor((r-this.constants.filterWidth+this.constants.strideX)/this.constants.strideX),a=r-i*this.constants.strideX,o=Math.min(i+Math.floor(a/this.constants.strideX)+1,this.constants.deltaWidth),s=this.thread.y+this.constants.paddingY,u=s<this.constants.filterHeight?0:Math.floor((s-this.constants.filterHeight+this.constants.strideY)/this.constants.strideY),l=s-u*this.constants.strideY,c=Math.min(u+Math.floor(l/this.constants.strideY)+1,this.constants.deltaHeight),h=t[this.thread.z][this.thread.y][this.thread.x],f=u,p=l;f<c;p-=this.constants.strideY,f++)for(var d=i,g=a;d<o;g-=this.constants.strideX,d++)h+=e[this.thread.z][p][g]*n[this.constants.deltaZ][f][d];return h}function T(t,e){for(var n=0,r=0;r<this.constants.deltaHeight;r++)for(var i=0;i<this.constants.deltaWidth;i++)n+=e[this.thread.z][r][i];return t[this.thread.z][this.thread.y][this.thread.x]+n}var S=function(t){"use strict";o(n,t);var e=s(n);function n(t,i){var o;return r(this,n),(o=e.call(this,t)).stride=null,o.strideX=null,o.strideY=null,d(a(o),t),o.padding=null,o.paddingX=null,o.paddingY=null,g(a(o),t),o.filterCount=t.filterCount,o.filterWidth=t.filterWidth,o.filterHeight=t.filterHeight,o.width=Math.floor((i.width+2*o.paddingX-o.filterWidth)/o.strideX+1),o.height=Math.floor((i.height+2*o.paddingY-o.filterHeight)/o.strideY+1),o.depth=o.filterCount,o.weights=v(o.width,o.height,o.depth),o.deltas=x(o.width,o.height,o.depth),o.biases=b(o.depth,o.bias),o.biasDeltas=y(o.depth),o.filters=v(o.filterWidth,o.filterHeight,o.filterCount),o.filterDeltas=x(o.filterWidth,o.filterHeight,o.filterCount),o.learnFilters=null,o.learnInputs=null,o.inputLayer=i,o.validate(),o}return i(n,[{key:"setupKernels",value:function(){this.predictKernel=l(w,{constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,inputDepth:this.inputLayer.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight},output:[this.width,this.height,this.depth],immutable:!0}),this.compareFilterDeltasKernel=l(k,{constants:{deltasWidth:this.width,deltasHeight:this.height,deltasDepth:this.depth,inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,inputDepth:this.inputLayer.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight},output:[this.width,this.height,this.depth],immutable:!0}),this.compareInputDeltasKernel=l(_,{constants:{filterCount:this.filterCount},output:[this.inputLayer.width,this.inputLayer.height,this.inputLayer.depth],immutable:!0}),this.compareBiasesKernel=l(T,{output:[1,1,this.depth],constants:{deltaWidth:this.width,deltaHeight:this.height},immutable:!0})}},{key:"predict",value:function(){this.weights=this.predictKernel(this.inputLayer.weights,this.filters,this.biases)}},{key:"compare",value:function(){var t=this.filterDeltas,e=this.biasDeltas;this.filterDeltas=this.compareFilterDeltasKernel(t,this.inputLayer.weights,this.deltas),c(t),this.biasDeltas=this.compareBiasesKernel(e,this.deltas),c(e),c(this.deltas),this.deltas=this.compareInputDeltasKernel(this.filters,this.inputLayer.deltas),c(this.inputLayer.deltas),this.inputLayer.deltas=h(this.deltas)}},{key:"learn",value:function(t,e,n){var r=this.weights;this.weights=this.praxis.run(this,t,e,n),c(r),f(this.deltas)}}],[{key:"defaults",get:function(){return{stride:0,padding:0,bias:.1,filterCount:1,filterWidth:0,filterHeight:0}}}]),n}(m);t.exports={Convolution:S,convolution:function(t,e){return new S(t,e)},predict:w,compareFilterDeltas:k,compareInputDeltas:_,compareBiases:T}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(6).Filter,u=n(5),l=u.makeKernel,c=u.release;function h(t){return t}function f(t){return Math.random()<this.constants.probability?0:t[this.thread.y][this.thread.x]}function p(t){return t[this.thread.y][this.thread.x]*this.constants.probability}function d(t,e){return 0===t[this.thread.y][this.thread.x]?0:e[this.thread.y][this.thread.x]}var g=function(t){"use strict";a(n,t);var e=o(n);function n(t,i){var a;return r(this,n),(a=e.call(this,i)).inputLayer=t,a.height=t.height,a.width=t.width,a.dropouts=null,a.validate(),a}return i(n,[{key:"setupKernels",value:function(t){var e=[this.width,this.height];t?(this.predictKernel=l(f,{output:e,map:{dropouts:h},immutable:!0}),this.compareKernel=l(d,{output:e,immutable:!0})):this.predictKernel=l(p,{output:e,immutable:!0})}},{key:"predict",value:function(){c(this.weights),c(this.dropouts);var t=this.predictKernel(this.inputLayer.weights),e=t.result,n=t.dropouts;this.weights=e,this.dropouts=n}},{key:"compare",value:function(){c(this.deltas),this.deltas=this.compareKernel(this.dropouts,this.inputLayer.deltas)}}],[{key:"defaults",get:function(){return{width:1,height:1,depth:null,probability:.5}}}]),n}(s);t.exports={Dropout:g,dropout:function(t,e){return new g(t,e)},setDropout:h,trainingPredict:f,predict:p,compare:d}},function(t,e,n){var r=n(17).random,i=n(16).add,a=n(18).multiply,o=n(33).sigmoid;t.exports={feedForward:function(t,e){var n=t.height,s=t.praxisOpts,u=r({name:"weights",height:n,width:e.height,praxisOpts:s}),l=r({name:"biases",height:n,praxisOpts:s});return o(i(a(u,e,{praxisOpts:s}),l,{praxisOpts:s}),{praxisOpts:s})}}},function(t,e,n){var r=n(1),i=n(2),a=n(13),o=n(9),s=n(3),u=n(4),l=n(6).Filter,c=n(5),h=c.makeKernel,f=c.release,p=n(119),d=n(46),g=n(47),m=n(12),y=n(7),v=n(31);function x(t,e,n){for(var r=0,i=0,a=0;a<this.constants.inputHeight;a++)for(var o=0;o<this.constants.inputWidth;o++)r+=t[a][o]*e[this.thread.x][i],i++;return r+n[this.thread.x]}function b(t,e,n){for(var r=0,i=0,a=0;a<this.constants.inputDepth;a++)for(var o=0;o<this.constants.inputHeight;o++)for(var s=0;s<this.constants.inputWidth;s++)r+=t[a][o][s]*e[this.thread.x][i],i++;return r+n[this.thread.x]}function w(t,e,n){for(var r=0,i=this.thread.x+this.thread.y*this.output.x,a=0;a<this.constants.filterCount;a++)r+=n[a][i]*e[0][a];return r+t[this.thread.y][this.thread.x]}function k(t,e,n){for(var r=0,i=this.thread.x+this.thread.y*this.output.x,a=0;a<this.constants.filterCount;a++)r+=n[a][i]*e[0][a];return r+t[this.thread.z][this.thread.y][this.thread.x]}function _(t,e){return t[this.thread.x]+e[this.thread.y][this.thread.x]}function T(t,e,n){return t[this.thread.y][this.thread.x]+e[this.thread.y][this.thread.x]*n[this.constants.deltaY][this.constants.deltaX]}function S(t,e,n){var r=Math.floor(this.thread.x/(this.constants.inputWidth*this.constants.inputHeight)),i=Math.floor((this.thread.x-r*this.constants.inputWidth*this.constants.inputHeight)/this.constants.inputWidth),a=this.thread.x-this.constants.inputWidth*(i+this.constants.inputHeight*r);return t[this.thread.y][this.thread.x]+e[r][i][a]*n[0][this.thread.y]}var E=function(t){"use strict";s(n,t);var e=u(n);function n(t,i){var a;r(this,n),(a=e.call(this,t)).inputLayer=i,a.validate(),a.compareFilterDeltasKernel=null,a.compareInputDeltasKernel=null,a.compareBiasesKernel=null;var o=i.width*i.height*i.depth;return a.biases=p(a.height,a.bias),a.biasDeltas=m(a.height),a.filters=d(o,a.height),a.filterDeltas=y(o,a.height),a.depth>0?(a.weights=g(a.width,a.height),a.deltas=v(a.width,a.height)):a.height>0&&(a.weights=d(a.width,a.height),a.deltas=y(a.width,a.height)),a}return i(n,[{key:"validate",value:function(){if(a(o(n.prototype),"validate",this).call(this),this.depth>0)throw new Error("depth not supported")}},{key:"setupKernels",value:function(){var t=this.inputLayer,e=t.width*t.height*t.depth;t.depth>0?(this.predictKernel=h(b,{output:[this.width,this.height],constants:{inputHeight:t.height,inputWidth:t.width,inputDepth:t.depth}}),this.compareFilterDeltasKernel=h(S,{output:[e,this.height],constants:{inputWidth:t.width,inputHeight:t.height},immutable:!0}),this.compareInputDeltasKernel=h(k,{output:[t.width,t.height,t.depth],constants:{filterCount:this.height},immutable:!0})):(this.predictKernel=h(x,{output:[this.width,this.height],constants:{inputHeight:t.height,inputWidth:t.width}}),this.compareFilterDeltasKernel=h(T,{output:[e,this.height],constants:{inputWidth:t.width}}),this.compareInputDeltasKernel=h(w,{output:[t.width,t.height],constants:{filterCount:this.height}})),this.compareBiasesKernel=h(_,{output:[this.width,this.height]})}},{key:"predict",value:function(){this.weights=this.predictKernel(this.inputLayer.weights,this.filters,this.biases)}},{key:"compare",value:function(){var t=this.inputLayer.deltas;this.inputLayer.deltas=this.compareInputDeltasKernel(t,this.deltas,this.filters),f(t);var e=this.biasDeltas,n=this.filterDeltas;this.biasDeltas=this.compareBiasesKernel(this.biases,this.deltas),this.filterDeltas=this.compareFilterDeltasKernel(n,this.inputLayer.weights,this.deltas),f(e),f(n)}}],[{key:"defaults",get:function(){return{bias:.1}}}]),n}(l);t.exports={FullyConnected:E,fullyConnected:function(t,e){return new E(t,e)},predict:x,predict3D:b,compareInputDeltas:w,compareInputDeltas3D:k,compareBiases:_,compareFilterDeltas:T,compareFilterDeltas3D:S}},function(t,e,n){var r=n(16).add,i=n(120).negative,a=n(18).multiply,o=n(65).multiplyElement,s=n(121).ones,u=n(33).sigmoid,l=n(17).random,c=n(66).tanh,h=n(48).zeros;t.exports={gru:function(t,e,n){var f=t.height,p=l({height:f,width:n.height}),d=l({width:f,height:f}),g=h({height:f}),m=u(r(r(a(p,n),a(d,e)),g)),y=l({height:f,width:n.height}),v=l({width:f,height:f}),x=h({height:f}),b=u(r(r(a(y,n),a(v,e)),x)),w=l({height:f,width:n.height}),k=l({width:f,height:f}),_=h({height:f}),T=c(r(r(a(w,n),a(k,o(b,e))),_));return r(o(r(s(m.rows,m.columns),i(m)),T),o(e,m))}}},function(t,e,n){var r=n(122);t.exports=function(t,e){for(var n=new Array(e),i=0;i<e;i++)n[i]=r(t);return n}},function(t,e,n){var r=n(1),i=n(2),a=n(13),o=n(9),s=n(3),u=n(4),l=n(6).EntryPoint,c=n(7),h=n(5),f=h.makeKernel,p=h.release,d=h.kernelInput,g=h.clear,m=h.clone,y=function(t){"use strict";s(n,t);var e=u(n);function n(t){var i;return r(this,n),(i=e.call(this,t)).validate(),i.weights=null,i.reshapeInput=null,i.deltas=c(i.width,i.height),i}return i(n,[{key:"setupKernels",value:function(){1===this.width?(this.predict=this.predict1D,this.reshapeInput=f((function(t){return t[this.thread.y]}),{output:[1,this.height],immutable:!0})):this.reshapeInput=function(t){return t}}},{key:"reuseKernels",value:function(t){a(o(n.prototype),"reuseKernels",this).call(this,t),this.reshapeInput=t.reshapeInput}},{key:"predict",value:function(t){if("object"!==typeof t[0]&&t.length===this.height*this.width)p(this.weights),this.weights=d(t,[this.width,this.height]);else{if(t.length!==this.height||t[0].length!==this.width)throw new Error("Inputs are not of sized correctly");this.weights=m(t)}g(this.deltas)}},{key:"predict1D",value:function(t){this.weights&&p(this.weights),this.weights=this.reshapeInput(t),g(this.deltas)}},{key:"compare",value:function(){}},{key:"toJSON",value:function(){for(var t={},e=this.constructor,n=e.defaults,r=e.name,i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];"deltas"!==o&&"weights"!==o&&(t[o]=this[o])}return t.type=r,t}}]),n}(l);t.exports={Input:y,input:function(t){return new y(t)}}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(6).Activation,u=n(5),l=u.makeKernel,c=u.release,h=u.clear,f=n(104),p=f.activate,d=f.measure;function g(t){return p(t[this.thread.y][this.thread.x])}function m(t){return p(t[this.thread.z][this.thread.y][this.thread.x])}function y(t,e){return d(t[this.thread.y][this.thread.x],e[this.thread.y][this.thread.x])}function v(t,e){return d(t[this.thread.z][this.thread.y][this.thread.x],e[this.thread.z][this.thread.y][this.thread.x])}var x=function(t){"use strict";a(n,t);var e=o(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,[{key:"setupKernels",value:function(){var t=this.inputLayer,e=t.width,n=t.height,r=t.depth;this.depth>0?(this.predictKernel=l(m,{output:[e,n,r],functions:[p],immutable:!0}),this.compareKernel=l(v,{output:[e,n,r],functions:[d],immutable:!0})):(this.predictKernel=l(g,{output:[e,n],functions:[p],immutable:!0}),this.compareKernel=l(y,{output:[e,n],functions:[d],immutable:!0}))}},{key:"predict",value:function(){c(this.weights),this.weights=this.predictKernel(this.inputLayer.weights),h(this.deltas)}},{key:"compare",value:function(){var t=this.deltas;this.deltas=this.compareKernel(this.weights,t),c(t)}}]),n}(s);t.exports={LeakyRelu:x,leakyRelu:function(t,e){return new x(t,e)},predict2D:g,predict3D:m,compare2D:y,compare3D:v}},function(t,e,n){var r=n(16).add,i=n(18).multiply,a=n(65).multiplyElement,o=n(17).random,s=n(33).sigmoid,u=n(66).tanh,l=n(48).zeros;t.exports={lstmCell:function(t,e,n){var c=t.height;n.setDimensions&&n.setDimensions(1,c);var h=o({height:c,width:e.height,std:.08}),f=o({width:c,height:c,std:.08}),p=l({height:c}),d=s(r(r(i(h,e),i(f,n)),p)),g=o({height:c,width:e.height,std:.08}),m=o({width:c,height:c,std:.08}),y=l({height:c}),v=s(r(r(i(g,e),i(m,n)),y)),x=o({height:c,width:e.height,std:.08}),b=o({width:c,height:c,std:.08}),w=l({height:c}),k=s(r(r(i(x,e),i(b,n)),w)),_=o({height:c,width:e.height,std:.08}),T=o({width:c,height:c,std:.08}),S=l({height:c}),E=u(r(r(i(_,e),i(T,n)),S)),A=a(v,n),L=a(d,E),D=r(A,L);return a(k,u(D))}}},function(t,e,n){var r=n(19),i=n(16).add,a=n(18).multiply,o=n(17).random,s=n(123).target;t.exports={output:function(t,e){var n=t.height,u=o({height:n,width:e.height,name:"outputGate",std:.08}),l=o({height:n,name:"output",std:.08}),c=a(u,e,{name:"outputGateConnected"});return s(r({name:"target"},t),i(c,l))}}},function(t,e,n){var r=n(1),i=n(2),a=n(45),o=n(3),s=n(4),u=n(6).Filter,l=n(5),c=l.makeKernel,h=l.release,f=n(118),p=f.setPadding,d=f.setStride,g=n(31),m=n(47);function y(t){return t}function v(t){return t}function x(t){for(var e=Math.floor(this.thread.x/this.output.x*this.constants.inputWidth-this.constants.paddingX),n=Math.floor(this.thread.y/this.output.y*this.constants.inputHeight-this.constants.paddingY),r=-1/0,i=0;i<this.constants.filterHeight;i++)for(var a=i+n,o=0;o<this.constants.filterWidth;o++){var s=o+e;if(a>=0&&a<this.constants.inputHeight&&s>=0&&s<this.constants.inputWidth){var u=t[this.thread.z][a][s];u>r&&(r=u,a,s)}}return r}function b(t,e,n){for(var r=Math.floor(this.thread.x/this.output.x*this.constants.outputWidth),i=Math.floor(this.thread.y/this.output.y*this.constants.outputHeight),a=0,o=0;o<this.constants.inputHeight;o++)for(var s=0;s<this.constants.inputWidth;s++){var u=n[o][s],l=e[o][s];u===r&&l===i&&(a+=t[o][s])}return a}var w=function(t){"use strict";o(n,t);var e=s(n);function n(t,i){var o;return r(this,n),(o=e.call(this,t)).stride=null,o.strideX=null,o.strideY=null,d(a(o),t),o.padding=null,o.paddingX=null,o.paddingY=null,p(a(o),t),o.filterCount=t.filterCount,o.filterWidth=t.filterWidth,o.filterHeight=t.filterHeight,o.width=Math.floor((i.width+2*o.paddingX-o.filterWidth)/o.strideX+1),o.height=Math.floor((i.height+2*o.paddingY-o.filterHeight)/o.strideY+1),o.depth=o.filterCount,o.weights=m(o.width,o.height,o.depth),o.deltas=g(o.width,o.height,o.depth),o.filters=m(o.filterWidth,o.filterHeight,o.filterCount),o.filterDeltas=g(o.filterWidth,o.filterHeight,o.filterCount),o.learnFilters=null,o.learnInputs=null,o.inputLayer=i,o.validate(),o}return i(n,[{key:"setupKernels",value:function(){this.predictKernel=c(x,{output:[this.width,this.height,this.depth],map:{switchX:v,switchY:y},constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,paddingX:this.paddingX,paddingY:this.paddingY,filterHeight:this.filterHeight,filterWidth:this.filterWidth}}),this.compareKernel=c(b,{output:[this.inputLayer.width,this.inputLayer.height,this.inputLayer.depth],constants:{outputWidth:this.width,outputHeight:this.height,outputDepth:this.depth,paddingX:this.paddingX,paddingY:this.paddingY}})}},{key:"predict",value:function(){var t=this.predictKernel(this.inputLayer.weights),e=t.result,n=t.switchX,r=t.switchY;return this.switchX=n,this.switchY=r,this.weights=e,this.weights}},{key:"compare",value:function(){var t=this.inputLayer.deltas;this.inputLayer.deltas=this.compareKernel(this.deltas,this.switchX,this.switchY),h(t)}}],[{key:"defaults",get:function(){return{padding:0,bias:0,filterWidth:0,filterHeight:0,filterCount:0}}}]),n}(u);t.exports={Pool:w,pool:function(t,e){return new w(t,e)},predict:x,compare:b,compare3D:function(t,e,n){for(var r=Math.floor(this.thread.x/this.output.x*this.constants.outputWidth),i=Math.floor(this.thread.y/this.output.y*this.constants.outputHeight),a=0,o=0;o<this.constants.inputHeight;o++)for(var s=0;s<this.constants.inputWidth;s++){var u=n[this.thread.z][o][s],l=e[this.thread.z][o][s];u===r&&l===i&&(a+=t[this.thread.z][o][s])}return a}}},function(t,e,n){var r=n(124).relu,i=n(16).add,a=n(18).multiply,o=n(17).random,s=n(48).zeros;t.exports={rnnCell:function(t,e,n){var u=t.height;n.setDimensions&&n.setDimensions(1,u);var l=o({name:"weight",height:u,width:e.height,std:.08}),c=o({name:"transition",height:u,width:u,std:.08}),h=s({name:"bias",height:u});return r(i(i(a(l,e),a(c,n)),h))}}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=function(t){"use strict";a(n,t);var e=o(n);function n(t){var i;return r(this,n),(i=e.call(this,t)).validate(),i}return i(n,[{key:"predict",value:function(){this.weights=this.inputs}},{key:"learn",value:function(){}}]),n}(n(24).Base);t.exports={Regression:s,regression:function(t,e){return new s(t,e)},learn:function(t,e){return t[this.thread.x]-e[this.thread.x]}}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(5),u=s.makeKernel,l=s.release,c=s.clone,h=n(6).Filter,f=n(32),p=n(46),d=n(47),g=n(12),m=n(7),y=n(31);function v(t){for(var e=-1/0,n=0;n<this.constants.inputHeight;n++)for(var r=0;r<this.constants.inputWidth;r++){var i=t[n][r];i>e&&(e=i)}return e}function x(t){for(var e=-1/0,n=0;n<this.constants.inputDepth;n++)for(var r=0;r<this.constants.inputHeight;r++)for(var i=0;i<this.constants.inputWidth;i++){var a=t[n][r][i];a>e&&(e=a)}return e}function b(t){for(var e=0,n=0;n<this.constants.inputHeight;n++)for(var r=0;r<this.constants.inputWidth;r++)e+=t[n][r];return e}function w(t){for(var e=0,n=0;n<this.constants.inputDepth;n++)for(var r=0;r<this.constants.inputHeight;r++)for(var i=0;i<this.constants.inputWidth;i++)e+=t[n][r][i];return e}function k(t,e){return Math.exp(t[this.thread.x]-e[0])}function _(t,e){return Math.exp(t[this.thread.z][this.thread.y][this.thread.x]-e[0])}function T(t,e){return t[this.thread.y][this.thread.x]/e[0]}function S(t,e){return t[this.thread.z][this.thread.y][this.thread.x]/e[0]}function E(t,e){var n=0;return this.thread.x+this.thread.y*this.output.x===t&&(n=1),-(n-e[this.thread.y][this.thread.x])}function A(t,e){var n=0;return this.thread.x+this.thread.y*this.output.x+this.thread.z*this.output.x*this.output.y===t&&(n=1),-(n-e[this.thread.z][this.thread.y][this.thread.x])}var L=function(t){"use strict";a(n,t);var e=o(n);function n(t){var i;return r(this,n),(i=e.call(this)).width=t.width,i.height=t.height,i.depth=t.depth,i.getExponentialsKernel=null,i.getMaxValueKernel=null,i.getSumKernel=null,i.inputLayer=t,i.validate(),i.depth>0?(i.weights=d(i.width,i.height,i.depth),i.deltas=y(i.width,i.height,i.depth)):i.height>0?(i.weights=p(i.width,i.height),i.deltas=m(i.width,i.height)):(i.weights=f(i.width),i.deltas=g(i.width)),i}return i(n,[{key:"setupKernels",value:function(){var t=this.width,e=this.height,n=this.depth;n>0?(this.getExponentialsKernel=u(_,{output:[t,e,n]}),this.getMaxValueKernel=u(x,{output:[1,1,1],constants:{inputWidth:t,inputHeight:e,inputDepth:n}}),this.getSumKernel=u(w,{output:[1,1,1],constants:{inputWidth:t,inputHeight:e,inputDepth:n}}),this.predictKernel=u(S,{output:[t,e,n]}),this.compareKernel=u(A,{output:[t,e,n],immutable:!0})):(this.getExponentialsKernel=u(k,{output:[t,e]}),this.getMaxValueKernel=u(v,{output:[1,1],constants:{inputWidth:t,inputHeight:e}}),this.getSumKernel=u(b,{output:[1,1],constants:{inputWidth:t,inputHeight:e}}),this.predictKernel=u(T,{output:[t,e]}),this.compareKernel=u(E,{output:[t,e],immutable:!0}))}},{key:"predict",value:function(){var t=this.getMaxValueKernel(this.inputLayer.weights),e=this.getExponentialsKernel(this.inputLayer.weights,t),n=this.getSumKernel(e);this.weights=this.predictKernel(e,n)}},{key:"compare",value:function(t){var e=this.deltas,n=this.errors;this.errors=this.compareKernel(t[0],e),this.deltas=c(this.errors),l(e),l(n);var r=this.inputLayer.deltas;this.inputLayer.deltas=c(this.deltas),l(r)}}]),n}(h);t.exports={SoftMax:L,softMax:function(t,e){return new L(t,e)},getMaxValue:function(t){for(var e=-1/0,n=0;n<this.constants.inputWidth;n++){var r=t[n];r>e&&(e=r)}return e},getMaxValue2D:v,getMaxValue3D:x,getSum:function(t){for(var e=0,n=0;n<this.constants.inputWidth;n++)e+=t[n];return e},getSum2D:b,getSum3D:w,getExponentials:k,getExponentials2D:function(t,e){return Math.exp(t[this.thread.y][this.thread.x]-e[0])},getExponentials3D:_,predict:function(t,e){return t[this.thread.x]/e[0]},predict2D:T,predict3D:S,compare:function(t,e){var n=0;return this.thread.x===t&&(n=1),-(n-e[this.thread.x])},compare2D:E,compare3D:A,loss:function(){return-Math.log()}}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=function(t){"use strict";a(n,t);var e=o(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,[{key:"predict",value:function(){this.weights=this.inputs,this.validate()}},{key:"learn",value:function(){}}]),n}(n(24).Base);t.exports={SVM:s,svm:function(t,e){return new s(t,e)}}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(6).Modifier,u=n(5),l=u.makeKernel,c=u.clear;function h(t){return t[this.thread.x][this.thread.y]}var f=h,p=function(t){"use strict";a(n,t);var e=o(n);function n(t){var i;return r(this,n),(i=e.call(this)).inputLayer=t,i.width=i.inputLayer.height,i.height=i.inputLayer.width,i.validate(),i}return i(n,[{key:"setupKernels",value:function(){this.predictKernel=l(h,{output:[this.height,this.width]}),this.compareKernel=l(f,{output:[this.width,this.height]})}},{key:"predict",value:function(){this.weights=this.predictKernel(this.inputLayer.weights),c(this.deltas)}},{key:"compare",value:function(){this.inputLayer.deltas=this.predictKernel(this.deltas)}}]),n}(s);t.exports={Transpose:p,transpose:function(t){return new p(t)}}},function(t,e){t.exports=function(t,e){if(!e)throw new TypeError("Required parameter 'net' is of type ".concat(typeof e,". Must be of type 'brain.NeuralNetwork'"));var n=e.run(t),r=null,i=-1;return Object.keys(n).forEach((function(t){var e=n[t];e>i&&(r=t,i=e)})),r}},function(t,e,n){var r=n(1);t.exports={Adam:function t(){"use strict";r(this,t)},adam:function(){}}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(5),u=s.makeKernel,l=s.release,c=n(7);function h(t,e,n){return n*e+(1-e)*t*t}function f(t,e,n){return t>e?e:t<n?n:t}function p(t,e,n){var r=e[this.thread.y][this.thread.x],i=f(r,this.constants.clipValue,-this.constants.clipValue),a=t[this.thread.y][this.thread.x],o=n[this.thread.y][this.thread.x],s=h(r,this.constants.decayRate,o);return a+-this.constants.learningRate*i/Math.sqrt(s+this.constants.smoothEps)-this.constants.regularizationStrength*a}var d=function(t){"use strict";a(n,t);var e=o(n);function n(t){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,n),(i=e.call(this,t,a)).momenta=c(t.width,t.height),i}return i(n,[{key:"run",value:function(t){var e=this.kernel(t.weights,t.deltas,this.momenta),n=e.momenta,r=e.result;return l(this.momenta),this.momenta=n,r}},{key:"setupKernels",value:function(){this.kernel=u(p,{output:[this.width,this.height],constants:{clipValue:this.clipValue,decayRate:this.decayRate,learningRate:this.learningRate,regularizationStrength:this.regularizationStrength,smoothEps:this.smoothEps},functions:[f],map:{momenta:h},immutable:!0})}}],[{key:"defaults",get:function(){return{decayRate:.999,regularizationStrength:1e-4,learningRate:.01,smoothEps:1e-8,clipValue:5}}}]),n}(n(64).Base);function g(t,e){return new d(t,e)}var m=d,y=g;t.exports={MomentumRootMeanSquaredPropagation:d,momentumRootMeanSquaredPropagation:g,MRmsProp:m,mRmsProp:y,getMomentum:h,clipByValue:f,isClippedByValue:function(t,e,n){return t>e||t<n?1:0}}},function(t,e,n){var r=n(112);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var r=n(108);t.exports=function(t){if(!r.hasOwnProperty(t.type))return null;var e=r[t.type],n=Reflect.construct(e,arguments);return Object.keys(t).forEach((function(e){"type"!==e&&(n[e]=t[e])})),n}},function(t,e){t.exports=function t(e,n){e.hasOwnProperty("inputLayer")?t(e.inputLayer,n):(e.hasOwnProperty("inputLayer1")&&t(e.inputLayer1,n),e.hasOwnProperty("inputLayer2")&&t(e.inputLayer2,n)),n(e)}},function(t,e,n){var r=n(1),i=n(5).makeKernel;function a(t){for(var e=0,n=0;n<this.constants.height;n++)for(var r=0;r<this.constants.width;r++)e+=Math.pow(t[n][r],2);return e/this.constants.length}var o=function(){"use strict";return function t(e){var n=e.width,o=e.height;r(this,t),this.calculate=i(a,{output:[1],constants:{width:n,height:o,length:n*o},immutable:!0}),this.addAbsolute=i((function(t,e){return t[0]+Math.abs(e[0][0])}),{output:[1],immutable:!0}),this.add=i((function(t,e){return t[0]+e[0]}),{output:[1],immutable:!0}),this.divide=i((function(t,e){var n=e[0];return n>0?n/t:0}),{output:[1],immutable:!0})}}();t.exports={MeanSquaredError:o}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.thaw=e.Block=e.Thaw=void 0;var i=function(){function t(e,n){var i=this;void 0===n&&(n={});var a=r(r({},t.defaultSettings),n),o=a.each,s=a.done;this.i=0,this.isStopped=!1,this.items=e,this.options=n,this.tick=function(){if(!i.isStopped&&(i.timeout=setTimeout(i.tick,0),!t.thawing)){var e=i.items[i.i];if(i.i>=i.items.length)return null!==s&&(t.thawing=!0,s(),t.thawing=!1),i.isStopped=!0,void clearTimeout(i.timeout);null!==o?(t.thawing=!0,o(e,i.i),t.thawing=!1):void 0!==e&&e(),i.i++}},t.thaws.push(this),n.delay||this.tick()}return Object.defineProperty(t,"isThawing",{get:function(){return t.thawing},enumerable:!1,configurable:!0}),t.stopAll=function(){for(var e=0;e<t.thaws.length;e++)t.thaws[e].stop()},t.prototype.makeReady=function(){return!!this.isStopped&&(this.isStopped=!1,!0)},t.prototype.add=function(t){return this.items.push(t),this.makeReady()&&this.tick(),this},t.prototype.insert=function(t){return this.items.splice(this.i,0,t),this.makeReady()&&this.tick(),this},t.prototype.addArray=function(t){return this.items=this.items.concat(t),this.makeReady()&&this.tick(),this},t.prototype.insertArray=function(t){var e=this.items.splice(0,this.i),n=this.items;return this.items=e.concat(t,n),this.makeReady()&&this.tick(),this},t.prototype.stop=function(){return this.isStopped=!0,clearTimeout(this.timeout),this.options.done&&this.options.done(),this},t.thawing=!1,t.thaws=[],t.defaultSettings={each:null,done:null},t}();function a(t,e){return new i(t,e)}e.Thaw=i,e.thaw=a;var o=function(){function t(t,e){void 0===e&&(e=200),this.index=0,this.thaws=[],this.count=e,this.options=t}return t.prototype.add=function(t){return this.next().add(t),this},t.prototype.addArray=function(t){return this.next().addArray(t),this},t.prototype.insert=function(t){return this.next().insert(t),this},t.prototype.insertArray=function(t){return this.next().insertArray(t),this},t.prototype.stop=function(){for(var t=0;t<this.thaws.length;t++)this.thaws[t].stop();return this},t.prototype.next=function(){var t,e=this.thaws;return e.length<this.count?(t=new i([],this.options),e.push(t)):t=e[this.index]||null,this.index++,this.index>=this.count&&(this.index=0),t},t}();e.Block=o,"undefined"!==typeof window&&(window.Thaw=i,window.thaw=a,window.Thaw.Block=o)},function(t,e,n){var r=n(1),i=n(2),a=n(13),o=n(9),s=n(3),u=n(4),l=n(109),c=l.GPU,h=l.alias,f=l.utils,p=n(50),d=n(34),g=n(5).release;function m(t,e,n){for(var r=e[this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return 1/(1+Math.exp(-r))}function y(t,e,n){for(var r=e[this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return r<0?0:r}function v(t,e,n){for(var r=e[this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return r<0?0:.01*r}function x(t,e,n){for(var r=e[this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return Math.tanh(r)}function b(t,e){return e[this.thread.x]-t}function w(t,e){return t*e*(1-e)}function k(t,e){return e>0?t:0}function _(t,e){return e>0?t:.01*t}function T(t,e){return(1-e*e)*t}function S(t,e){for(var n=0,r=0;r<this.constants.size;r++)n+=e[r]*t[r][this.thread.x];return n}function E(t,e,n){return this.constants.learningRate*e[this.thread.y]*n[this.thread.x]+this.constants.momentum*t[this.thread.y][this.thread.x]}function A(t,e){return t+e[this.thread.y][this.thread.x]}function L(t,e){return t[this.thread.x]+e[this.thread.x]*this.constants.learningRate}function D(t){for(var e=0,n=0;n<this.constants.size;n++)e+=Math.pow(t[n],2);return e/this.constants.size}var C=function(t){"use strict";s(n,t);var e=u(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,n),(t=e.call(this,i)).forwardPropagate=[],t.backwardPropagate=[],t.changesPropagate=[],t.biasesPropagate=[],t.errorCheckInterval=100,t.gpu=new c({mode:i.mode}),t}return i(n,[{key:"initialize",value:function(){a(o(n.prototype),"initialize",this).call(this),this.buildRunInput(),this.buildCalculateDeltas(),this.buildGetChanges(),this.buildChangeBiases(),this.buildGetMSE()}},{key:"setActivation",value:function(){}},{key:"trainPattern",value:function(t,e){return this.runInput(t.input),this.calculateDeltas(t.output),this.adjustWeights(),e?this.getMSE(this.errors[this.outputLayer]):null}},{key:"calculateTrainingError",value:function(t){for(var e=new Float32Array([0]),n=0;n<t.length;++n){var r=e,i=this.trainPattern(t[n],!0);e=this._addMSE(e,i),g(i),g(r)}var a=this._divideMSESum(t.length,e)[0];return g(e),a}},{key:"adjustWeights",value:function(){this.getChanges(),this.changeBiases()}},{key:"buildRunInput",value:function(){var t=null;switch(this.activation){case"sigmoid":t=m;break;case"relu":t=y;break;case"leaky-relu":t=v;break;case"tanh":t=x;break;default:throw new Error("Unknown activation ".concat(this.activation,". Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'"))}for(var e=1;e<=this.outputLayer;e++)this.forwardPropagate[e]=this.gpu.createKernel(t,{output:[this.sizes[e]],pipeline:!0,constants:{size:this.sizes[e-1]},immutable:!0});this.texturizeInputData=this.gpu.createKernel((function(t){return t[this.thread.x]}),{output:[this.sizes[1]],pipeline:!0,immutable:!0})}},{key:"runInput",value:function(t){var e;this.outputs[0]=t;for(var n=1;n<=this.outputLayer;n++)g(this.outputs[n]),this.outputs[n]=this.forwardPropagate[n](this.weights[n],this.biases[n],t),e=t=this.outputs[n];return e}},{key:"buildCalculateDeltas",value:function(){var t=null;switch(this.activation){case"sigmoid":t=w;break;case"relu":t=k;break;case"leaky-relu":t=_;break;case"tanh":t=T;break;default:throw new Error("Unknown activation ".concat(this.activation,". Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'"))}t=h(f.getMinifySafeName((function(){return t})),t),this.gpu.addFunction(t);for(var e=this.outputLayer;e>0;e--)e===this.outputLayer?this.backwardPropagate[this.outputLayer]=this.gpu.createKernelMap({error:b},(function(e,n){var r=e[this.thread.x];return t(b(r,n),r)}),{output:[this.sizes[this.outputLayer]],pipeline:!0,immutable:!0}):this.backwardPropagate[e]=this.gpu.createKernelMap({error:S},(function(e,n,r){var i=n[this.thread.x];return t(S(e,r),i)}),{output:[this.sizes[e]],pipeline:!0,constants:{size:this.deltas[e+1].length},immutable:!0})}},{key:"calculateDeltas",value:function(t){for(var e=this.outputLayer;e>0;e--){var n=void 0;g(this.deltas[e]),g(this.errors[e]),n=e===this.outputLayer?this.backwardPropagate[e](this.outputs[e],t):this.backwardPropagate[e](this.weights[e+1],this.outputs[e],this.deltas[e+1]),this.deltas[e]=n.result,this.errors[e]=n.error}}},{key:"buildGetChanges",value:function(){for(var t=1;t<=this.outputLayer;t++)this.changesPropagate[t]=this.gpu.createKernelMap({weights:A,changes:E},(function(t,e,n,r){return A(E(r,e,t),n)}),{output:[this.sizes[t-1],this.sizes[t]],pipeline:!0,constants:{size:this.outputs[t-1].length,learningRate:this.trainOpts.learningRate,momentum:this.trainOpts.momentum},immutable:!0})}},{key:"getChanges",value:function(){for(var t=1;t<=this.outputLayer;t++){var e=this.weights[t],n=this.changes[t],r=this.changesPropagate[t](this.outputs[t-1],this.deltas[t],e,n);g(e),g(n),this.weights[t]=r.weights,this.changes[t]=r.changes,g(r.result)}}},{key:"buildChangeBiases",value:function(){for(var t=1;t<=this.outputLayer;t++)this.biasesPropagate[t]=this.gpu.createKernel(L,{output:[this.sizes[t]],pipeline:!0,constants:{learningRate:this.trainOpts.learningRate},immutable:!0})}},{key:"changeBiases",value:function(){for(var t=1;t<=this.outputLayer;t++){var e=this.biases[t];this.biases[t]=this.biasesPropagate[t](e,this.deltas[t]),g(e)}}},{key:"buildGetMSE",value:function(){this.getMSE=this.gpu.createKernel(D,{output:[1],constants:{size:this.sizes[this.outputLayer]},pipeline:!0,immutable:!0}),this._addMSE=this.gpu.createKernel((function(t,e){return t[0]+e[0]}),{output:[1],pipeline:!0,immutable:!0}),this._divideMSESum=this.gpu.createKernel((function(t,e){var n=e[0];return n>0?n/t:0}),{output:[1]})}},{key:"run",value:function(t){if(!this.isRunnable)return null;this.inputLookup&&(t=d.toArray(this.inputLookup,t,this.inputLookupLength));var e=this.runInput(t),n=e.toArray?e.toArray():e;return this.outputLookup&&(n=d.toObject(this.outputLookup,n)),n}},{key:"prepTraining",value:function(t,e){var n=this;this.updateTrainingOptions(e),t=this.formatData(t);var r=Date.now()+this.trainOpts.timeout;this.verifyIsInitialized(t);var i=this.gpu.createKernel((function(t){return t[this.thread.x]}),{output:[t[0].output.length],pipeline:!0,immutable:!0});return{data:t.map((function(t){return{input:n.texturizeInputData(t.input),output:i(t.output)}})),status:{error:1,iterations:0},endTime:r}}},{key:"toFunction",value:function(){throw new Error("".concat(this.constructor.name,"-toFunction is not yet implemented"))}},{key:"toJSON",value:function(){var t=this;if(!this.weights[1].toArray)return a(o(n.prototype),"toJSON",this).call(this);for(var e=[],r=[],i=1;i<=this.outputLayer;i++)e[i]=Array.from(this.weights[i].toArray()),r[i]=Array.from(this.biases[i].toArray());return p.prototype.toJSON.call({activation:this.activation,inputLookup:this.inputLookup,outputLookup:this.outputLookup,outputLayer:this.outputLayer,sizes:this.sizes,getTrainOptsJSON:function(){return t.getTrainOptsJSON()},weights:e,biases:r})}}]),n}(p);t.exports=C},function(t,e,n){var r=n(1),i=n(2),a=n(45),o=n(3),s=n(4),u=function(t){"use strict";o(n,t);var e=s(n);function n(t){var i;if(r(this,n),i=e.call(this,{objectMode:!0}),!(t=t||{}).neuralNetwork)throw new Error("No neural network specified. PLease see lis of available networks types: https://github.com/BrainJS/brain.js#neural-network-types");var o=t.neuralNetwork;i.neuralNetwork=o,i.dataFormatDetermined=!1,i.i=0,i.size=0,i.count=0,i.sum=0,i.floodCallback=t.floodCallback,i.doneTrainingCallback=t.doneTrainingCallback,o.updateTrainingOptions(t);var s=o.trainOpts;return i.iterations=s.iterations,i.errorThresh=s.errorThresh,i.log=s.log,i.logPeriod=s.logPeriod,i.callbackPeriod=s.callbackPeriod,i.callback=s.callback,i.on("finish",i.finishStreamIteration.bind(a(i))),i}return i(n,[{key:"endInputs",value:function(){this.write(!1)}},{key:"_write",value:function(t,e,n){if(!t)return this.emit("finish"),n();if(!this.dataFormatDetermined)return this.size++,this.neuralNetwork.addFormat(t),this.firstDatum=this.firstDatum||t,n();this.count++;var r=this.neuralNetwork.formatData(t);this.sum+=this.neuralNetwork.trainPattern(r[0],!0),n()}},{key:"finishStreamIteration",value:function(){if(this.dataFormatDetermined&&this.size!==this.count&&this.log("This iteration's data length was different from the first."),!this.dataFormatDetermined){var t=this.neuralNetwork.formatData(this.firstDatum);return this.neuralNetwork.verifyIsInitialized(t),this.dataFormatDetermined=!0,void("function"===typeof this.floodCallback&&this.floodCallback())}var e=this.sum/this.size;if(this.log&&this.i%this.logPeriod===0&&this.log("iterations: ".concat(this.i,", training error: ").concat(e)),this.callback&&this.i%this.callbackPeriod===0&&this.callback({error:e,iterations:this.i}),this.sum=0,this.count=0,this.i++,this.i<this.iterations&&e>this.errorThresh){if("function"===typeof this.floodCallback)return this.floodCallback()}else if("function"===typeof this.doneTrainingCallback)return this.doneTrainingCallback({error:e,iterations:this.i})}}]),n}(n(311).Writable);t.exports=u},function(t,e,n){t.exports=i;var r=n(69).EventEmitter;function i(){r.call(this)}n(26)(i,r),i.Readable=n(70),i.Writable=n(322),i.Duplex=n(323),i.Transform=n(324),i.PassThrough=n(325),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",a),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",u));var o=!1;function s(){o||(o=!0,t.end())}function u(){o||(o=!0,"function"===typeof t.destroy&&t.destroy())}function l(t){if(c(),0===r.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",i),t.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",l),t.on("error",l),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=l(t),o=r[0],s=r[1],u=new a(function(t,e,n){return 3*(e+n)/4-n}(0,o,s)),c=0,h=s>0?o-4:o;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[c++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(c(t,o,o+16383>s?s:o+16383));1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,a,o=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=256*a+t[e+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+t[e+h],h+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=l}return(p?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(e*u-1)*Math.pow(2,i),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[n+p]=255&o,p+=d,o/=256,l-=8);t[n+p-d]|=128*g}},,function(t,e,n){"use strict";var r=n(71).Buffer,i=n(316);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,a=r.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,n=a,i=s,e.copy(n,i),s+=o.data.length,o=o.next;return a},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},,function(t,e,n){(function(t){var r="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(318),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(15))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i=1,a={},o=!1,s=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){c(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"===typeof n.data&&0===n.data.indexOf(e)&&c(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){c(t.data)},r=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;r=function(e){var n=s.createElement("script");n.onreadystatechange=function(){c(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(c,0,t)},u.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return a[i]=o,r(i),i++},u.clearImmediate=l}function l(t){delete a[t]}function c(t){if(o)setTimeout(c,0,t);else{var e=a[t];if(e){o=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{l(t),o=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,n(15),n(23))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(r){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(15))},function(t,e,n){var r=n(72),i=r.Buffer;function a(t,e){for(var n in t)e[n]=t[n]}function o(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(t,e,n){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},o.alloc=function(t,e,n){if("number"!==typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"===typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";t.exports=a;var r=n(137),i=Object.create(n(35));function a(t){if(!(this instanceof a))return new a(t);r.call(this,t)}i.inherits=n(26),i.inherits(a,r),a.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(73)},function(t,e,n){t.exports=n(20)},function(t,e,n){t.exports=n(70).Transform},function(t,e,n){t.exports=n(70).PassThrough},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(6).Internal,u=n(5).release,l=function(t){"use strict";a(n,t);var e=o(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,[{key:"setLayer",value:function(t){this.layer=t}},{key:"width",get:function(){return this.layer.width},set:function(t){throw new Error("".concat(this.constructor.name,"-width is not yet implemented"))}},{key:"height",get:function(){return this.layer.height},set:function(t){throw new Error("".concat(this.constructor.name,"-height is not yet implemented"))}},{key:"deltas",get:function(){return this.layer.deltas},set:function(t){u(this.layer.deltas),this.layer.deltas=t}},{key:"weights",get:function(){return this.layer.weights},set:function(t){u(this.layer.weights),this.layer.weights=t}},{key:"predict",value:function(){}},{key:"compare",value:function(){}},{key:"learn",value:function(){throw new Error("no longer using")}},{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(){}}]),n}(s);t.exports={RecurrentConnection:l}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(6).Internal,u=n(24).Base,l=n(5).release,c=function(t){"use strict";a(n,t);var e=o(n);function n(t){var i;return r(this,n),(i=e.call(this)).recurrentInput=t,i.validate(),i}return i(n,[{key:"width",get:function(){return this.recurrentInput.width}},{key:"height",get:function(){return this.recurrentInput.height}},{key:"deltas",get:function(){return this.recurrentInput.deltas},set:function(t){var e=this.recurrentInput.deltas;this.recurrentInput.deltas=t,l(e)}},{key:"weights",get:function(){return this.recurrentInput.weights},set:function(t){var e=this.recurrentInput.weights;this.recurrentInput.weights=t,l(e)}},{key:"validate",value:function(){if(u.prototype.validate.call(this),this.width!==this.recurrentInput.width)throw new Error("".concat(this.constructor.name," layer width ").concat(this.width," and ").concat(this.recurrentInput.constructor.name," width (").concat(this.recurrentInput.width,") are not same"));if(this.height!==this.recurrentInput.height)throw new Error("".concat(this.constructor.name," layer height ").concat(this.height," and ").concat(this.recurrentInput.constructor.name," width (").concat(this.recurrentInput.height,") are not same"))}},{key:"setDimensions",value:function(){throw new Error("should just listen")}},{key:"predict",value:function(){}},{key:"compare",value:function(){}},{key:"learn",value:function(){}},{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(){}}]),n}(s);t.exports={RecurrentInput:c}},function(t,e){t.exports=function(t,e){t.rows=parseInt(e.rows,10),t.columns=parseInt(e.columns,10),t.weights=e.weights.slice(0),t.deltas=e.deltas.slice(0);for(var n=0;n<e.weights.length;n++)t.weights[n]=-e.weights[n],t.deltas[n]=0}},function(t,e){t.exports=function(t,e,n){for(var r=0;r<e.weights.length;r++)t.weights[r]=e.weights[r]+n.weights[r],t.deltas[r]=0}},function(t,e){t.exports=function(t,e,n){for(var r=0;r<t.deltas.length;r++)e.deltas[r]=t.deltas[r],n.deltas[r]=t.deltas[r]}},function(t,e){t.exports=function(t){for(var e=0;e<t.weights.length;e++)t.weights[e]=1,t.deltas[e]=0}},function(t,e){t.exports=function(t,e,n){for(var r=e.rows,i=e.columns,a=n.columns,o=0;o<r;o++)for(var s=i*o,u=a*o,l=0;l<a;l++){for(var c=0,h=0;h<i;h++){var f=s+h,p=a*h+l;c+=e.weights[f]*n.weights[p],e.deltas[f]=0,n.deltas[p]=0}t.weights[u+l]=c}}},function(t,e){t.exports=function(t,e,n){for(var r=e.rows,i=e.columns,a=n.columns,o=0;o<r;o++)for(var s=i*o,u=a*o,l=0;l<a;l++)for(var c=0;c<i;c++){var h=s+c,f=a*c+l,p=t.deltas[u+l];e.deltas[h]+=n.weights[f]*p,n.deltas[f]+=e.weights[h]*p}}},function(t,e){t.exports=function(t,e,n){for(var r=e.weights,i=0;i<r.length;i++)t.weights[i]=e.weights[i]*n.weights[i],t.deltas[i]=0}},function(t,e){t.exports=function(t,e,n){for(var r=0;r<e.weights.length;r++)e.deltas[r]=n.weights[r]*t.deltas[r],n.deltas[r]=e.weights[r]*t.deltas[r]}},function(t,e){t.exports=function(t,e){for(var n=0;n<e.weights.length;n++)t.weights[n]=Math.max(0,e.weights[n]),t.deltas[n]=0}},function(t,e){t.exports=function(t,e){for(var n=0;n<t.deltas.length;n++)e.deltas[n]=e.weights[n]>0?t.deltas[n]:0}},function(t,e){t.exports=function(t,e,n){for(var r=e.columns,i=r*n,a=0;a<r;a++)t.weights[a]=e.weights[i+a],t.deltas[a]=0}},function(t,e){t.exports=function(t,e,n){for(var r=e.columns,i=r*n,a=0;a<r;a++)e.deltas[i+a]=t.deltas[a]}},function(t,e){t.exports=function(t,e){for(var n=0;n<e.weights.length;n++)t.weights[n]=1/(1+Math.exp(-e.weights[n])),t.deltas[n]=0}},function(t,e){t.exports=function(t,e){for(var n=0;n<t.deltas.length;n++){var r=t.weights[n];e.deltas[n]=r*(1-r)*t.deltas[n]}}},function(t,e){t.exports=function(t,e){for(var n=0;n<e.weights.length;n++)t.weights[n]=Math.tanh(e.weights[n]),t.deltas[n]=0}},function(t,e){t.exports=function(t,e){for(var n=0;n<t.deltas.length;n++){var r=t.weights[n];e.deltas[n]=(1-r*r)*t.deltas[n]}}},function(t,e){t.exports=function(t,e){t.rows=parseInt(e.rows,10),t.columns=parseInt(e.columns,10),t.weights=e.weights.slice(0),t.deltas=e.deltas.slice(0)}},function(t,e){t.exports=function(t,e){this.length=0,this.prop=e;for(var n=this.table={},r=0;r<t.length;r++)for(var i=t[r][e],a=0;a<i.length;a++)for(var o in i[a])n.hasOwnProperty(o)||(n[o]=this.length++)}},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(144),u=function(t){"use strict";a(n,t);var e=o(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,null,[{key:"getModel",value:function(t,e){return s.getModel.call(this,t,e)}},{key:"getEquation",value:function(t,e,n,r){return s.getEquation.call(this,t,e,n,r)}}]),n}(n(52));t.exports=u},function(t,e,n){var r=n(1),i=n(2),a=n(3),o=n(4),s=n(145),u=function(t){"use strict";a(n,t);var e=o(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,null,[{key:"getModel",value:function(t,e){return s.getModel(t,e)}},{key:"getEquation",value:function(t,e,n,r){return s.getEquation(t,e,n,r)}}]),n}(n(52));t.exports=u},function(t,e,n){var r=n(19),i=n(50),a=n(36),o=n(52),s=n(67).FeedForward,u=n(138).Recurrent,l=n(139).recurrentZeros,c=["RNN","LSTM","GRU","RNNTimeStep","LSTMTimeStep","GRUTimeStep","Recurrent"];function h(t){var e=t.pixelX,n=t.pixelY,r=t.radius,i=t.inputs,a=t.row,o=t.line,s=t.fontSize,u=t.fontClassName,l='<rect\n              x="'.concat(e/2-r,'"\n              y="').concat(n/2+a*n-r,'"\n              width="').concat(2*r,'"\n              height="').concat(2*r,'"\n              stroke="black"\n              stroke-width="1"\n              fill="').concat(i.color,'"\n              class="').concat(i.className,'" />\n            <line\n              x1="').concat(e/4,'"\n              y1="').concat(n/2+a*n,'"\n              x2="').concat(e/2-r,'"\n              y2="').concat(n/2+a*n,'"\n              style="stroke:').concat(o.color,";stroke-width:").concat(o.width,'"\n              class="').concat(o.className,'" />');return i.labels&&(l+='<text\n              x="'.concat(e/8,'"\n              y="').concat(n/2+a*n-5,'"\n              fill="black"\n              font-size="').concat(s,'"\n              class="').concat(u,'">').concat(i.labels[a],"</text>")),l}function f(t){var e=t.pixelX,n=t.pixelY,r=t.row,i=t.column,a=t.radius,o=t.hidden;return'<circle\n            cx="'.concat(e/2+i*e,'"\n            cy="').concat(n/2+r*n,'"\n            r="').concat(a,'"\n            stroke="black"\n            stroke-width="1"\n            fill="').concat(o.color,'"\n            class="').concat(o.className,'" />')}function p(t){var e=t.pixelX,n=t.pixelY,r=t.row,i=t.column,a=t.line,o=t.outputs,s=t.radius;return'<circle\n            cx="'.concat(e/2+i*e,'"\n            cy="').concat(n/2+r*n,'"\n            r="').concat(s,'"\n            stroke="black"\n            stroke-width="1"\n            fill="').concat(o.color,'"\n            class="').concat(o.className,'" />\n          <line\n            x1="').concat(e/2+i*e+s,'"\n            y1="').concat(n/2+r*n,'"\n            x2="').concat(e/2+i*e+e/4,'"\n            y2="').concat(n/2+r*n,'"\n            style="stroke:').concat(a.color,";stroke-width:").concat(a.width,'"\n            class="').concat(a.className,'" />')}function d(t){var e=t.pixelX,n=t.pixelY,r=t.row,i=t.column,a=t.radius,o=t.lineY,s=t.line,u=t.previousConnectionIndex;return'<line\n            x1="'.concat(e/2+(i-1)*e+a,'"\n            y1="').concat(o/2+u*o,'"\n            x2="').concat(e/2+i*e-a,'"\n            y2="').concat(n/2+r*n,'"\n            style="stroke:').concat(s.color,";stroke-width:").concat(s.width,'"\n            class="').concat(s.className,'" />')}function g(t){for(var e=t.sizes,n=t.height,r="",i=t.width/e.length,a=0;a<e.length;a++)for(var o=e[a],s=n/o,u=0;u<o;u++)if(0===a)r+=h(Object.assign({pixelX:i,pixelY:s,row:u,column:a},t));else{a===e.length-1?r+=p(Object.assign({pixelX:i,pixelY:s,row:u,column:a},t)):r+=f(Object.assign({pixelX:i,pixelY:s,row:u,column:a},t));for(var l=e[a-1],c=n/l,g=0;g<l;g++)r+=d(Object.assign({pixelX:i,pixelY:s,row:u,column:a,lineY:c,previousConnectionIndex:g},t))}return r}function m(t){var e=t.pixelX,n=t.pixelY,r=t.row,i=t.column,a=t.radius,o=t.recurrentLine,s=e/2+i*e+a+1,u=n/2+r*n,l=s-2*a-2,c=u,h=l+100,f=c+50,p=s-100,d=u+50;return'<path\n              d="M '.concat(s," ").concat(u," C ").concat(h," ").concat(f,", ").concat(p," ").concat(d,", ").concat(l," ").concat(c,'"\n              stroke="').concat(o.color,'"\n              stroke-width="').concat(o.width,'"\n              fill="transparent"\n              stroke-linecap="round"\n              marker-end="url(#arrow)"\n              class="').concat(o.className,'" />')}function y(t,e,n){return'<svg\n            xmlns="http://www.w3.org/2000/svg"\n            xmlns:xlink="http://www.w3.org/1999/xlink"\n            version="1.1"\n            width="'.concat(e,'"\n            height="').concat(n,'">').concat(t,"</svg>")}function v(t){var e=t.sizes,n=t.inputSize,r=t.outputSize,i=t.hiddenLayers;return"number"===typeof n&&Array.isArray(i)&&i.every((function(t){return"number"===typeof t}))&&"number"===typeof r?[n].concat(i).concat([r]):e}t.exports=function(t,e){var n=r(r({},{line:{width:.5,color:"black",className:"connection"},recurrentLine:{width:1,color:"red",className:"recurrence"},inputs:{color:"rgba(0, 128, 0, 0.5)",labels:null,className:"input"},outputs:{color:"rgba(100, 149, 237, 0.5)",className:"output"},hidden:{color:"rgba(255, 127, 80, 0.5)",className:"hidden-neuron"},fontSize:"14px",fontClassName:"label",radius:8,width:400,height:250}),e),h=n.width,f=n.height,p=n.inputs,d=t.hasOwnProperty("model")||t instanceof u||t.type&&-1!==c.indexOf(t.type),x=null;if(t instanceof i||t instanceof a||t instanceof o)x=v(t);else if(t.sizes)x=t.sizes;else if(t instanceof u){var b=function(t){var e=t.inputLayer(),n=[];n.push(t.hiddenLayers[0](e,l(),0));for(var r=1;r<t.hiddenLayers.length;r++)n.push(t.hiddenLayers[r](n[r-1],l(),r));return{inputLayer:e,hiddenLayers:n,outputLayer:t.outputLayer(n[n.length-1]),layerCount:1+n.length+1}}(t),w=b.inputLayer,k=b.hiddenLayers,_=b.outputLayer;x=[w.height].concat(k.map((function(t){return t.height}))).concat([_.height])}else if(t instanceof s){var T=function(t){var e=t.inputLayer(),n=[];n.push(t.hiddenLayers[0](e));for(var r=1;r<t.hiddenLayers.length;r++)n.push(t.hiddenLayers[r](n[r-1]));return{inputLayer:e,hiddenLayers:n,outputLayer:t.outputLayer(n[n.length-1]),layerCount:1+n.length+1}}(t),S=T.inputLayer,E=T.hiddenLayers,A=T.outputLayer;x=[S.height].concat(E.map((function(t){return t.height}))).concat([A.height])}else d?t.options&&(x=v(t.options)):x=v(t);if(!x)throw new Error("sizes not set");if(p.labels&&p.labels.length!==x[0])throw new Error("not enough labels for inputs");return y(d?function(t){var e=t.width,n=t.height,r=t.recurrentLine,i=t.sizes,a=t.radius,o=e/i.length,s='<defs>\n              <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">\n                <path d="M0,0 L0,6 L9,3 z" fill="'.concat(r.color,'" />\n              </marker>\n            </defs>');s+=g(t);for(var u=1;u<i.length;u++)for(var l=i[u],c=n/l,h=0;h<l;h++)s+=m({pixelX:o,pixelY:c,row:h,column:u,radius:a,recurrentLine:r});return s}(r(r({},n),{},{sizes:x})):g(r(r({},n),{},{sizes:x})),h,f)}}]]);
//# sourceMappingURL=2.745665e2.chunk.js.map